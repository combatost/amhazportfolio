import{a as N,b as me,c as hC,d as Yp,e as _,f as fC,g as rl,h as pC,i as gC,j as mC,k as Zp,l as yC,m as il,n as vC,o as sl,p as _C,q as wC,r as Me,s as bi,t as Nn,u as ol,v as ba,w as EC,x as CC,y as Rr,z as At}from"./chunk-KZ55BCB2.js";var IC=null;var Xp=1;function Ft(t){let e=IC;return IC=t,e}var DC={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function mN(t){if(!(tg(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Xp)){if(!t.producerMustRecompute(t)&&!Jp(t)){t.dirty=!1,t.lastCleanEpoch=Xp;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Xp}}function bC(t){return t&&(t.nextProducerIndex=0),Ft(t)}function TC(t,e){if(Ft(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(tg(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)eg(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Jp(t){al(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(mN(n),r!==n.version))return!0}return!1}function SC(t){if(al(t),tg(t))for(let e=0;e<t.producerNode.length;e++)eg(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function eg(t,e){if(yN(t),al(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)eg(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];al(i),i.producerIndexOfThis[r]=e}}function tg(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function al(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function yN(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function vN(){throw new Error}var _N=vN;function AC(t){_N=t}function Q(t){return typeof t=="function"}function Os(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var cl=Os(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ti(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ue=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Q(r))try{r()}catch(s){e=s instanceof cl?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{MC(s)}catch(o){e=e??[],o instanceof cl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new cl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)MC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ti(n,e)}remove(e){let{_finalizers:n}=this;n&&Ti(n,e),e instanceof t&&e._removeParent(this)}};Ue.EMPTY=(()=>{let t=new Ue;return t.closed=!0,t})();var ng=Ue.EMPTY;function ul(t){return t instanceof Ue||t&&"closed"in t&&Q(t.remove)&&Q(t.add)&&Q(t.unsubscribe)}function MC(t){Q(t)?t():t.unsubscribe()}var gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ks={setTimeout(t,e,...n){let{delegate:r}=ks;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ks;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ll(t){ks.setTimeout(()=>{let{onUnhandledError:e}=gn;if(e)e(t);else throw t})}function Ta(){}var xC=(()=>rg("C",void 0,void 0))();function PC(t){return rg("E",void 0,t)}function RC(t){return rg("N",t,void 0)}function rg(t,e,n){return{kind:t,value:e,error:n}}var Si=null;function Fs(t){if(gn.useDeprecatedSynchronousErrorHandling){let e=!Si;if(e&&(Si={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Si;if(Si=null,n)throw r}}else t()}function NC(t){gn.useDeprecatedSynchronousErrorHandling&&Si&&(Si.errorThrown=!0,Si.error=t)}var Ai=class extends Ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ul(e)&&e.add(this)):this.destination=CN}static create(e,n,r){return new cr(e,n,r)}next(e){this.isStopped?sg(RC(e),this):this._next(e)}error(e){this.isStopped?sg(PC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sg(xC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},wN=Function.prototype.bind;function ig(t,e){return wN.call(t,e)}var og=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){dl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){dl(r)}else dl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){dl(n)}}},cr=class extends Ai{constructor(e,n,r){super();let i;if(Q(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&gn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ig(e.next,s),error:e.error&&ig(e.error,s),complete:e.complete&&ig(e.complete,s)}):i=e}this.destination=new og(i)}};function dl(t){gn.useDeprecatedSynchronousErrorHandling?NC(t):ll(t)}function EN(t){throw t}function sg(t,e){let{onStoppedNotification:n}=gn;n&&ks.setTimeout(()=>n(t,e))}var CN={closed:!0,next:Ta,error:EN,complete:Ta};var Vs=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function Et(t){return t}function ag(...t){return cg(t)}function cg(t){return t.length===0?Et:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ie=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=DN(n)?n:new cr(n,r,i);return Fs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=OC(r),new r((i,s)=>{let o=new cr({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Vs](){return this}pipe(...n){return cg(n)(this)}toPromise(n){return n=OC(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function OC(t){var e;return(e=t??gn.Promise)!==null&&e!==void 0?e:Promise}function IN(t){return t&&Q(t.next)&&Q(t.error)&&Q(t.complete)}function DN(t){return t&&t instanceof Ai||IN(t)&&ul(t)}function ug(t){return Q(t?.lift)}function te(t){return e=>{if(ug(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ne(t,e,n,r,i){return new lg(t,e,n,r,i)}var lg=class extends Ai{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ls(){return te((t,e)=>{let n=null;t._refCount++;let r=ne(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var js=class extends ie{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ug(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ue;let n=this.getSubject();e.add(this.source.subscribe(ne(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ue.EMPTY)}return e}refCount(){return Ls()(this)}};var kC=Os(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class t extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new hl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new kC}next(n){Fs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Fs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Fs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ng:(this.currentObservers=null,s.push(n),new Ue(()=>{this.currentObservers=null,Ti(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ie;return n.source=this,n}}return t.create=(e,n)=>new hl(e,n),t})(),hl=class extends et{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ng}};var ct=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Sa={now(){return(Sa.delegate||Date).now()},delegate:void 0};var fl=class extends et{constructor(e=1/0,n=1/0,r=Sa){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var pl=class extends Ue{constructor(e,n){super()}schedule(e,n=0){return this}};var Aa={setInterval(t,e,...n){let{delegate:r}=Aa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Aa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Bs=class extends pl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Aa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Aa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ti(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Us=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Us.now=Sa.now;var $s=class extends Us{constructor(e,n=Us.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ma=new $s(Bs);var gl=class extends Bs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ml=class extends $s{};var dg=new ml(gl);var Mt=new ie(t=>t.complete());function FC(t){return t&&Q(t.schedule)}function hg(t){return t[t.length-1]}function yl(t){return Q(hg(t))?t.pop():void 0}function On(t){return FC(hg(t))?t.pop():void 0}function VC(t,e){return typeof hg(t)=="number"?t.pop():e}var vl=t=>t&&typeof t.length=="number"&&typeof t!="function";function _l(t){return Q(t?.then)}function wl(t){return Q(t[Vs])}function El(t){return Symbol.asyncIterator&&Q(t?.[Symbol.asyncIterator])}function Cl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function bN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Il=bN();function Dl(t){return Q(t?.[Il])}function bl(t){return pC(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield rl(n.read());if(i)return yield rl(void 0);yield yield rl(r)}}finally{n.releaseLock()}})}function Tl(t){return Q(t?.getReader)}function Ie(t){if(t instanceof ie)return t;if(t!=null){if(wl(t))return TN(t);if(vl(t))return SN(t);if(_l(t))return AN(t);if(El(t))return LC(t);if(Dl(t))return MN(t);if(Tl(t))return xN(t)}throw Cl(t)}function TN(t){return new ie(e=>{let n=t[Vs]();if(Q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function SN(t){return new ie(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function AN(t){return new ie(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ll)})}function MN(t){return new ie(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function LC(t){return new ie(e=>{PN(t,e).catch(n=>e.error(n))})}function xN(t){return LC(bl(t))}function PN(t,e){var n,r,i,s;return fC(this,void 0,void 0,function*(){try{for(n=gC(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function xt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function nn(t,e=0){return te((n,r)=>{n.subscribe(ne(r,i=>xt(r,t,()=>r.next(i),e),()=>xt(r,t,()=>r.complete(),e),i=>xt(r,t,()=>r.error(i),e)))})}function mn(t,e=0){return te((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function jC(t,e){return Ie(t).pipe(mn(e),nn(e))}function BC(t,e){return Ie(t).pipe(mn(e),nn(e))}function UC(t,e){return new ie(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function $C(t,e){return new ie(n=>{let r;return xt(n,e,()=>{r=t[Il](),xt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>Q(r?.return)&&r.return()})}function Sl(t,e){if(!t)throw new Error("Iterable cannot be null");return new ie(n=>{xt(n,e,()=>{let r=t[Symbol.asyncIterator]();xt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function HC(t,e){return Sl(bl(t),e)}function zC(t,e){if(t!=null){if(wl(t))return jC(t,e);if(vl(t))return UC(t,e);if(_l(t))return BC(t,e);if(El(t))return Sl(t,e);if(Dl(t))return $C(t,e);if(Tl(t))return HC(t,e)}throw Cl(t)}function le(t,e){return e?zC(t,e):Ie(t)}function $(...t){let e=On(t);return le(t,e)}function Hs(t,e){let n=Q(t)?t:()=>t,r=i=>i.error(n());return new ie(e?i=>e.schedule(r,0,i):r)}function fg(t){return!!t&&(t instanceof ie||Q(t.lift)&&Q(t.subscribe))}var ur=Os(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function G(t,e){return te((n,r)=>{let i=0;n.subscribe(ne(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:RN}=Array;function NN(t,e){return RN(e)?t(...e):t(e)}function Al(t){return G(e=>NN(t,e))}var{isArray:ON}=Array,{getPrototypeOf:kN,prototype:FN,keys:VN}=Object;function Ml(t){if(t.length===1){let e=t[0];if(ON(e))return{args:e,keys:null};if(LN(e)){let n=VN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function LN(t){return t&&typeof t=="object"&&kN(t)===FN}function xl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function xa(...t){let e=On(t),n=yl(t),{args:r,keys:i}=Ml(t);if(r.length===0)return le([],e);let s=new ie(jN(r,e,i?o=>xl(i,o):Et));return n?s.pipe(Al(n)):s}function jN(t,e,n=Et){return r=>{qC(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)qC(e,()=>{let u=le(t[c],e),l=!1;u.subscribe(ne(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function qC(t,e,n){t?xt(n,t,e):e()}function GC(t,e,n,r,i,s,o,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=g=>u<r?p(g):c.push(g),p=g=>{s&&e.next(g),u++;let y=!1;Ie(n(g,l++)).subscribe(ne(e,w=>{i?.(w),s?f(w):e.next(w)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;c.length&&u<r;){let w=c.shift();o?xt(e,o,()=>p(w)):p(w)}h()}catch(w){e.error(w)}}))};return t.subscribe(ne(e,f,()=>{d=!0,h()})),()=>{a?.()}}function qe(t,e,n=1/0){return Q(e)?qe((r,i)=>G((s,o)=>e(r,s,i,o))(Ie(t(r,i))),n):(typeof e=="number"&&(n=e),te((r,i)=>GC(r,i,t,n)))}function Nr(t=1/0){return qe(Et,t)}function WC(){return Nr(1)}function zs(...t){return WC()(le(t,On(t)))}function Pl(t){return new ie(e=>{Ie(t()).subscribe(e)})}function pg(...t){let e=yl(t),{args:n,keys:r}=Ml(t),i=new ie(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let l=0;l<o;l++){let d=!1;Ie(n[l]).subscribe(ne(s,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||s.next(r?xl(r,a):a),s.complete())}))}});return e?i.pipe(Al(e)):i}function gg(...t){let e=On(t),n=VC(t,1/0),r=t;return r.length?r.length===1?Ie(r[0]):Nr(n)(le(r,e)):Mt}function rt(t,e){return te((n,r)=>{let i=0;n.subscribe(ne(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Or(t){return te((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ne(n,void 0,void 0,o=>{s=Ie(t(o,Or(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function KC(t,e,n,r,i){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(ne(o,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function kr(t,e){return Q(e)?qe(t,e,1):qe(t,1)}function Fr(t){return te((e,n)=>{let r=!1;e.subscribe(ne(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function lr(t){return t<=0?()=>Mt:te((e,n)=>{let r=0;e.subscribe(ne(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function mg(t){return G(()=>t)}function yg(t,e=Et){return t=t??BN,te((n,r)=>{let i,s=!0;n.subscribe(ne(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function BN(t,e){return t===e}function Rl(t=UN){return te((e,n)=>{let r=!1;e.subscribe(ne(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function UN(){return new ur}function qs(t){return te((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Vt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?rt((i,s)=>t(i,s,r)):Et,lr(1),n?Fr(e):Rl(()=>new ur))}function Gs(t){return t<=0?()=>Mt:te((e,n)=>{let r=[];e.subscribe(ne(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function vg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?rt((i,s)=>t(i,s,r)):Et,Gs(1),n?Fr(e):Rl(()=>new ur))}function Pa(){return te((t,e)=>{let n,r=!1;t.subscribe(ne(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function Mi(t,e){return te(KC(t,e,arguments.length>=2,!0))}function QC(t={}){let{connector:e=()=>new et,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,u=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,l=d=!1},p=()=>{let g=o;f(),g?.unsubscribe()};return te((g,y)=>{u++,!d&&!l&&h();let w=c=c??e();y.add(()=>{u--,u===0&&!d&&!l&&(a=_g(p,i))}),w.subscribe(y),!o&&u>0&&(o=new cr({next:S=>w.next(S),error:S=>{d=!0,h(),a=_g(f,n,S),w.error(S)},complete:()=>{l=!0,h(),a=_g(f,r),w.complete()}}),Ie(g).subscribe(o))})(s)}}function _g(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new cr({next:()=>{r.unsubscribe(),t()}});return Ie(e(...n)).subscribe(r)}function Nl(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,QC({connector:()=>new fl(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function xi(...t){let e=On(t);return te((n,r)=>{(e?zs(t,n,e):zs(t,n)).subscribe(r)})}function xe(t,e){return te((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ne(r,c=>{i?.unsubscribe();let u=0,l=s++;Ie(t(c,l)).subscribe(i=ne(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ol(t,e){return Q(e)?xe(()=>t,e):xe(()=>t)}function wg(t){return te((e,n)=>{Ie(t).subscribe(ne(n,()=>n.complete(),Ta)),!n.closed&&e.subscribe(n)})}function Fe(t,e,n){let r=Q(t)||e||n?{next:t,error:e,complete:n}:t;return r?te((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ne(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Et}function we(t){for(let e in t)if(t[e]===we)return e;throw Error("Could not find renamed property on target object.")}function kl(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function pt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(pt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function YC(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var $N=we({__forward_ref__:we});function Bi(t){return t.__forward_ref__=Bi,t.toString=function(){return pt(this())},t}function Ct(t){return FI(t)?t():t}function FI(t){return typeof t=="function"&&t.hasOwnProperty($N)&&t.__forward_ref__===Bi}function VI(t){return t&&!!t.\u0275providers}var HN="https://g.co/ng/security#xss",D=class extends Error{constructor(e,n){super(md(e,n)),this.code=e}};function md(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var zN=we({\u0275cmp:we}),qN=we({\u0275dir:we}),GN=we({\u0275pipe:we}),WN=we({\u0275mod:we}),Wl=we({\u0275fac:we}),Na=we({__NG_ELEMENT_ID__:we}),ZC=we({__NG_ENV_ID__:we});function xm(t){return typeof t=="string"?t:t==null?"":String(t)}function KN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():xm(t)}function QN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new D(-200,`Circular dependency in DI detected for ${t}${n}`)}function Pm(t,e){let n=e?` in ${e}`:"";throw new D(-201,!1)}function YN(t,e){t==null&&ZN(e,t,null,"!=")}function ZN(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function V(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Re(t){return{providers:t.providers||[],imports:t.imports||[]}}function yd(t){return XC(t,jI)||XC(t,BI)}function LI(t){return yd(t)!==null}function XC(t,e){return t.hasOwnProperty(e)?t[e]:null}function XN(t){let e=t&&(t[jI]||t[BI]);return e||null}function JC(t){return t&&(t.hasOwnProperty(eI)||t.hasOwnProperty(JN))?t[eI]:null}var jI=we({\u0275prov:we}),eI=we({\u0275inj:we}),BI=we({ngInjectableDef:we}),JN=we({ngInjectorDef:we}),se=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(se||{}),Vg;function UI(){return Vg}function rn(t){let e=Vg;return Vg=t,e}function $I(t,e,n){let r=yd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&se.Optional)return null;if(e!==void 0)return e;Pm(pt(t),"Injector")}var jt=globalThis;var k=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=V({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var eO={},ka=eO,Lg="__NG_DI_FLAG__",Kl="ngTempTokenPath",tO="ngTokenPath",nO=/\n/gm,rO="\u0275",tI="__source",Zs;function iO(){return Zs}function Vr(t){let e=Zs;return Zs=t,e}function sO(t,e=se.Default){if(Zs===void 0)throw new D(-203,!1);return Zs===null?$I(t,void 0,e):Zs.get(t,e&se.Optional?null:void 0,e)}function b(t,e=se.Default){return(UI()||sO)(Ct(t),e)}function A(t,e=se.Default){return b(t,vd(e))}function vd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function jg(t){let e=[];for(let n=0;n<t.length;n++){let r=Ct(t[n]);if(Array.isArray(r)){if(r.length===0)throw new D(900,!1);let i,s=se.Default;for(let o=0;o<r.length;o++){let a=r[o],c=oO(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(b(i,s))}else e.push(b(r))}return e}function HI(t,e){return t[Lg]=e,t.prototype[Lg]=e,t}function oO(t){return t[Lg]}function aO(t,e,n,r){let i=t[Kl];throw e[tI]&&i.unshift(e[tI]),t.message=cO(`
`+t.message,i,n,r),t[tO]=i,t[Kl]=null,t}function cO(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==rO?t.slice(2):t;let i=pt(e);if(Array.isArray(e))i=e.map(pt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):pt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(nO,`
  `)}`}function qa(t){return{toString:t}.toString()}var zI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(zI||{}),Ln=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ln||{}),Js={},Lt=[];function qI(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Bg(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];lO(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function uO(t){return t===3||t===4||t===6}function lO(t){return t.charCodeAt(0)===64}function Fa(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?nI(t,n,i,null,e[++r]):nI(t,n,i,null,null))}}return t}function nI(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var GI="ng-template";function dO(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if(typeof s=="string"&&i){let o=t[r++];if(n&&s==="class"&&qI(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;r<t.length&&typeof(s=t[r++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(i=!1)}return!1}function WI(t){return t.type===4&&t.value!==GI}function hO(t,e,n){let r=t.type===4&&!n?GI:t.value;return e===r}function fO(t,e,n){let r=4,i=t.attrs||[],s=mO(i),o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!yn(r)&&!yn(c))return!1;if(o&&yn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!hO(t,c,n)||c===""&&e.length===1){if(yn(r))return!1;o=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!dO(t.attrs,u,n)){if(yn(r))return!1;o=!0}continue}let l=r&8?"class":c,d=pO(l,i,WI(t),n);if(d===-1){if(yn(r))return!1;o=!0;continue}if(u!==""){let h;d>s?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&qI(f,u,0)!==-1||r&2&&u!==h){if(yn(r))return!1;o=!0}}}}return yn(r)||o}function yn(t){return(t&1)===0}function pO(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return yO(e,t)}function gO(t,e,n=!1){for(let r=0;r<e.length;r++)if(fO(t,e[r],n))return!0;return!1}function mO(t){for(let e=0;e<t.length;e++){let n=t[e];if(uO(n))return e}return t.length}function yO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function rI(t,e){return t?":not("+e.trim()+")":e}function vO(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!yn(o)&&(e+=rI(s,i),i=""),r=o,s=s||!yn(r);n++}return i!==""&&(e+=rI(s,i)),e}function _O(t){return t.map(vO).join(",")}function wO(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!yn(i))break;i=s}r++}return{attrs:e,classes:n}}function Bn(t){return qa(()=>{let e=XI(t),n=me(N({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===zI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ln.Emulated,styles:t.styles||Lt,_:null,schemas:t.schemas||null,tView:null,id:""});JI(n);let r=t.dependencies;return n.directiveDefs=sI(r,!1),n.pipeDefs=sI(r,!0),n.id=IO(n),n})}function EO(t){return jr(t)||KI(t)}function CO(t){return t!==null}function Ne(t){return qa(()=>({type:t.type,bootstrap:t.bootstrap||Lt,declarations:t.declarations||Lt,imports:t.imports||Lt,exports:t.exports||Lt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function iI(t,e){if(t==null)return Js;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function gt(t){return qa(()=>{let e=XI(t);return JI(e),e})}function jr(t){return t[zN]||null}function KI(t){return t[qN]||null}function QI(t){return t[GN]||null}function YI(t){let e=jr(t)||KI(t)||QI(t);return e!==null?e.standalone:!1}function ZI(t,e){let n=t[WN]||null;if(!n&&e===!0)throw new Error(`Type ${pt(t)} does not have '\u0275mod' property.`);return n}function XI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Js,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Lt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:iI(t.inputs,e),outputs:iI(t.outputs),debugInfo:null}}function JI(t){t.features?.forEach(e=>e(t))}function sI(t,e){if(!t)return null;let n=e?QI:EO;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(CO)}function IO(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var Ut=0,ce=1,K=2,We=3,vn=4,En=5,dr=6,Va=7,_n=8,eo=9,Br=10,Ve=11,La=12,oI=13,ao=14,sn=15,_d=16,Ws=17,ja=18,wd=19,eD=20,Lr=21,Eg=22,Ri=23,$t=25,tD=1,Ba=6,hr=7,Ql=8,Yl=9,Bt=10,to=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(to||{});function Vn(t){return Array.isArray(t)&&typeof t[tD]=="object"}function on(t){return Array.isArray(t)&&t[tD]===!0}function nD(t){return(t.flags&4)!==0}function Ga(t){return t.componentOffset>-1}function Rm(t){return(t.flags&1)===1}function Ur(t){return!!t.template}function rD(t){return(t[K]&512)!==0}function no(t,e){let n=t.hasOwnProperty(Wl);return n?t[Wl]:null}var Ug=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Hr(){return iD}function iD(t){return t.type.prototype.ngOnChanges&&(t.setInput=bO),DO}Hr.ngInherit=!0;function DO(){let t=oD(this),e=t?.current;if(e){let n=t.previous;if(n===Js)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function bO(t,e,n,r){let i=this.declaredInputs[n],s=oD(t)||TO(t,{previous:Js,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new Ug(c&&c.currentValue,e,a===Js),t[r]=e}var sD="__ngSimpleChanges__";function oD(t){return t[sD]||null}function TO(t,e){return t[sD]=e}var aI=null;var kn=function(t,e,n){aI?.(t,e,n)},aD="svg",SO="math",AO=!1;function MO(){return AO}function wn(t){for(;Array.isArray(t);)t=t[Ut];return t}function cD(t,e){return wn(e[t])}function zt(t,e){return wn(e[t.index])}function uD(t,e){return t.data[e]}function zr(t,e){let n=e[t];return Vn(n)?n:n[Ut]}function Nm(t){return(t[K]&128)===128}function xO(t){return on(t[We])}function Zl(t,e){return e==null?null:t[e]}function lD(t){t[Ws]=0}function PO(t){t[K]&1024||(t[K]|=1024,Nm(t)&&Ua(t))}function RO(t,e){for(;t>0;)e=e[ao],t--;return e}function dD(t){return t[K]&9216||t[Ri]?.dirty}function $g(t){dD(t)?Ua(t):t[K]&64&&(MO()?(t[K]|=1024,Ua(t)):t[Br].changeDetectionScheduler?.notify())}function Ua(t){t[Br].changeDetectionScheduler?.notify();let e=t[We];for(;e!==null&&!(on(e)&&e[K]&to.HasChildViewsToRefresh||Vn(e)&&e[K]&8192);){if(on(e))e[K]|=to.HasChildViewsToRefresh;else if(e[K]|=8192,!Nm(e))break;e=e[We]}}function hD(t,e){if((t[K]&256)===256)throw new D(911,!1);t[Lr]===null&&(t[Lr]=[]),t[Lr].push(e)}function NO(t,e){if(t[Lr]===null)return;let n=t[Lr].indexOf(e);n!==-1&&t[Lr].splice(n,1)}var re={lFrame:ED(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function OO(){return re.lFrame.elementDepthCount}function kO(){re.lFrame.elementDepthCount++}function FO(){re.lFrame.elementDepthCount--}function fD(){return re.bindingsEnabled}function Wa(){return re.skipHydrationRootTNode!==null}function VO(t){return re.skipHydrationRootTNode===t}function LO(t){re.skipHydrationRootTNode=t}function jO(){re.skipHydrationRootTNode=null}function Pe(){return re.lFrame.lView}function Cn(){return re.lFrame.tView}function pD(t){return re.lFrame.contextLView=t,t[_n]}function gD(t){return re.lFrame.contextLView=null,t}function an(){let t=mD();for(;t!==null&&t.type===64;)t=t.parent;return t}function mD(){return re.lFrame.currentTNode}function BO(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ka(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function yD(){return re.lFrame.isParent}function UO(){re.lFrame.isParent=!1}function $O(){let t=re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function HO(t){return re.lFrame.bindingIndex=t}function Om(){return re.lFrame.bindingIndex++}function zO(t){let e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function qO(){return re.lFrame.inI18n}function GO(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,Hg(e)}function WO(){return re.lFrame.currentDirectiveIndex}function Hg(t){re.lFrame.currentDirectiveIndex=t}function KO(t){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function vD(t){re.lFrame.currentQueryIndex=t}function QO(t){let e=t[ce];return e.type===2?e.declTNode:e.type===1?t[En]:null}function _D(t,e,n){if(n&se.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&se.Host);)if(i=QO(s),i===null||(s=s[ao],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=re.lFrame=wD();return r.currentTNode=e,r.lView=t,!0}function km(t){let e=wD(),n=t[ce];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function wD(){let t=re.lFrame,e=t===null?null:t.child;return e===null?ED(t):e}function ED(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function CD(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ID=CD;function Fm(){let t=CD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function YO(t){return(re.lFrame.contextLView=RO(t,re.lFrame.contextLView))[_n]}function co(){return re.lFrame.selectedIndex}function Ni(t){re.lFrame.selectedIndex=t}function DD(){let t=re.lFrame;return uD(t.tView,t.selectedIndex)}function Pt(){re.lFrame.currentNamespace=aD}function qt(){ZO()}function ZO(){re.lFrame.currentNamespace=null}function bD(){return re.lFrame.currentNamespace}var TD=!0;function Vm(){return TD}function qr(t){TD=t}function XO(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=iD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Lm(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function $l(t,e,n){SD(t,e,3,n)}function Hl(t,e,n,r){(t[K]&3)===n&&SD(t,e,n,r)}function Cg(t,e){let n=t[K];(n&3)===e&&(n&=16383,n+=1,t[K]=n)}function SD(t,e,n,r){let i=r!==void 0?t[Ws]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ws]+=65536),(a<s||s==-1)&&(JO(t,n,e,c),t[Ws]=(t[Ws]&4294901760)+c+2),c++}function cI(t,e){kn(4,t,e);let n=Ft(null);try{e.call(t)}finally{Ft(n),kn(5,t,e)}}function JO(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[K]>>14<t[Ws]>>16&&(t[K]&3)===e&&(t[K]+=16384,cI(a,s)):cI(a,s)}var Xs=-1,Oi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function ek(t){return t instanceof Oi}function tk(t){return(t.flags&8)!==0}function nk(t){return(t.flags&16)!==0}function AD(t){return t!==Xs}function Xl(t){let e=t&32767;return t&32767}function rk(t){return t>>16}function Jl(t,e){let n=rk(t),r=e;for(;n>0;)r=r[ao],n--;return r}var zg=!0;function uI(t){let e=zg;return zg=t,e}var ik=256,MD=ik-1,xD=5,sk=0,Fn={};function ok(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Na)&&(r=n[Na]),r==null&&(r=n[Na]=sk++);let i=r&MD,s=1<<i;e.data[t+(i>>xD)]|=s}function ed(t,e){let n=PD(t,e);if(n!==-1)return n;let r=e[ce];r.firstCreatePass&&(t.injectorIndex=e.length,Ig(r.data,t),Ig(e,null),Ig(r.blueprint,null));let i=jm(t,e),s=t.injectorIndex;if(AD(i)){let o=Xl(i),a=Jl(i,e),c=a[ce].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function Ig(t,e){t.push(0,0,0,0,0,0,0,0,e)}function PD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function jm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=FD(i),r===null)return Xs;if(n++,i=i[ao],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Xs}function qg(t,e,n){ok(t,e,n)}function RD(t,e,n){if(n&se.Optional||t!==void 0)return t;Pm(e,"NodeInjector")}function ND(t,e,n,r){if(n&se.Optional&&r===void 0&&(r=null),!(n&(se.Self|se.Host))){let i=t[eo],s=rn(void 0);try{return i?i.get(e,r,n&se.Optional):$I(e,r,n&se.Optional)}finally{rn(s)}}return RD(r,e,n)}function OD(t,e,n,r=se.Default,i){if(t!==null){if(e[K]&2048&&!(r&se.Self)){let o=dk(t,e,n,r,Fn);if(o!==Fn)return o}let s=kD(t,e,n,r,Fn);if(s!==Fn)return s}return ND(e,n,r,i)}function kD(t,e,n,r,i){let s=uk(n);if(typeof s=="function"){if(!_D(e,t,r))return r&se.Host?RD(i,n,r):ND(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&se.Optional))Pm(n);else return o}finally{ID()}}else if(typeof s=="number"){let o=null,a=PD(t,e),c=Xs,u=r&se.Host?e[sn][En]:null;for((a===-1||r&se.SkipSelf)&&(c=a===-1?jm(t,e):e[a+8],c===Xs||!dI(r,!1)?a=-1:(o=e[ce],a=Xl(c),e=Jl(c,e)));a!==-1;){let l=e[ce];if(lI(s,a,l.data)){let d=ak(a,e,n,o,r,u);if(d!==Fn)return d}c=e[a+8],c!==Xs&&dI(r,e[ce].data[a+8]===u)&&lI(s,a,e)?(o=l,a=Xl(c),e=Jl(c,e)):a=-1}}return i}function ak(t,e,n,r,i,s){let o=e[ce],a=o.data[t+8],c=r==null?Ga(a)&&zg:r!=o&&(a.type&3)!==0,u=i&se.Host&&s===a,l=ck(a,o,n,c,u);return l!==null?ro(e,o,l,a):Fn}function ck(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=o[c];if(f&&Ur(f)&&f.type===n)return c}return null}function ro(t,e,n,r){let i=t[n],s=e.data;if(ek(i)){let o=i;o.resolving&&QN(KN(s[n]));let a=uI(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?rn(o.injectImpl):null,l=_D(t,r,se.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&XO(n,s[n],e)}finally{u!==null&&rn(u),uI(a),o.resolving=!1,ID()}}return i}function uk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Na)?t[Na]:void 0;return typeof e=="number"?e>=0?e&MD:lk:e}function lI(t,e,n){let r=1<<t;return!!(n[e+(t>>xD)]&r)}function dI(t,e){return!(t&se.Self)&&!(t&se.Host&&e)}var Pi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return OD(this._tNode,this._lView,e,vd(r),n)}};function lk(){return new Pi(an(),Pe())}function uo(t){return qa(()=>{let e=t.prototype.constructor,n=e[Wl]||Gg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Wl]||Gg(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Gg(t){return FI(t)?()=>{let e=Gg(Ct(t));return e&&e()}:no(t)}function dk(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[K]&2048&&!(o[K]&512);){let a=kD(s,o,n,r|se.Self,Fn);if(a!==Fn)return a;let c=s.parent;if(!c){let u=o[eD];if(u){let l=u.get(n,Fn,r);if(l!==Fn)return l}c=FD(o),o=o[ao]}s=c}return i}function FD(t){let e=t[ce],n=e.type;return n===2?e.declTNode:n===1?t[En]:null}var Fl="__parameters__";function hk(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function VD(t,e,n){return qa(()=>{let r=hk(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(Fl)?c[Fl]:Object.defineProperty(c,Fl,{value:[]})[Fl];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function fk(t){let e=jt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function pk(t){return typeof t=="function"}function Bm(t,e){t.forEach(n=>Array.isArray(n)?Bm(n,e):e(n))}function LD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function td(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function gk(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function mk(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function yk(t,e,n){let r=Qa(t,e);return r>=0?t[r|1]=n:(r=~r,mk(t,r,e,n)),r}function Dg(t,e){let n=Qa(t,e);if(n>=0)return t[n|1]}function Qa(t,e){return vk(t,e,1)}function vk(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Ui=HI(VD("Optional"),8);var Ed=HI(VD("SkipSelf"),4);function _k(t){let e=[],n=new Map;function r(i){let s=n.get(i);if(!s){let o=t(i);n.set(i,s=o.then(Ik))}return s}return nd.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),o.push(r(d).then(f=>{a[u+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>Dk(s));e.push(c)}),Ek(),Promise.all(e).then(()=>{})}var nd=new Map,wk=new Set;function Ek(){let t=nd;return nd=new Map,t}function Ck(){return nd.size===0}function Ik(t){return typeof t=="string"?t:t.text()}function Dk(t){wk.delete(t)}var ki=new k("ENVIRONMENT_INITIALIZER"),jD=new k("INJECTOR",-1),BD=new k("INJECTOR_DEF_TYPES"),rd=class{get(e,n=ka){if(n===ka){let r=new Error(`NullInjectorError: No provider for ${pt(e)}!`);throw r.name="NullInjectorError",r}return n}};function Ya(t){return{\u0275providers:t}}function bk(...t){return{\u0275providers:UD(!0,t),\u0275fromNgModule:!0}}function UD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Bm(e,o=>{let a=o;Wg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&$D(i,s),n}function $D(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Um(i,s=>{e(s,r)})}}function Wg(t,e,n,r){if(t=Ct(t),!t)return!1;let i=null,s=JC(t),o=!s&&jr(t);if(!s&&!o){let c=t.ngModule;if(s=JC(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)Wg(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{Bm(s.imports,l=>{Wg(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&$D(u,e)}if(!a){let u=no(i)||(()=>new i);e({provide:i,useFactory:u,deps:Lt},i),e({provide:BD,useValue:i,multi:!0},i),e({provide:ki,useValue:()=>b(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=t;Um(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Um(t,e){for(let n of t)VI(n)&&(n=n.\u0275providers),Array.isArray(n)?Um(n,e):e(n)}var Tk=we({provide:String,useValue:we});function HD(t){return t!==null&&typeof t=="object"&&Tk in t}function Sk(t){return!!(t&&t.useExisting)}function Ak(t){return!!(t&&t.useFactory)}function io(t){return typeof t=="function"}function Mk(t){return!!t.useClass}var Cd=new k("Set Injector scope."),zl={},xk={},bg;function $m(){return bg===void 0&&(bg=new rd),bg}var Ht=class{},$a=class extends Ht{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qg(e,o=>this.processProvider(o)),this.records.set(jD,Ks(void 0,this)),i.has("environment")&&this.records.set(Ht,Ks(void 0,this));let s=this.records.get(Cd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(BD,Lt,se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Vr(this),r=rn(void 0),i;try{return e()}finally{Vr(n),rn(r)}}get(e,n=ka,r=se.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ZC))return e[ZC](this);r=vd(r);let i,s=Vr(this),o=rn(void 0);try{if(!(r&se.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=kk(e)&&yd(e);u&&this.injectableDefInScope(u)?c=Ks(Kg(e),zl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&se.Self?$m():this.parent;return n=r&se.Optional&&n===ka?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Kl]=a[Kl]||[]).unshift(pt(e)),s)throw a;return aO(a,e,"R3InjectorError",this.source)}else throw a}finally{rn(o),Vr(s)}}resolveInjectorInitializers(){let e=Vr(this),n=rn(void 0),r;try{let i=this.get(ki,Lt,se.Self);for(let s of i)s()}finally{Vr(e),rn(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(pt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new D(205,!1)}processProvider(e){e=Ct(e);let n=io(e)?e:Ct(e&&e.provide),r=Rk(e);if(!io(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ks(void 0,zl,!0),i.factory=()=>jg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}else{let i=this.records.get(n)}this.records.set(n,r)}hydrate(e,n){return n.value===zl&&(n.value=xk,n.value=n.factory()),typeof n.value=="object"&&n.value&&Ok(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ct(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Kg(t){let e=yd(t),n=e!==null?e.factory:no(t);if(n!==null)return n;if(t instanceof k)throw new D(204,!1);if(t instanceof Function)return Pk(t);throw new D(204,!1)}function Pk(t){let e=t.length;if(e>0){let r=gk(e,"?");throw new D(204,!1)}let n=XN(t);return n!==null?()=>n.factory(t):()=>new t}function Rk(t){if(HD(t))return Ks(void 0,t.useValue);{let e=zD(t);return Ks(e,zl)}}function zD(t,e,n){let r;if(io(t)){let i=Ct(t);return no(i)||Kg(i)}else if(HD(t))r=()=>Ct(t.useValue);else if(Ak(t))r=()=>t.useFactory(...jg(t.deps||[]));else if(Sk(t))r=()=>b(Ct(t.useExisting));else{let i=Ct(t&&(t.useClass||t.provide));if(Nk(t))r=()=>new i(...jg(t.deps));else return no(i)||Kg(i)}return r}function Ks(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Nk(t){return!!t.deps}function Ok(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function kk(t){return typeof t=="function"||typeof t=="object"&&t instanceof k}function Qg(t,e){for(let n of t)Array.isArray(n)?Qg(n,e):n&&VI(n)?Qg(n.\u0275providers,e):e(n)}function gr(t,e){t instanceof $a&&t.assertNotDestroyed();let n,r=Vr(t),i=rn(void 0);try{return e()}finally{Vr(r),rn(i)}}function Fk(t){if(!UI()&&!iO())throw new D(-203,!1)}function hI(t,e=null,n=null,r){let i=qD(t,e,n,r);return i.resolveInjectorInitializers(),i}function qD(t,e=null,n=null,r,i=new Set){let s=[n||Lt,bk(t)];return r=r||(typeof t=="object"?void 0:pt(t)),new $a(s,e||$m(),r||null,i)}var Gt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return hI({name:""},i,r,"");{let s=r.name??"";return hI({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=ka,e.NULL=new rd,e.\u0275prov=V({token:e,providedIn:"any",factory:()=>b(jD)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Yg;function GD(t){Yg=t}function Id(){if(Yg!==void 0)return Yg;if(typeof document<"u")return document;throw new D(210,!1)}var Za=new k("AppId",{providedIn:"root",factory:()=>Vk}),Vk="ng",Hm=new k("Platform Initializer"),It=new k("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var zm=new k("AnimationModuleType"),qm=new k("CSP nonce",{providedIn:"root",factory:()=>Id().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function WD(t){return t.ownerDocument.defaultView}function Lk(t){return t.ownerDocument.body}function KD(t){return t instanceof Function?t():t}function Ra(t){return(t??A(Gt)).get(It)==="browser"}var jk="ngSkipHydration",Bk="ngskiphydration";function QD(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===Bk)return!0}return!1}function YD(t){return t.hasAttribute(jk)}function id(t){return(t.flags&128)===128}function Uk(t){if(id(t))return!0;let e=t.parent;for(;e;){if(id(t)||QD(e))return!0;e=e.parent}return!1}var fr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(fr||{}),$k=/^>|^->|<!--|-->|--!>|<!-$/g,Hk=/(<|>)/g,zk="\u200B$1\u200B";function qk(t){return t.replace($k,e=>e.replace(Hk,zk))}var ZD=new Map,Gk=0;function Wk(){return Gk++}function Kk(t){ZD.set(t[wd],t)}function Qk(t){ZD.delete(t[wd])}var fI="__ngContext__";function Fi(t,e){Vn(e)?(t[fI]=e[wd],Kk(e)):t[fI]=e}var Yk;function Gm(t,e){return Yk(t,e)}function Wm(t){let e=t[We];return on(e)?e[We]:e}function XD(t){return eb(t[La])}function JD(t){return eb(t[vn])}function eb(t){for(;t!==null&&!on(t);)t=t[vn];return t}function Qs(t,e,n,r,i){if(r!=null){let s,o=!1;on(r)?s=r:Vn(r)&&(o=!0,r=r[Ut]);let a=wn(r);t===0&&n!==null?i==null?sb(e,n,a):sd(e,n,a,i||null,!0):t===1&&n!==null?sd(e,n,a,i||null,!0):t===2?ab(e,a,o):t===3&&e.destroyNode(a),s!=null&&pF(e,t,s,n,i)}}function tb(t,e){return t.createText(e)}function Zk(t,e,n){t.setValue(e,n)}function nb(t,e){return t.createComment(qk(e))}function Km(t,e,n){return t.createElement(e,n)}function Xk(t,e){let n=e[Ve];Xa(t,e,n,2,null,null),e[Ut]=null,e[En]=null}function Jk(t,e,n,r,i,s){r[Ut]=i,r[En]=e,Xa(t,r,n,1,i,s)}function eF(t,e){Xa(t,e,e[Ve],2,null,null)}function tF(t){let e=t[La];if(!e)return Tg(t[ce],t);for(;e;){let n=null;if(Vn(e))n=e[La];else{let r=e[Bt];r&&(n=r)}if(!n){for(;e&&!e[vn]&&e!==t;)Vn(e)&&Tg(e[ce],e),e=e[We];e===null&&(e=t),Vn(e)&&Tg(e[ce],e),n=e&&e[vn]}e=n}}function nF(t,e,n,r){let i=Bt+r,s=n.length;r>0&&(n[i-1][vn]=e),r<s-Bt?(e[vn]=n[i],LD(n,Bt+r,e)):(n.push(e),e[vn]=null),e[We]=n;let o=e[_d];o!==null&&n!==o&&rF(o,e);let a=e[ja];a!==null&&a.insertView(t),$g(e),e[K]|=128}function rF(t,e){let n=t[Yl],i=e[We][We][sn];e[sn]!==i&&(t[K]|=to.HasTransplantedViews),n===null?t[Yl]=[e]:n.push(e)}function rb(t,e){let n=t[Yl],r=n.indexOf(e),i=e[We];n.splice(r,1)}function Zg(t,e){if(t.length<=Bt)return;let n=Bt+e,r=t[n];if(r){let i=r[_d];i!==null&&i!==t&&rb(i,r),e>0&&(t[n-1][vn]=r[vn]);let s=td(t,Bt+e);Xk(r[ce],r);let o=s[ja];o!==null&&o.detachView(s[ce]),r[We]=null,r[vn]=null,r[K]&=-129}return r}function ib(t,e){if(!(e[K]&256)){let n=e[Ve];n.destroyNode&&Xa(t,e,n,3,null,null),tF(e)}}function Tg(t,e){if(!(e[K]&256)){e[K]&=-129,e[K]|=256,e[Ri]&&SC(e[Ri]),sF(t,e),iF(t,e),e[ce].type===1&&e[Ve].destroy();let n=e[_d];if(n!==null&&on(e[We])){n!==e[We]&&rb(n,e);let r=e[ja];r!==null&&r.detachView(t)}Qk(e)}}function iF(t,e){let n=t.cleanup,r=e[Va];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Va]=null);let i=e[Lr];if(i!==null){e[Lr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function sF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Oi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];kn(4,a,c);try{c.call(a)}finally{kn(5,a,c)}}else{kn(4,i,s);try{s.call(i)}finally{kn(5,i,s)}}}}}function oF(t,e,n){return aF(t,e.parent,n)}function aF(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Ut];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Ln.None||s===Ln.Emulated)return null}return zt(r,n)}}function sd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function sb(t,e,n){t.appendChild(e,n)}function pI(t,e,n,r,i){r!==null?sd(t,e,n,r,i):sb(t,e,n)}function cF(t,e,n,r){t.removeChild(e,n,r)}function Qm(t,e){return t.parentNode(e)}function uF(t,e){return t.nextSibling(e)}function lF(t,e,n){return hF(t,e,n)}function dF(t,e,n){return t.type&40?zt(t,n):null}var hF=dF,gI;function Ym(t,e,n,r){let i=oF(t,r,e),s=e[Ve],o=r.parent||e[En],a=lF(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)pI(s,i,n[c],a,!1);else pI(s,i,n,a,!1);gI!==void 0&&gI(s,r,e,n,i)}function ql(t,e){if(e!==null){let n=e.type;if(n&3)return zt(e,t);if(n&4)return Xg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ql(t,r);{let i=t[e.index];return on(i)?Xg(-1,i):wn(i)}}else{if(n&32)return Gm(e,t)()||wn(t[e.index]);{let r=ob(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Wm(t[sn]);return ql(i,r)}else return ql(t,e.next)}}}return null}function ob(t,e){if(e!==null){let r=t[sn][En],i=e.projection;return r.projection[i]}return null}function Xg(t,e){let n=Bt+t+1;if(n<e.length){let r=e[n],i=r[ce].firstChild;if(i!==null)return ql(r,i)}return e[hr]}function ab(t,e,n){let r=Qm(t,e);r&&cF(t,r,e,n)}function cb(t){t.textContent=""}function Zm(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Fi(wn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Zm(t,e,n.child,r,i,s,!1),Qs(e,t,i,a,s);else if(c&32){let u=Gm(n,r),l;for(;l=u();)Qs(e,t,i,l,s);Qs(e,t,i,a,s)}else c&16?fF(t,e,r,n,i,s):Qs(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Xa(t,e,n,r,i,s){Zm(n,r,t.firstChild,e,i,s,!1)}function fF(t,e,n,r,i,s){let o=n[sn],c=o[En].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Qs(e,t,i,l,s)}else{let u=c,l=o[We];id(r)&&(u.flags|=128),Zm(t,e,u,l,i,s,!0)}}function pF(t,e,n,r,i){let s=n[hr],o=wn(n);s!==o&&Qs(e,t,r,s,i);for(let a=Bt;a<n.length;a++){let c=n[a];Xa(c[ce],c,t,e,r,s)}}function gF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:fr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=fr.Important),t.setStyle(n,r,i,s))}}function mF(t,e,n){t.setAttribute(e,"style",n)}function ub(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function lb(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Bg(t,e,r),i!==null&&ub(t,e,i),s!==null&&mF(t,e,s)}var Jg=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${HN})`}};function Xm(t){return t instanceof Jg?t.changingThisBreaksApplicationSecurity:t}var em=class{};function yF(){let t=new $i;return A(It)==="browser"&&(t.store=vF(Id(),A(Za))),t}var $i=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(r,i){return this.store[r]!==void 0?this.store[r]:i}set(r,i){this.store[r]=i}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(r,i){this.onSerializeCallbacks[r]=i}toJson(){for(let r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=V({token:e,providedIn:"root",factory:yF});let t=e;return t})();function vF(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var db="h",hb="b",tm=function(t){return t.FirstChild="f",t.NextSibling="n",t}(tm||{}),_F="e",wF="t",Jm="c",fb="x",od="r",EF="i",CF="n",IF="d",DF="__nghData__",pb=DF,Sg="ngh",bF="nghm",gb=(t,e,n)=>null;function TF(t,e,n=!1){let r=t.getAttribute(Sg);if(r==null)return null;let[i,s]=r.split("|");if(r=n?s:i,!r)return null;let o=n?i:s?`|${s}`:"",a={};if(r!==""){let u=e.get($i,null,{optional:!0});u!==null&&(a=u.get(pb,[])[Number(r)])}let c={data:a,firstChild:t.firstChild??null};return n&&(c.firstChild=t,Dd(c,0,t.nextSibling)),o?t.setAttribute(Sg,o):t.removeAttribute(Sg),c}function SF(){gb=TF}function ey(t,e,n=!1){return gb(t,e,n)}function AF(t){let e=t._lView;return e[ce].type===2?null:(rD(e)&&(e=e[$t]),e)}function MF(t){return t.textContent?.replace(/\s/gm,"")}function xF(t){let e=Id(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=MF(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function Dd(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function nm(t,e){return t.segmentHeads?.[e]??null}function PF(t,e){let n=t.data,r=n[_F]?.[e]??null;return r===null&&n[Jm]?.[e]&&(r=ty(t,e)),r}function mb(t,e){return t.data[Jm]?.[e]??null}function ty(t,e){let n=mb(t,e)??[],r=0;for(let i of n)r+=i[od]*(i[fb]??1);return r}function bd(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[IF];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var rm=class{},ad=class{};function RF(t){let e=Error(`No component factory found for ${pt(t)}.`);return e[NF]=t,e}var NF="ngComponent";var im=class{resolveComponentFactory(e){throw RF(e)}},Td=(()=>{let e=class e{};e.NULL=new im;let t=e;return t})();function OF(){return Sd(an(),Pe())}function Sd(t,e){return new Un(zt(t,e))}var Un=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=OF;let t=e;return t})();var Vi=class{},mr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>kF();let t=e;return t})();function kF(){let t=Pe(),e=an(),n=zr(e.index,t);return(Vn(n)?n:t)[Ve]}var FF=(()=>{let e=class e{};e.\u0275prov=V({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Ag={};function yb(t){return ny(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function VF(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function ny(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var sm=class{constructor(){}supports(e){return yb(e)}create(e){return new om(e)}},LF=(t,e)=>e,om=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||LF}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<mI(r,i,s)?n:r,a=mI(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;l<=p&&p<u&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!yb(e))throw new D(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,VF(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new am(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new cd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new cd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},am=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},cm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},cd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new cm,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function mI(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var um=class{constructor(){}supports(e){return e instanceof Map||ny(e)}create(){return new lm}},lm=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||ny(e)))throw new D(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new dm(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},dm=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function yI(){return new ry([new sm])}var ry=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||yI()),deps:[[e,new Ed,new Ui]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new D(901,!1)}};e.\u0275prov=V({token:e,providedIn:"root",factory:yI});let t=e;return t})();function vI(){return new iy([new um])}var iy=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||vI()),deps:[[e,new Ed,new Ui]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new D(901,!1)}};e.\u0275prov=V({token:e,providedIn:"root",factory:vI});let t=e;return t})();function ud(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(wn(s)),on(s)&&jF(s,r);let o=n.type;if(o&8)ud(t,e,n.child,r);else if(o&32){let a=Gm(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=ob(e,n);if(Array.isArray(a))r.push(...a);else{let c=Wm(e[sn]);ud(c[ce],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function jF(t,e){for(let n=Bt;n<t.length;n++){let r=t[n],i=r[ce].firstChild;i!==null&&ud(r[ce],r,i,e)}t[hr]!==t[Ut]&&e.push(t[hr])}var vb=[];function BF(t){return t[Ri]??UF(t)}function UF(t){let e=vb.pop()??Object.create(HF);return e.lView=t,e}function $F(t){t.lView[Ri]!==t&&(t.lView=null,vb.push(t))}var HF=me(N({},DC),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ua(t.lView)},consumerOnSignalRead(){this.lView[Ri]=this}}),zF="ngOriginalError";function Mg(t){return t[zF]}var jn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Mg(e);for(;n&&Mg(n);)n=Mg(n);return n||null}},_b=new k("",{providedIn:"root",factory:()=>A(jn).handleError.bind(void 0)}),Vl=new k(""),wb=!1,Eb=new k("",{providedIn:"root",factory:()=>wb});var Hi={};function De(t){Cb(Cn(),Pe(),co()+t,!1)}function Cb(t,e,n,r){if(!r)if((e[K]&3)===3){let s=t.preOrderCheckHooks;s!==null&&$l(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Hl(e,s,0,n)}Ni(n)}function pe(t,e=se.Default){let n=Pe();if(n===null)return b(t,e);let r=an();return OD(r,n,Ct(t),e)}function Ib(){let t="invalid";throw new Error(t)}function qF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ni(~i);else{let s=i,o=n[++r],a=n[++r];GO(o,s);let c=e[s];a(2,c)}}}finally{Ni(-1)}}function Ad(t,e,n,r,i,s,o,a,c,u,l){let d=e.blueprint.slice();return d[Ut]=i,d[K]=r|4|128|8|64,(u!==null||t&&t[K]&2048)&&(d[K]|=2048),lD(d),d[We]=d[ao]=t,d[_n]=n,d[Br]=o||t&&t[Br],d[Ve]=a||t&&t[Ve],d[eo]=c||t&&t[eo]||null,d[En]=s,d[wd]=Wk(),d[dr]=l,d[eD]=u,d[sn]=e.type==2?t[sn]:d,d}function Md(t,e,n,r,i){let s=t.data[e];if(s===null)s=GF(t,e,n,r,i),qO()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=BO();s.injectorIndex=o===null?-1:o.injectorIndex}return Ka(s,!0),s}function GF(t,e,n,r,i){let s=mD(),o=yD(),a=o?s:s&&s.parent,c=t.data[e]=XF(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Db(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function bb(t,e,n,r,i){let s=co(),o=r&2;try{Ni(-1),o&&e.length>$t&&Cb(t,e,$t,!1),kn(o?2:0,i),n(r,i)}finally{Ni(s),kn(o?3:1,i)}}function Tb(t,e,n){if(nD(e)){let r=Ft(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Ft(r)}}}function Sb(t,e,n){fD()&&(s2(t,e,n,zt(n,e)),(n.flags&64)===64&&Nb(t,e,n))}function Ab(t,e,n=zt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Mb(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=sy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function sy(t,e,n,r,i,s,o,a,c,u,l){let d=$t+r,h=d+i,f=WF(d,h),p=typeof u=="function"?u():u;return f[ce]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}function WF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Hi);return n}function KF(t,e,n,r){let s=r.get(Eb,wb)||n===Ln.ShadowDom,o=t.selectRootElement(e,s);return QF(o),o}function QF(t){xb(t)}var xb=t=>null;function YF(t){YD(t)?cb(t):xF(t)}function ZF(){xb=YF}function XF(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Wa()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function _I(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=n===null?{}:n;let s=t[i];r===null?wI(n,e,i,s):r.hasOwnProperty(i)&&wI(n,e,r[i],s)}return n}function wI(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function JF(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=_I(d.inputs,l,c,f),u=_I(d.outputs,l,u,p);let g=c!==null&&o!==null&&!WI(e)?m2(c,l,o):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function e2(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function t2(t,e,n,r,i,s,o,a){let c=zt(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(oy(t,n,l,r,i),Ga(e)&&n2(n,e.index)):e.type&3?(r=e2(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function n2(t,e){let n=zr(e,t);n[K]&16||(n[K]|=64)}function Pb(t,e,n,r){if(fD()){let i=r===null?null:{"":-1},s=a2(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Rb(t,e,n,o,i,a),i&&c2(n,r,i)}n.mergedAttrs=Fa(n.mergedAttrs,n.attrs)}function Rb(t,e,n,r,i,s){for(let u=0;u<r.length;u++)qg(ed(n,e),t,r[u].type);l2(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=Db(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Fa(n.mergedAttrs,l.hostAttrs),d2(t,n,e,c,l),u2(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}JF(t,n,s)}function r2(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;i2(o)!=a&&o.push(a),o.push(n,r,s)}}function i2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function s2(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Ga(n)&&h2(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ed(n,e),Fi(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],u=ro(e,t,a,n);if(Fi(u,e),o!==null&&g2(e,a-i,u,c,n,o),Ur(c)){let l=zr(n.index,e);l[_n]=ro(e,t,a,n)}}}function Nb(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=WO();try{Ni(s);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Hg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&o2(c,u)}}finally{Ni(-1),Hg(o)}}function o2(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function a2(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(gO(e,o.selectors,!1))if(r||(r=[]),Ur(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;hm(t,e,c)}else r.unshift(o),hm(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function hm(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function c2(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new D(-301,!1);r.push(e[i],s)}}}function u2(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ur(e)&&(n[""]=t)}}function l2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function d2(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=no(i.type,!0)),o=new Oi(s,Ur(i),pe);t.blueprint[r]=o,n[r]=o,r2(t,e,r,Db(t,n,i.hostVars,Hi),i)}function h2(t,e,n){let r=zt(e,t),i=Mb(n),s=t[Br].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=xd(t,Ad(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function f2(t,e,n,r,i,s){let o=zt(t,e);p2(e[Ve],o,s,t.value,n,r,i)}function p2(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?xm(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function g2(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++];Ob(r,n,c,u,l)}}function Ob(t,e,n,r,i){let s=Ft(null);try{let o=t.inputTransforms;o!==null&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),t.setInput!==null?t.setInput(e,i,n,r):e[r]=i}finally{Ft(s)}}function m2(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}return r}function kb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Fb(t,e){let n=t.contentQueries;if(n!==null){let r=Ft(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];vD(s),a.contentQueries(2,e[o],o)}}}finally{Ft(r)}}}function xd(t,e){return t[La]?t[oI][vn]=e:t[La]=e,t[oI]=e,e}function fm(t,e,n){vD(0);let r=Ft(null);try{e(t,n)}finally{Ft(r)}}function y2(t){return t[Va]||(t[Va]=[])}function v2(t){return t.cleanup||(t.cleanup=[])}function Vb(t,e){let n=t[eo],r=n?n.get(jn,null):null;r&&r.handleError(e)}function oy(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=e[o],u=t.data[o];Ob(u,c,r,a,i)}}function _2(t,e,n){let r=cD(e,t);Zk(t[Ve],r,n)}var w2=100;function E2(t,e=!0){let n=t[Br],r=n.rendererFactory,i=n.afterRenderEventManager,s=!1;s||(r.begin?.(),i?.begin());try{C2(t)}catch(o){throw e&&Vb(t,o),o}finally{s||(r.end?.(),n.inlineEffectRunner?.flush(),i?.end())}}function C2(t){pm(t,0);let e=0;for(;dD(t);){if(e===w2)throw new D(103,!1);e++,pm(t,1)}}function I2(t,e,n,r){let i=e[K];if((i&256)===256)return;let s=!1;!s&&e[Br].inlineEffectRunner?.flush(),km(e);let o=null,a=null;!s&&D2(t)&&(a=BF(e),o=bC(a));try{lD(e),HO(t.bindingStartIndex),n!==null&&bb(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&$l(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Hl(e,d,0,null),Cg(e,0)}if(b2(e),Lb(e,0),t.contentQueries!==null&&Fb(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&$l(e,d)}else{let d=t.contentHooks;d!==null&&Hl(e,d,1),Cg(e,1)}qF(t,e);let u=t.components;u!==null&&Bb(e,u,0);let l=t.viewQuery;if(l!==null&&fm(2,l,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&$l(e,d)}else{let d=t.viewHooks;d!==null&&Hl(e,d,2),Cg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Eg]){for(let d of e[Eg])d();e[Eg]=null}s||(e[K]&=-73)}catch(c){throw Ua(e),c}finally{a!==null&&(TC(a,o),$F(a)),Fm()}}function D2(t){return t.type!==2}function Lb(t,e){for(let n=XD(t);n!==null;n=JD(n)){n[K]&=~to.HasChildViewsToRefresh;for(let r=Bt;r<n.length;r++){let i=n[r];jb(i,e)}}}function b2(t){for(let e=XD(t);e!==null;e=JD(e)){if(!(e[K]&to.HasTransplantedViews))continue;let n=e[Yl];for(let r=0;r<n.length;r++){let i=n[r],s=i[We];PO(i)}}}function T2(t,e,n){let r=zr(e,t);jb(r,n)}function jb(t,e){Nm(t)&&pm(t,e)}function pm(t,e){let r=t[ce],i=t[K],s=t[Ri],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Jp(s)),s&&(s.dirty=!1),t[K]&=-9217,o)I2(r,t,r.template,t[_n]);else if(i&8192){Lb(t,1);let a=r.components;a!==null&&Bb(t,a,1)}}function Bb(t,e,n){for(let r=0;r<e.length;r++)T2(t,e[r],n)}function ay(t){for(t[Br].changeDetectionScheduler?.notify();t;){t[K]|=64;let e=Wm(t);if(rD(t)&&!e)return t;t=e}return null}var Li=class{get rootNodes(){let e=this._lView,n=e[ce];return ud(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_n]}set context(e){this._lView[_n]=e}get destroyed(){return(this._lView[K]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[We];if(on(e)){let n=e[Ql],r=n?n.indexOf(this):-1;r>-1&&(Zg(e,r),td(n,r))}this._attachedToViewContainer=!1}ib(this._lView[ce],this._lView)}onDestroy(e){hD(this._lView,e)}markForCheck(){ay(this._cdRefInjectingView||this._lView)}detach(){this._lView[K]&=-129}reattach(){$g(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,E2(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new D(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,eF(this._lView[ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new D(902,!1);this._appRef=e,$g(this._lView)}},Ja=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=S2;let t=e;return t})();function S2(t){return A2(an(),Pe(),(t&16)===16)}function A2(t,e,n){if(Ga(t)&&!n){let r=zr(t.index,e);return new Li(r,r)}else if(t.type&47){let r=e[sn];return new Li(r,e)}return null}var Ub=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=M2,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),gm=class extends Ub{constructor(e){super(),this._lView=e}onDestroy(e){return hD(this._lView,e),()=>NO(this._lView,e)}};function M2(){return new gm(Pe())}var EI=new Set;function lo(t){EI.has(t)||(EI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var mm=class extends et{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=xg(s),i&&(i=xg(i)),o&&(o=xg(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ue&&e.add(a),a}};function xg(t){return e=>{setTimeout(t,void 0,e)}}var Ge=mm;function CI(...t){}function x2(){let t=typeof jt.requestAnimationFrame=="function",e=jt[t?"requestAnimationFrame":"setTimeout"],n=jt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var oe=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ge(!1),this.onMicrotaskEmpty=new Ge(!1),this.onStable=new Ge(!1),this.onError=new Ge(!1),typeof Zone>"u")throw new D(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=x2().nativeRequestAnimationFrame,N2(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new D(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new D(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,P2,CI,CI);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},P2={};function cy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function R2(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(jt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ym(t),t.isCheckStableRunning=!0,cy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ym(t))}function N2(t){let e=()=>{R2(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(O2(a))return n.invokeTask(i,s,o,a);try{return II(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),DI(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return II(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),DI(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,ym(t),cy(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function ym(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function II(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function DI(t){t._nesting--,cy(t)}var vm=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ge,this.onMicrotaskEmpty=new Ge,this.onStable=new Ge,this.onError=new Ge}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function O2(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function k2(t="zone.js",e){return t==="noop"?new vm:t==="zone.js"?new oe(e):t}var Ys=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ys||{}),F2={destroy(){}};function uy(t,e){!e&&Fk(uy);let n=e?.injector??A(Gt);if(!Ra(n))return F2;lo("NgAfterNextRender");let r=n.get($b),i=r.handler??=new wm,s=e?.phase??Ys.MixedReadWrite,o=()=>{i.unregister(c),a()},a=n.get(Ub).onDestroy(o),c=new _m(n,s,()=>{o(),t()});return i.register(c),{destroy:o}}var _m=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(oe),this.errorHandler=e.get(jn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},wm=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ys.EarlyRead]:new Set,[Ys.Write]:new Set,[Ys.MixedReadWrite]:new Set,[Ys.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new D(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},$b=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let r of this.internalCallbacks)r();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=V({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function V2(t,e){let n=zr(e,t),r=n[ce];L2(r,n);let i=n[Ut];i!==null&&n[dr]===null&&(n[dr]=ey(i,n[eo])),ly(r,n,n[_n])}function L2(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ly(t,e,n){km(e);try{let r=t.viewQuery;r!==null&&fm(1,r,n);let i=t.template;i!==null&&bb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Fb(t,e),t.staticViewQueries&&fm(2,t.viewQuery,n);let s=t.components;s!==null&&j2(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[K]&=-5,Fm()}}function j2(t,e){for(let n=0;n<e.length;n++)V2(t,e[n])}function Em(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=YC(i,a);else if(s==2){let c=a,u=e[++o];r=YC(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ld=class extends Td{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=jr(e);return new so(n,this.ngModule)}};function bI(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push({propName:r,templateName:n})}return e}function B2(t){let e=t.toLowerCase();return e==="svg"?aD:e==="math"?SO:null}var Cm=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=vd(r);let i=this.injector.get(e,Ag,r);return i!==Ag||n===Ag?i:this.parentInjector.get(e,n,r)}},so=class extends ad{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=bI(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return bI(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=_O(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let s=i instanceof Ht?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new Cm(e,s):e,a=o.get(Vi,null);if(a===null)throw new D(407,!1);let c=o.get(FF,null),u=o.get($b,null),l=o.get(em,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?KF(h,r,this.componentDef.encapsulation,o):Km(h,f,B2(f)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let y=null;p!==null&&(y=ey(p,o,!0));let w=sy(0,null,null,1,0,null,null,null,null,null,null),S=Ad(null,w,null,g,null,null,d,h,o,null,y);km(S);let T,O;try{let U=this.componentDef,z,ee=null;U.findHostDirectiveDefs?(z=[],ee=new Map,U.findHostDirectiveDefs(U,z,ee),z.push(U)):z=[U];let ke=U2(S,p),Ot=$2(ke,p,U,z,S,d,h);O=uD(w,$t),p&&q2(h,U,p,r),n!==void 0&&G2(O,this.ngContentSelectors,n),T=z2(Ot,U,z,ee,S,[W2]),ly(w,S,null)}finally{Fm()}return new Im(this.componentType,T,Sd(O,S),S,O)}},Im=class extends rm{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Li(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;oy(s[ce],s,i,e,n),this.previousInputValues.set(e,n);let o=zr(this._tNode.index,s);ay(o)}}get injector(){return new Pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function U2(t,e){let n=t[ce],r=$t;return t[r]=e,Md(n,r,2,"#host",null)}function $2(t,e,n,r,i,s,o){let a=i[ce];H2(r,t,e,o);let c=null;e!==null&&(c=ey(e,i[eo]));let u=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Ad(i,Mb(n),null,l,i[t.index],t,s,u,null,null,c);return a.firstCreatePass&&hm(a,t,r.length-1),xd(i,d),i[t.index]=d}function H2(t,e,n,r){for(let i of t)e.mergedAttrs=Fa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Em(e,e.mergedAttrs,!0),n!==null&&lb(r,n,e))}function z2(t,e,n,r,i,s){let o=an(),a=i[ce],c=zt(o,i);Rb(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=ro(i,a,d,o);Fi(h,i)}Nb(a,i,o),c&&Fi(c,i);let u=ro(i,a,o.directiveStart+o.componentOffset,o);if(t[_n]=i[_n]=u,s!==null)for(let l of s)l(u,e);return Tb(a,o,t),u}function q2(t,e,n,r){if(r)Bg(t,n,["ng-version","17.0.8"]);else{let{attrs:i,classes:s}=wO(e.selectors[0]);i&&Bg(t,n,i),s&&s.length>0&&ub(t,n,s.join(" "))}}function G2(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function W2(){let t=an();Lm(Pe()[ce],t)}function K2(t){return Object.getPrototypeOf(t.prototype).constructor}function yr(t){let e=K2(t.type),n=!0,r=[t];for(;e;){let i;if(Ur(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new D(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Ll(t.inputs),o.inputTransforms=Ll(t.inputTransforms),o.declaredInputs=Ll(t.declaredInputs),o.outputs=Ll(t.outputs);let a=i.hostBindings;a&&X2(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&Y2(t,c),u&&Z2(t,u),kl(t.inputs,i.inputs),kl(t.declaredInputs,i.declaredInputs),kl(t.outputs,i.outputs),i.inputTransforms!==null&&(o.inputTransforms===null&&(o.inputTransforms={}),kl(o.inputTransforms,i.inputTransforms)),Ur(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===yr&&(n=!1)}}e=Object.getPrototypeOf(e)}Q2(r)}function Q2(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fa(i.hostAttrs,n=Fa(n,i.hostAttrs))}}function Ll(t){return t===Js?{}:t===Lt?[]:t}function Y2(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Z2(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function X2(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function J2(t,e,n){return t[e]=n}function ec(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Pd(t,e,n,r){let i=Pe(),s=Om();if(ec(i,s,e)){let o=Cn(),a=DD();f2(a,i,t,e,n,r)}return Pd}function eV(t,e,n,r){return ec(t,Om(),n)?e+xm(n)+r:Hi}function jl(t,e){return t<<17|e<<2}function ji(t){return t>>17&32767}function tV(t){return(t&2)==2}function nV(t,e){return t&131071|e<<17}function Dm(t){return t|2}function oo(t){return(t&131068)>>2}function Pg(t,e){return t&-131069|e<<2}function rV(t){return(t&1)===1}function bm(t){return t|1}function iV(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ji(o),c=oo(o);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||Qa(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let h=ji(t[a+1]);t[r+1]=jl(h,a),h!==0&&(t[h+1]=Pg(t[h+1],r)),t[a+1]=nV(t[a+1],r)}else t[r+1]=jl(a,0),a!==0&&(t[a+1]=Pg(t[a+1],r)),a=r;else t[r+1]=jl(c,0),a===0?a=r:t[c+1]=Pg(t[c+1],r),c=r;u&&(t[r+1]=Dm(t[r+1])),TI(t,l,r,!0,s),TI(t,l,r,!1,s),sV(e,l,t,r,s),o=jl(a,c),s?e.classBindings=o:e.styleBindings=o}function sV(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Qa(s,e)>=0&&(n[r+1]=bm(n[r+1]))}function TI(t,e,n,r,i){let s=t[n+1],o=e===null,a=r?ji(s):oo(s),c=!1;for(;a!==0&&(c===!1||o);){let u=t[a],l=t[a+1];oV(u,e)&&(c=!0,t[a+1]=r?bm(l):Dm(l)),a=r?ji(l):oo(l)}c&&(t[n+1]=r?Dm(s):bm(s))}function oV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Qa(t,e)>=0:!1}function Ke(t,e,n){let r=Pe(),i=Om();if(ec(r,i,e)){let s=Cn(),o=DD();t2(s,o,r,t,e,r[Ve],n,!1)}return Ke}function SI(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";oy(t,n,s[o],o,r)}function $n(t,e){return aV(t,e,null,!0),$n}function aV(t,e,n,r){let i=Pe(),s=Cn(),o=zO(2);if(s.firstUpdatePass&&uV(s,t,o,r),e!==Hi&&ec(i,o,e)){let a=s.data[co()];pV(s,a,i,i[Ve],t,i[o+1]=gV(e,n),r,o)}}function cV(t,e){return e>=t.expandoStartIndex}function uV(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[co()],o=cV(t,n);mV(s,r)&&e===null&&!o&&(e=!1),e=lV(i,s,e,r),iV(i,s,e,n,o,r)}}function lV(t,e,n,r){let i=KO(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Rg(null,t,e,n,r),n=Ha(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Rg(i,t,e,n,r),s===null){let c=dV(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Rg(null,t,e,c[1],r),c=Ha(c,e.attrs,r),hV(t,e,r,c))}else s=fV(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function dV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(oo(r)!==0)return t[ji(r)]}function hV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ji(i)]=r}function fV(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Ha(r,o,n)}return Ha(r,e.attrs,n)}function Rg(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ha(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ha(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),yk(t,o,n?!0:e[++s]))}return t===void 0?null:t}function pV(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=rV(u)?AI(c,e,n,i,oo(u),o):void 0;if(!dd(l)){dd(s)||tV(u)&&(s=AI(c,null,n,i,a,o));let d=cD(co(),n);gF(r,o,d,i,s)}}function AI(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[i+1];h===Hi&&(h=d?Lt:void 0);let f=d?Dg(h,r):l===r?h:void 0;if(u&&!dd(f)&&(f=Dg(c,r)),dd(f)&&(a=f,o))return a;let p=t[i+1];i=o?ji(p):oo(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Dg(c,r))}return a}function dd(t){return t!==void 0}function gV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=pt(Xm(t)))),t}function mV(t,e){return(t.flags&(e?8:16))!==0}function Hb(t){let e=t[Ba]??[],r=t[We][Ve];for(let i of e)yV(i,r);t[Ba]=Lt}function yV(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[od];for(;n<i;){let s=r.nextSibling;ab(e,r,!1),r=s,n++}}}function zb(t){Hb(t);for(let e=Bt;e<t.length;e++)hd(t[e])}function hd(t){let e=t[ce];for(let n=$t;n<e.bindingStartIndex;n++)if(on(t[n])){let r=t[n];zb(r)}else Vn(t[n])&&hd(t[n])}function vV(t){let e=t._views;for(let n of e){let r=AF(n);if(r!==null&&r[Ut]!==null)if(Vn(r))hd(r);else{let i=r[Ut];hd(i),zb(r)}}}var _V=new RegExp(`^(\\d+)*(${hb}|${db})*(.*)`);function wV(t){let e=t.match(_V),[n,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,u,l]of s.matchAll(/(f|n)(\d*)/g)){let d=parseInt(l,10)||1;a.push(u,d)}return[o,...a]}function EV(t){return!t.prev&&t.parent?.type===8}function Ng(t){return t.index-$t}function Rd(t,e,n,r){let i=null,s=Ng(r),o=t.data[CF];if(o?.[s])i=IV(o[s],n);else if(e.firstChild===r)i=t.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(EV(r)){let u=Ng(r.parent);i=nm(t,u)}else{let u=zt(c,n);if(a)i=u.firstChild;else{let l=Ng(c),d=nm(t,l);if(c.type===2&&d){let f=ty(t,l)+1;i=Nd(f,d)}else i=u.nextSibling}}}return i}function Nd(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function CV(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case tm.FirstChild:n=n.firstChild;break;case tm.NextSibling:n=n.nextSibling;break}}return n}function IV(t,e){let[n,...r]=wV(t),i;if(n===db)i=e[sn][Ut];else if(n===hb)i=Lk(e[sn][Ut]);else{let s=Number(n);i=wn(e[s+$t])}return CV(i,r)}function DV(t,e){let n=[];for(let r of e)for(let i=0;i<(r[fb]??1);i++){let s={data:r,firstChild:null};r[od]>0&&(s.firstChild=t,t=Nd(r[od],t)),n.push(s)}return[t,n]}var qb=(t,e)=>null;function bV(t,e){let n=t[Ba];return!e||n===null||n.length===0?null:n[0].data[EF]===e?n.shift():(Hb(t),null)}function TV(){qb=bV}function MI(t,e){return qb(t,e)}function SV(t,e,n,r){let i=e.tView,o=t[K]&4096?4096:16,a=Ad(t,i,n,o,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[_d]=c;let u=t[ja];return u!==null&&(a[ja]=u.createEmbeddedView(i)),ly(i,a,n),a}function xI(t,e){return!e||e.firstChild===null||id(t)}function AV(t,e,n,r=!0){let i=e[ce];if(nF(i,e,t,n),r){let o=Xg(n,t),a=e[Ve],c=Qm(a,t[hr]);c!==null&&Jk(i,t[En],a,e,c,o)}let s=e[dr];s!==null&&s.firstChild!==null&&(s.firstChild=null)}var tc=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=MV;let t=e;return t})();function MV(){let t=an();return PV(t,Pe())}var xV=tc,Gb=class extends xV{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Sd(this._hostTNode,this._hostLView)}get injector(){return new Pi(this._hostTNode,this._hostLView)}get parentInjector(){let e=jm(this._hostTNode,this._hostLView);if(AD(e)){let n=Jl(e,this._hostLView),r=Xl(e),i=n[ce].data[r+8];return new Pi(i,n)}else return new Pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=PI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Bt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=MI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,xI(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!pk(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new so(jr(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let g=(o?u:this.parentInjector).get(Ht,null);g&&(s=g)}let l=jr(c.componentType??{}),d=MI(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,s);return this.insertImpl(f.hostView,a,xI(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(xO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[We],u=new Gb(c,c[En],c[We]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return AV(o,i,s,r),e.attachToViewContainerRef(),LD(Og(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=PI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Zg(this._lContainer,n);r&&(td(Og(this._lContainer),n),ib(r[ce],r))}detach(e){let n=this._adjustIndex(e,-1),r=Zg(this._lContainer,n);return r&&td(Og(this._lContainer),n)!=null?new Li(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function PI(t){return t[Ql]}function Og(t){return t[Ql]||(t[Ql]=[])}function PV(t,e){let n,r=e[t.index];return on(r)?n=r:(n=kb(r,e,null,t),e[t.index]=n,xd(e,n)),Wb(n,e,t,r),new Gb(n,t,e)}function RV(t,e){let n=t[Ve],r=n.createComment(""),i=zt(e,t),s=Qm(n,i);return sd(n,s,r,uF(n,i),!1),r}var Wb=Kb,dy=(t,e,n)=>!1;function NV(t,e,n){return dy(t,e,n)}function Kb(t,e,n,r){if(t[hr])return;let i;n.type&8?i=wn(r):i=RV(e,n),t[hr]=i}function OV(t,e,n){if(t[hr]&&t[Ba])return!0;let r=n[dr],i=e.index-$t;if(!r||Uk(e)||bd(r,i))return!1;let o=nm(r,i),a=r.data[Jm]?.[i],[c,u]=DV(o,a);return t[hr]=c,t[Ba]=u,!0}function kV(t,e,n,r){dy(t,n,e)||Kb(t,e,n,r)}function FV(){Wb=kV,dy=OV}function VV(t,e,n,r,i,s,o,a,c){let u=e.consts,l=Md(e,t,4,o||null,Zl(u,a));Pb(e,n,l,Zl(u,c)),Lm(e,l);let d=l.tView=sy(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function zi(t,e,n,r,i,s,o,a){let c=Pe(),u=Cn(),l=t+$t,d=u.firstCreatePass?VV(l,u,c,e,n,r,i,s,o):u.data[l];Ka(d,!1);let h=Qb(u,c,d,t);Vm()&&Ym(u,c,h,d),Fi(h,c);let f=kb(h,c,h,d);return c[l]=f,xd(c,f),NV(f,d,c),Rm(d)&&Sb(u,c,d),o!=null&&Ab(c,d,a),zi}var Qb=Yb;function Yb(t,e,n,r){return qr(!0),e[Ve].createComment("")}function LV(t,e,n,r){let i=e[dr],s=!i||Wa()||bd(i,r);if(qr(s),s)return Yb(t,e,n,r);let o=i.data[wF]?.[r]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let a=Rd(i,t,e,n);Dd(i,r,a);let c=ty(i,r);return Nd(c,a)}function jV(){Qb=LV}function BV(t,e,n,r,i,s){let o=e.consts,a=Zl(o,i),c=Md(e,t,2,r,a);return Pb(e,n,c,Zl(o,s)),c.attrs!==null&&Em(c,c.attrs,!1),c.mergedAttrs!==null&&Em(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function I(t,e,n,r){let i=Pe(),s=Cn(),o=$t+t,a=i[Ve],c=s.firstCreatePass?BV(o,s,i,e,n,r):s.data[o],u=Zb(s,i,c,a,e,t);i[o]=u;let l=Rm(c);return Ka(c,!0),lb(a,u,c),(c.flags&32)!==32&&Vm()&&Ym(s,i,u,c),OO()===0&&Fi(u,i),kO(),l&&(Sb(s,i,c),Tb(s,c,i)),r!==null&&Ab(i,c),I}function M(){let t=an();yD()?UO():(t=t.parent,Ka(t,!1));let e=t;VO(e)&&jO(),FO();let n=Cn();return n.firstCreatePass&&(Lm(n,t),nD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&tk(e)&&SI(n,e,Pe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&nk(e)&&SI(n,e,Pe(),e.stylesWithoutHost,!1),M}function ae(t,e,n,r){return I(t,e,n,r),M(),ae}var Zb=(t,e,n,r,i,s)=>(qr(!0),Km(r,i,bD()));function UV(t,e,n,r,i,s){let o=e[dr],a=!o||Wa()||bd(o,s);if(qr(a),a)return Km(r,i,bD());let c=Rd(o,t,e,n);return mb(o,s)&&Dd(o,s,c.nextSibling),o&&(QD(n)||YD(c))&&Ga(n)&&(LO(n),cb(c)),c}function $V(){Zb=UV}var HV=(t,e,n,r)=>(qr(!0),nb(e[Ve],""));function zV(t,e,n,r){let i,s=e[dr],o=!s||Wa();if(qr(o),o)return nb(e[Ve],"");let a=Rd(s,t,e,n),c=PF(s,r);return Dd(s,r,a),i=Nd(c,a),i}function qV(){HV=zV}function Xb(){return Pe()}var fd="en-US";var GV=fd;function WV(t){YN(t,"Expected localeId to be defined"),typeof t=="string"&&(GV=t.toLowerCase().replace(/_/g,"-"))}function qi(t){return!!t&&typeof t.then=="function"}function Jb(t){return!!t&&typeof t.subscribe=="function"}function Wt(t,e,n,r){let i=Pe(),s=Cn(),o=an();return QV(s,i,i[Ve],o,t,e,r),Wt}function KV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Va],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function QV(t,e,n,r,i,s,o){let a=Rm(r),u=t.firstCreatePass&&v2(t),l=e[_n],d=y2(e),h=!0;if(r.type&3||o){let g=zt(r,e),y=o?o(g):g,w=d.length,S=o?O=>o(wn(O[r.index])):r.index,T=null;if(!o&&a&&(T=KV(t,e,i,r.index)),T!==null){let O=T.__ngLastListenerFn__||T;O.__ngNextListenerFn__=s,T.__ngLastListenerFn__=s,h=!1}else{s=NI(r,e,l,s,!1);let O=n.listen(y,i,s);d.push(s,O),u&&u.push(i,S,w,w+1)}}else s=NI(r,e,l,s,!1);let f=r.outputs,p;if(h&&f!==null&&(p=f[i])){let g=p.length;if(g)for(let y=0;y<g;y+=2){let w=p[y],S=p[y+1],U=e[w][S].subscribe(s),z=d.length;d.push(s,U),u&&u.push(i,r.index,z,-(z+1))}}}function RI(t,e,n,r){try{return kn(6,e,n),n(r)!==!1}catch(i){return Vb(t,i),!1}finally{kn(7,e,n)}}function NI(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?zr(t.index,e):e;ay(a);let c=RI(e,n,r,o),u=s.__ngNextListenerFn__;for(;u;)c=RI(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function Od(t=1){return YO(t)}function j(t,e=""){let n=Pe(),r=Cn(),i=t+$t,s=r.firstCreatePass?Md(r,i,1,e,null):r.data[i],o=eT(r,n,s,e,t);n[i]=o,Vm()&&Ym(r,n,o,s),Ka(s,!1)}var eT=(t,e,n,r,i)=>(qr(!0),tb(e[Ve],r));function YV(t,e,n,r,i){let s=e[dr],o=!s||Wa()||bd(s,i);return qr(o),o?tb(e[Ve],r):Rd(s,t,e,n)}function ZV(){eT=YV}function hy(t){return tT("",t,""),hy}function tT(t,e,n){let r=Pe(),i=eV(r,t,e,n);return i!==Hi&&_2(r,co(),i),tT}function XV(t,e,n){let r=Cn();if(r.firstCreatePass){let i=Ur(t);Tm(n,r.data,r.blueprint,i,!0),Tm(e,r.data,r.blueprint,i,!1)}}function Tm(t,e,n,r,i){if(t=Ct(t),Array.isArray(t))for(let s=0;s<t.length;s++)Tm(t[s],e,n,r,i);else{let s=Cn(),o=Pe(),a=an(),c=io(t)?t:Ct(t.provide),u=zD(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(io(t)||!t.multi){let f=new Oi(u,i,pe),p=Fg(c,e,i?l:l+h,d);p===-1?(qg(ed(a,o),s,c),kg(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{let f=Fg(c,e,l+h,d),p=Fg(c,e,l,l+h),g=f>=0&&n[f],y=p>=0&&n[p];if(i&&!y||!i&&!g){qg(ed(a,o),s,c);let w=tL(i?eL:JV,n.length,i,r,u);!i&&y&&(n[p].providerFactory=w),kg(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(w),o.push(w)}else{let w=nT(n[i?p:f],u,!i&&r);kg(s,t,f>-1?f:p,w)}!i&&r&&y&&n[p].componentProviders++}}}function kg(t,e,n,r){let i=io(e),s=Mk(e);if(i||s){let c=(s?Ct(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function nT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Fg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function JV(t,e,n,r){return Sm(this.multi,[])}function eL(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ro(n,n[ce],this.providerFactory.index,r);s=a.slice(0,o),Sm(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Sm(i,s);return s}function Sm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function tL(t,e,n,r,i){let s=new Oi(t,n,pe);return s.multi=[],s.index=e,s.componentProviders=0,nT(s,i,r&&!n),s}function nc(t,e=[]){return n=>{n.providersResolver=(r,i)=>XV(r,i?i(t):t,e)}}var $r=class{},za=class{};var pd=class extends $r{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ld(this);let i=ZI(e);this._bootstrapComponents=KD(i.bootstrap),this._r3Injector=qD(e,n,[{provide:$r,useValue:this},{provide:Td,useValue:this.componentFactoryResolver},...r],pt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gd=class extends za{constructor(e){super(),this.moduleType=e}create(e){return new pd(this.moduleType,e,[])}};function nL(t,e,n){return new pd(t,e,n)}var Am=class extends $r{constructor(e){super(),this.componentFactoryResolver=new ld(this),this.instance=null;let n=new $a([...e.providers,{provide:$r,useValue:this},{provide:Td,useValue:this.componentFactoryResolver}],e.parent||$m(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function kd(t,e,n=null){return new Am({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var rL=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=UD(!1,r.type),s=i.length>0?kd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=V({token:e,providedIn:"environment",factory:()=>new e(b(Ht))});let t=e;return t})();function rT(t){lo("NgStandalone"),t.getStandaloneInjector=e=>e.get(rL).getOrCreateStandaloneInjector(t)}function Gr(t,e,n,r){return sL(Pe(),$O(),t,e,n,r)}function iL(t,e){let n=t[e];return n===Hi?void 0:n}function sL(t,e,n,r,i,s){let o=e+n;return ec(t,o,i)?J2(t,o+1,s?r.call(s,i):r(i)):iL(t,o+1)}var fy=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=cL;let t=e;return t})(),oL=fy,aL=class extends oL{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=SV(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Li(i)}};function cL(){return uL(an(),Pe())}function uL(t,e){return t.type&4?new aL(e,t,Sd(t,e)):null}var Bl=null;function lL(t){Bl!==null&&(t.defaultEncapsulation!==Bl.defaultEncapsulation||t.preserveWhitespaces!==Bl.preserveWhitespaces)||(Bl=t)}var pr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},iT=new pr("17.0.8");var Fd=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Mm=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Vd=(()=>{let e=class e{compileModuleSync(r){return new gd(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=ZI(r),o=KD(s.declarations).reduce((a,c)=>{let u=jr(c);return u&&a.push(new so(u)),a},[]);return new Mm(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dL=new k("compilerOptions");var rc=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var py=new k(""),ic=new k(""),Ld=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,gy||(hL(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{oe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(b(oe),b(jd),b(ic))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),jd=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return gy?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function hL(t){gy=t}var gy,Bd=new k("Application Initializer"),sT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=A(Bd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(qi(o))r.push(o);else if(Jb(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ho=new k("appBootstrapListener");function fL(t,e,n){let r=new gd(n);return Promise.resolve(r)}function pL(){AC(()=>{throw new D(600,!1)})}function gL(t){return t.isBoundToModule}function mL(t,e,n){try{let r=n();return qi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function oT(t,e){return Array.isArray(e)?e.reduce(oT,t):N(N({},t),e)}var In=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=A(_b),this.componentTypes=[],this.components=[],this.isStable=A(rc).hasPendingTasks.pipe(G(r=>!r)),this._injector=A(Ht)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof ad;if(!this._injector.get(sT).done){let p="Cannot bootstrap as there are still asynchronous initializers running."+(!s&&YI(r)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new D(405,!1)}let a;s?a=r:a=this._injector.get(Td).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=gL(a)?void 0:this._injector.get($r),u=i||a.selector,l=a.create(Gt.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(py,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Gl(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new D(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Gl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ho,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Gl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new D(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Gl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function OI(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var Ul;function my(t){Ul??=new WeakMap;let e=Ul.get(t);if(e)return e;let n=t.isStable.pipe(Vt(r=>r)).toPromise().then(()=>{});return Ul.set(t,n),t.onDestroy(()=>Ul?.delete(t)),n}var yL=(()=>{let e=class e{constructor(){this.zone=A(oe),this.applicationRef=A(In)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vL(t){return[{provide:oe,useFactory:t},{provide:ki,multi:!0,useFactory:()=>{let e=A(yL,{optional:!0});return()=>e.initialize()}},{provide:ki,multi:!0,useFactory:()=>{let e=A(EL);return()=>{e.initialize()}}},{provide:_b,useFactory:_L}]}function _L(){let t=A(oe),e=A(jn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function wL(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var EL=(()=>{let e=class e{constructor(){this.subscription=new Ue,this.initialized=!1,this.zone=A(oe),this.pendingTasks=A(rc)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{oe.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{oe.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function CL(){return typeof $localize<"u"&&$localize.locale||fd}var yy=new k("LocaleId",{providedIn:"root",factory:()=>A(yy,se.Optional|se.SkipSelf)||CL()});var aT=new k("PlatformDestroyListeners"),cT=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=k2(i?.ngZone,wL({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{let o=nL(r.moduleType,this.injector,vL(()=>s)),a=o.injector.get(jn,null);return s.runOutsideAngular(()=>{let c=s.onError.subscribe({next:u=>{a.handleError(u)}});o.onDestroy(()=>{Gl(this._modules,o),c.unsubscribe()})}),mL(a,s,()=>{let c=o.injector.get(sT);return c.runInitializers(),c.donePromise.then(()=>{let u=o.injector.get(yy,fd);return WV(u||fd),this._moduleDoBootstrap(o),o})})})}bootstrapModule(r,i=[]){let s=oT({},i);return fL(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(r){let i=r.injector.get(In);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(s=>i.bootstrap(s));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new D(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new D(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(aT,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(b(Gt))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Oa=null,uT=new k("AllowMultipleToken");function IL(t){if(Oa&&!Oa.get(uT,!1))throw new D(400,!1);pL(),Oa=t;let e=t.get(cT);return TL(t),e}function vy(t,e,n=[]){let r=`Platform: ${e}`,i=new k(r);return(s=[])=>{let o=lT();if(!o||o.injector.get(uT,!1)){let a=[...n,...s,{provide:i,useValue:!0}];t?t(a):IL(DL(a,r))}return bL(i)}}function DL(t=[],e){return Gt.create({name:e,providers:[{provide:Cd,useValue:"platform"},{provide:aT,useValue:new Set([()=>Oa=null])},...t]})}function bL(t){let e=lT();if(!e)throw new D(401,!1);return e}function lT(){return Oa?.get(cT)??null}function TL(t){t.get(Hm,null)?.forEach(n=>n())}function _y(){return!1}var dT=vy(null,"core",[]),hT=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(b(In))},e.\u0275mod=Ne({type:e}),e.\u0275inj=Re({});let t=e;return t})();var kI=!1;function SL(){kI||(kI=!0,SF(),$V(),ZV(),qV(),jV(),FV(),TV(),ZF())}function AL(t,e){return my(t)}function fT(){return Ya([{provide:Vl,useFactory:()=>{let t=!0;return Ra()&&(t=!!A($i,{optional:!0})?.get(pb,null)),t&&lo("NgHydration"),t}},{provide:ki,useValue:()=>{Ra()&&A(Vl)&&(ML(),SL())},multi:!0},{provide:Eb,useFactory:()=>Ra()&&A(Vl)},{provide:ho,useFactory:()=>{if(Ra()&&A(Vl)){let t=A(In),e=A(Gt);return()=>{AL(t,e).then(()=>{oe.assertInAngularZone(),vV(t)})}}return()=>{}},multi:!0}])}function ML(){let t=Id(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===bF){e=n;break}if(!e)throw new D(-507,!1)}function Ud(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function pT(t){let e=jr(t);if(!e)return null;let n=new so(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Ey=null;function Hn(){return Ey}function _T(t){Ey||(Ey=t)}var $d=class{},ut=new k("DocumentToken"),Dy=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>(()=>A(RL))(),providedIn:"platform"});let t=e;return t})(),wT=new k("Location Initialized"),RL=(()=>{let e=class e extends Dy{constructor(){super(),this._doc=A(ut),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hn().getBaseHref(this._doc)}onPopState(r){let i=Hn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Hn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function by(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function gT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function vr(t){return t&&t[0]!=="?"?"?"+t:t}var Gi=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>(()=>A(Ty))(),providedIn:"root"});let t=e;return t})(),ET=new k("appBaseHref"),Ty=(()=>{let e=class e extends Gi{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??A(ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return by(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+vr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+vr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+vr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(b(Dy),b(ET,8))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),CT=(()=>{let e=class e extends Gi{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return i==null&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=by(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+vr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+vr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(b(Dy),b(ET,8))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),fo=(()=>{let e=class e{constructor(r){this._subject=new Ge,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=kL(gT(mT(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+vr(i))}normalize(r){return e.stripTrailingSlash(OL(this._basePath,mT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+vr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+vr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=vr,e.joinWithSlash=by,e.stripTrailingSlash=gT,e.\u0275fac=function(i){return new(i||e)(b(Gi))},e.\u0275prov=V({token:e,factory:()=>NL(),providedIn:"root"});let t=e;return t})();function NL(){return new fo(b(Gi))}function OL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function mT(t){return t.replace(/\/index.html$/,"")}function kL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function IT(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var wy=/\s+/,yT=[],zd=(()=>{let e=class e{constructor(r,i,s,o){this._iterableDiffers=r,this._keyValueDiffers=i,this._ngEl=s,this._renderer=o,this.initialClasses=yT,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(wy):yT}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(wy):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(wy).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(pe(ry),pe(iy),pe(Un),pe(mr))},e.\u0275dir=gt({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var qd=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Cy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){vT("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){vT("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(pe(tc),pe(fy))},e.\u0275dir=gt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Cy=class{constructor(){this.$implicit=null,this.ngIf=null}};function vT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${pt(e)}'.`)}var DT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ne({type:e}),e.\u0275inj=Re({});let t=e;return t})(),bT="browser",FL="server";function Wi(t){return t===FL}var TT=(()=>{let e=class e{};e.\u0275prov=V({token:e,providedIn:"root",factory:()=>new Iy(b(ut),window)});let t=e;return t})(),Iy=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let n=VL(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function VL(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Hd=class{};var Wd=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var OT=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(OT||{}),Sy=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new Wd,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Kd=class t extends Sy{constructor(e={}){super(e),this.type=OT.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var jL=new k("");var AT="b",MT="h",xT="s",PT="st",RT="u",NT="rt",Gd=new k(""),BL=["GET","HEAD"];function UL(t,e){let l=A(Gd),{isCacheActive:n}=l,r=hC(l,["isCacheActive"]),{transferCache:i,method:s}=t;if(!n||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!BL.includes(s)||i===!1||r.filter?.(t)===!1)return e(t);let o=A($i),a=HL(t),c=o.get(a,null),u=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(u=i.includeHeaders),c){let{[AT]:d,[NT]:h,[MT]:f,[xT]:p,[PT]:g,[RT]:y}=c,w=d;switch(h){case"arraybuffer":w=new TextEncoder().encode(d).buffer;break;case"blob":w=new Blob([d]);break}let S=new Wd(f);return $(new Kd({body:w,headers:S,status:p,statusText:g,url:y}))}return e(t).pipe(Fe(d=>{d instanceof Kd&&o.set(a,{[AT]:d.body,[MT]:$L(d.headers,u),[xT]:d.status,[PT]:d.statusText,[RT]:d.url||"",[NT]:t.responseType})}))}function $L(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function HL(t){let{params:e,method:n,responseType:r,url:i}=t,s=e.keys().sort().map(c=>`${c}=${e.getAll(c)}`).join("&"),o=n+"."+r+"."+i+"?"+s,a=zL(o);return a}function zL(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483647+1,e.toString()}function kT(t){return[{provide:Gd,useFactory:()=>(lo("NgHttpTransferCache"),N({isCacheActive:!0},t))},{provide:jL,useValue:UL,multi:!0,deps:[$i,Gd]},{provide:ho,multi:!0,useFactory:()=>{let e=A(In),n=A(Gd);return()=>{my(e).then(()=>{n.isCacheActive=!1})}}}]}var xy=class extends $d{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Py=class t extends xy{static makeCurrent(){_T(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=qL();return n==null?null:GL(n)}resetBaseElement(){sc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return IT(document.cookie,e)}},sc=null;function qL(){return sc=sc||document.querySelector("base"),sc?sc.getAttribute("href"):null}function GL(t){return new URL(t,document.baseURI).pathname}var Ry=class{addToWindow(e){jt.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new D(5103,!1);return s},jt.getAllAngularTestabilities=()=>e.getAllTestabilities(),jt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=jt.getAllAngularTestabilities(),s=i.length,o=!1,a=function(c){o=o||c,s--,s==0&&r(o)};i.forEach(c=>{c.whenStable(a)})};jt.frameworkStabilizers||(jt.frameworkStabilizers=[]),jt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?Hn().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},WL=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),Ny=new k("EventManagerPlugins"),LT=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new D(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(b(Ny),b(oe))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),Qd=class{constructor(e){this._doc=e}},Ay="ng-app-id",jT=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Wi(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Ay}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Ay),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Ay,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(b(ut),b(Za),b(qm,8),b(It))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),My={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ky=/%COMP%/g,BT="%COMP%",KL=`_nghost-${BT}`,QL=`_ngcontent-${BT}`,YL=!0,ZL=new k("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>YL});function XL(t){return QL.replace(ky,t)}function JL(t){return KL.replace(ky,t)}function UT(t,e){return e.map(n=>n.replace(ky,t))}var Yd=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Wi(c),this.defaultRenderer=new oc(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ln.ShadowDom&&(i=me(N({},i),{encapsulation:Ln.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Zd?s.applyToHost(r):s instanceof ac&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Ln.Emulated:o=new Zd(u,l,i,this.appId,d,a,c,h);break;case Ln.ShadowDom:return new Oy(u,l,r,i,a,c,this.nonce,h);default:o=new ac(u,l,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(b(LT),b(jT),b(Za),b(ZL),b(ut),b(It),b(oe),b(qm))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),oc=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(My[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(FT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(FT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new D(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=My[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=My[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(fr.DashCase|fr.Important)?e.style.setProperty(n,r,i&fr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&fr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Hn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function FT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Oy=class extends oc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=UT(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ac=class extends oc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?UT(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Zd=class extends ac{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=XL(u),this.hostAttr=JL(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},ej=(()=>{let e=class e extends Qd{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(b(ut))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),VT=["alt","control","meta","shift"],tj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},rj=(()=>{let e=class e extends Qd{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),VT.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=tj[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),VT.forEach(a=>{if(a!==s){let c=nj[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(b(ut))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})();function ij(){Py.makeCurrent()}function sj(){return new jn}function oj(){return GD(document),document}var aj=[{provide:It,useValue:bT},{provide:Hm,useValue:ij,multi:!0},{provide:ut,useFactory:oj,deps:[]}],$T=vy(dT,"browser",aj),cj=new k(""),uj=[{provide:ic,useClass:Ry,deps:[]},{provide:py,useClass:Ld,deps:[oe,jd,ic]},{provide:Ld,useClass:Ld,deps:[oe,jd,ic]}],lj=[{provide:Cd,useValue:"root"},{provide:jn,useFactory:sj,deps:[]},{provide:Ny,useClass:ej,multi:!0,deps:[ut,oe,It]},{provide:Ny,useClass:rj,multi:!0,deps:[ut]},Yd,jT,LT,{provide:Vi,useExisting:Yd},{provide:Hd,useClass:WL,deps:[]},[]],Xd=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Za,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(b(cj,12))},e.\u0275mod=Ne({type:e}),e.\u0275inj=Re({providers:[...lj,...uj],imports:[DT,hT]});let t=e;return t})();function dj(){return new Fy(b(ut))}var Fy=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(b(ut))},e.\u0275prov=V({token:e,factory:function(i){let s=null;return i?s=new i:s=dj(),s},providedIn:"root"});let t=e;return t})();function HT(...t){let e=[],n=new Set,r=n.has(1);for(let{\u0275providers:i,\u0275kind:s}of t)n.add(s),i.length&&e.push(i);return Ya([[],fT(),n.has(0)||r?[]:kT({}),e])}var J="primary",Cc=Symbol("RouteTitle"),Uy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function vo(t){return new Uy(t)}function hj(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function fj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!zn(t[n],e[n]))return!1;return!0}function zn(t,e){let n=t?$y(t):void 0,r=e?$y(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!JT(t[i],e[i]))return!1;return!0}function $y(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function JT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function eS(t){return t.length>0?t[t.length-1]:null}function Yr(t){return fg(t)?t:qi(t)?le(Promise.resolve(t)):$(t)}var pj={exact:nS,subset:rS},tS={exact:gj,subset:mj,ignored:()=>!0};function qT(t,e,n){return pj[n.paths](t.root,e.root,n.matrixParams)&&tS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function gj(t,e){return zn(t,e)}function nS(t,e,n){if(!Qi(t.segments,e.segments)||!th(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!nS(t.children[r],e.children[r],n))return!1;return!0}function mj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>JT(t[n],e[n]))}function rS(t,e,n){return iS(t,e,e.segments,n)}function iS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Qi(i,n)||e.hasChildren()||!th(i,n,r))}else if(t.segments.length===n.length){if(!Qi(t.segments,n)||!th(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!rS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Qi(t.segments,i)||!th(t.segments,i,r)||!t.children[J]?!1:iS(t.children[J],e,s,r)}}function th(t,e,n){return e.every((r,i)=>tS[n](t[i].parameters,r.parameters))}var Wr=class{constructor(e=new ye([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vo(this.queryParams)),this._queryParamMap}toString(){return _j.serialize(this)}},ye=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nh(this)}},Ki=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=vo(this.parameters)),this._parameterMap}toString(){return oS(this)}};function yj(t,e){return Qi(t,e)&&t.every((n,r)=>zn(n.parameters,e[r].parameters))}function Qi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function vj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===J&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==J&&(n=n.concat(e(i,r)))}),n}var Ic=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>(()=>new pc)(),providedIn:"root"});let t=e;return t})(),pc=class{parse(e){let n=new zy(e);return new Wr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${cc(e.root,!0)}`,r=Cj(e.queryParams),i=typeof e.fragment=="string"?`#${wj(e.fragment)}`:"";return`${n}${r}${i}`}},_j=new pc;function nh(t){return t.segments.map(e=>oS(e)).join("/")}function cc(t,e){if(!t.hasChildren())return nh(t);if(e){let n=t.children[J]?cc(t.children[J],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==J&&r.push(`${i}:${cc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=vj(t,(r,i)=>i===J?[cc(t.children[J],!1)]:[`${i}:${cc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[J]!=null?`${nh(t)}/${n[0]}`:`${nh(t)}/(${n.join("//")})`}}function sS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jd(t){return sS(t).replace(/%3B/gi,";")}function wj(t){return encodeURI(t)}function Hy(t){return sS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rh(t){return decodeURIComponent(t)}function GT(t){return rh(t.replace(/\+/g,"%20"))}function oS(t){return`${Hy(t.path)}${Ej(t.parameters)}`}function Ej(t){return Object.keys(t).map(e=>`;${Hy(e)}=${Hy(t[e])}`).join("")}function Cj(t){let e=Object.keys(t).map(n=>{let r=t[n];return Array.isArray(r)?r.map(i=>`${Jd(n)}=${Jd(i)}`).join("&"):`${Jd(n)}=${Jd(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}var Ij=/^[^\/()?;#]+/;function Vy(t){let e=t.match(Ij);return e?e[0]:""}var Dj=/^[^\/()?;=#]+/;function bj(t){let e=t.match(Dj);return e?e[0]:""}var Tj=/^[^=?&#]+/;function Sj(t){let e=t.match(Tj);return e?e[0]:""}var Aj=/^[^&#]+/;function Mj(t){let e=t.match(Aj);return e?e[0]:""}var zy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[J]=new ye(e,n)),r}parseSegment(){let e=Vy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new D(4009,!1);return this.capture(e),new Ki(rh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=bj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Vy(this.remaining);i&&(r=i,this.capture(r))}e[rh(n)]=rh(r)}parseQueryParam(e){let n=Sj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Mj(this.remaining);o&&(r=o,this.capture(r))}let i=GT(n),s=GT(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Vy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new D(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=J);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[J]:new ye([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new D(4011,!1)}};function aS(t){return t.segments.length>0?new ye([],{[J]:t}):t}function cS(t){let e={};for(let r of Object.keys(t.children)){let i=t.children[r],s=cS(i);if(r===J&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ye(t.segments,e);return xj(n)}function xj(t){if(t.numberOfChildren===1&&t.children[J]){let e=t.children[J];return new ye(t.segments.concat(e.segments),e.children)}return t}function _o(t){return t instanceof Wr}function Pj(t,e,n=null,r=null){let i=uS(t);return lS(i,e,n,r)}function uS(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new ye(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=aS(r);return e??i}function lS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Ly(i,i,i,n,r);let s=Rj(e);if(s.toRoot())return Ly(i,i,new ye([],{}),n,r);let o=Nj(s,i,t),a=o.processChildren?dc(o.segmentGroup,o.index,s.commands):hS(o.segmentGroup,o.index,s.commands);return Ly(i,o.segmentGroup,a,n,r)}function ih(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function gc(t){return typeof t=="object"&&t!=null&&t.outlets}function Ly(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=dS(t,e,n);let a=aS(cS(o));return new Wr(a,s,i)}function dS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=dS(s,e,n)}),new ye(t.segments,r)}var sh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ih(r[0]))throw new D(4003,!1);let i=r.find(gc);if(i&&i!==eS(r))throw new D(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Rj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new sh(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new sh(n,e,r)}var mo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Nj(t,e,n){if(t.isAbsolute)return new mo(e,!0,0);if(!n)return new mo(e,!1,NaN);if(n.parent===null)return new mo(n,!0,0);let r=ih(t.commands[0])?0:1,i=n.segments.length-1+r;return Oj(n,i,t.numberOfDoubleDots)}function Oj(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new D(4005,!1);i=r.segments.length}return new mo(r,!1,i-s)}function kj(t){return gc(t[0])?t[0].outlets:{[J]:t}}function hS(t,e,n){if(t||(t=new ye([],{})),t.segments.length===0&&t.hasChildren())return dc(t,e,n);let r=Fj(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ye(t.segments.slice(0,r.pathIndex),{});return s.children[J]=new ye(t.segments.slice(r.pathIndex),t.children),dc(s,0,i)}else return r.match&&i.length===0?new ye(t.segments,{}):r.match&&!t.hasChildren()?qy(t,e,n):r.match?dc(t,0,i):qy(t,e,n)}function dc(t,e,n){if(n.length===0)return new ye(t.segments,{});{let r=kj(n),i={};if(Object.keys(r).some(s=>s!==J)&&t.children[J]&&t.numberOfChildren===1&&t.children[J].segments.length===0){let s=dc(t.children[J],e,n);return new ye(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=hS(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ye(t.segments,i)}}function Fj(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(gc(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!KT(c,u,o))return s;r+=2}else{if(!KT(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function qy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(gc(s)){let c=Vj(s.outlets);return new ye(r,c)}if(i===0&&ih(n[0])){let c=t.segments[e];r.push(new Ki(c.path,WT(n[0]))),i++;continue}let o=gc(s)?s.outlets[J]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ih(a)?(r.push(new Ki(o,WT(a))),i+=2):(r.push(new Ki(o,{})),i++)}return new ye(r,{})}function Vj(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=qy(new ye([],{}),0,r))}),e}function WT(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function KT(t,e,n){return t==n.path&&zn(e,n.parameters)}var hc="imperative",cn=class{constructor(e,n){this.id=e,this.url=n}},wo=class extends cn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},_r=class extends cn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Kr=class extends cn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qr=class extends cn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}},mc=class extends cn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},oh=class extends cn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gy=class extends cn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wy=class extends cn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ky=class extends cn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qy=class extends cn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yy=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zy=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xy=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jy=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ev=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tv=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ah=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},yc=class{},vc=class{constructor(e){this.url=e}};var nv=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Dc,this.attachRef=null}},Dc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new nv,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ch=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=rv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=rv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=iv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return iv(e,this._root).map(n=>n.value)}};function rv(t,e){if(t===e.value)return e;for(let n of e.children){let r=rv(t,n);if(r)return r}return null}function iv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=iv(t,n);if(r.length)return r.unshift(e),r}return[]}var Kt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function go(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var uh=class extends ch{constructor(e,n){super(e),this.snapshot=n,pv(this,e)}toString(){return this.snapshot.toString()}};function fS(t,e){let n=Lj(t,e),r=new ct([new Ki("",{})]),i=new ct({}),s=new ct({}),o=new ct({}),a=new ct(""),c=new Eo(r,i,o,a,s,J,e,n.root);return c.snapshot=n.root,new uh(new Kt(c,[]),n)}function Lj(t,e){let n={},r={},i={},s="",o=new _c([],n,i,s,r,J,e,null,{});return new lh("",new Kt(o,[]))}var Eo=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(G(u=>u[Cc]))??$(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(G(e=>vo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(G(e=>vo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function fv(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),t.params),data:N(N({},e.data),t.data),resolve:N(N(N(N({},t.data),e.data),i?.data),t._resolvedData)}:r={params:N({},t.params),data:N({},t.data),resolve:N(N({},t.data),t._resolvedData??{})},i&&gS(i)&&(r.resolve[Cc]=i.title),r}var _c=class{get title(){return this.data?.[Cc]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vo(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},lh=class extends ch{constructor(e,n){super(n),this.url=e,pv(this,n)}toString(){return pS(this._root)}};function pv(t,e){e.value._routerState=t,e.children.forEach(n=>pv(t,n))}function pS(t){let e=t.children.length>0?` { ${t.children.map(pS).join(", ")} } `:"";return`${t.value}${e}`}function jy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,zn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),zn(e.params,n.params)||t.paramsSubject.next(n.params),fj(e.url,n.url)||t.urlSubject.next(n.url),zn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function sv(t,e){let n=zn(t.params,e.params)&&yj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||sv(t.parent,e.parent))}function gS(t){return typeof t.title=="string"||t.title===null}var jj=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=J,this.activateEvents=new Ge,this.deactivateEvents=new Ge,this.attachEvents=new Ge,this.detachEvents=new Ge,this.parentContexts=A(Dc),this.location=A(tc),this.changeDetector=A(Ja),this.environmentInjector=A(Ht),this.inputBinder=A(gh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new D(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new ov(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=gt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Hr]});let t=e;return t})(),ov=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Eo?this.route:e===Dc?this.childContexts:this.parent.get(e,n)}},gh=new k(""),QT=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=xa([i.queryParams,i.params,i.data]).pipe(xe(([o,a,c],u)=>(c=N(N(N({},o),a),c),u===0?$(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=pT(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})();function Bj(t,e,n){let r=wc(t,e._root,n?n._root:void 0);return new uh(r,e)}function wc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Uj(t,e,n);return new Kt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>wc(t,a)),o}}let r=$j(e.value),i=e.children.map(s=>wc(t,s));return new Kt(r,i)}}function Uj(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return wc(t,r,i);return wc(t,r)})}function $j(t){return new Eo(new ct(t.url),new ct(t.params),new ct(t.queryParams),new ct(t.fragment),new ct(t.data),t.outlet,t.component,t)}var mS="ngNavigationCancelingError";function yS(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=_o(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=vS(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function vS(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[mS]=!0,r.cancellationCode=e,n&&(r.url=n),r}function Hj(t){return _S(t)&&_o(t.url)}function _S(t){return t&&t[mS]}var zj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Bn({type:e,selectors:[["ng-component"]],standalone:!0,features:[rT],decls:1,vars:0,template:function(i,s){i&1&&ae(0,"router-outlet")},dependencies:[jj],encapsulation:2});let t=e;return t})();function qj(t,e){return t.providers&&!t._injector&&(t._injector=kd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function gv(t){let e=t.children&&t.children.map(gv),n=e?me(N({},t),{children:e}):N({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==J&&(n.component=zj),n}function qn(t){return t.outlet||J}function Gj(t,e){let n=t.filter(r=>qn(r)===e);return n.push(...t.filter(r=>qn(r)!==e)),n}function bc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Wj=(t,e,n,r)=>G(i=>(new av(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),av=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),jy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=go(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=go(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=go(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=go(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new tv(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Jy(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(jy(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),jy(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=bc(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},dh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},yo=class{constructor(e,n){this.component=e,this.route=n}};function Kj(t,e,n){let r=t._root,i=e?e._root:null;return uc(r,i,n,[r.value])}function Qj(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Io(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!LI(t)?t:e.get(t):r}function uc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=go(e);return t.children.forEach(o=>{Yj(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>fc(a,n.getContext(o),i)),i}function Yj(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Zj(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new dh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?uc(t,e,a?a.children:null,r,i):uc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new yo(a.outlet.component,o))}else o&&fc(e,a,i),i.canActivateChecks.push(new dh(r)),s.component?uc(t,null,a?a.children:null,r,i):uc(t,null,n,r,i);return i}function Zj(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Qi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Qi(t.url,e.url)||!zn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sv(t,e)||!zn(t.queryParams,e.queryParams);case"paramsChange":default:return!sv(t,e)}}function fc(t,e,n){let r=go(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?fc(o,e.children.getContext(s),n):fc(o,null,n):fc(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new yo(e.outlet.component,i)):n.canDeactivateChecks.push(new yo(null,i)):n.canDeactivateChecks.push(new yo(null,i))}function Tc(t){return typeof t=="function"}function Xj(t){return typeof t=="boolean"}function Jj(t){return t&&Tc(t.canLoad)}function e4(t){return t&&Tc(t.canActivate)}function t4(t){return t&&Tc(t.canActivateChild)}function n4(t){return t&&Tc(t.canDeactivate)}function r4(t){return t&&Tc(t.canMatch)}function wS(t){return t instanceof ur||t?.name==="EmptyError"}var eh=Symbol("INITIAL_VALUE");function Co(){return xe(t=>xa(t.map(e=>e.pipe(lr(1),xi(eh)))).pipe(G(e=>{for(let n of e)if(n!==!0){if(n===eh)return eh;if(n===!1||n instanceof Wr)return n}return!0}),rt(e=>e!==eh),lr(1)))}function i4(t,e){return qe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?$(me(N({},n),{guardsResult:!0})):s4(o,r,i,t).pipe(qe(a=>a&&Xj(a)?o4(r,s,t,e):$(a)),G(a=>me(N({},n),{guardsResult:a})))})}function s4(t,e,n,r){return le(t).pipe(qe(i=>d4(i.component,i.route,n,e,r)),Vt(i=>i!==!0,!0))}function o4(t,e,n,r){return le(e).pipe(kr(i=>zs(c4(i.route.parent,r),a4(i.route,r),l4(t,i.path,n),u4(t,i.route,n))),Vt(i=>i!==!0,!0))}function a4(t,e){return t!==null&&e&&e(new ev(t)),$(!0)}function c4(t,e){return t!==null&&e&&e(new Xy(t)),$(!0)}function u4(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return $(!0);let i=r.map(s=>Pl(()=>{let o=bc(e)??n,a=Io(s,o),c=e4(a)?a.canActivate(e,t):gr(o,()=>a(e,t));return Yr(c).pipe(Vt())}));return $(i).pipe(Co())}function l4(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Qj(o)).filter(o=>o!==null).map(o=>Pl(()=>{let a=o.guards.map(c=>{let u=bc(o.node)??n,l=Io(c,u),d=t4(l)?l.canActivateChild(r,t):gr(u,()=>l(r,t));return Yr(d).pipe(Vt())});return $(a).pipe(Co())}));return $(s).pipe(Co())}function d4(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return $(!0);let o=s.map(a=>{let c=bc(e)??i,u=Io(a,c),l=n4(u)?u.canDeactivate(t,e,n,r):gr(c,()=>u(t,e,n,r));return Yr(l).pipe(Vt())});return $(o).pipe(Co())}function h4(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return $(!0);let s=i.map(o=>{let a=Io(o,t),c=Jj(a)?a.canLoad(e,n):gr(t,()=>a(e,n));return Yr(c)});return $(s).pipe(Co(),ES(r))}function ES(t){return ag(Fe(e=>{if(_o(e))throw yS(t,e)}),G(e=>e===!0))}function f4(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return $(!0);let s=i.map(o=>{let a=Io(o,t),c=r4(a)?a.canMatch(e,n):gr(t,()=>a(e,n));return Yr(c)});return $(s).pipe(Co(),ES(r))}var Ec=class{constructor(e){this.segmentGroup=e||null}},hh=class extends Error{constructor(e){super(),this.urlTree=e}};function po(t){return Hs(new Ec(t))}function p4(t){return Hs(new D(4e3,!1))}function g4(t){return Hs(vS(!1,3))}var cv=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return $(r);if(i.numberOfChildren>1||!i.children[J])return p4(e.redirectTo);i=i.children[J]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new hh(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Wr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ye(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new D(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},uv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function m4(t,e,n,r,i){let s=mv(t,e,n);return s.matched?(r=qj(e,r),f4(r,e,n,i).pipe(G(o=>o===!0?s:N({},uv)))):$(s)}function mv(t,e,n){if(e.path==="**")return y4(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?N({},uv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||hj)(n,t,e);if(!i)return N({},uv);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?N(N({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function y4(t){return{matched:!0,parameters:t.length>0?eS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function YT(t,e,n,r){return n.length>0&&w4(t,n,r)?{segmentGroup:new ye(e,_4(r,new ye(n,t.children))),slicedSegments:[]}:n.length===0&&E4(t,n,r)?{segmentGroup:new ye(t.segments,v4(t,e,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ye(t.segments,t.children),slicedSegments:n}}function v4(t,e,n,r,i){let s={};for(let o of r)if(mh(t,n,o)&&!i[qn(o)]){let a=new ye([],{});s[qn(o)]=a}return N(N({},i),s)}function _4(t,e){let n={};n[J]=e;for(let r of t)if(r.path===""&&qn(r)!==J){let i=new ye([],{});n[qn(r)]=i}return n}function w4(t,e,n){return n.some(r=>mh(t,e,r)&&qn(r)!==J)}function E4(t,e,n){return n.some(r=>mh(t,e,r))}function mh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function C4(t,e,n,r){return qn(t)!==r&&(r===J||!mh(e,n,t))?!1:mv(e,t,n).matched}function I4(t,e,n){return e.length===0&&!t.children[n]}var lv=class{};function D4(t,e,n,r,i,s,o="emptyOnly"){return new dv(t,e,n,r,i,o,s).recognize()}var b4=31,dv=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new cv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new D(4002,`'${e.segmentGroup}'`)}recognize(){let e=YT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(n=>{let r=new _c([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,{},J,this.rootComponentType,null,{}),i=new Kt(r,n),s=new lh("",i),o=Pj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,J).pipe(Or(r=>{if(r instanceof hh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ec?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=fv(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(G(s=>s instanceof Kt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return le(i).pipe(kr(s=>{let o=r.children[s],a=Gj(n,s);return this.processSegmentGroup(e,a,o,s)}),Mi((s,o)=>(s.push(...o),s)),Fr(null),vg(),qe(s=>{if(s===null)return po(r);let o=CS(s);return T4(o),$(o)}))}processSegment(e,n,r,i,s,o){return le(n).pipe(kr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Or(c=>{if(c instanceof Ec)return $(null);throw c}))),Vt(a=>!!a),Or(a=>{if(wS(a))return I4(r,i,s)?$(new lv):po(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return C4(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):po(i):po(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=mv(n,i,s);if(!a)return po(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>b4&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(qe(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=m4(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(xe(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(xe(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new _c(l,h,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,A4(r),qn(r),r.component??r._loadedComponent??null,r,M4(r)),{segmentGroup:p,slicedSegments:g}=YT(n,l,d,c);if(g.length===0&&p.hasChildren())return this.processChildren(u,c,p).pipe(G(w=>w===null?null:new Kt(f,w)));if(c.length===0&&g.length===0)return $(new Kt(f,[]));let y=qn(r)===s;return this.processSegment(u,c,p,g,y?J:s,!0).pipe(G(w=>new Kt(f,w instanceof Kt?[w]:[])))}))):po(n)))}getChildConfig(e,n,r){return n.children?$({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?$({routes:n._loadedRoutes,injector:n._loadedInjector}):h4(e,n,r,this.urlSerializer).pipe(qe(i=>i?this.configLoader.loadChildren(e,n).pipe(Fe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):g4(n))):$({routes:[],injector:e})}};function T4(t){t.sort((e,n)=>e.value.outlet===J?-1:n.value.outlet===J?1:e.value.outlet.localeCompare(n.value.outlet))}function S4(t){let e=t.value.routeConfig;return e&&e.path===""}function CS(t){let e=[],n=new Set;for(let r of t){if(!S4(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=CS(r.children);e.push(new Kt(r.value,i))}return e.filter(r=>!n.has(r))}function A4(t){return t.data||{}}function M4(t){return t.resolve||{}}function x4(t,e,n,r,i,s){return qe(o=>D4(t,e,n,r,o.extractedUrl,i,s).pipe(G(({state:a,tree:c})=>me(N({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function P4(t,e){return qe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return $(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of IS(c))o.add(u);let a=0;return le(o).pipe(kr(c=>s.has(c)?R4(c,r,t,e):(c.data=fv(c,c.parent,t).resolve,$(void 0))),Fe(()=>a++),Gs(1),qe(c=>a===o.size?$(n):Mt))})}function IS(t){let e=t.children.map(n=>IS(n)).flat();return[t,...e]}function R4(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!gS(i)&&(s[Cc]=i.title),N4(s,t,e,r).pipe(G(o=>(t._resolvedData=o,t.data=fv(t,t.parent,n).resolve,null)))}function N4(t,e,n,r){let i=$y(t);if(i.length===0)return $({});let s={};return le(i).pipe(qe(o=>O4(t[o],e,n,r).pipe(Vt(),Fe(a=>{s[o]=a}))),Gs(1),mg(s),Or(o=>wS(o)?Mt:Hs(o)))}function O4(t,e,n,r){let i=bc(e)??r,s=Io(t,i),o=s.resolve?s.resolve(e,n):gr(i,()=>s(e,n));return Yr(o)}function By(t){return xe(e=>{let n=t(e);return n?le(n).pipe(G(()=>e)):$(e)})}var DS=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===J);return i}getResolvedTitleForRoute(r){return r.data[Cc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>(()=>A(k4))(),providedIn:"root"});let t=e;return t})(),k4=(()=>{let e=class e extends DS{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(b(Fy))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Sc=new k("",{providedIn:"root",factory:()=>({})}),fh=new k("ROUTES"),yv=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=A(Vd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return $(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Yr(r.loadComponent()).pipe(G(bS),Fe(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),qs(()=>{this.componentLoaders.delete(r)})),s=new js(i,()=>new et).pipe(Ls());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return $({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=F4(i,this.compiler,r,this.onLoadEndListener).pipe(qs(()=>{this.childrenLoaders.delete(i)})),a=new js(o,()=>new et).pipe(Ls());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function F4(t,e,n,r){return Yr(t.loadChildren()).pipe(G(bS),qe(i=>i instanceof za||Array.isArray(i)?$(i):le(e.compileModuleAsync(i))),G(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(fh,[],{optional:!0,self:!0}).flat()),{routes:o.map(gv),injector:s}}))}function V4(t){return t&&typeof t=="object"&&"default"in t}function bS(t){return V4(t)?t.default:t}var vv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>(()=>A(L4))(),providedIn:"root"});let t=e;return t})(),L4=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),TS=new k(""),SS=new k("");function j4(t,e,n){let r=t.get(SS),i=t.get(ut);return t.get(oe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),B4(t))),{onViewTransitionCreated:c}=r;return c&&gr(t,()=>c({transition:a,from:e,to:n})),o})}function B4(t){return new Promise(e=>{uy(e,{injector:t})})}var _v=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new et,this.transitionAbortSubject=new et,this.configLoader=A(yv),this.environmentInjector=A(Ht),this.urlSerializer=A(Ic),this.rootContexts=A(Dc),this.location=A(fo),this.inputBindingEnabled=A(gh,{optional:!0})!==null,this.titleStrategy=A(DS),this.options=A(Sc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=A(vv),this.createViewTransition=A(TS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>$(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Yy(s)),i=s=>this.events.next(new Zy(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(me(N(N({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ct({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:hc,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rt(o=>o.id!==0),G(o=>me(N({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),xe(o=>{this.currentTransition=o;let a=!1,c=!1;return $(o).pipe(Fe(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?me(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),xe(u=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Qr(u.id,this.urlSerializer.serialize(u.rawUrl),h,0)),u.resolve(null),Mt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return $(u).pipe(xe(h=>{let f=this.transitions?.getValue();return this.events.next(new wo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Mt:Promise.resolve(h)}),x4(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Fe(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=me(N({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new oh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:g,extras:y}=u,w=new wo(h,this.urlSerializer.serialize(f),p,g);this.events.next(w);let S=fS(f,this.rootComponentType).snapshot;return this.currentTransition=o=me(N({},u),{targetSnapshot:S,urlAfterRedirects:f,extras:me(N({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,$(o)}else{let h="";return this.events.next(new Qr(u.id,this.urlSerializer.serialize(u.extractedUrl),h,1)),u.resolve(null),Mt}}),Fe(u=>{let l=new Gy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),G(u=>(this.currentTransition=o=me(N({},u),{guards:Kj(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),i4(this.environmentInjector,u=>this.events.next(u)),Fe(u=>{if(o.guardsResult=u.guardsResult,_o(u.guardsResult))throw yS(this.urlSerializer,u.guardsResult);let l=new Wy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),rt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",3),!1)),By(u=>{if(u.guards.canActivateChecks.length)return $(u).pipe(Fe(l=>{let d=new Ky(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),xe(l=>{let d=!1;return $(l).pipe(P4(this.paramsInheritanceStrategy,this.environmentInjector),Fe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",2)}}))}),Fe(l=>{let d=new Qy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),By(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Fe(f=>{d.component=f}),G(()=>{})));for(let f of d.children)h.push(...l(f));return h};return xa(l(u.targetSnapshot.root)).pipe(Fr(null),lr(1))}),By(()=>this.afterPreactivation()),xe(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?le(d).pipe(G(()=>o)):$(o)}),G(u=>{let l=Bj(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=me(N({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Fe(()=>{this.events.next(new yc)}),Wj(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),lr(1),Fe({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new _r(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),wg(this.transitionAbortSubject.pipe(Fe(u=>{throw u}))),qs(()=>{if(!a&&!c){let u="";this.cancelNavigationTransition(o,u,1)}this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Or(u=>{if(c=!0,_S(u))this.events.next(new Kr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),Hj(u)?this.events.next(new vc(u.url)):o.resolve(!1);else{this.events.next(new mc(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){o.reject(l)}}return Mt}))}))}cancelNavigationTransition(r,i,s){let o=new Kr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function U4(t){return t!==hc}var $4=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>(()=>A(H4))(),providedIn:"root"});let t=e;return t})(),hv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},H4=(()=>{let e=class e extends hv{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=uo(e)))(s||e)}})(),e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),AS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>(()=>A(z4))(),providedIn:"root"});let t=e;return t})(),z4=(()=>{let e=class e extends AS{constructor(){super(...arguments),this.location=A(fo),this.urlSerializer=A(Ic),this.options=A(Sc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=A(vv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Wr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=fS(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof wo)this.stateMemento=this.createStateMemento();else if(r instanceof Qr)this.rawUrlTree=i.initialUrl;else if(r instanceof oh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof yc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Kr&&(r.code===3||r.code===2)?this.restoreHistory(i):r instanceof mc?this.restoreHistory(i,!0):r instanceof _r&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=N(N({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=N(N({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=uo(e)))(s||e)}})(),e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(lc||{});function MS(t,e){t.events.pipe(rt(n=>n instanceof _r||n instanceof Kr||n instanceof mc||n instanceof Qr),G(n=>n instanceof _r||n instanceof Qr?lc.COMPLETE:(n instanceof Kr?n.code===0||n.code===1:!1)?lc.REDIRECTING:lc.FAILED),rt(n=>n!==lc.REDIRECTING),lr(1)).subscribe(()=>{e()})}function q4(t){throw t}var G4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},W4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Yi=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=A(Fd),this.stateManager=A(AS),this.options=A(Sc,{optional:!0})||{},this.pendingTasks=A(rc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=A(_v),this.urlSerializer=A(Ic),this.location=A(fo),this.urlHandlingStrategy=A(vv),this._events=new et,this.errorHandler=this.options.errorHandler||q4,this.navigated=!1,this.routeReuseStrategy=A($4),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=A(fh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!A(gh,{optional:!0}),this.eventsSubscription=new Ue,this.isNgZoneEnabled=A(oe)instanceof oe&&oe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Kr&&i.code!==0&&i.code!==1)this.navigated=!0;else if(i instanceof _r)this.navigated=!0;else if(i instanceof vc){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||U4(s.source)};this.scheduleNavigation(a,hc,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}Q4(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),hc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)}))}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=N({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(gv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=uS(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return lS(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=_o(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,hc,null,i)}navigate(r,i={skipLocationChange:!1}){return K4(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=N({},G4):i===!1?s=N({},W4):s=i,_o(r))return qT(this.currentUrlTree,r,s);let o=this.parseUrl(r);return qT(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.keys(r).reduce((i,s)=>{let o=r[s];return o!=null&&(i[s]=o),i},{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return MS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function K4(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new D(4008,!1)}function Q4(t){return!(t instanceof yc)&&!(t instanceof vc)}var ph=class{};var Y4=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(rt(r=>r instanceof _r),kr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=kd(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return le(s).pipe(Nr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=$(null);let o=s.pipe(qe(a=>a===null?$(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return le([o,a]).pipe(Nr())}else return o})}};e.\u0275fac=function(i){return new(i||e)(b(Yi),b(Vd),b(Ht),b(ph),b(yv))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xS=new k(""),Z4=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof wo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof _r?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Qr&&r.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ah&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ah(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Ib()},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})();function X4(t){return t.routerState.root}function Ac(t,e){return{\u0275kind:t,\u0275providers:e}}function J4(){let t=A(Gt);return e=>{let n=t.get(In);if(e!==n.components[0])return;let r=t.get(Yi),i=t.get(PS);t.get(wv)===1&&r.initialNavigation(),t.get(RS,null,se.Optional)?.setUpPreloading(),t.get(xS,null,se.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var PS=new k("",{factory:()=>new et}),wv=new k("",{providedIn:"root",factory:()=>1});function eB(){return Ac(2,[{provide:wv,useValue:0},{provide:Bd,multi:!0,deps:[Gt],useFactory:e=>{let n=e.get(wT,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Yi),s=e.get(PS);MS(i,()=>{r(!0)}),e.get(_v).afterPreactivation=()=>(r(!0),s.closed?$(void 0):s),i.initialNavigation()}))}}])}function tB(){return Ac(3,[{provide:Bd,multi:!0,useFactory:()=>{let e=A(Yi);return()=>{e.setUpLocationChangeListener()}}},{provide:wv,useValue:2}])}var RS=new k("");function nB(t){return Ac(0,[{provide:RS,useExisting:Y4},{provide:ph,useExisting:t}])}function rB(){return Ac(8,[QT,{provide:gh,useExisting:QT}])}function iB(t){let e=[{provide:TS,useValue:j4},{provide:SS,useValue:N({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ac(9,e)}var ZT=new k("ROUTER_FORROOT_GUARD"),sB=[fo,{provide:Ic,useClass:pc},Yi,Dc,{provide:Eo,useFactory:X4,deps:[Yi]},yv,[]],Mc=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[sB,[],{provide:fh,multi:!0,useValue:r},{provide:ZT,useFactory:uB,deps:[[Yi,new Ui,new Ed]]},{provide:Sc,useValue:i||{}},i?.useHash?aB():cB(),oB(),i?.preloadingStrategy?nB(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?lB(i):[],i?.bindToComponentInputs?rB().\u0275providers:[],i?.enableViewTransitions?iB().\u0275providers:[],dB()]}}static forChild(r){return{ngModule:e,providers:[{provide:fh,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(b(ZT,8))},e.\u0275mod=Ne({type:e}),e.\u0275inj=Re({});let t=e;return t})();function oB(){return{provide:xS,useFactory:()=>{let t=A(TT),e=A(oe),n=A(Sc),r=A(_v),i=A(Ic);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Z4(i,r,t,e,n)}}}function aB(){return{provide:Gi,useClass:CT}}function cB(){return{provide:Gi,useClass:Ty}}function uB(t){return"guarded"}function lB(t){return[t.initialNavigation==="disabled"?tB().\u0275providers:[],t.initialNavigation==="enabledBlocking"?eB().\u0275providers:[]]}var XT=new k("");function dB(){return[{provide:XT,useFactory:J4},{provide:ho,multi:!0,useExisting:XT}]}var hB=[],NS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ne({type:e}),e.\u0275inj=Re({imports:[Mc.forRoot(hB),Mc]});let t=e;return t})();var $S=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(pe(mr),pe(Un))},e.\u0275dir=gt({type:e});let t=e;return t})(),fB=(()=>{let e=class e extends $S{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=uo(e)))(s||e)}})(),e.\u0275dir=gt({type:e,features:[yr]});let t=e;return t})(),HS=new k("NgValueAccessor");var pB={provide:HS,useExisting:Bi(()=>Th),multi:!0};function gB(){let t=Hn()?Hn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var mB=new k("CompositionEventMode"),Th=(()=>{let e=class e extends $S{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!gB())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(pe(mr),pe(Un),pe(mB,8))},e.\u0275dir=gt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Wt("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[nc([pB]),yr]});let t=e;return t})();function Zr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function zS(t){return t!=null&&typeof t.length=="number"}var Dv=new k("NgValidators"),qS=new k("NgAsyncValidators"),yB=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Gn=class{static min(e){return vB(e)}static max(e){return _B(e)}static required(e){return GS(e)}static requiredTrue(e){return wB(e)}static email(e){return EB(e)}static minLength(e){return CB(e)}static maxLength(e){return IB(e)}static pattern(e){return DB(e)}static nullValidator(e){return _h(e)}static compose(e){return XS(e)}static composeAsync(e){return eA(e)}};function vB(t){return e=>{if(Zr(e.value)||Zr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function _B(t){return e=>{if(Zr(e.value)||Zr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function GS(t){return Zr(t.value)?{required:!0}:null}function wB(t){return t.value===!0?null:{required:!0}}function EB(t){return Zr(t.value)||yB.test(t.value)?null:{email:!0}}function CB(t){return e=>Zr(e.value)||!zS(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function IB(t){return e=>zS(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function DB(t){if(!t)return _h;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Zr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function _h(t){return null}function WS(t){return t!=null}function KS(t){return qi(t)?le(t):t}function QS(t){let e={};return t.forEach(n=>{e=n!=null?N(N({},e),n):e}),Object.keys(e).length===0?null:e}function YS(t,e){return e.map(n=>n(t))}function bB(t){return!t.validate}function ZS(t){return t.map(e=>bB(e)?e:n=>e.validate(n))}function XS(t){if(!t)return null;let e=t.filter(WS);return e.length==0?null:function(n){return QS(YS(n,e))}}function JS(t){return t!=null?XS(ZS(t)):null}function eA(t){if(!t)return null;let e=t.filter(WS);return e.length==0?null:function(n){let r=YS(n,e).map(KS);return pg(r).pipe(G(QS))}}function tA(t){return t!=null?eA(ZS(t)):null}function OS(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function nA(t){return t._rawValidators}function rA(t){return t._rawAsyncValidators}function Ev(t){return t?Array.isArray(t)?t:[t]:[]}function wh(t,e){return Array.isArray(t)?t.includes(e):t===e}function kS(t,e){let n=Ev(e);return Ev(t).forEach(i=>{wh(n,i)||n.push(i)}),n}function FS(t,e){return Ev(e).filter(n=>!wh(t,n))}var Eh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=JS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},bo=class extends Eh{get formDirective(){return null}get path(){return null}},Rc=class extends Eh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ch=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},TB={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},hQ=me(N({},TB),{"[class.ng-submitted]":"isSubmitted"}),iA=(()=>{let e=class e extends Ch{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(pe(Rc,2))},e.\u0275dir=gt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&$n("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[yr]});let t=e;return t})(),sA=(()=>{let e=class e extends Ch{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(pe(bo,10))},e.\u0275dir=gt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&$n("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[yr]});let t=e;return t})();var xc="VALID",yh="INVALID",Do="PENDING",Pc="DISABLED";function bv(t){return(Sh(t)?t.validators:t)||null}function SB(t){return Array.isArray(t)?JS(t):t||null}function Tv(t,e){return(Sh(e)?e.asyncValidators:t)||null}function AB(t){return Array.isArray(t)?tA(t):t||null}function Sh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function oA(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new D(1e3,"");if(!r[n])throw new D(1001,"")}function aA(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new D(1002,"")})}var To=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===xc}get invalid(){return this.status===yh}get pending(){return this.status==Do}get disabled(){return this.status===Pc}get enabled(){return this.status!==Pc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(kS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(kS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FS(e,this._rawAsyncValidators))}hasValidator(e){return wh(this._rawValidators,e)}hasAsyncValidator(e){return wh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Do,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Pc,this.errors=null,this._forEachChild(r=>{r.disable(me(N({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(me(N({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=xc,this._forEachChild(r=>{r.enable(me(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(me(N({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xc||this.status===Do)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pc:xc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Do,this._hasOwnPendingAsyncValidator=!0;let n=KS(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ge,this.statusChanges=new Ge}_calculateStatus(){return this._allControlsDisabled()?Pc:this.errors?yh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Do)?Do:this._anyControlsHaveStatus(yh)?yh:xc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Sh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=SB(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=AB(this._rawAsyncValidators)}},Ih=class extends To{constructor(e,n,r){super(bv(n),Tv(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){aA(this,!0,e),Object.keys(e).forEach(r=>{oA(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Cv=class extends Ih{};var Sv=new k("CallSetDisabledState",{providedIn:"root",factory:()=>Ah}),Ah="always";function MB(t,e){return[...e.path,t]}function VS(t,e,n=Ah){Av(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),PB(t,e),NB(t,e),RB(t,e),xB(t,e)}function LS(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),bh(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Dh(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function xB(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Av(t,e){let n=nA(t);e.validator!==null?t.setValidators(OS(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=rA(t);e.asyncValidator!==null?t.setAsyncValidators(OS(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Dh(e._rawValidators,i),Dh(e._rawAsyncValidators,i)}function bh(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=nA(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=rA(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return Dh(e._rawValidators,r),Dh(e._rawAsyncValidators,r),n}function PB(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&cA(t,e)})}function RB(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&cA(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function cA(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function NB(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function OB(t,e){t==null,Av(t,e)}function kB(t,e){return bh(t,e)}function FB(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function VB(t){return Object.getPrototypeOf(t.constructor)===fB}function LB(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function jB(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Th?n=s:VB(s)?r=s:i=s}),i||r||n||null}function BB(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function jS(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function BS(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var vh=class extends To{constructor(e=null,n,r){super(bv(n),Tv(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(BS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){BS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var UB=t=>t instanceof vh;var uA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=gt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var $B=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ne({type:e}),e.\u0275inj=Re({});let t=e;return t})();var lA=new k("NgModelWithFormControlWarning");var HB={provide:bo,useExisting:Bi(()=>Mv)},Mv=(()=>{let e=class e extends bo{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ge,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(bh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return VS(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){LS(r.control||null,r,!1),BB(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,LB(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(LS(i||null,r),UB(s)&&(VS(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);OB(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&kB(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Av(this.form,this),this._oldForm&&bh(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(pe(Dv,10),pe(qS,10),pe(Sv,8))},e.\u0275dir=gt({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&Wt("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[nc([HB]),yr,Hr]});let t=e;return t})();var zB={provide:Rc,useExisting:Bi(()=>xv)},xv=(()=>{let e=class e extends Rc{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Ge,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=jB(this,o)}ngOnChanges(r){this._added||this._setUpControl(),FB(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return MB(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(pe(bo,13),pe(Dv,10),pe(qS,10),pe(HS,10),pe(lA,8))},e.\u0275dir=gt({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[nc([zB]),yr,Hr]});let t=e;return t})();var qB=(()=>{let e=class e{constructor(){this._validator=_h}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):_h,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=gt({type:e,features:[Hr]});let t=e;return t})();var GB={provide:Dv,useExisting:Bi(()=>Pv),multi:!0};var Pv=(()=>{let e=class e extends qB{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ud,this.createValidator=r=>GS}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=uo(e)))(s||e)}})(),e.\u0275dir=gt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&Pd("required",s._enabled?"":null)},inputs:{required:"required"},features:[nc([GB]),yr]});let t=e;return t})();var dA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ne({type:e}),e.\u0275inj=Re({imports:[$B]});let t=e;return t})(),Iv=class extends To{constructor(e,n,r){super(bv(n),Tv(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){aA(this,!1,e),e.forEach((r,i)=>{oA(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function US(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var hA=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return US(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Ih(s,o)}record(r,i=null){let s=this._reduceControls(r);return new Cv(s,i)}control(r,i,s){let o={};return this.useNonNullable?(US(i)?o=i:(o.validators=i,o.asyncValidators=s),new vh(r,me(N({},o),{nonNullable:!0}))):new vh(r,i,s)}array(r,i,s){let o=r.map(a=>this._createControl(a));return new Iv(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof vh)return r;if(r instanceof To)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var fA=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Sv,useValue:r.callSetDisabledState??Ah}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ne({type:e}),e.\u0275inj=Re({imports:[dA]});let t=e;return t})(),pA=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:lA,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Sv,useValue:r.callSetDisabledState??Ah}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ne({type:e}),e.\u0275inj=Re({imports:[dA]});let t=e;return t})();var KB="firebase",QB="10.7.1";Rr(KB,QB,"app");var So=new pr("ANGULARFIRE2_VERSION");var YB=(t,e)=>{let n=e?[e]:CC(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Zi=class{constructor(){return YB(ZB)}},ZB="app-check";function Rv(){}var Mh=class{zone;delegate;constructor(e,n=dg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Nv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rv,{},Rv,Rv)),n.pipe(Fe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},xh=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Mh(Zone.current)),this.insideAngular=n.run(()=>new Mh(Zone.current,Ma)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(b(oe))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function XB(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Rt(t){return JB(XB())(t)}function JB(t){return function(n){return n=n.lift(new Nv(t.ngZone)),n.pipe(mn(t.outsideAngular),nn(t.insideAngular))}}var n3=new Map,r3={activated:!1,tokenObservers:[]},i3={initialized:!1,enabled:!1};function Dn(t){return n3.get(t)||Object.assign({},r3)}function wA(){return i3}var s3="https://content-firebaseappcheck.googleapis.com/v1";var o3="exchangeDebugToken",mA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},PQ=24*60*60*1e3;var kv=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Zp,this.pending.promise.catch(n=>{}),yield a3(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Zp,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function a3(t){return new Promise(e=>{setTimeout(e,t)})}var c3={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Xr=new wC("appCheck","AppCheck",c3);function EA(t){if(!Dn(t).activated)throw Xr.create("use-before-activation",{appName:t.name})}function CA(r,i){return _(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(t,a)}catch(f){throw Xr.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw Xr.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(f){throw Xr.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=u.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Xr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:u.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function IA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${s3}/projects/${n}/apps/${r}:${o3}?key=${i}`,body:{debug_token:e}}}var u3="firebase-app-check-database",l3=1,Fv="firebase-app-check-store";var Ph=null;function d3(){return Ph||(Ph=new Promise((t,e)=>{try{let n=indexedDB.open(u3,l3);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Xr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Fv,{keyPath:"compositeKey"})}}}catch(n){e(Xr.create("storage-open",{originalErrorMessage:n?.message}))}}),Ph)}function h3(t,e){return f3(p3(t),e)}function f3(t,e){return _(this,null,function*(){let r=(yield d3()).transaction(Fv,"readwrite"),s=r.objectStore(Fv).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var u;a(Xr.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function p3(t){return`${t.options.appId}-${t.name}`}var Vv=new ol("@firebase/app-check");function Ov(t,e){return sl()?h3(t,e).catch(n=>{Vv.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function DA(){return wA().enabled}function bA(){return _(this,null,function*(){let t=wA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var g3={error:"UNKNOWN_ERROR"};function m3(t){return mC.encodeString(JSON.stringify(t),!1)}function Lv(t,e=!1){return _(this,null,function*(){let n=t.app;EA(n);let r=Dn(n),i=r.token,s;if(i&&!Nc(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Nc(c)?i=c:yield Ov(n,void 0))}if(!e&&i&&Nc(i))return{token:i.token};let o=!1;if(DA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=CA(IA(n,yield bA()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield Ov(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Dn(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Vv.warn(c.message):Vv.error(c),s=c}let a;return i?s?Nc(i)?a={token:i.token,internalError:s}:a=vA(s):(a={token:i.token},r.token=i,yield Ov(n,i)):a=vA(s),o&&w3(n,a),a})}function y3(t){return _(this,null,function*(){let e=t.app;EA(e);let{provider:n}=Dn(e);if(DA()){let r=yield bA(),{token:i}=yield CA(IA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function v3(t,e,n,r){let{app:i}=t,s=Dn(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Nc(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),yA(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>yA(t))}function TA(t,e){let n=Dn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function yA(t){let{app:e}=t,n=Dn(e),r=n.tokenRefresher;r||(r=_3(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function _3(t){let{app:e}=t;return new kv(()=>_(this,null,function*(){let n=Dn(e),r;if(n.token?r=yield Lv(t,!0):r=yield Lv(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Dn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},mA.RETRIAL_MIN_WAIT,mA.RETRIAL_MAX_WAIT)}function w3(t,e){let n=Dn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Nc(t){return t.expireTimeMillis-Date.now()>0}function vA(t){return{token:m3(g3),error:t}}var jv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Dn(this.app);for(let n of e)TA(this.app,n.next);return Promise.resolve()}};function E3(t,e){return new jv(t,e)}function C3(t){return{getToken:e=>Lv(t,e),getLimitedUseToken:()=>y3(t),addTokenListener:e=>v3(t,"INTERNAL",e),removeTokenListener:e=>TA(t.app,e)}}var I3="@firebase/app-check",D3="0.8.1";var b3="app-check",_A="app-check-internal";function T3(){ba(new bi(b3,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return E3(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(_A).initialize()})),ba(new bi(_A,t=>{let e=t.getProvider("app-check").getImmediate();return C3(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Rr(I3,D3)}T3();var S3=["localhost","0.0.0.0","127.0.0.1"],HQ=typeof window<"u"&&S3.includes(window.location.hostname);var A3="firebase",M3="10.7.1";At.registerVersion(A3,M3,"app-compat");var x3=["ngOnDestroy"],MA=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(x3.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,u)=>o.then(l=>{let d=l?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,d),d})})})});var Rh=class{constructor(e){return e}},Ao=new k("angularfire2.app.options"),Mo=new k("angularfire2.app.name");function Oc(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let o=At.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>At.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;P3("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Rh(o)}var P3=(t,...e)=>{_y()&&typeof console<"u"&&console[t](...e)},R3={provide:Rh,useFactory:Oc,deps:[Ao,oe,[new Ui,Mo]]},xA=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Ao,useValue:n},{provide:Mo,useValue:r}]}}constructor(n){At.registerVersion("angularfire",So.full,"core"),At.registerVersion("angularfire",So.full,"app-compat"),At.registerVersion("angular",iT.full,n.toString())}static \u0275fac=function(r){return new(r||t)(b(It))};static \u0275mod=Ne({type:t});static \u0275inj=Re({providers:[R3]})}return t})();function Nh(t,e,n,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return N3(i,o)||(AA("error",`${e} was already initialized on the ${n} Firebase App with different settings.${O3?" You may need to reload as Firebase is not HMR aware.":""}`),AA("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function N3(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var O3=typeof module<"u"&&!!module.hot,AA=(t,...e)=>{_y()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Bv=new k("angularfire2.auth.use-emulator"),Uv=new k("angularfire2.auth.settings"),$v=new k("angularfire2.auth.tenant-id"),Hv=new k("angularfire2.auth.langugage-code"),zv=new k("angularfire2.auth.use-device-language"),qv=new k("angularfire.auth.persistence"),Gv=(t,e,n,r,i,s,o,a)=>Nh(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(let[u,l]of Object.entries(o))c.settings[u]=l;return a&&c.setPersistence(a),c},[n,r,i,s,o,a]),PA=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,c,u,l,d,h,f){let p=new et,g=$(void 0).pipe(nn(o.outsideAngular),xe(()=>s.runOutsideAngular(()=>import("./chunk-KTRENSU5.js"))),G(()=>Oc(n,s,r)),G(y=>Gv(y,s,a,u,l,d,c,h)),Nl({bufferSize:1,refCount:!1}));if(Wi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=$(null);else{g.pipe(Vt()).subscribe();let y=g.pipe(xe(T=>T.getRedirectResult().then(O=>O,()=>null)),Rt,Nl({bufferSize:1,refCount:!1})),w=g.pipe(xe(T=>new ie(O=>({unsubscribe:s.runOutsideAngular(()=>T.onAuthStateChanged(U=>O.next(U),U=>O.error(U),()=>O.complete()))})))),S=g.pipe(xe(T=>new ie(O=>({unsubscribe:s.runOutsideAngular(()=>T.onIdTokenChanged(U=>O.next(U),U=>O.error(U),()=>O.complete()))}))));this.authState=y.pipe(Ol(w),mn(o.outsideAngular),nn(o.insideAngular)),this.user=y.pipe(Ol(S),mn(o.outsideAngular),nn(o.insideAngular)),this.idToken=this.user.pipe(xe(T=>T?le(T.getIdToken()):$(null))),this.idTokenResult=this.user.pipe(xe(T=>T?le(T.getIdTokenResult()):$(null))),this.credential=gg(y,p,this.authState.pipe(rt(T=>!T))).pipe(G(T=>T?.user?T:null),mn(o.outsideAngular),nn(o.insideAngular))}return MA(this,g,s,{spy:{apply:(y,w,S)=>{(y.startsWith("signIn")||y.startsWith("createUser"))&&S.then(T=>p.next(T))}}})}static \u0275fac=function(r){return new(r||t)(b(Ao),b(Mo,8),b(It),b(oe),b(xh),b(Bv,8),b(Uv,8),b($v,8),b(Hv,8),b(zv,8),b(qv,8),b(Zi,8))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var F3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tn={},P,p_=p_||{},Y=F3||self;function Wh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Kc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function V3(t){return Object.prototype.hasOwnProperty.call(t,Wv)&&t[Wv]||(t[Wv]=++L3)}var Wv="closure_uid_"+(1e9*Math.random()>>>0),L3=0;function j3(t,e,n){return t.call.apply(t.bind,arguments)}function B3(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function yt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?yt=j3:yt=B3,yt.apply(null,arguments)}function Oh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function st(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Jr(){this.s=this.s,this.o=this.o}var U3=0;Jr.prototype.s=!1;Jr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),U3!=0)&&V3(this)};Jr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var zA=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function g_(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function RA(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Wh(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function vt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}vt.prototype.h=function(){this.defaultPrevented=!0};var $3=function(){if(!Y.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};Y.addEventListener("test",n,e),Y.removeEventListener("test",n,e)}catch{}return t}();function Bc(t){return/^[\s\xa0]*$/.test(t)}function Kh(){var t=Y.navigator;return t&&(t=t.userAgent)?t:""}function Wn(t){return Kh().indexOf(t)!=-1}function m_(t){return m_[" "](t),t}m_[" "]=function(){};function H3(t,e){var n=PU;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var z3=Wn("Opera"),No=Wn("Trident")||Wn("MSIE"),qA=Wn("Edge"),Xv=qA||No,GA=Wn("Gecko")&&!(Kh().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge"))&&!(Wn("Trident")||Wn("MSIE"))&&!Wn("Edge"),q3=Kh().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge");function WA(){var t=Y.document;return t?t.documentMode:void 0}var Jv;e:{if(kh="",Fh=function(){var t=Kh();if(GA)return/rv:([^\);]+)(\)|;)/.exec(t);if(qA)return/Edge\/([\d\.]+)/.exec(t);if(No)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(q3)return/WebKit\/(\S+)/.exec(t);if(z3)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Fh&&(kh=Fh?Fh[1]:""),No&&(Vh=WA(),Vh!=null&&Vh>parseFloat(kh))){Jv=String(Vh);break e}Jv=kh}var kh,Fh,Vh,e_;Y.document&&No?(Kv=WA(),e_=Kv||parseInt(Jv,10)||void 0):e_=void 0;var Kv,G3=e_;function Uc(t,e){if(vt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(GA){e:{try{m_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:W3[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Uc.$.h.call(this)}}st(Uc,vt);var W3={2:"touch",3:"pen",4:"mouse"};Uc.prototype.h=function(){Uc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Qc="closure_listenable_"+(1e6*Math.random()|0),K3=0;function Q3(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++K3,this.fa=this.ia=!1}function Qh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function y_(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function Y3(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function KA(t){let e={};for(let n in t)e[n]=t[n];return e}var NA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function QA(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<NA.length;s++)n=NA[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Yh(t){this.src=t,this.g={},this.h=0}Yh.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=n_(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Q3(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function t_(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=zA(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Qh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function n_(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var v_="closure_lm_"+(1e6*Math.random()|0),Qv={};function YA(t,e,n,r,i){if(r&&r.once)return XA(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)YA(t,e[s],n,r,i);return null}return n=E_(n),t&&t[Qc]?t.O(e,n,Kc(r)?!!r.capture:!!r,i):ZA(t,e,n,!1,r,i)}function ZA(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Kc(i)?!!i.capture:!!i,a=w_(t);if(a||(t[v_]=a=new Yh(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=Z3(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$3||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(eM(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Z3(){function t(n){return e.call(t.src,t.listener,n)}let e=X3;return t}function XA(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)XA(t,e[s],n,r,i);return null}return n=E_(n),t&&t[Qc]?t.P(e,n,Kc(r)?!!r.capture:!!r,i):ZA(t,e,n,!0,r,i)}function JA(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)JA(t,e[s],n,r,i);else r=Kc(r)?!!r.capture:!!r,n=E_(n),t&&t[Qc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=n_(s,n,r,i),-1<n&&(Qh(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=w_(t))&&(e=t.g[e.toString()],t=-1,e&&(t=n_(e,n,r,i)),(n=-1<t?e[t]:null)&&__(n))}function __(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Qc])t_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(eM(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=w_(e))?(t_(n,t),n.h==0&&(n.src=null,e[v_]=null)):Qh(t)}}}function eM(t){return t in Qv?Qv[t]:Qv[t]="on"+t}function X3(t,e){if(t.fa)t=!0;else{e=new Uc(e,this);var n=t.listener,r=t.la||t.src;t.ia&&__(t),t=n.call(r,e)}return t}function w_(t){return t=t[v_],t instanceof Yh?t:null}var Yv="__closure_events_fn_"+(1e9*Math.random()>>>0);function E_(t){return typeof t=="function"?t:(t[Yv]||(t[Yv]=function(e){return t.handleEvent(e)}),t[Yv])}function it(){Jr.call(this),this.i=new Yh(this),this.S=this,this.J=null}st(it,Jr);it.prototype[Qc]=!0;it.prototype.removeEventListener=function(t,e,n,r){JA(this,t,e,n,r)};function dt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new vt(e,t);else if(e instanceof vt)e.target=e.target||t;else{var i=e;e=new vt(r,t),QA(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Lh(o,r,!0,e)&&i}if(o=e.g=t,i=Lh(o,r,!0,e)&&i,i=Lh(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Lh(o,r,!1,e)&&i}it.prototype.N=function(){if(it.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Qh(n[r]);delete t.g[e],t.h--}}this.J=null};it.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};it.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Lh(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&t_(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var C_=Y.JSON.stringify,r_=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function J3(){var t=I_;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var i_=class{constructor(){this.h=this.g=null}add(e,n){let r=tM.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},tM=new r_(()=>new s_,t=>t.reset()),s_=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function eU(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function tU(t){Y.setTimeout(()=>{throw t},0)}var $c,Hc=!1,I_=new i_,nM=()=>{let t=Y.Promise.resolve(void 0);$c=()=>{t.then(nU)}},nU=()=>{for(var t;t=J3();){try{t.h.call(t.g)}catch(n){tU(n)}var e=tM;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Hc=!1};function Zh(t,e){it.call(this),this.h=t||1,this.g=e||Y,this.j=yt(this.qb,this),this.l=Date.now()}st(Zh,it);P=Zh.prototype;P.ga=!1;P.T=null;P.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),dt(this,"tick"),this.ga&&(D_(this),this.start()))}};P.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function D_(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}P.N=function(){Zh.$.N.call(this),D_(this),delete this.g};function b_(t,e,n){if(typeof t=="function")n&&(t=yt(t,n));else if(t&&typeof t.handleEvent=="function")t=yt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Y.setTimeout(t,e||0)}function rM(t){t.g=b_(()=>{t.g=null,t.i&&(t.i=!1,rM(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var o_=class extends Jr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:rM(this)}N(){super.N(),this.g&&(Y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function zc(t){Jr.call(this),this.h=t,this.g={}}st(zc,Jr);var OA=[];function iM(t,e,n,r){Array.isArray(n)||(n&&(OA[0]=n.toString()),n=OA);for(var i=0;i<n.length;i++){var s=YA(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function sM(t){y_(t.g,function(e,n){this.g.hasOwnProperty(n)&&__(e)},t),t.g={}}zc.prototype.N=function(){zc.$.N.call(this),sM(this)};zc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Xh(){this.g=!0}Xh.prototype.Ea=function(){this.g=!1};function rU(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function iU(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Po(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+oU(t,n)+(r?" "+r:"")})}function sU(t,e){t.info(function(){return"TIMEOUT: "+e})}Xh.prototype.info=function(){};function oU(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return C_(n)}catch{return e}}var ts={},kA=null;function Jh(){return kA=kA||new it}ts.Ta="serverreachability";function oM(t){vt.call(this,ts.Ta,t)}st(oM,vt);function qc(t){let e=Jh();dt(e,new oM(e))}ts.STAT_EVENT="statevent";function aM(t,e){vt.call(this,ts.STAT_EVENT,t),this.stat=e}st(aM,vt);function Dt(t){let e=Jh();dt(e,new aM(e,t))}ts.Ua="timingevent";function cM(t,e){vt.call(this,ts.Ua,t),this.size=e}st(cM,vt);function Yc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Y.setTimeout(function(){t()},e)}var ef={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},uM={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function T_(){}T_.prototype.h=null;function FA(t){return t.h||(t.h=t.i())}function lM(){}var Zc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function S_(){vt.call(this,"d")}st(S_,vt);function A_(){vt.call(this,"c")}st(A_,vt);var a_;function tf(){}st(tf,T_);tf.prototype.g=function(){return new XMLHttpRequest};tf.prototype.i=function(){return{}};a_=new tf;function Xc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new zc(this),this.P=aU,t=Xv?125:void 0,this.V=new Zh(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new dM}function dM(){this.i=null,this.g="",this.h=!1}var aU=45e3,hM={},c_={};P=Xc.prototype;P.setTimeout=function(t){this.P=t};function u_(t,e,n){t.L=1,t.A=rf(Er(e)),t.u=n,t.S=!0,fM(t,null)}function fM(t,e){t.G=Date.now(),Jc(t),t.B=Er(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),EM(n.i,"t",r),t.o=0,n=t.l.J,t.h=new dM,t.g=$M(t.l,n?e:null,!t.u),0<t.O&&(t.M=new o_(yt(t.Pa,t,t.g),t.O)),iM(t.U,t.g,"readystatechange",t.nb),e=t.I?KA(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),qc(),rU(t.j,t.v,t.B,t.m,t.W,t.u)}P.nb=function(t){t=t.target;let e=this.M;e&&Kn(t)==3?e.l():this.Pa(t)};P.Pa=function(t){try{if(t==this.g)e:{let l=Kn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||Xv||this.g&&(this.h.h||this.g.ja()||BA(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?qc(3):qc(2)),nf(this);var n=this.g.da();this.ca=n;t:if(pM(this)){var r=BA(this.g);t="";var i=r.length,s=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xi(this),jc(this);var o="";break t}this.h.i=new Y.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,iU(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bc(a)){var u=a;break t}}u=null}if(n=u)Po(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,l_(this,n);else{this.i=!1,this.s=3,Dt(12),Xi(this),jc(this);break e}}this.S?(gM(this,l,o),Xv&&this.i&&l==3&&(iM(this.U,this.V,"tick",this.mb),this.V.start())):(Po(this.j,this.m,o,null),l_(this,o)),l==4&&Xi(this),this.i&&!this.J&&(l==4?LM(this.l,this):(this.i=!1,Jc(this)))}else AU(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),Xi(this),jc(this)}}}catch{}finally{}};function pM(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function gM(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=cU(t,n),i==c_){e==4&&(t.s=4,Dt(14),r=!1),Po(t.j,t.m,null,"[Incomplete Response]");break}else if(i==hM){t.s=4,Dt(15),Po(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Po(t.j,t.m,i,null),l_(t,i);pM(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Dt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),O_(e),e.M=!0,Dt(11))):(Po(t.j,t.m,n,"[Invalid Chunked Response]"),Xi(t),jc(t))}P.mb=function(){if(this.g){var t=Kn(this.g),e=this.g.ja();this.o<e.length&&(nf(this),gM(this,t,e),this.i&&t!=4&&Jc(this))}};function cU(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?c_:(n=Number(e.substring(n,r)),isNaN(n)?hM:(r+=1,r+n>e.length?c_:(e=e.slice(r,r+n),t.o=r+n,e)))}P.cancel=function(){this.J=!0,Xi(this)};function Jc(t){t.Y=Date.now()+t.P,mM(t,t.P)}function mM(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Yc(yt(t.lb,t),e)}function nf(t){t.C&&(Y.clearTimeout(t.C),t.C=null)}P.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(sU(this.j,this.B),this.L!=2&&(qc(),Dt(17)),Xi(this),this.s=2,jc(this)):mM(this,this.Y-t)};function jc(t){t.l.H==0||t.J||LM(t.l,t)}function Xi(t){nf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,D_(t.V),sM(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function l_(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||d_(n.i,t))){if(!t.K&&d_(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Hh(n),af(n);else break e;N_(n),Dt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Yc(yt(n.ib,n),6e3));if(1>=DM(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ji(n,11)}else if((t.K||n.g==t)&&Hh(n),!Bc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(M_(s,s.h),s.h=null))}if(r.F){let g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,be(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=UM(r,r.J?r.pa:null,r.Y),o.K){bM(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(nf(a),Jc(a)),r.g=o}else FM(r);0<n.j.length&&cf(n)}else u[0]!="stop"&&u[0]!="close"||Ji(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Ji(n,7):R_(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}qc(4)}catch{}}function uU(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Wh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function lU(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Wh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function yM(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Wh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=lU(t),r=uU(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var vM=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dU(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function es(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof es){this.h=t.h,Uh(this,t.j),this.s=t.s,this.g=t.g,$h(this,t.m),this.l=t.l;var e=t.i,n=new Gc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),VA(this,n),this.o=t.o}else t&&(e=String(t).match(vM))?(this.h=!1,Uh(this,e[1]||"",!0),this.s=Vc(e[2]||""),this.g=Vc(e[3]||"",!0),$h(this,e[4]),this.l=Vc(e[5]||"",!0),VA(this,e[6]||"",!0),this.o=Vc(e[7]||"")):(this.h=!1,this.i=new Gc(null,this.h))}es.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Lc(e,LA,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Lc(e,LA,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Lc(n,n.charAt(0)=="/"?pU:fU,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Lc(n,mU)),t.join("")};function Er(t){return new es(t)}function Uh(t,e,n){t.j=n?Vc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function $h(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function VA(t,e,n){e instanceof Gc?(t.i=e,yU(t.i,t.h)):(n||(e=Lc(e,gU)),t.i=new Gc(e,t.h))}function be(t,e,n){t.i.set(e,n)}function rf(t){return be(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Vc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Lc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,hU),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function hU(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var LA=/[#\/\?@]/g,fU=/[#\?:]/g,pU=/[#\?]/g,gU=/[#\?@]/g,mU=/#/g;function Gc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ei(t){t.g||(t.g=new Map,t.h=0,t.i&&dU(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}P=Gc.prototype;P.add=function(t,e){ei(this),this.i=null,t=Oo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function _M(t,e){ei(t),e=Oo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function wM(t,e){return ei(t),e=Oo(t,e),t.g.has(e)}P.forEach=function(t,e){ei(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};P.ta=function(){ei(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};P.Z=function(t){ei(this);let e=[];if(typeof t=="string")wM(this,t)&&(e=e.concat(this.g.get(Oo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};P.set=function(t,e){return ei(this),this.i=null,t=Oo(this,t),wM(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};P.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function EM(t,e,n){_M(t,e),0<n.length&&(t.i=null,t.g.set(Oo(t,e),g_(n)),t.h+=n.length)}P.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Oo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function yU(t,e){e&&!t.j&&(ei(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(_M(this,r),EM(this,i,n))},t)),t.j=e}var vU=class{constructor(t,e){this.g=t,this.map=e}};function CM(t){this.l=t||_U,Y.PerformanceNavigationTiming?(t=Y.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Y.g&&Y.g.Ka&&Y.g.Ka()&&Y.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _U=10;function IM(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function DM(t){return t.h?1:t.g?t.g.size:0}function d_(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function M_(t,e){t.g?t.g.add(e):t.h=e}function bM(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}CM.prototype.cancel=function(){if(this.i=TM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function TM(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return g_(t.i)}var wU=class{stringify(t){return Y.JSON.stringify(t,void 0)}parse(t){return Y.JSON.parse(t,void 0)}};function EU(){this.g=new wU}function CU(t,e,n){let r=n||"";try{yM(t,function(i,s){let o=i;Kc(i)&&(o=C_(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function IU(t,e){let n=new Xh;if(Y.Image){let r=new Image;r.onload=Oh(jh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Oh(jh,n,r,"TestLoadImage: error",!1,e),r.onabort=Oh(jh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Oh(jh,n,r,"TestLoadImage: timeout",!1,e),Y.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function jh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function eu(t){this.l=t.ec||null,this.j=t.ob||!1}st(eu,T_);eu.prototype.g=function(){return new sf(this.l,this.j)};eu.prototype.i=function(t){return function(){return t}}({});function sf(t,e){it.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=x_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}st(sf,it);var x_=0;P=sf.prototype;P.open=function(t,e){if(this.readyState!=x_)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Wc(this)};P.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Y).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};P.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tu(this)),this.readyState=x_};P.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Wc(this)),this.g&&(this.readyState=3,Wc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Y.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;SM(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function SM(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}P.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?tu(this):Wc(this),this.readyState==3&&SM(this)}};P.Za=function(t){this.g&&(this.response=this.responseText=t,tu(this))};P.Ya=function(t){this.g&&(this.response=t,tu(this))};P.ka=function(){this.g&&tu(this)};function tu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Wc(t)}P.setRequestHeader=function(t,e){this.v.append(t,e)};P.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};P.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Wc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(sf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var DU=Y.JSON.parse;function Le(t){it.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=AM,this.L=this.M=!1}st(Le,it);var AM="",bU=/^https?$/i,TU=["POST","PUT"];P=Le.prototype;P.Oa=function(t){this.M=t};P.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():a_.g(),this.C=this.u?FA(this.u):FA(a_),this.g.onreadystatechange=yt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){jA(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Y.FormData&&t instanceof Y.FormData,!(0<=zA(TU,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{PM(this),0<this.B&&((this.L=SU(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yt(this.ua,this)):this.A=b_(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){jA(this,s)}};function SU(t){return No&&typeof t.timeout=="number"&&t.ontimeout!==void 0}P.ua=function(){typeof p_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dt(this,"timeout"),this.abort(8))};function jA(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,MM(t),of(t)}function MM(t){t.F||(t.F=!0,dt(t,"complete"),dt(t,"error"))}P.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,dt(this,"complete"),dt(this,"abort"),of(this))};P.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),of(this,!0)),Le.$.N.call(this)};P.La=function(){this.s||(this.G||this.v||this.l?xM(this):this.kb())};P.kb=function(){xM(this)};function xM(t){if(t.h&&typeof p_<"u"&&(!t.C[1]||Kn(t)!=4||t.da()!=2)){if(t.v&&Kn(t)==4)b_(t.La,0,t);else if(dt(t,"readystatechange"),Kn(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(vM)[1]||null;!i&&Y.self&&Y.self.location&&(i=Y.self.location.protocol.slice(0,-1)),r=!bU.test(i?i.toLowerCase():"")}n=r}if(n)dt(t,"complete"),dt(t,"success");else{t.m=6;try{var s=2<Kn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",MM(t)}}finally{of(t)}}}}function of(t,e){if(t.g){PM(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||dt(t,"ready");try{n.onreadystatechange=r}catch{}}}function PM(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Y.clearTimeout(t.A),t.A=null)}P.isActive=function(){return!!this.g};function Kn(t){return t.g?t.g.readyState:0}P.da=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}};P.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};P.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),DU(e)}};function BA(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case AM:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function AU(t){let e={};t=(t.g&&2<=Kn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Bc(t[r]))continue;var n=eU(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}Y3(e,function(r){return r.join(", ")})}P.Ia=function(){return this.m};P.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function RM(t){let e="";return y_(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function P_(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=RM(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):be(t,e,n))}function kc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function NM(t){this.Ga=0,this.j=[],this.l=new Xh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=kc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=kc("baseRetryDelayMs",5e3,t),this.hb=kc("retryDelaySeedMs",1e4,t),this.eb=kc("forwardChannelMaxRetries",2,t),this.xa=kc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new CM(t&&t.concurrentRequestLimit),this.Ja=new EU,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}P=NM.prototype;P.ra=8;P.H=1;function R_(t){if(OM(t),t.H==3){var e=t.W++,n=Er(t.I);if(be(n,"SID",t.K),be(n,"RID",e),be(n,"TYPE","terminate"),nu(t,n),e=new Xc(t,t.l,e),e.L=2,e.A=rf(Er(n)),n=!1,Y.navigator&&Y.navigator.sendBeacon)try{n=Y.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Y.Image&&(new Image().src=e.A,n=!0),n||(e.g=$M(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Jc(e)}BM(t)}function af(t){t.g&&(O_(t),t.g.cancel(),t.g=null)}function OM(t){af(t),t.u&&(Y.clearTimeout(t.u),t.u=null),Hh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Y.clearTimeout(t.m),t.m=null)}function cf(t){if(!IM(t.i)&&!t.m){t.m=!0;var e=t.Na;$c||nM(),Hc||($c(),Hc=!0),I_.add(e,t),t.C=0}}function MU(t,e){return DM(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Yc(yt(t.Na,t,e),jM(t,t.C)),t.C++,!0)}P.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Xc(this,this.l,t),s=this.s;if(this.U&&(s?(s=KA(s),QA(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=kM(this,i,e),n=Er(this.I),be(n,"RID",t),be(n,"CVER",22),this.F&&be(n,"X-HTTP-Session-Id",this.F),nu(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(RM(s)))+"&"+e:this.o&&P_(n,this.o,s)),M_(this.i,i),this.bb&&be(n,"TYPE","init"),this.P?(be(n,"$req",e),be(n,"SID","null"),i.aa=!0,u_(i,n,null)):u_(i,n,e),this.H=2}}else this.H==3&&(t?UA(this,t):this.j.length==0||IM(this.i)||UA(this))};function UA(t,e){var n;e?n=e.m:n=t.W++;let r=Er(t.I);be(r,"SID",t.K),be(r,"RID",n),be(r,"AID",t.V),nu(t,r),t.o&&t.s&&P_(r,t.o,t.s),n=new Xc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=kM(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),M_(t.i,n),u_(n,r,e)}function nu(t,e){t.na&&y_(t.na,function(n,r){be(e,r,n)}),t.h&&yM({},function(n,r){be(e,r,n)})}function kM(t,e,n){n=Math.min(t.j.length,n);var r=t.h?yt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{CU(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function FM(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;$c||nM(),Hc||($c(),Hc=!0),I_.add(e,t),t.A=0}}function N_(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Yc(yt(t.Ma,t),jM(t,t.A)),t.A++,!0)}P.Ma=function(){if(this.u=null,VM(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Yc(yt(this.jb,this),t)}};P.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Dt(10),af(this),VM(this))};function O_(t){t.B!=null&&(Y.clearTimeout(t.B),t.B=null)}function VM(t){t.g=new Xc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Er(t.wa);be(e,"RID","rpc"),be(e,"SID",t.K),be(e,"AID",t.V),be(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&be(e,"TO",t.qa),be(e,"TYPE","xmlhttp"),nu(t,e),t.o&&t.s&&P_(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=rf(Er(e)),n.u=null,n.S=!0,fM(n,t)}P.ib=function(){this.v!=null&&(this.v=null,af(this),N_(this),Dt(19))};function Hh(t){t.v!=null&&(Y.clearTimeout(t.v),t.v=null)}function LM(t,e){var n=null;if(t.g==e){Hh(t),O_(t),t.g=null;var r=2}else if(d_(t.i,e))n=e.F,bM(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Jh(),dt(r,new cM(r,n)),cf(t)}else FM(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&MU(t,e)||r==2&&N_(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ji(t,5);break;case 4:Ji(t,10);break;case 3:Ji(t,6);break;default:Ji(t,2)}}}function jM(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ji(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=yt(t.pb,t);n||(n=new es("//www.google.com/images/cleardot.gif"),Y.location&&Y.location.protocol=="http"||Uh(n,"https"),rf(n)),IU(n.toString(),r)}else Dt(2);t.H=0,t.h&&t.h.za(e),BM(t),OM(t)}P.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Dt(2)):(this.l.info("Failed to ping google.com"),Dt(1))};function BM(t){if(t.H=0,t.ma=[],t.h){let e=TM(t.i);(e.length!=0||t.j.length!=0)&&(RA(t.ma,e),RA(t.ma,t.j),t.i.i.length=0,g_(t.j),t.j.length=0),t.h.ya()}}function UM(t,e,n){var r=n instanceof es?Er(n):new es(n);if(r.g!="")e&&(r.g=e+"."+r.g),$h(r,r.m);else{var i=Y.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new es(null);r&&Uh(s,r),e&&(s.g=e),i&&$h(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&be(r,n,e),be(r,"VER",t.ra),nu(t,r),r}function $M(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Le(new eu({ob:n})):new Le(t.va),e.Oa(t.J),e}P.isActive=function(){return!!this.h&&this.h.isActive(this)};function HM(){}P=HM.prototype;P.Ba=function(){};P.Aa=function(){};P.za=function(){};P.ya=function(){};P.isActive=function(){return!0};P.Va=function(){};function zh(){if(No&&!(10<=Number(G3)))throw Error("Environmental error: no available transport.")}zh.prototype.g=function(t,e){return new Qt(t,e)};function Qt(t,e){it.call(this),this.g=new NM(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Bc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Bc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ko(this)}st(Qt,it);Qt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Dt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=UM(t,null,t.Y),cf(t)};Qt.prototype.close=function(){R_(this.g)};Qt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=C_(t),t=n);e.j.push(new vU(e.fb++,t)),e.H==3&&cf(e)};Qt.prototype.N=function(){this.g.h=null,delete this.j,R_(this.g),delete this.g,Qt.$.N.call(this)};function zM(t){S_.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}st(zM,S_);function qM(){A_.call(this),this.status=1}st(qM,A_);function ko(t){this.g=t}st(ko,HM);ko.prototype.Ba=function(){dt(this.g,"a")};ko.prototype.Aa=function(t){dt(this.g,new zM(t))};ko.prototype.za=function(t){dt(this.g,new qM)};ko.prototype.ya=function(){dt(this.g,"b")};function xU(){this.blockSize=-1}function bn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}st(bn,xU);bn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Zv(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}bn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Zv(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Zv(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Zv(this,r),i=0;break}}this.h=i,this.i+=e};bn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ve(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var PU={};function k_(t){return-128<=t&&128>t?H3(t,function(e){return new ve([e|0],0>e?-1:0)}):new ve([t|0],0>t?-1:0)}function Qn(t){if(isNaN(t)||!isFinite(t))return Ro;if(0>t)return lt(Qn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=h_;return new ve(e,0)}function GM(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return lt(GM(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Qn(Math.pow(e,8)),r=Ro,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Qn(Math.pow(e,s)),r=r.R(s).add(Qn(o))):(r=r.R(n),r=r.add(Qn(o)))}return r}var h_=4294967296,Ro=k_(0),f_=k_(1),$A=k_(16777216);P=ve.prototype;P.ea=function(){if(un(this))return-lt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:h_+r)*e,e*=h_}return t};P.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(wr(this))return"0";if(un(this))return"-"+lt(this).toString(t);for(var e=Qn(Math.pow(t,6)),n=this,r="";;){var i=Gh(n,e).g;n=qh(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,wr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};P.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function wr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function un(t){return t.h==-1}P.X=function(t){return t=qh(this,t),un(t)?-1:wr(t)?0:1};function lt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ve(n,~t.h).add(f_)}P.abs=function(){return un(this)?lt(this):this};P.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new ve(n,n[n.length-1]&-2147483648?-1:0)};function qh(t,e){return t.add(lt(e))}P.R=function(t){if(wr(this)||wr(t))return Ro;if(un(this))return un(t)?lt(this).R(lt(t)):lt(lt(this).R(t));if(un(t))return lt(this.R(lt(t)));if(0>this.X($A)&&0>t.X($A))return Qn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,Bh(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Bh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Bh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Bh(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ve(n,0)};function Bh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Fc(t,e){this.g=t,this.h=e}function Gh(t,e){if(wr(e))throw Error("division by zero");if(wr(t))return new Fc(Ro,Ro);if(un(t))return e=Gh(lt(t),e),new Fc(lt(e.g),lt(e.h));if(un(e))return e=Gh(t,lt(e)),new Fc(lt(e.g),e.h);if(30<t.g.length){if(un(t)||un(e))throw Error("slowDivide_ only works with positive integers.");for(var n=f_,r=e;0>=r.X(t);)n=HA(n),r=HA(r);var i=xo(n,1),s=xo(r,1);for(r=xo(r,2),n=xo(n,2);!wr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=xo(r,1),n=xo(n,1)}return e=qh(t,i.R(e)),new Fc(i,e)}for(i=Ro;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Qn(n),o=s.R(e);un(o)||0<o.X(t);)n-=r,s=Qn(n),o=s.R(e);wr(s)&&(s=f_),i=i.add(s),t=qh(t,o)}return new Fc(i,t)}P.gb=function(t){return Gh(this,t).h};P.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ve(n,this.h&t.h)};P.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ve(n,this.h|t.h)};P.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ve(n,this.h^t.h)};function HA(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ve(n,t.h)}function xo(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ve(i,t.h)}zh.prototype.createWebChannel=zh.prototype.g;Qt.prototype.send=Qt.prototype.u;Qt.prototype.open=Qt.prototype.m;Qt.prototype.close=Qt.prototype.close;ef.NO_ERROR=0;ef.TIMEOUT=8;ef.HTTP_ERROR=6;uM.COMPLETE="complete";lM.EventType=Zc;Zc.OPEN="a";Zc.CLOSE="b";Zc.ERROR="c";Zc.MESSAGE="d";it.prototype.listen=it.prototype.O;Le.prototype.listenOnce=Le.prototype.P;Le.prototype.getLastError=Le.prototype.Sa;Le.prototype.getLastErrorCode=Le.prototype.Ia;Le.prototype.getStatus=Le.prototype.da;Le.prototype.getResponseJson=Le.prototype.Wa;Le.prototype.getResponseText=Le.prototype.ja;Le.prototype.send=Le.prototype.ha;Le.prototype.setWithCredentials=Le.prototype.Oa;bn.prototype.digest=bn.prototype.l;bn.prototype.reset=bn.prototype.reset;bn.prototype.update=bn.prototype.j;ve.prototype.add=ve.prototype.add;ve.prototype.multiply=ve.prototype.R;ve.prototype.modulo=ve.prototype.gb;ve.prototype.compare=ve.prototype.X;ve.prototype.toNumber=ve.prototype.ea;ve.prototype.toString=ve.prototype.toString;ve.prototype.getBits=ve.prototype.D;ve.fromNumber=Qn;ve.fromString=GM;var WM=Tn.createWebChannelTransport=function(){return new zh},KM=Tn.getStatEventTarget=function(){return Jh()},uf=Tn.ErrorCode=ef,QM=Tn.EventType=uM,YM=Tn.Event=ts,F_=Tn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},pY=Tn.FetchXmlHttpFactory=eu,ru=Tn.WebChannel=lM,ZM=Tn.XhrIo=Le,XM=Tn.Md5=bn,ns=Tn.Integer=ve;var JM="@firebase/firestore";var Ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");var da="10.7.0";var ai=new ol("@firebase/firestore");function Bo(){return ai.logLevel}function X1(t){ai.setLogLevel(t)}function C(t,...e){if(ai.logLevel<=Nn.DEBUG){let n=e.map(V0);ai.debug(`Firestore (${da}): ${t}`,...n)}}function $e(t,...e){if(ai.logLevel<=Nn.ERROR){let n=e.map(V0);ai.error(`Firestore (${da}): ${t}`,...n)}}function dn(t,...e){if(ai.logLevel<=Nn.WARN){let n=e.map(V0);ai.warn(`Firestore (${da}): ${t}`,...n)}}function V0(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function F(t="Unexpected state"){let e=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: `+t;throw $e(e),new Error(e)}function B(t,e){t||F()}function J1(t,e){t||F()}function R(t,e){return t}var v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},E=class extends _C{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xe=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var wf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},U_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ze.UNAUTHENTICATED))}shutdown(){}},$_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},H_=class{constructor(e){this.t=e,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Xe;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xe,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{C("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(C("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xe)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(C("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(B(typeof r.accessToken=="string"),new wf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return B(e===null||typeof e=="string"),new Ze(e)}},z_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},q_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new z_(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},G_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},W_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&C("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,C("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{C("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):C("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(B(typeof n.token=="string"),this.R=n.token,new G_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function RU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ef=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=RU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Z(t,e){return t<e?-1:t>e?1:0}function Qo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function ex(t){return t+"\0"}var Oe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new E(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new E(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new E(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new E(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var H=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Oe(0,0))}static max(){return new t(new Oe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Cf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&F(),r===void 0?r=e.length-n:r>e.length-n&&F(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ge=class t extends Cf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new E(v.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},NU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,He=class t extends Cf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return NU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new E(v.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new E(v.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new E(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new E(v.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var x=class t{constructor(e){this.path=e}static fromPath(e){return new t(ge.fromString(e))}static fromName(e){return new t(ge.fromString(e).popFirst(5))}static empty(){return new t(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ge(e.slice()))}};var Yo=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function K_(t){return t.fields.find(e=>e.kind===2)}function is(t){return t.fields.filter(e=>e.kind!==2)}Yo.UNKNOWN_ID=-1;var Go=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var gu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,hn.min())}};function tx(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=H.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new hn(i,x.empty(),e)}function nx(t){return new hn(t.readTime,t.key,-1)}var hn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(H.min(),x.empty(),-1)}static max(){return new t(H.max(),x.empty(),-1)}};function L0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=x.comparator(t.documentKey,e.documentKey),n!==0?n:Z(t.largestBatchId,e.largestBatchId))}var rx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",If=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function vi(t){return _(this,null,function*(){if(t.code!==v.FAILED_PRECONDITION||t.message!==rx)throw t;C("LocalStore","Unexpectedly lost primary lease")})}var m=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&F(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var Df=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Xe,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ls(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=j0(r.target.error);this.V.reject(new ls(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new ls(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(C("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Y_(n)}},ci=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(il())===12.2&&$e("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return C("SimpleDb","Removing database:",e),ss(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!sl())return!1;if(t.C())return!0;let e=il(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return _(this,null,function*(){return this.db||(C("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new ls(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new E(v.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new E(v.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ls(e,o))},i.onupgradeneeded=s=>{C("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{C("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return _(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=Df.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),m.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&o<3;if(C("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Q_=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ss(this.k.delete())}},ls=class extends E{constructor(e,n){super(v.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function _i(t){return t.name==="IndexedDbTransactionError"}var Y_=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(C("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(C("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ss(r)}add(e){return C("SimpleDb","ADD",this.store.name,e,e),ss(this.store.add(e))}get(e){return ss(this.store.get(e)).next(n=>(n===void 0&&(n=null),C("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return C("SimpleDb","DELETE",this.store.name,e),ss(this.store.delete(e))}count(){return C("SimpleDb","COUNT",this.store.name),ss(this.store.count())}W(e,n){let r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){let i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{let i=this.store.getAll(r.range);return new m((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new m((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){C("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new m((r,i)=>{n.onerror=s=>{let o=j0(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new m((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new Q_(a),u=n(a.primaryKey,a.value,c);if(u instanceof m){let l=u.catch(d=>(c.done(),m.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>m.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function ss(t){return new m((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=j0(r.target.error);n(i)}})}var e1=!1;function j0(t){let e=ci.S(il());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new E("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return e1||(e1=!0,setTimeout(()=>{throw r},0)),r}}return t}var Z_=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){C("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>_(this,null,function*(){this.task=null;try{C("IndexBackiller",`Documents written: ${yield this.X.te()}`)}catch(n){_i(n)?C("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):yield vi(n)}yield this.ee(6e4)}))}},X_=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return _(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,s=!0;return m.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return C("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(C("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{let o=nx(s);L0(o,r)>0&&(r=o)}),new hn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Yt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function ju(t){return t==null}function mu(t){return t===0&&1/t==-1/0}function ix(t){return typeof t=="number"&&Number.isInteger(t)&&!mu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function bt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=t1(e)),e=OU(t.get(n),e);return t1(e)}function OU(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function t1(t){return t+""}function Yn(t){let e=t.length;if(B(e>=2),e===2)return B(t.charAt(0)===""&&t.charAt(1)===""),ge.emptyPath();let n=e-2,r=[],i="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&F(),t.charAt(o+1)){case"":let a=t.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:F()}s=o+2}return new ge(r)}var n1=["userId","batchId"];function pf(t,e){return[t,bt(e)]}function sx(t,e,n){return[t,bt(e),n]}var kU={},FU=["prefixPath","collectionGroup","readTime","documentId"],VU=["prefixPath","collectionGroup","documentId"],LU=["collectionGroup","readTime","prefixPath","documentId"],jU=["canonicalId","targetId"],BU=["targetId","path"],UU=["path","targetId"],$U=["collectionId","parent"],HU=["indexId","uid"],zU=["uid","sequenceNumber"],qU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],GU=["indexId","uid","orderedDocumentKey"],WU=["userId","collectionPath","documentId"],KU=["userId","collectionPath","largestBatchId"],QU=["userId","collectionGroup","largestBatchId"],ox=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],YU=[...ox,"documentOverlays"],ax=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cx=ax,ZU=[...cx,"indexConfiguration","indexState","indexEntries"];var yu=class extends If{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function at(t,e){let n=R(t);return ci.M(n.ae,e)}function r1(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cs(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ux(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Te=class t{constructor(e,n){this.comparator=e,this.root=n||Xn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qo(this.root,e,this.comparator,!1)}getReverseIterator(){return new qo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qo(this.root,e,this.comparator,!0)}},qo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw F();let e=this.left.check();if(e!==this.right.check())throw F();return e+(this.isRed()?0:1)}};Xn.EMPTY=null,Xn.RED=!0,Xn.BLACK=!1;Xn.EMPTY=new class{constructor(){this.size=0}get key(){throw F()}get value(){throw F()}get color(){throw F()}get left(){throw F()}get right(){throw F()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Xn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ee=class t{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bf(this.data.getIterator())}getIteratorFrom(e){return new bf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},bf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Fo(t){return t.hasNext()?t.getNext():void 0}var Zt=class t{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ee(He.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Tf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function lx(){return typeof atob<"u"}var ot=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Tf("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ot.EMPTY_BYTE_STRING=new ot("");var XU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ui(t){if(B(!!t),typeof t=="string"){let e=0,n=XU.exec(t);if(B(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function li(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}function mp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function B0(t){let e=t.mapValue.fields.__previous_value__;return mp(e)?B0(e):e}function vu(t){let e=ui(t.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}var J_=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},di=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var si={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gf={nullValue:"NULL_VALUE"};function ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mp(t)?4:dx(t)?9007199254740991:10:F()}function tr(t,e){if(t===e)return!0;let n=ds(t);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vu(t).isEqual(vu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ui(i.timestampValue),a=ui(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return li(i.bytesValue).isEqual(li(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return je(i.geoPointValue.latitude)===je(s.geoPointValue.latitude)&&je(i.geoPointValue.longitude)===je(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return je(i.integerValue)===je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=je(i.doubleValue),a=je(s.doubleValue);return o===a?mu(o)===mu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Qo(t.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(r1(o)!==r1(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!tr(o[c],a[c])))return!1;return!0}(t,e);default:return F()}}function _u(t,e){return(t.values||[]).find(n=>tr(n,e))!==void 0}function hi(t,e){if(t===e)return 0;let n=ds(t),r=ds(e);if(n!==r)return Z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=je(s.integerValue||s.doubleValue),c=je(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return i1(t.timestampValue,e.timestampValue);case 4:return i1(vu(t),vu(e));case 5:return Z(t.stringValue,e.stringValue);case 6:return function(s,o){let a=li(s),c=li(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=Z(a[u],c[u]);if(l!==0)return l}return Z(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Z(je(s.latitude),je(o.latitude));return a!==0?a:Z(je(s.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=hi(a[u],c[u]);if(l)return l}return Z(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===si.mapValue&&o===si.mapValue)return 0;if(s===si.mapValue)return 1;if(o===si.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=Z(c[d],l[d]);if(h!==0)return h;let f=hi(a[c[d]],u[l[d]]);if(f!==0)return f}return Z(c.length,l.length)}(t.mapValue,e.mapValue);default:throw F()}}function i1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Z(t,e);let n=ui(t),r=ui(e),i=Z(n.seconds,r.seconds);return i!==0?i:Z(n.nanos,r.nanos)}function Zo(t){return ew(t)}function ew(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ui(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return x.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=ew(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${ew(n.fields[o])}`;return i+"}"}(t.mapValue):F()}function hs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tw(t){return!!t&&"integerValue"in t}function wu(t){return!!t&&"arrayValue"in t}function s1(t){return!!t&&"nullValue"in t}function o1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mf(t){return!!t&&"mapValue"in t}function lu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Cs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=lu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function JU(t){return"nullValue"in t?gf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?hs(di.empty(),x.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:F()}function e9(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?hs(di.empty(),x.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?si:F()}function a1(t,e){let n=hi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function c1(t,e){let n=hi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var wt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!mf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(n)}setAll(e){let n=He.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=lu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());mf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];mf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Cs(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(lu(this.value))}};function hx(t){let e=[];return Cs(t.fields,(n,r)=>{let i=new He([n]);if(mf(r)){let s=hx(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Zt(e)}var Je=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,H.min(),H.min(),H.min(),wt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,H.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,H.min(),H.min(),wt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,H.min(),H.min(),wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var nr=class{constructor(e,n){this.position=e,this.inclusive=n}};function u1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=x.comparator(x.fromName(o.referenceValue),n.key):r=hi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function l1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tr(t.position[n],e.position[n]))return!1;return!0}var fs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function t9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Sf=class{},ue=class t extends Sf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new iw(e,n,r):n==="array-contains"?new aw(e,r):n==="in"?new Af(e,r):n==="not-in"?new cw(e,r):n==="array-contains-any"?new uw(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new sw(e,r):new ow(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hi(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(hi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return F()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},_e=class t extends Sf{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Xo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Xo(t){return t.op==="and"}function nw(t){return t.op==="or"}function U0(t){return fx(t)&&Xo(t)}function fx(t){for(let e of t.filters)if(e instanceof _e)return!1;return!0}function rw(t){if(t instanceof ue)return t.field.canonicalString()+t.op.toString()+Zo(t.value);if(U0(t))return t.filters.map(e=>rw(e)).join(",");{let e=t.filters.map(n=>rw(n)).join(",");return`${t.op}(${e})`}}function px(t,e){return t instanceof ue?function(r,i){return i instanceof ue&&r.op===i.op&&r.field.isEqual(i.field)&&tr(r.value,i.value)}(t,e):t instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&px(o,i.filters[a]),!0):!1}(t,e):void F()}function gx(t,e){let n=t.filters.concat(e);return _e.create(n,t.op)}function mx(t){return t instanceof ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Zo(n.value)}`}(t):t instanceof _e?function(n){return n.op.toString()+" {"+n.getFilters().map(mx).join(" ,")+"}"}(t):"Filter"}var iw=class extends ue{constructor(e,n,r){super(e,n,r),this.key=x.fromName(r.referenceValue)}matches(e){let n=x.comparator(e.key,this.key);return this.matchesComparison(n)}},sw=class extends ue{constructor(e,n){super(e,"in",n),this.keys=yx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},ow=class extends ue{constructor(e,n){super(e,"not-in",n),this.keys=yx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function yx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>x.fromName(r.referenceValue))}var aw=class extends ue{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return wu(n)&&_u(n.arrayValue,this.value)}},Af=class extends ue{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&_u(this.value.arrayValue,n)}},cw=class extends ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!_u(this.value.arrayValue,n)}},uw=class extends ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!wu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_u(this.value.arrayValue,r))}};var lw=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function dw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new lw(t,e,n,r,i,s,o)}function ps(t){let e=R(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ju(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zo(r)).join(",")),e.ce=n}return e.ce}function Bu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!t9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!px(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!l1(t.startAt,e.startAt)&&l1(t.endAt,e.endAt)}function Mf(t){return x.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function xf(t,e){return t.filters.filter(n=>n instanceof ue&&n.field.isEqual(e))}function d1(t,e,n){let r=gf,i=!0;for(let s of xf(t,e)){let o=gf,a=!0;switch(s.op){case"<":case"<=":o=JU(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=gf}a1({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];a1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function h1(t,e,n){let r=si,i=!0;for(let s of xf(t,e)){let o=si,a=!0;switch(s.op){case">=":case">":o=e9(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=si}c1({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];c1({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}var Sn=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function vx(t,e,n,r,i,s,o,a){return new Sn(t,e,n,r,i,s,o,a)}function ha(t){return new Sn(t)}function f1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $0(t){return t.collectionGroup!==null}function Wo(t){let e=R(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ee(He.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new fs(s,r))}),n.has(He.keyField().canonicalString())||e.le.push(new fs(He.keyField(),r))}return e.le}function Tt(t){let e=R(t);return e.he||(e.he=n9(e,Wo(t))),e.he}function n9(t,e){if(t.limitType==="F")return dw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new fs(i.field,s)});let n=t.endAt?new nr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nr(t.startAt.position,t.startAt.inclusive):null;return dw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hw(t,e){let n=t.filters.concat([e]);return new Sn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Pf(t,e,n){return new Sn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uu(t,e){return Bu(Tt(t),Tt(e))&&t.limitType===e.limitType}function _x(t){return`${ps(Tt(t))}|lt:${t.limitType}`}function Uo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>mx(i)).join(", ")}]`),ju(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Zo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Zo(i)).join(",")),`Target(${r})`}(Tt(t))}; limitType=${t.limitType})`}function $u(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):x.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Wo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=u1(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Wo(r),i)||r.endAt&&!function(o,a,c){let u=u1(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Wo(r),i))}(t,e)}function wx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ex(t){return(e,n)=>{let r=!1;for(let i of Wo(t)){let s=r9(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function r9(t,e,n){let r=t.field.isKeyField()?x.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?hi(c,u):F()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return F()}}var rr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return ux(this.inner)}size(){return this.innerSize}};var i9=new Te(x.comparator);function Nt(){return i9}var Cx=new Te(x.comparator);function cu(...t){let e=Cx;for(let n of t)e=e.insert(n.key,n);return e}function Ix(t){let e=Cx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zn(){return du()}function Dx(){return du()}function du(){return new rr(t=>t.toString(),(t,e)=>t.isEqual(e))}var s9=new Te(x.comparator),o9=new Ee(x.comparator);function X(...t){let e=o9;for(let n of t)e=e.add(n);return e}var a9=new Ee(Z);function H0(){return a9}function bx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(e)?"-0":e}}function Tx(t){return{integerValue:""+t}}function Sx(t,e){return ix(e)?Tx(e):bx(t,e)}var Jo=class{constructor(){this._=void 0}};function c9(t,e,n){return t instanceof fi?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&mp(s)&&(s=B0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Dr?Mx(t,e):t instanceof br?xx(t,e):function(i,s){let o=Ax(i,s),a=p1(o)+p1(i.Ie);return tw(o)&&tw(i.Ie)?Tx(a):bx(i.serializer,a)}(t,e)}function u9(t,e,n){return t instanceof Dr?Mx(t,e):t instanceof br?xx(t,e):n}function Ax(t,e){return t instanceof pi?function(r){return tw(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var fi=class extends Jo{},Dr=class extends Jo{constructor(e){super(),this.elements=e}};function Mx(t,e){let n=Px(e);for(let r of t.elements)n.some(i=>tr(i,r))||n.push(r);return{arrayValue:{values:n}}}var br=class extends Jo{constructor(e){super(),this.elements=e}};function xx(t,e){let n=Px(e);for(let r of t.elements)n=n.filter(i=>!tr(i,r));return{arrayValue:{values:n}}}var pi=class extends Jo{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function p1(t){return je(t.integerValue||t.doubleValue)}function Px(t){return wu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var gs=class{constructor(e,n){this.field=e,this.transform=n}};function l9(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Dr&&i instanceof Dr||r instanceof br&&i instanceof br?Qo(r.elements,i.elements,tr):r instanceof pi&&i instanceof pi?tr(r.Ie,i.Ie):r instanceof fi&&i instanceof fi}(t.transform,e.transform)}var fw=class{constructor(e,n){this.version=e,this.transformResults=n}},Be=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function yf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ea=class{};function Rx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mi(t.key,Be.none()):new gi(t.key,t.data,Be.none());{let n=t.data,r=wt.empty(),i=new Ee(He.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new An(t.key,r,new Zt(i.toArray()),Be.none())}}function d9(t,e,n){t instanceof gi?function(i,s,o){let a=i.value.clone(),c=m1(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof An?function(i,s,o){if(!yf(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=m1(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Nx(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function hu(t,e,n,r){return t instanceof gi?function(s,o,a,c){if(!yf(s.precondition,o))return a;let u=s.value.clone(),l=y1(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof An?function(s,o,a,c){if(!yf(s.precondition,o))return a;let u=y1(s.fieldTransforms,c,o),l=o.data;return l.setAll(Nx(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return yf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function h9(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=Ax(r.transform,i||null);s!=null&&(n===null&&(n=wt.empty()),n.set(r.field,s))}return n||null}function g1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qo(r,i,(s,o)=>l9(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var gi=class extends ea{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},An=class extends ea{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Nx(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function m1(t,e,n){let r=new Map;B(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,u9(o,a,n[i]))}return r}function y1(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,c9(s,o,e))}return r}var mi=class extends ea{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Eu=class extends ea{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&d9(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=Dx();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=Rx(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(H.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),X())}isEqual(e){return this.batchId===e.batchId&&Qo(this.mutations,e.mutations,(n,r)=>g1(n,r))&&Qo(this.baseMutations,e.baseMutations,(n,r)=>g1(n,r))}},pw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){B(e.mutations.length===r.length);let i=function(){return s9}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Iu=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var gw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Qe,de;function Ox(t){switch(t){default:return F();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function kx(t){if(t===void 0)return $e("GRPC error has no .code"),v.UNKNOWN;switch(t){case Qe.OK:return v.OK;case Qe.CANCELLED:return v.CANCELLED;case Qe.UNKNOWN:return v.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return v.INTERNAL;case Qe.UNAVAILABLE:return v.UNAVAILABLE;case Qe.UNAUTHENTICATED:return v.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case Qe.NOT_FOUND:return v.NOT_FOUND;case Qe.ALREADY_EXISTS:return v.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return v.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case Qe.ABORTED:return v.ABORTED;case Qe.OUT_OF_RANGE:return v.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return v.UNIMPLEMENTED;case Qe.DATA_LOSS:return v.DATA_LOSS;default:return F()}}(de=Qe||(Qe={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var v1=null;function Fx(){return new TextEncoder}var f9=new ns([4294967295,4294967295],0);function _1(t){let e=Fx().encode(t),n=new XM;return n.update(e),new Uint8Array(n.digest())}function w1(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ns([n,r],0),new ns([i,s],0)]}var mw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new us(`Invalid padding: ${n}`);if(r<0)throw new us(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new us(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new us(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=ns.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(ns.fromNumber(r)));return i.compare(f9)===1&&(i=new ns([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=_1(e),[r,i]=w1(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=_1(e),[r,i]=w1(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},us=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Du=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,bu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(H.min(),i,new Te(Z),Nt(),X())}},bu=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,X(),X(),X())}};var Ko=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Rf=class{constructor(e,n){this.targetId=e,this.fe=n}},Nf=class{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Of=class{constructor(){this.ge=0,this.pe=C1(),this.ye=ot.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=X(),n=X(),r=X();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:F()}}),new bu(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=C1()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,B(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},yw=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=Nt(),this.Qe=E1(),this.Ke=new Te(Z)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:F()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(Mf(s))if(r===0){let o=new x(s.path);this.We(n,o,Je.newNoDocument(o,H.min()))}else B(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}v1?.tt(function(l,d,h,f,p){var g,y,w,S,T,O;let U={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},z=d.unchangedNames;return z&&(U.bloomFilter={applied:p===0,hashCount:(g=z?.hashCount)!==null&&g!==void 0?g:0,bitmapLength:(S=(w=(y=z?.bits)===null||y===void 0?void 0:y.bitmap)===null||w===void 0?void 0:w.length)!==null&&S!==void 0?S:0,padding:(O=(T=z?.bits)===null||T===void 0?void 0:T.padding)!==null&&O!==void 0?O:0,mightContain:ee=>{var ke;return(ke=f?.mightContain(ee))!==null&&ke!==void 0&&ke}}),U}(o,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=li(r).toUint8Array()}catch(c){if(c instanceof Tf)return dn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new mw(o,i,s)}catch(c){return dn(c instanceof us?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Mf(a.target)){let c=new x(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,Je.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=X();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new Du(e,n,this.Ke,this.qe,r);return this.qe=Nt(),this.Qe=E1(),this.Ke=new Te(Z),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Of,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ee(Z),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||C("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Of),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function E1(){return new Te(x.comparator)}function C1(){return new Te(x.comparator)}var p9=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),g9=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),m9=(()=>({and:"AND",or:"OR"}))(),vw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function _w(t,e){return t.useProto3Json||ju(e)?e:{value:e}}function ta(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function y9(t,e){return ta(t,e.toTimestamp())}function ze(t){return B(!!t),H.fromTimestamp(function(n){let r=ui(n);return new Oe(r.seconds,r.nanos)}(t))}function z0(t,e){return function(r){return new ge(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function Lx(t){let e=ge.fromString(t);return B(Wx(e)),e}function Tu(t,e){return z0(t.databaseId,e.path)}function Jn(t,e){let n=Lx(e);if(n.get(1)!==t.databaseId.projectId)throw new E(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new E(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new x(Bx(n))}function ww(t,e){return z0(t.databaseId,e)}function jx(t){let e=Lx(t);return e.length===4?ge.emptyPath():Bx(e)}function Su(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Bx(t){return B(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function I1(t,e,n){return{name:Tu(t,e),fields:n.value.mapValue.fields}}function Ux(t,e,n){let r=Jn(t,e.name),i=ze(e.updateTime),s=e.createTime?ze(e.createTime):H.min(),o=new wt({mapValue:{fields:e.fields}}),a=Je.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function v9(t,e){return"found"in e?function(r,i){B(!!i.found),i.found.name,i.found.updateTime;let s=Jn(r,i.found.name),o=ze(i.found.updateTime),a=i.found.createTime?ze(i.found.createTime):H.min(),c=new wt({mapValue:{fields:i.found.fields}});return Je.newFoundDocument(s,o,a,c)}(t,e):"missing"in e?function(r,i){B(!!i.missing),B(!!i.readTime);let s=Jn(r,i.missing),o=ze(i.readTime);return Je.newNoDocument(s,o)}(t,e):F()}function _9(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:F()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(B(l===void 0||typeof l=="string"),ot.fromBase64String(l||"")):(B(l===void 0||l instanceof Uint8Array),ot.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?v.UNKNOWN:kx(u.code);return new E(l,u.message||"")}(o);n=new Nf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Jn(t,r.document.name),s=ze(r.document.updateTime),o=r.document.createTime?ze(r.document.createTime):H.min(),a=new wt({mapValue:{fields:r.document.fields}}),c=Je.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Ko(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Jn(t,r.document),s=r.readTime?ze(r.readTime):H.min(),o=Je.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ko([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Jn(t,r.document),s=r.removedTargetIds||[];n=new Ko([],s,i,null)}else{if(!("filter"in e))return F();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new gw(i,s),a=r.targetId;n=new Rf(a,o)}}return n}function Au(t,e){let n;if(e instanceof gi)n={update:I1(t,e.key,e.value)};else if(e instanceof mi)n={delete:Tu(t,e.key)};else if(e instanceof An)n={update:I1(t,e.key,e.data),updateMask:b9(e.fieldMask)};else{if(!(e instanceof Eu))return F();n={verify:Tu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof fi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof br)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pi)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw F()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:y9(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:F()}(t,e.precondition)),n}function Ew(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?Be.updateTime(ze(s.updateTime)):s.exists!==void 0?Be.exists(s.exists):Be.none()}(e.currentDocument):Be.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)B(a.setToServerValue==="REQUEST_TIME"),c=new fi;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];c=new Dr(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];c=new br(l)}else"increment"in a?c=new pi(o,a.increment):F();let u=He.fromServerFormat(a.fieldPath);return new gs(u,c)}(t,i)):[];if(e.update){e.update.name;let i=Jn(t,e.update.name),s=new wt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let u=c.fieldPaths||[];return new Zt(u.map(l=>He.fromServerFormat(l)))}(e.updateMask);return new An(i,s,o,n,r)}return new gi(i,s,n,r)}if(e.delete){let i=Jn(t,e.delete);return new mi(i,n)}if(e.verify){let i=Jn(t,e.verify);return new Eu(i,n)}return F()}function w9(t,e){return t&&t.length>0?(B(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ze(i.updateTime):ze(s);return o.isEqual(H.min())&&(o=ze(s)),new fw(o,i.transformResults||[])}(n,e))):[]}function $x(t,e){return{documents:[ww(t,e.path)]}}function Hx(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=ww(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ww(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(c){if(c.length!==0)return Gx(_e.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);let s=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:$o(d.field),direction:C9(d.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let o=_w(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function zx(t){let e=jx(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){B(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=qx(d);return h instanceof _e&&U0(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(p){return new fs(Ho(p.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,ju(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new nr(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new nr(f,h)}(n.endAt)),vx(e,i,o,s,a,"F",c,u)}function E9(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return F()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ho(n.unaryFilter.field);return ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ho(n.unaryFilter.field);return ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ho(n.unaryFilter.field);return ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ho(n.unaryFilter.field);return ue.create(o,"!=",{nullValue:"NULL_VALUE"});default:return F()}}(t):t.fieldFilter!==void 0?function(n){return ue.create(Ho(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return F()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _e.create(n.compositeFilter.filters.map(r=>qx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return F()}}(n.compositeFilter.op))}(t):F()}function C9(t){return p9[t]}function I9(t){return g9[t]}function D9(t){return m9[t]}function $o(t){return{fieldPath:t.canonicalString()}}function Ho(t){return He.fromServerFormat(t.fieldPath)}function Gx(t){return t instanceof ue?function(n){if(n.op==="=="){if(o1(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NAN"}};if(s1(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(o1(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NOT_NAN"}};if(s1(n.value))return{unaryFilter:{field:$o(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$o(n.field),op:I9(n.op),value:n.value}}}(t):t instanceof _e?function(n){let r=n.getFilters().map(i=>Gx(i));return r.length===1?r[0]:{compositeFilter:{op:D9(n.op),filters:r}}}(t):F()}function b9(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Wx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var na=class t{constructor(e,n,r,i,s=H.min(),o=H.min(),a=ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var kf=class{constructor(e){this.ut=e}};function T9(t,e){let n;if(e.document)n=Ux(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=x.fromSegments(e.noDocument.path),i=ys(e.noDocument.readTime);n=Je.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return F();{let r=x.fromSegments(e.unknownDocument.path),i=ys(e.unknownDocument.version);n=Je.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let s=new Oe(i[0],i[1]);return H.fromTimestamp(s)}(e.readTime)),n}function D1(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ff(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Tu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:ta(s,o.version.toTimestamp()),createTime:ta(s,o.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ms(e.version)};else{if(!e.isUnknownDocument())return F();r.unknownDocument={path:n.path.toArray(),version:ms(e.version)}}return r}function Ff(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ms(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ys(t){let e=new Oe(t.seconds,t.nanoseconds);return H.fromTimestamp(e)}function os(t,e){let n=(e.baseMutations||[]).map(s=>Ew(t.ut,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>Ew(t.ut,s)),i=Oe.fromMillis(e.localWriteTimeMs);return new Cu(e.batchId,i,n,r)}function uu(t){let e=ys(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ys(t.lastLimboFreeSnapshotVersion):H.min(),r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return B(s.documents.length===1),Tt(ha(jx(s.documents[0])))}(t.query):function(s){return Tt(zx(s))}(t.query),new na(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ot.fromBase64String(t.resumeToken))}function Kx(t,e){let n=ms(e.snapshotVersion),r=ms(e.lastLimboFreeSnapshotVersion),i;i=Mf(e.target)?$x(t.ut,e.target):Hx(t.ut,e.target);let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ps(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function q0(t){let e=zx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pf(e,e.limit,"L"):e}function V_(t,e){return new Iu(e.largestBatchId,Ew(t.ut,e.overlayMutation))}function b1(t,e){let n=e.path.lastSegment();return[t,bt(e.path.popLast()),n]}function T1(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:ms(r.readTime),documentKey:bt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Cw=class{getBundleMetadata(e,n){return S1(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ys(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return S1(e).put(function(i){return{bundleId:i.id,createTime:ms(ze(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return A1(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:q0(s.bundledQuery),readTime:ys(s.readTime)}}(r)})}saveNamedQuery(e,n){return A1(e).put(function(i){return{name:i.name,readTime:ms(ze(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function S1(t){return at(t,"bundles")}function A1(t){return at(t,"namedQueries")}var Vf=class t{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return iu(e).get(b1(this.userId,n)).next(r=>r?V_(this.serializer,r):null)}getOverlays(e,n){let r=Zn();return m.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((s,o)=>{let a=new Iu(n,o);i.push(this.lt(e,a))}),m.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(o=>i.add(bt(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(iu(e).H("collectionPathOverlayIndex",a))}),m.waitFor(s)}getOverlaysForCollection(e,n,r){let i=Zn(),s=bt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return iu(e).W("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let u=V_(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let s=Zn(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return iu(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,u,l)=>{let d=V_(this.serializer,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):l.done()}).next(()=>s)}lt(e,n){return iu(e).put(function(i,s,o){let[a,c,u]=b1(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Au(i.ut,o.mutation)}}(this.serializer,this.userId,n))}};function iu(t){return at(t,"documentOverlays")}var Cr=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(je(e.integerValue));else if("doubleValue"in e){let r=je(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),mu(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(li(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?dx(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):F()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),x.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};Cr.St=new Cr;function S9(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function M1(t){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=S9(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}var Iw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{let i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){let n=this.Bt(e),r=M1(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){let n=this.Bt(e),r=M1(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){let n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Dw=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},bw=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},as=class{constructor(){this.Wt=new Iw,this.Gt=new Dw(this.Wt),this.zt=new bw(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var cs=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function ti(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=x1(t.arrayValue,e.arrayValue),n!==0?n:(n=x1(t.directionalValue,e.directionalValue),n!==0?n:x.comparator(t.documentKey,e.documentKey)))}function x1(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Lf=class{constructor(e){this.Jt=new Ee((n,r)=>He.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(B(e.collectionGroup===this.collectionId),this.Xt)return!1;let n=K_(e);if(n!==void 0&&!this.tn(n))return!1;let r=is(e),i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){let a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.nn(a,c)||!this.rn(this.Yt[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.Yt.length||!this.rn(this.Yt[o++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new Ee(He.comparator),n=[];for(let r of this.Zt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Go(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Go(r.field,0))}for(let r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Go(r.field,r.dir==="asc"?0:1)));return new Yo(Yo.UNKNOWN_ID,this.collectionId,n,gu.empty())}tn(e){for(let n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function Qx(t){var e,n;if(B(t instanceof ue||t instanceof _e),t instanceof ue){if(t instanceof Af){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ue.create(t.field,"==",s)))||[];return _e.create(i,"or")}return t}let r=t.filters.map(i=>Qx(i));return _e.create(r,t.op)}function A9(t){if(t.getFilters().length===0)return[];let e=Aw(Qx(t));return B(Yx(e)),Tw(e)||Sw(e)?[e]:e.getFilters()}function Tw(t){return t instanceof ue}function Sw(t){return t instanceof _e&&U0(t)}function Yx(t){return Tw(t)||Sw(t)||function(n){if(n instanceof _e&&nw(n)){for(let r of n.getFilters())if(!Tw(r)&&!Sw(r))return!1;return!0}return!1}(t)}function Aw(t){if(B(t instanceof ue||t instanceof _e),t instanceof ue)return t;if(t.filters.length===1)return Aw(t.filters[0]);let e=t.filters.map(r=>Aw(r)),n=_e.create(e,t.op);return n=jf(n),Yx(n)?n:(B(n instanceof _e),B(Xo(n)),B(n.filters.length>1),n.filters.reduce((r,i)=>G0(r,i)))}function G0(t,e){let n;return B(t instanceof ue||t instanceof _e),B(e instanceof ue||e instanceof _e),n=t instanceof ue?e instanceof ue?function(i,s){return _e.create([i,s],"and")}(t,e):P1(t,e):e instanceof ue?P1(e,t):function(i,s){if(B(i.filters.length>0&&s.filters.length>0),Xo(i)&&Xo(s))return gx(i,s.getFilters());let o=nw(i)?i:s,a=nw(i)?s:i,c=o.filters.map(u=>G0(u,a));return _e.create(c,"or")}(t,e),jf(n)}function P1(t,e){if(Xo(e))return gx(e,t.getFilters());{let n=e.filters.map(r=>G0(t,r));return _e.create(n,"or")}}function jf(t){if(B(t instanceof ue||t instanceof _e),t instanceof ue)return t;let e=t.getFilters();if(e.length===1)return jf(e[0]);if(fx(t))return t;let n=e.map(i=>jf(i)),r=[];return n.forEach(i=>{i instanceof ue?r.push(i):i instanceof _e&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:_e.create(r,t.op)}var Mw=class{constructor(){this.on=new Mu}addToCollectionParentIndex(e,n){return this.on.add(n),m.resolve()}getCollectionParents(e,n){return m.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return m.resolve()}deleteFieldIndex(e,n){return m.resolve()}deleteAllFieldIndexes(e){return m.resolve()}createTargetIndexes(e,n){return m.resolve()}getDocumentsMatchingTarget(e,n){return m.resolve(null)}getIndexType(e,n){return m.resolve(0)}getFieldIndexes(e,n){return m.resolve([])}getNextCollectionGroupToUpdate(e){return m.resolve(null)}getMinOffset(e,n){return m.resolve(hn.min())}getMinOffsetFromCollectionGroup(e,n){return m.resolve(hn.min())}updateCollectionGroup(e,n,r){return m.resolve()}updateIndexEntries(e,n){return m.resolve()}},Mu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ee(ge.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ee(ge.comparator)).toArray()}};var lf=new Uint8Array(0),xw=class{constructor(e,n){this.user=e,this.databaseId=n,this._n=new Mu,this.an=new rr(r=>ps(r),(r,i)=>Bu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});let s={collectionId:r,parent:bt(i)};return R1(e).put(s)}return m.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[ex(n),""],!1,!0);return R1(e).W(i).next(s=>{for(let o of s){if(o.collectionId!==n)break;r.push(Yn(o.parent))}return r})}addFieldIndex(e,n){let r=su(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let s=r.add(i);if(n.indexState){let o=Lo(e);return s.next(a=>{o.put(T1(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let r=su(e),i=Lo(e),s=Vo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=su(e),r=Vo(e),i=Lo(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return m.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Lf(r).sn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let r=Vo(e),i=!0,s=new Map;return m.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=X(),a=[];return m.forEach(s,(c,u)=>{C("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(c)} to execute ${ps(n)}`);let l=function(T,O){let U=K_(O);if(U===void 0)return null;for(let z of xf(T,U.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(u,c),d=function(T,O){let U=new Map;for(let z of is(O))for(let ee of xf(T,z.fieldPath))switch(ee.op){case"==":case"in":U.set(z.fieldPath.canonicalString(),ee.value);break;case"not-in":case"!=":return U.set(z.fieldPath.canonicalString(),ee.value),Array.from(U.values())}return null}(u,c),h=function(T,O){let U=[],z=!0;for(let ee of is(O)){let ke=ee.kind===0?d1(T,ee.fieldPath,T.startAt):h1(T,ee.fieldPath,T.startAt);U.push(ke.value),z&&(z=ke.inclusive)}return new nr(U,z)}(u,c),f=function(T,O){let U=[],z=!0;for(let ee of is(O)){let ke=ee.kind===0?h1(T,ee.fieldPath,T.endAt):d1(T,ee.fieldPath,T.endAt);U.push(ke.value),z&&(z=ke.inclusive)}return new nr(U,z)}(u,c),p=this.ln(c,u,h),g=this.ln(c,u,f),y=this.hn(c,u,d),w=this.Pn(c.indexId,l,p,h.inclusive,g,f.inclusive,y);return m.forEach(w,S=>r.j(S,n.limit).next(T=>{T.forEach(O=>{let U=x.fromSegments(O.documentKey);o.has(U)||(o=o.add(U),a.push(U))})}))}).next(()=>a)}return m.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=A9(_e.create(e.filters,"and")).map(r=>dw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){let c=(n!=null?n.length:1)*Math.max(r.length,s.length),u=c/(n!=null?n.length:1),l=[];for(let d=0;d<c;++d){let h=n?this.In(n[d/u]):lf,f=this.Tn(e,h,r[d%u],i),p=this.En(e,h,s[d%u],o),g=a.map(y=>this.Tn(e,h,y,!0));l.push(...this.createRange(f,p,g))}return l}Tn(e,n,r,i){let s=new cs(e,x.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){let s=new cs(e,x.empty(),n,r);return i?s.Ht():s}cn(e,n){let r=new Lf(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,i=this.un(n);return m.forEach(i,s=>this.cn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new Ee(He.comparator),l=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:u=u.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(l?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}dn(e,n){let r=new as;for(let i of is(e)){let s=n.data.field(i.fieldPath);if(s==null)return null;let o=r.jt(i.kind);Cr.St.ht(s,o)}return r.Ut()}In(e){let n=new as;return Cr.St.ht(e,n.jt(0)),n.Ut()}An(e,n){let r=new as;return Cr.St.ht(hs(this.databaseId,n),r.jt(function(s){let o=is(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(r===null)return[];let i=[];i.push(new as);let s=0;for(let o of is(e)){let a=r[s++];for(let c of i)if(this.Rn(n,o.fieldPath)&&wu(a))i=this.Vn(i,o,a);else{let u=c.jt(o.kind);Cr.St.ht(a,u)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new as;c.seed(a.Ut()),Cr.St.ht(o,c.jt(n.kind)),s.push(c)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof ue&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=su(e),i=Lo(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{let o=[];return m.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(l,d){let h=d?new gu(d.sequenceNumber,new hn(ys(d.readTime),new x(Yn(d.documentKey)),d.largestBatchId)):gu.empty(),f=l.fields.map(([p,g])=>new Go(He.fromServerFormat(p),g));return new Yo(l.indexId,l.collectionGroup,f,h)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Z(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=su(e),s=Lo(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>m.forEach(a,c=>s.put(T1(c.indexId,this.user,o,r)))))}updateIndexEntries(e,n){let r=new Map;return m.forEach(n,(i,s)=>{let o=r.get(i.collectionGroup);return(o?m.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),m.forEach(a,c=>this.gn(e,i,c).next(u=>{let l=this.pn(s,c);return u.isEqual(l)?m.resolve():this.yn(e,s,c,u,l)}))))})}wn(e,n,r,i){return Vo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Vo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){let i=Vo(e),s=new Ee(ti);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new cs(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new Ee(ti),i=this.dn(n,e);if(i==null)return r;let s=K_(n);if(s!=null){let o=e.data.field(s.fieldPath);if(wu(o))for(let a of o.arrayValue.values||[])r=r.add(new cs(n.indexId,e.key,this.In(a),i))}else r=r.add(new cs(n.indexId,e.key,lf,i));return r}yn(e,n,r,i,s){C("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(c,u,l,d,h){let f=c.getIterator(),p=u.getIterator(),g=Fo(f),y=Fo(p);for(;g||y;){let w=!1,S=!1;if(g&&y){let T=l(g,y);T<0?S=!0:T>0&&(w=!0)}else g!=null?S=!0:w=!0;w?(d(y),y=Fo(p)):S?(h(g),g=Fo(f)):(g=Fo(f),y=Fo(p))}}(i,s,ti,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),m.waitFor(o)}fn(e){let n=1;return Lo(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ti(o,a)).filter((o,a,c)=>!a||ti(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=ti(o,e),c=ti(o,n);if(a===0)i[0]=e.Ht();else if(a>0&&c<0)i.push(o),i.push(o.Ht());else if(c>0)break}i.push(n);let s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,lf,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,lf,[]];s.push(IDBKeyRange.bound(a,c))}return s}bn(e,n){return ti(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(N1)}getMinOffset(e,n){return m.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||F())).next(N1)}};function R1(t){return at(t,"collectionParents")}function Vo(t){return at(t,"indexEntries")}function su(t){return at(t,"indexConfiguration")}function Lo(t){return at(t,"indexState")}function N1(t){B(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;L0(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new hn(e.readTime,e.documentKey,n)}var O1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ln=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Zx(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,c=r.Y({range:o},(l,d,h)=>(a++,h.delete()));s.push(c.next(()=>{B(a===1)}));let u=[];for(let l of n.mutations){let d=sx(e,l.key.path,n.batchId);s.push(i.delete(d)),u.push(l.key)}return m.waitFor(s).next(()=>u)}function Bf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw F();e=t.noDocument}return JSON.stringify(e).length}ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(41943040,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);var Uf=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){B(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ni(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let s=zo(e),o=ni(e);return o.add({}).next(a=>{B(typeof a=="number");let c=new Cu(a,n,r,i),u=function(f,p,g){let y=g.baseMutations.map(S=>Au(f.ut,S)),w=g.mutations.map(S=>Au(f.ut,S));return{userId:p,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:y,mutations:w}}(this.serializer,this.userId,c),l=[],d=new Ee((h,f)=>Z(h.canonicalString(),f.canonicalString()));for(let h of i){let f=sx(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(o.put(u)),l.push(s.put(f,kU))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Dn[a]=c.keys()}),m.waitFor(l).next(()=>c)})}lookupMutationBatch(e,n){return ni(e).get(n).next(r=>r?(B(r.userId===this.userId),os(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?m.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return ni(e).Y({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(B(a.batchId>=r),s=os(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ni(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ni(e).W("userMutationsIndex",n).next(r=>r.map(i=>os(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=pf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return zo(e).Y({range:i},(o,a,c)=>{let[u,l,d]=o,h=Yn(l);if(u===this.userId&&n.path.isEqual(h))return ni(e).get(d).next(f=>{if(!f)throw F();B(f.userId===this.userId),s.push(os(this.serializer,f))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ee(Z),i=[];return n.forEach(s=>{let o=pf(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=zo(e).Y({range:a},(u,l,d)=>{let[h,f,p]=u,g=Yn(f);h===this.userId&&s.path.isEqual(g)?r=r.add(p):d.done()});i.push(c)}),m.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=pf(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ee(Z);return zo(e).Y({range:o},(c,u,l)=>{let[d,h,f]=c,p=Yn(h);d===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):l.done()}).next(()=>this.vn(e,a))}vn(e,n){let r=[],i=[];return n.forEach(s=>{i.push(ni(e).get(s).next(o=>{if(o===null)throw F();B(o.userId===this.userId),r.push(os(this.serializer,o))}))}),m.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Zx(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),m.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return m.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return zo(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Yn(s[1]);i.push(c)}else a.done()}).next(()=>{B(i.length===0)})})}containsKey(e,n){return Xx(e,this.userId,n)}Mn(e){return Jx(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Xx(t,e,n){let r=pf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return zo(t).Y({range:s,J:!0},(a,c,u)=>{let[l,d,h]=a;l===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function ni(t){return at(t,"mutations")}function zo(t){return at(t,"documentMutations")}function Jx(t){return at(t,"mutationQueues")}var ra=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var Pw=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new ra(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>H.fromTimestamp(new Oe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>jo(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(B(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0,s=[];return jo(e).Y((o,a)=>{let c=uu(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>m.waitFor(s)).next(()=>i)}forEachTarget(e,n){return jo(e).Y((r,i)=>{let s=uu(i);n(s)})}Bn(e){return k1(e).get("targetGlobalKey").next(n=>(B(n!==null),n))}Ln(e,n){return k1(e).put("targetGlobalKey",n)}kn(e,n){return jo(e).put(Kx(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=ps(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return jo(e).Y({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let u=uu(a);Bu(n,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){let i=[],s=ri(e);return n.forEach(o=>{let a=bt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),m.waitFor(i)}removeMatchingKeys(e,n,r){let i=ri(e);return m.forEach(n,s=>{let o=bt(s.path);return m.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){let r=ri(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ri(e),s=X();return i.Y({range:r,J:!0},(o,a,c)=>{let u=Yn(o[1]),l=new x(u);s=s.add(l)}).next(()=>s)}containsKey(e,n){let r=bt(n.path),i=IDBKeyRange.bound([r],[ex(r)],!1,!0),s=0;return ri(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],c,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}_t(e,n){return jo(e).get(n).next(r=>r?uu(r):null)}};function jo(t){return at(t,"targets")}function k1(t){return at(t,"targetGlobal")}function ri(t){return at(t,"targetDocuments")}function F1([t,e],[n,r]){let i=Z(t,n);return i===0?Z(e,r):i}var Rw=class{constructor(e){this.Qn=e,this.buffer=new Ee(F1),this.Kn=0}$n(){return++this.Kn}Un(e){let n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();F1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Nw=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){C("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){_i(n)?C("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield vi(n)}yield this.Gn(3e5)}))}},Ow=class{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return m.resolve(Yt._e);let r=new Rw(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(C("LruGarbageCollector","Garbage collection skipped; disabled"),m.resolve(O1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(C("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O1):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(C("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Bo()<=Nn.DEBUG&&C("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-l}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),m.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}};function M9(t,e){return new Ow(t,e)}var kw=class{constructor(e,n){this.db=e,this.garbageCollector=M9(this,n)}jn(e){let n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return df(e,r)}removeReference(e,n,r){return df(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return df(e,n)}Xn(e,n){return function(i,s){let o=!1;return Jx(i).Z(a=>Xx(i,a,s).next(c=>(c&&(o=!0),m.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.Zn(e,(o,a)=>{if(a<=n){let c=this.Xn(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,H.min()),ri(e).delete(function(d){return[0,bt(d.path)]}(o))))});i.push(c)}}).next(()=>m.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return df(e,n)}Zn(e,n){let r=ri(e),i,s=Yt._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{o===0?(s!==Yt._e&&n(new x(Yn(i)),s),s=u,i=c):s=Yt._e}).next(()=>{s!==Yt._e&&n(new x(Yn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function df(t,e){return ri(t).put(function(r,i){return{targetId:0,path:bt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var $f=class{constructor(){this.changes=new rr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?m.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Fw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return rs(e).put(r)}removeEntry(e,n,r){return rs(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ff(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Je.newInvalidDocument(n);return rs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(ou(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:Je.newInvalidDocument(n)};return rs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(ou(n))},(i,s)=>{r={document:this.tr(n,s),size:Bf(s)}}).next(()=>r)}getEntries(e,n){let r=Nt();return this.rr(e,n,(i,s)=>{let o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=Nt(),i=new Te(x.comparator);return this.rr(e,n,(s,o)=>{let a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,Bf(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return m.resolve();let i=new Ee(j1);n.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(ou(i.first()),ou(i.last())),o=i.getIterator(),a=o.getNext();return rs(e).Y({index:"documentKeyIndex",range:s},(c,u,l)=>{let d=x.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&j1(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?l.U(ou(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Ff(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rs(e).W(IDBKeyRange.bound(a,c,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let l=Nt();for(let d of u){let h=this.tr(x.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&($u(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let s=Nt(),o=L1(n,r),a=L1(n,hn.max());return rs(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,l)=>{let d=this.tr(x.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&l.done()}).next(()=>s)}newChangeBuffer(e){return new Vw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return V1(e).get("remoteDocumentGlobalKey").next(n=>(B(!!n),n))}er(e,n){return V1(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){let r=T9(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(H.min())))return r}return Je.newInvalidDocument(e)}};function eP(t){return new Fw(t)}var Vw=class extends $f{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new rr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Ee((s,o)=>Z(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=D1(this._r.serializer,o);i=i.add(s.path.popLast());let u=Bf(c);r+=u-a.size,n.push(this._r.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=D1(this._r.serializer,o.convertToNoDocument(H.min()));n.push(this._r.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),m.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function V1(t){return at(t,"remoteDocumentGlobal")}function rs(t){return at(t,"remoteDocumentsV14")}function ou(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function L1(t,e){let n=e.documentKey.path.toArray();return[t,Ff(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function j1(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Z(n[s],r[s]),i)return i;return i=Z(n.length,r.length),i||(i=Z(n[n.length-2],r[r.length-2]),i||Z(n[n.length-1],r[r.length-1]))}var Lw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Hf=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&hu(r.mutation,i,Zt.empty(),Oe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,X()).next(()=>r))}getLocalViewOfDocuments(e,n,r=X()){let i=Zn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=cu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Zn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,X()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Nt(),o=du(),a=function(){return du()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof An)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),hu(l.mutation,u,l.mutation.getFieldMask(),Oe.now())):o.set(u.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new Lw(l,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=du(),i=new Te((o,a)=>o-a),s=X();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||Zt.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||X()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=Dx();l.forEach(h=>{if(!s.has(h)){let f=Rx(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return m.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return x.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):m.resolve(Zn()),a=-1,c=s;return o.next(u=>m.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?m.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,X())).next(l=>({batchId:a,changes:Ix(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new x(n)).next(r=>{let i=cu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=cu();return this.indexManager.getCollectionParents(e,s).next(a=>m.forEach(a,c=>{let u=function(d,h){return new Sn(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,Je.newInvalidDocument(l)))});let a=cu();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&hu(l.mutation,u,Zt.empty(),Oe.now()),$u(n,u)&&(a=a.insert(c,u))}),a})}};var jw=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return m.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ze(i.createTime)}}(n)),m.resolve()}getNamedQuery(e,n){return m.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:q0(i.bundledQuery),readTime:ze(i.readTime)}}(n)),m.resolve()}};var Bw=class{constructor(){this.overlays=new Te(x.comparator),this.lr=new Map}getOverlay(e,n){return m.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Zn();return m.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),m.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),m.resolve()}getOverlaysForCollection(e,n,r){let i=Zn(),s=n.length+1,o=new x(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return m.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Te((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=Zn(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=Zn(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return m.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Iu(n,r));let s=this.lr.get(n);s===void 0&&(s=X(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}};var xu=class{constructor(){this.hr=new Ee(Ye.Pr),this.Ir=new Ee(Ye.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new Ye(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Ye(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new x(new ge([])),r=new Ye(n,e),i=new Ye(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new x(new ge([])),r=new Ye(n,e),i=new Ye(n,e+1),s=X();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ye(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ye=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return x.comparator(e.key,n.key)||Z(e.gr,n.gr)}static Tr(e,n){return Z(e.gr,n.gr)||x.comparator(e.key,n.key)}};var Uw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ee(Ye.Pr)}checkEmpty(e){return m.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Cu(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.yr=this.yr.add(new Ye(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return m.resolve(o)}lookupMutationBatch(e,n){return m.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),s=i<0?0:i;return m.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return m.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return m.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ye(n,0),i=new Ye(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{let a=this.wr(o.gr);s.push(a)}),m.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ee(Z);return n.forEach(i=>{let s=new Ye(i,0),o=new Ye(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),m.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;x.isDocumentKey(s)||(s=s.child(""));let o=new Ye(new x(s),0),a=new Ee(Z);return this.yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.gr)),!0)},o),m.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){B(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return m.forEach(n.mutations,i=>{let s=new Ye(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new Ye(n,0),i=this.yr.firstAfterOrEqual(r);return m.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,m.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var $w=class{constructor(e){this.Cr=e,this.docs=function(){return new Te(x.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return m.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(n))}getEntries(e,n){let r=Nt();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Je.newInvalidDocument(i))}),m.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Nt(),o=n.path,a=new x(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||L0(nx(l),r)<=0||(i.has(l.key)||$u(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return m.resolve(s)}getAllFromCollectionGroup(e,n,r,i){F()}vr(e,n){return m.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Hw(this)}getSize(e){return m.resolve(this.size)}},Hw=class extends $f{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),m.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var zw=class{constructor(e){this.persistence=e,this.Fr=new rr(n=>ps(n),Bu),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.Mr=0,this.Or=new xu,this.targetCount=0,this.Nr=ra.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),m.resolve()}getLastRemoteSnapshotVersion(e){return m.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return m.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),m.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),m.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new ra(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,m.resolve()}updateTargetData(e,n){return this.kn(n),m.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,m.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),m.waitFor(s).next(()=>i)}getTargetCount(e){return m.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return m.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),m.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),m.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),m.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return m.resolve(r)}containsKey(e,n){return m.resolve(this.Or.containsKey(n))}};var zf=class{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Yt(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new zw(this),this.indexManager=new Mw,this.remoteDocumentCache=function(i){return new $w(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new kf(n),this.Kr=new jw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Bw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Uw(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){C("MemoryPersistence","Starting transaction:",e);let i=new qw(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return m.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},qw=class extends If{constructor(e){super(),this.currentSequenceNumber=e}},qf=class t{constructor(e){this.persistence=e,this.Gr=new xu,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw F()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),m.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),m.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),m.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return m.forEach(this.Hr,r=>{let i=x.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,H.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return m.or([()=>m.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var Gw=class{constructor(e){this.serializer=e}N(e,n,r,i){let s=new Df("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",n1,{unique:!0}),c.createObjectStore("documentMutations")}(e),B1(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=m.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),B1(e)),o=o.next(()=>function(c){let u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:H.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").W().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",n1,{unique:!0});let d=u.store("mutations"),h=l.map(f=>d.put(f));return m.waitFor(h)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:WU});u.createIndex("collectionPathOverlayIndex",KU,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",QU,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:FU});u.createIndex("documentKeyIndex",VU),u.createIndex("collectionGroupIndex",LU)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:HU}).createIndex("sequenceNumberIndex",zU,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:qU}).createIndex("documentKeyIndex",GU,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Bf(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>m.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>m.forEach(a,c=>{B(c.userId===s.userId);let u=os(this.serializer,c);return Zx(e,s.userId,u).next(()=>{})}))}))}ei(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.Y((o,a)=>{let c=new ge(o),u=function(d){return[0,bt(d)]}(c);s.push(n.get(u).next(l=>l?m.resolve():(d=>n.put({targetId:0,path:bt(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>m.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:$U});let r=n.store("collectionParents"),i=new Mu,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:bt(c)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{let c=new ge(o);return s(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,c],u)=>{let l=Yn(a);return s(l.popLast())}))}ni(e){let n=e.store("targets");return n.Y((r,i)=>{let s=uu(i),o=Kx(this.serializer,s);return n.put(o)})}ri(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new x(ge.fromString(d.document.name).popFirst(5)):d.noDocument?x.fromSegments(d.noDocument.path):d.unknownDocument?x.fromSegments(d.unknownDocument.path):F()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>m.waitFor(i))}ii(e,n){let r=n.store("mutations"),i=eP(this.serializer),s=new zf(qf.jr,this.serializer.ut);return r.W().next(o=>{let a=new Map;return o.forEach(c=>{var u;let l=(u=a.get(c.userId))!==null&&u!==void 0?u:X();os(this.serializer,c).keys().forEach(d=>l=l.add(d)),a.set(c.userId,l)}),m.forEach(a,(c,u)=>{let l=new Ze(u),d=Vf.ct(this.serializer,l),h=s.getIndexManager(l),f=Uf.ct(l,this.serializer,h,s.referenceDelegate);return new Hf(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new yu(n,Yt._e),c).next()})})}};function B1(t){t.createObjectStore("targetDocuments",{keyPath:BU}).createIndex("documentTargetsIndex",UU,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jU,{unique:!0}),t.createObjectStore("targetGlobal")}var L_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ww=class t{constructor(e,n,r,i,s,o,a,c,u,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=u,this._i=l,this.ai=d,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=h=>Promise.resolve(),!t.D())throw new E(v.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kw(this,i),this.Ii=n+"main",this.serializer=new kf(c),this.Ti=new ci(this.Ii,this.ai,new Gw(this.serializer)),this.qr=new Pw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=eP(this.serializer),this.Kr=new Cw,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,l===!1&&$e("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new E(v.FAILED_PRECONDITION,L_);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Yt(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=n=>_(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(n=>_(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>_(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(_i(e))return C("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return C("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return au(e).get("owner").next(n=>m.resolve(this.wi(n)))}Si(e){return hf(e).delete(this.clientId)}bi(){return _(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=at(n,"clientMetadata");return r.W().next(i=>{let s=this.Ci(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return m.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ei)for(let n of e)this.Ei.removeItem(this.vi(n.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?m.resolve(!0):au(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new E(v.FAILED_PRECONDITION,L_);return!1}}return!(!this.networkEnabled||!this.inForeground)||hf(e).W().next(r=>this.Ci(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&C("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return _(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new yu(e,Yt._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()})}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>hf(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Uf.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xw(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Vf.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){C("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",s=function(c){return c===15?ZU:c===14?cx:c===13?ax:c===12?YU:c===11?ox:void F()}(this.ai),o;return this.Ti.runTransaction(e,i,s,a=>(o=new yu(a,this.Lr?this.Lr.next():Yt._e),n==="readwrite-primary"?this.fi(o).next(c=>!!c||this.gi(o)).next(c=>{if(!c)throw $e(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new E(v.FAILED_PRECONDITION,rx);return r(o)}).next(c=>this.yi(o).next(()=>c)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return au(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new E(v.FAILED_PRECONDITION,L_)})}yi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return au(e).put("owner",n)}static D(){return ci.D()}pi(e){let n=au(e);return n.get("owner").next(r=>this.wi(r)?(C("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):m.resolve())}Di(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||($e(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let n=/(?:Version|Mobile)\/1[456]/;vC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{let r=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return C("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $e("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){$e("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function au(t){return at(t,"owner")}function hf(t){return at(t,"clientMetadata")}function W0(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Kw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=X(),i=X();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Qw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Gf=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Qw;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Bo()<=Nn.DEBUG&&C("QueryEngine","SDK will not create cache indexes for query:",Uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),m.resolve()):(Bo()<=Nn.DEBUG&&C("QueryEngine","Query:",Uo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Bo()<=Nn.DEBUG&&C("QueryEngine","The SDK decides to create cache indexes for query:",Uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tt(n))):m.resolve())}zi(e,n){if(f1(n))return m.resolve(null);let r=Tt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Pf(n,null,"F"),r=Tt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=X(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Yi(n,a);return this.Zi(n,u,o,c.readTime)?this.zi(e,Pf(n,null,"F")):this.Xi(e,u,n,c)}))})))}ji(e,n,r,i){return f1(n)||i.isEqual(H.min())?m.resolve(null):this.Gi.getDocuments(e,r).next(s=>{let o=this.Yi(n,s);return this.Zi(n,o,r,i)?m.resolve(null):(Bo()<=Nn.DEBUG&&C("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Uo(n)),this.Xi(e,o,n,tx(i,-1)).next(a=>a))})}Yi(e,n){let r=new Ee(Ex(e));return n.forEach((i,s)=>{$u(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Bo()<=Nn.DEBUG&&C("QueryEngine","Using full collection scan to execute query:",Uo(n)),this.Gi.getDocumentsMatchingQuery(e,n,hn.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Yw=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Te(Z),this.ns=new rr(s=>ps(s),Bu),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hf(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function tP(t,e,n,r){return new Yw(t,e,n,r)}function nP(t,e){return _(this,null,function*(){let n=R(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=X();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})})}function x9(t,e){let n=R(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=m.resolve();return h.forEach(p=>{f=f.next(()=>l.getEntry(c,p)).next(g=>{let y=u.docVersions.get(p);B(y!==null),g.version.compareTo(y)<0&&(d.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),l.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=X();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function rP(t){let e=R(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function P9(t,e){let n=R(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(ot.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(g,y,w){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,f,l)&&a.push(n.qr.updateTargetData(s,f))});let c=Nt(),u=X();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(iP(s,o,e.documentUpdates).next(l=>{c=l.us,u=l.cs})),!r.isEqual(H.min())){let l=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return m.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ts=i,s))}function iP(t,e,n){let r=X(),i=X();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Nt();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(H.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):C("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{us:o,cs:i}})}function R9(t,e){let n=R(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ia(t,e){let n=R(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,m.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new na(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function sa(t,e,n){return _(this,null,function*(){let r=R(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!_i(o))throw o;C("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function Wf(t,e,n){let r=R(t),i=H.min(),s=X();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let d=R(c),h=d.ns.get(l);return h!==void 0?m.resolve(d.ts.get(h)):d.qr.getTargetData(u,l)}(r,o,Tt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:H.min(),n?s:X())).next(a=>(aP(r,wx(e),a),{documents:a,ls:s})))}function sP(t,e){let n=R(t),r=R(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function oP(t,e){let n=R(t),r=n.rs.get(e)||H.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,tx(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(aP(n,e,i),i))}function aP(t,e,n){let r=t.rs.get(e)||H.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function N9(t,e,n,r){return _(this,null,function*(){let i=R(t),s=X(),o=Nt();for(let u of n){let l=e.hs(u.metadata.name);u.document&&(s=s.add(l));let d=e.Ps(u);d.setReadTime(e.Is(u.metadata.readTime)),o=o.insert(l,d)}let a=i.ss.newChangeBuffer({trackRemovals:!0}),c=yield ia(i,function(l){return Tt(ha(ge.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>iP(u,a,o).next(l=>(a.apply(u),l)).next(l=>i.qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.qr.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,l.us,l.cs)).next(()=>l.us)))})}function O9(r,i){return _(this,arguments,function*(t,e,n=X()){let s=yield ia(t,Tt(q0(e.bundledQuery))),o=R(t);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=ze(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Kr.saveNamedQuery(a,e);let u=s.withResumeToken(ot.EMPTY_BYTE_STRING,c);return o.ts=o.ts.insert(u.targetId,u),o.qr.updateTargetData(a,u).next(()=>o.qr.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.qr.addMatchingKeys(a,n,s.targetId)).next(()=>o.Kr.saveNamedQuery(a,e))})})}function U1(t,e){return`firestore_clients_${t}_${e}`}function $1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function j_(t,e){return`firestore_targets_${t}_${e}`}var Kf=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new E(i.error.code,i.error.message))),o?new t(e,n,i.state,s):($e("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},fu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){let r=JSON.parse(n),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new E(r.error.code,r.error.message))),s?new t(e,r.state,i):($e("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Qf=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=H0();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=ix(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):($e("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},Zw=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):($e("SharedClientState",`Failed to parse online state: ${e}`),null)}},Pu=class{constructor(){this.activeTargetIds=H0()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},pu=class{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Te(Z),this.started=!1,this.ps=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=U1(this.persistenceKey,this.Rs),this.ws=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new Pu),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return _(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Rs)continue;let i=this.getItem(U1(this.persistenceKey,r));if(i){let s=Qf.Ts(r,i);s&&(this.gs=this.gs.insert(s.clientId,s))}}this.Fs();let n=this.storage.getItem(this.Cs);if(n){let r=this.Ms(n);r&&this.xs(r)}for(let r of this.ps)this.fs(r);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(j_(this.persistenceKey,e));if(r){let i=fu.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(j_(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return C("SharedClientState","READ",e,n),n}setItem(e,n){C("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){C("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let n=e;if(n.storageArea===this.storage){if(C("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void $e("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>_(this,null,function*(){if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){let r=this.Ks(n.key);return this.$s(r,null)}{let r=this.Us(n.key,n.newValue);if(r)return this.$s(r.clientId,r)}}else if(this.bs.test(n.key)){if(n.newValue!==null){let r=this.Ws(n.key,n.newValue);if(r)return this.Gs(r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(n.key===this.Cs){if(n.newValue!==null){let r=this.Ms(n.newValue);if(r)return this.xs(r)}}else if(n.key===this.ws){let r=function(s){let o=Yt._e;if(s!=null)try{let a=JSON.parse(s);B(typeof a=="number"),o=a}catch(a){$e("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Yt._e&&this.sequenceNumberHandler(r)}else if(n.key===this.vs){let r=this.Hs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Js(i)))}}}else this.ps.push(n)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){let i=new Kf(this.currentUser,e,n,r),s=$1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){let n=$1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){let n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,r){let i=j_(this.persistenceKey,e),s=new fu(e,n,r);this.setItem(i,s.Es())}Qs(e){let n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){let n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){let r=this.Ks(e);return Qf.Ts(r,n)}Ws(e,n){let r=this.bs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Kf.Ts(new Ze(s),i,n)}zs(e,n){let r=this.Ds.exec(e),i=Number(r[1]);return fu.Ts(i,n)}Ms(e){return Zw.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return _(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);C("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){let r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=H0();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Yf=class{constructor(){this.eo=new Pu,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Pu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Xw=class{ro(e){}shutdown(){}};var Zf=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){C("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){C("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ff=null;function B_(){return ff===null?ff=function(){return 268435456+Math.round(2147483648*Math.random())}():ff++,"0x"+ff.toString(16)}var k9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Jw=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}};var _t="WebChannelConnection",e0=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){let a=B_(),c=this.So(n,r);C("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(u,s,o),this.Do(n,c,u,i).then(l=>(C("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw dn("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+da}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){let i=k9[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){let s=B_();return new Promise((o,a)=>{let c=new ZM;c.setWithCredentials(!0),c.listenOnce(QM.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case uf.NO_ERROR:let l=c.getResponseJson();C(_t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case uf.TIMEOUT:C(_t,`RPC '${e}' ${s} timed out`),a(new E(v.DEADLINE_EXCEEDED,"Request time out"));break;case uf.HTTP_ERROR:let d=c.getStatus();if(C(_t,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let p=function(y){let w=y.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(w)>=0?w:v.UNKNOWN}(f.status);a(new E(p,f.message))}else a(new E(v.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new E(v.UNAVAILABLE,"Connection failed."));break;default:F()}}finally{C(_t,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);C(_t,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}vo(e,n,r){let i=B_(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=WM(),a=KM(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.bo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");C(_t,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=o.createWebChannel(l,c),h=!1,f=!1,p=new Jw({co:y=>{f?C(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(h||(C(_t,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),C(_t,`RPC '${e}' stream ${i} sending:`,y),d.send(y))},lo:()=>d.close()}),g=(y,w,S)=>{y.listen(w,T=>{try{S(T)}catch(O){setTimeout(()=>{throw O},0)}})};return g(d,ru.EventType.OPEN,()=>{f||C(_t,`RPC '${e}' stream ${i} transport opened.`)}),g(d,ru.EventType.CLOSE,()=>{f||(f=!0,C(_t,`RPC '${e}' stream ${i} transport closed`),p.Ro())}),g(d,ru.EventType.ERROR,y=>{f||(f=!0,dn(_t,`RPC '${e}' stream ${i} transport errored:`,y),p.Ro(new E(v.UNAVAILABLE,"The operation could not be completed")))}),g(d,ru.EventType.MESSAGE,y=>{var w;if(!f){let S=y.data[0];B(!!S);let T=S,O=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(O){C(_t,`RPC '${e}' stream ${i} received error:`,O);let U=O.status,z=function(Ot){let en=Qe[Ot];if(en!==void 0)return kx(en)}(U),ee=O.message;z===void 0&&(z=v.INTERNAL,ee="Unknown error status: "+U+" with message "+O.message),f=!0,p.Ro(new E(z,ee)),d.close()}else C(_t,`RPC '${e}' stream ${i} received:`,S),p.Vo(S)}}),g(a,YM.STAT_EVENT,y=>{y.stat===F_.PROXY?C(_t,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===F_.NOPROXY&&C(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ao()},0),p}};function cP(){return typeof window<"u"?window:null}function vf(){return typeof document<"u"?document:null}function Hu(t){return new vw(t,!0)}var Ru=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();let n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&C("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}};var Xf=class{constructor(e,n,r,i,s,o,a,c){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Ru(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}stop(){return _(this,null,function*(){this.jo()&&(yield this.close(0))})}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){return _(this,null,function*(){if(this.Ho())return this.close(0)})}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){return _(this,null,function*(){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?($e(n.toString()),$e("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Io(n)})}r_(){}auth(){this.state=1;let e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{let i=new E(v.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){let r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(()=>_(this,null,function*(){this.state=0,this.start()}))}o_(e){return C("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(C("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},t0=class extends Xf{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();let n=_9(this.serializer,e),r=function(s){if(!("targetChange"in s))return H.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?H.min():o.readTime?ze(o.readTime):H.min()}(e);return this.listener.a_(n,r)}u_(e){let n={};n.database=Su(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Mf(c)?{documents:$x(s,c)}:{query:Hx(s,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Vx(s,o.resumeToken);let u=_w(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(H.min())>0){a.readTime=ta(s,o.snapshotVersion.toTimestamp());let u=_w(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=E9(this.serializer,e);r&&(n.labels=r),this.e_(n)}c_(e){let n={};n.database=Su(this.serializer),n.removeTarget=e,this.e_(n)}},n0=class extends Xf{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(B(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();let n=w9(e.writeResults,e.commitTime),r=ze(e.commitTime);return this.listener.I_(r,n)}return B(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){let e={};e.database=Su(this.serializer),this.e_(e)}P_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Au(this.serializer,r))};this.e_(n)}};var r0=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new E(v.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new E(v.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new E(v.UNKNOWN,s.toString())})}terminate(){this.d_=!0}};var i0=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?($e(n),this.f_=!1):C("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}};var s0=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{r.enqueueAndForget(()=>_(this,null,function*(){wi(this)&&(C("RemoteStore","Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let u=R(c);u.C_.add(4),yield fa(u),u.M_.set("Unknown"),u.C_.delete(4),yield zu(u)})}(this))}))}),this.M_=new i0(r,i)}};function zu(t){return _(this,null,function*(){if(wi(t))for(let e of t.v_)yield e(!0)})}function fa(t){return _(this,null,function*(){for(let e of t.v_)yield e(!1)})}function yp(t,e){let n=R(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),Y0(n)?Q0(n):ga(n).Ho()&&K0(n,e))}function Nu(t,e){let n=R(t),r=ga(n);n.D_.delete(e),r.Ho()&&uP(n,e),n.D_.size===0&&(r.Ho()?r.Zo():wi(n)&&n.M_.set("Unknown"))}function K0(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ga(t).u_(e)}function uP(t,e){t.x_.Oe(e),ga(t).c_(e)}function Q0(t){t.x_=new yw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ga(t).start(),t.M_.g_()}function Y0(t){return wi(t)&&!ga(t).jo()&&t.D_.size>0}function wi(t){return R(t).C_.size===0}function lP(t){t.x_=void 0}function F9(t){return _(this,null,function*(){t.D_.forEach((e,n)=>{K0(t,e)})})}function V9(t,e){return _(this,null,function*(){lP(t),Y0(t)?(t.M_.w_(e),Q0(t)):t.M_.set("Unknown")})}function L9(t,e,n){return _(this,null,function*(){if(t.M_.set("Online"),e instanceof Nf&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.D_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.D_.delete(a),i.x_.removeTarget(a))})}(t,e)}catch(r){C("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Jf(t,r)}else if(e instanceof Ko?t.x_.$e(e):e instanceof Rf?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(H.min()))try{let r=yield rP(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.x_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.D_.get(u);l&&s.D_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.D_.get(c);if(!l)return;s.D_.set(c,l.withResumeToken(ot.EMPTY_BYTE_STRING,l.snapshotVersion)),uP(s,c);let d=new na(l.target,c,u,l.sequenceNumber);K0(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){C("RemoteStore","Failed to raise snapshot:",r),yield Jf(t,r)}})}function Jf(t,e,n){return _(this,null,function*(){if(!_i(e))throw e;t.C_.add(1),yield fa(t),t.M_.set("Offline"),n||(n=()=>rP(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){C("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield zu(t)}))})}function dP(t,e){return e().catch(n=>Jf(t,n,e))}function pa(t){return _(this,null,function*(){let e=R(t),n=yi(e),r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;j9(e);)try{let i=yield R9(e.localStore,r);if(i===null){e.b_.length===0&&n.Zo();break}r=i.batchId,B9(e,i)}catch(i){yield Jf(e,i)}hP(e)&&fP(e)})}function j9(t){return wi(t)&&t.b_.length<10}function B9(t,e){t.b_.push(e);let n=yi(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function hP(t){return wi(t)&&!yi(t).jo()&&t.b_.length>0}function fP(t){yi(t).start()}function U9(t){return _(this,null,function*(){yi(t).E_()})}function $9(t){return _(this,null,function*(){let e=yi(t);for(let n of t.b_)e.P_(n.mutations)})}function H9(t,e,n){return _(this,null,function*(){let r=t.b_.shift(),i=pw.from(r,e,n);yield dP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield pa(t)})}function z9(t,e){return _(this,null,function*(){e&&yi(t).h_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return Ox(o)&&o!==v.ABORTED}(i.code)){let s=r.b_.shift();yi(r).Yo(),yield dP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield pa(r)}})}(t,e)),hP(t)&&fP(t)})}function H1(t,e){return _(this,null,function*(){let n=R(t);n.asyncQueue.verifyOperationInProgress(),C("RemoteStore","RemoteStore received new credentials");let r=wi(n);n.C_.add(3),yield fa(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield zu(n)})}function o0(t,e){return _(this,null,function*(){let n=R(t);e?(n.C_.delete(2),yield zu(n)):e||(n.C_.add(2),yield fa(n),n.M_.set("Unknown"))})}function ga(t){return t.O_||(t.O_=function(n,r,i){let s=R(n);return s.A_(),new t0(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:F9.bind(null,t),Io:V9.bind(null,t),a_:L9.bind(null,t)}),t.v_.push(e=>_(this,null,function*(){e?(t.O_.Yo(),Y0(t)?Q0(t):t.M_.set("Unknown")):(yield t.O_.stop(),lP(t))}))),t.O_}function yi(t){return t.N_||(t.N_=function(n,r,i){let s=R(n);return s.A_(),new n0(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:U9.bind(null,t),Io:z9.bind(null,t),T_:$9.bind(null,t),I_:H9.bind(null,t)}),t.v_.push(e=>_(this,null,function*(){e?(t.N_.Yo(),yield pa(t)):(yield t.N_.stop(),t.b_.length>0&&(C("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))}))),t.N_}var a0=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new E(v.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ma(t,e){if($e("AsyncQueue",`${e}: ${t}`),_i(t))return new E(v.UNAVAILABLE,`${e}: ${t}`);throw t}var ep=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||x.comparator(n.key,r.key):(n,r)=>x.comparator(n.key,r.key),this.keyedMap=cu(),this.sortedSet=new Te(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var tp=class{constructor(){this.B_=new Te(x.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):F():this.B_=this.B_.insert(n,e)}L_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},oa=class t{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,ep.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var c0=class{constructor(){this.k_=void 0,this.listeners=[]}},u0=class{constructor(){this.queries=new rr(e=>_x(e),Uu),this.onlineState="Unknown",this.q_=new Set}};function Z0(t,e){return _(this,null,function*(){let n=R(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new c0),i)try{s.k_=yield n.onListen(r)}catch(o){let a=ma(o,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&J0(n)})}function X0(t,e){return _(this,null,function*(){let n=R(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function q9(t,e){let n=R(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&J0(n)}function G9(t,e,n){let r=R(t),i=r.queries.get(e);if(i)for(let s of i.listeners)s.onError(n);r.queries.delete(e)}function J0(t){t.q_.forEach(e=>{e.next()})}var Ou=class{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.J_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;let n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}};var l0=class{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}};var np=class{constructor(e){this.serializer=e}hs(e){return Jn(this.serializer,e)}Ps(e){return e.metadata.exists?Ux(this.serializer,e.document,!1):Je.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return ze(e)}},d0=class{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pP(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;let r=ge.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){let n=new Map,r=new np(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.hs(i.metadata.name);for(let o of i.metadata.queries){let a=(n.get(o)||X()).add(s);n.set(o,a)}}return n}complete(){return _(this,null,function*(){let e=yield N9(this.localStore,new np(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(let r of this.queries)yield O9(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}})}};function pP(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var rp=class{constructor(e){this.key=e}},ip=class{constructor(e){this.key=e}},sp=class{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=X(),this.mutatedKeys=X(),this._a=Ex(e),this.aa=new ep(this._a)}get ua(){return this.ia}ca(e,n){let r=n?n.la:new tp,i=n?n.aa:this.aa,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=$u(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),y=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),y=!0):this.ha(h,f)||(r.track({type:2,doc:f}),y=!0,(c&&this._a(f,c)>0||u&&this._a(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),y=!0):h&&!f&&(r.track({type:1,doc:h}),y=!0,(c||u)&&(a=!0)),y&&(f?(o=o.add(f),s=g?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;let o=e.la.L_();o.sort((l,d)=>function(f,p){let g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F()}};return g(f)-g(p)}(l.type,d.type)||this._a(l.doc,d.doc)),this.Pa(r),i=i!=null&&i;let a=n&&!i?this.Ia():[],c=this.oa.size===0&&this.current&&!i?1:0,u=c!==this.sa;return this.sa=c,o.length!==0||u?{snapshot:new oa(this.query,e.aa,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new tp,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];let e=this.oa;this.oa=X(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});let n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new ip(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new rp(r))}),n}da(e){this.ia=e.ls,this.oa=X();let n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return oa.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}},h0=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},f0=class{constructor(e){this.key=e,this.Ra=!1}},p0=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new rr(a=>_x(a),Uu),this.fa=new Map,this.ga=new Set,this.pa=new Te(x.comparator),this.ya=new Map,this.wa=new xu,this.Sa={},this.ba=new Map,this.Da=ra.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}};function W9(t,e){return _(this,null,function*(){let n=iE(t),r,i,s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{let o=yield ia(n.localStore,Tt(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield eE(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&yp(n.remoteStore,o)}return i})}function eE(t,e,n,r,i){return _(this,null,function*(){t.va=(d,h,f)=>function(g,y,w,S){return _(this,null,function*(){let T=y.view.ca(w);T.Zi&&(T=yield Wf(g.localStore,y.query,!1).then(({documents:ee})=>y.view.ca(ee,T)));let O=S&&S.targetChanges.get(y.targetId),U=S&&S.targetMismatches.get(y.targetId)!=null,z=y.view.applyChanges(T,g.isPrimaryClient,O,U);return g0(g,y.targetId,z.Ta),z.snapshot})}(t,d,h,f);let s=yield Wf(t.localStore,e,!0),o=new sp(e,s.ls),a=o.ca(s.documents),c=bu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);g0(t,n,u.Ta);let l=new h0(e,n,o);return t.ma.set(e,l),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),u.snapshot})}function K9(t,e){return _(this,null,function*(){let n=R(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!Uu(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield sa(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Nu(n.remoteStore,r.targetId),aa(n,r.targetId)}).catch(vi))):(aa(n,r.targetId),yield sa(n.localStore,r.targetId,!0))})}function Q9(t,e,n){return _(this,null,function*(){let r=sE(t);try{let i=yield function(o,a){let c=R(o),u=Oe.now(),l=a.reduce((f,p)=>f.add(p.key),X()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Nt(),g=X();return c.ss.getEntries(f,l).next(y=>{p=y,p.forEach((w,S)=>{S.isValidDocument()||(g=g.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,p)).next(y=>{d=y;let w=[];for(let S of a){let T=h9(S,d.get(S.key).overlayedDocument);T!=null&&w.push(new An(S.key,T,hx(T.value.mapValue),Be.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,w,a)}).next(y=>{h=y;let w=y.applyToLocalDocumentSet(d,g);return c.documentOverlayCache.saveOverlays(f,y.batchId,w)})}).then(()=>({batchId:h.batchId,changes:Ix(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Sa[o.currentUser.toKey()];u||(u=new Te(Z)),u=u.insert(a,c),o.Sa[o.currentUser.toKey()]=u}(r,i.batchId,n),yield Ar(r,i.changes),yield pa(r.remoteStore)}catch(i){let s=ma(i,"Failed to persist write");n.reject(s)}})}function gP(t,e){return _(this,null,function*(){let n=R(t);try{let r=yield P9(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.ya.get(s);o&&(B(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?B(o.Ra):i.removedDocuments.size>0&&(B(o.Ra),o.Ra=!1))}),yield Ar(n,r,e)}catch(r){yield vi(r)}})}function z1(t,e,n){let r=R(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ma.forEach((s,o)=>{let a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=R(o);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.listeners)h.Q_(a)&&(u=!0)}),u&&J0(c)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Y9(t,e,n){return _(this,null,function*(){let r=R(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.ya.get(e),s=i&&i.key;if(s){let o=new Te(x.comparator);o=o.insert(s,Je.newNoDocument(s,H.min()));let a=X().add(s),c=new Du(H.min(),new Map,new Te(Z),o,a);yield gP(r,c),r.pa=r.pa.remove(s),r.ya.delete(e),rE(r)}else yield sa(r.localStore,e,!1).then(()=>aa(r,e,n)).catch(vi)})}function Z9(t,e){return _(this,null,function*(){let n=R(t),r=e.batch.batchId;try{let i=yield x9(n.localStore,e);nE(n,r,null),tE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ar(n,i)}catch(i){yield vi(i)}})}function X9(t,e,n){return _(this,null,function*(){let r=R(t);try{let i=yield function(o,a){let c=R(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(B(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);nE(r,e,n),tE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ar(r,i)}catch(i){yield vi(i)}})}function J9(t,e){return _(this,null,function*(){let n=R(t);wi(n.remoteStore)||C("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=R(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){let i=ma(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function tE(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function nE(t,e,n){let r=R(t),i=r.Sa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function aa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||mP(t,r)})}function mP(t,e){t.ga.delete(e.path.canonicalString());let n=t.pa.get(e);n!==null&&(Nu(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),rE(t))}function g0(t,e,n){for(let r of n)r instanceof rp?(t.wa.addReference(r.key,e),e5(t,r)):r instanceof ip?(C("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||mP(t,r.key)):F()}function e5(t,e){let n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(C("SyncEngine","New document in limbo: "+n),t.ga.add(r),rE(t))}function rE(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){let e=t.ga.values().next().value;t.ga.delete(e);let n=new x(ge.fromString(e)),r=t.Da.next();t.ya.set(r,new f0(n)),t.pa=t.pa.insert(n,r),yp(t.remoteStore,new na(Tt(ha(n.path)),r,"TargetPurposeLimboResolution",Yt._e))}}function Ar(t,e,n){return _(this,null,function*(){let r=R(t),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,c)=>{o.push(r.va(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=Kw.Qi(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.Va.a_(i),yield function(c,u){return _(this,null,function*(){let l=R(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>m.forEach(u,h=>m.forEach(h.ki,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>m.forEach(h.qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!_i(d))throw d;C("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ts.get(h),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);l.ts=l.ts.insert(h,g)}}})}(r.localStore,s))})}function t5(t,e){return _(this,null,function*(){let n=R(t);if(!n.currentUser.isEqual(e)){C("SyncEngine","User change. New user:",e.toKey());let r=yield nP(n.localStore,e);n.currentUser=e,function(s,o){s.ba.forEach(a=>{a.forEach(c=>{c.reject(new E(v.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ar(n,r._s)}})}function n5(t,e){let n=R(t),r=n.ya.get(e);if(r&&r.Ra)return X().add(r.key);{let i=X(),s=n.fa.get(e);if(!s)return i;for(let o of s){let a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function r5(t,e){return _(this,null,function*(){let n=R(t),r=yield Wf(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&g0(n,e.targetId,i.Ta),i})}function i5(t,e){return _(this,null,function*(){let n=R(t);return oP(n.localStore,e).then(r=>Ar(n,r))})}function s5(t,e,n,r){return _(this,null,function*(){let i=R(t),s=yield function(a,c){let u=R(a),l=R(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.Cn(d,c).next(h=>h?u.localDocuments.getDocuments(d,h):m.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?yield pa(i.remoteStore):n==="acknowledged"||n==="rejected"?(nE(i,e,r||null),tE(i,e),function(a,c){R(R(a).mutationQueue).Fn(c)}(i.localStore,e)):F(),yield Ar(i,s)):C("SyncEngine","Cannot apply mutation batch with id: "+e)})}function o5(t,e){return _(this,null,function*(){let n=R(t);if(iE(n),sE(n),e===!0&&n.Ca!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield q1(n,r.toArray());n.Ca=!0,yield o0(n.remoteStore,!0);for(let s of i)yp(n.remoteStore,s)}else if(e===!1&&n.Ca!==!1){let r=[],i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(aa(n,o),sa(n.localStore,o,!0))),Nu(n.remoteStore,o)}),yield i,yield q1(n,r),function(o){let a=R(o);a.ya.forEach((c,u)=>{Nu(a.remoteStore,u)}),a.wa.Vr(),a.ya=new Map,a.pa=new Te(x.comparator)}(n),n.Ca=!1,yield o0(n.remoteStore,!1)}})}function q1(t,e,n){return _(this,null,function*(){let r=R(t),i=[],s=[];for(let o of e){let a,c=r.fa.get(o);if(c&&c.length!==0){a=yield ia(r.localStore,Tt(c[0]));for(let u of c){let l=r.ma.get(u),d=yield r5(r,l);d.snapshot&&s.push(d.snapshot)}}else{let u=yield sP(r.localStore,o);a=yield ia(r.localStore,u),yield eE(r,yP(u),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i})}function yP(t){return vx(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function a5(t){return function(n){return R(R(n).persistence).Bi()}(R(t).localStore)}function c5(t,e,n,r){return _(this,null,function*(){let i=R(t);if(i.Ca)return void C("SyncEngine","Ignoring unexpected query state notification.");let s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield oP(i.localStore,wx(s[0])),a=Du.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ot.EMPTY_BYTE_STRING);yield Ar(i,o,a);break}case"rejected":yield sa(i.localStore,e,!0),aa(i,e,r);break;default:F()}})}function u5(t,e,n){return _(this,null,function*(){let r=iE(t);if(r.Ca){for(let i of e){if(r.fa.has(i)){C("SyncEngine","Adding an already active target "+i);continue}let s=yield sP(r.localStore,i),o=yield ia(r.localStore,s);yield eE(r,yP(s),o.targetId,!1,o.resumeToken),yp(r.remoteStore,o)}for(let i of n)r.fa.has(i)&&(yield sa(r.localStore,i,!1).then(()=>{Nu(r.remoteStore,i),aa(r,i)}).catch(vi))}})}function iE(t){let e=R(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=n5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y9.bind(null,e),e.Va.a_=q9.bind(null,e.eventManager),e.Va.Fa=G9.bind(null,e.eventManager),e}function sE(t){let e=R(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X9.bind(null,e),e}function l5(t,e,n){let r=R(t);(function(s,o,a){return _(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(f,p){let g=R(f),y=ze(p.createTime);return g.persistence.runTransaction("hasNewerBundle","readonly",w=>g.Kr.getBundleMetadata(w,p.id)).then(w=>!!w&&w.createTime.compareTo(y)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(pP(c));let u=new d0(c,s.localStore,o.serializer),l=yield o.Ma();for(;l;){let h=yield u.ea(l);h&&a._updateProgress(h),l=yield o.Ma()}let d=yield u.complete();return yield Ar(s,d.ra,void 0),yield function(f,p){let g=R(f);return g.persistence.runTransaction("Save bundle","readwrite",y=>g.Kr.saveBundleMetadata(y,p))}(s.localStore,c),a._completeWith(d.progress),Promise.resolve(d.na)}catch(c){return dn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var ku=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=Hu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return tP(this.persistence,new Gf,e.initialUser,this.serializer)}createPersistence(e){return new zf(qf.jr,this.serializer)}createSharedClientState(e){return new Yf}terminate(){return _(this,null,function*(){this.gcScheduler&&this.gcScheduler.stop(),yield this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var op=class t extends ku{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){yield Yp(t.prototype,this,"initialize").call(this,e),yield this.xa.initialize(this,e),yield sE(this.xa.syncEngine),yield pa(this.xa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return tP(this.persistence,new Gf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new Nw(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new X_(n,this.persistence);return new Z_(e.asyncQueue,r)}createPersistence(e){let n=W0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Ww(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,cP(),vf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Yf}},m0=class t extends op{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return _(this,null,function*(){yield Yp(t.prototype,this,"initialize").call(this,e);let n=this.xa.syncEngine;this.sharedClientState instanceof pu&&(this.sharedClientState.syncEngine={Ys:s5.bind(null,n),Zs:c5.bind(null,n),Xs:u5.bind(null,n),Bi:a5.bind(null,n),Js:i5.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.mi(r=>_(this,null,function*(){yield o5(this.xa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=cP();if(!pu.D(n))throw new E(v.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=W0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Fu=class{initialize(e,n){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>z1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=t5.bind(null,this.syncEngine),yield o0(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new u0}()}createDatastore(e){let n=Hu(e.databaseInfo.databaseId),r=function(s){return new e0(s)}(e.databaseInfo);return function(s,o,a,c){return new r0(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new s0(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>z1(this.syncEngine,n,0),function(){return Zf.D()?new Zf:new Xw}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let d=new p0(i,s,o,a,c,u);return l&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(n){return _(this,null,function*(){let r=R(n);C("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield fa(r),r.F_.shutdown(),r.M_.set("Unknown")})}(this.remoteStore)}};function G1(t,e=10240){let n=0;return{read(){return _(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return _(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ca=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):$e("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var y0=class{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Xe,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){return _(this,null,function*(){return this.metadata.promise})}Ma(){return _(this,null,function*(){return yield this.getMetadata(),this.ka()})}ka(){return _(this,null,function*(){let e=yield this.qa();if(e===null)return null;let n=this.La.decode(e),r=Number(n);isNaN(r)&&this.Qa(`length string (${n}) is not valid number`);let i=yield this.Ka(r);return new l0(JSON.parse(i),e.length+r)})}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){return _(this,null,function*(){for(;this.$a()<0&&!(yield this.Ua()););if(this.buffer.length===0)return null;let e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ka(e){return _(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ua())&&this.Qa("Reached the end of bundle when more is expected.");let n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){return _(this,null,function*(){let e=yield this.Ba.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var v0=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){return _(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new E(v.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let n=yield function(i,s){return _(this,null,function*(){let o=R(i),a=Su(o.serializer)+"/documents",c={documents:s.map(h=>Tu(o.serializer,h))},u=yield o.Co("BatchGetDocuments",a,c,s.length),l=new Map;u.forEach(h=>{let f=v9(o.serializer,h);l.set(f.key.toString(),f)});let d=[];return s.forEach(h=>{let f=l.get(h.toString());B(!!f),d.push(f)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new mi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return _(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=x.fromPath(r);this.mutations.push(new Eu(i,this.precondition(i)))}),yield function(r,i){return _(this,null,function*(){let s=R(r),o=Su(s.serializer)+"/documents",a={writes:i.map(c=>Au(s.serializer,c))};yield s.wo("Commit",o,a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw F();n=H.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new E(v.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(H.min())?Be.exists(!1):Be.updateTime(n):Be.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(H.min()))throw new E(v.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Be.updateTime(n)}return Be.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var _0=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new Ru(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(()=>_(this,null,function*(){let e=new v0(this.datastore),n=this.za(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ja(i)}))}).catch(r=>{this.ja(r)})}))}za(e){try{let n=this.updateFunction(e);return!ju(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Ox(n)}return!1}};var w0=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ze.UNAUTHENTICATED,this.clientId=Ef.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>_(this,null,function*(){C("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(C("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){return _(this,null,function*(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}})}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new E(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ma(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function _f(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),C("FirestoreClient","Initializing OfflineComponentProvider");let n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield nP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function E0(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield oE(t);C("FirestoreClient","Initializing OnlineComponentProvider");let r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>H1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>H1(e.remoteStore,s)),t._onlineComponents=e})}function vP(t){return t.name==="FirebaseError"?t.code===v.FAILED_PRECONDITION||t.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function oE(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){C("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _f(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!vP(n))throw n;dn("Error using user provided cache. Falling back to memory cache: "+n),yield _f(t,new ku)}}else C("FirestoreClient","Using default OfflineComponentProvider"),yield _f(t,new ku);return t._offlineComponents})}function vp(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(C("FirestoreClient","Using user provided OnlineComponentProvider"),yield E0(t,t._uninitializedComponentsProvider._online)):(C("FirestoreClient","Using default OnlineComponentProvider"),yield E0(t,new Fu))),t._onlineComponents})}function _P(t){return oE(t).then(e=>e.persistence)}function aE(t){return oE(t).then(e=>e.localStore)}function wP(t){return vp(t).then(e=>e.remoteStore)}function cE(t){return vp(t).then(e=>e.syncEngine)}function d5(t){return vp(t).then(e=>e.datastore)}function ua(t){return _(this,null,function*(){let e=yield vp(t),n=e.eventManager;return n.onListen=W9.bind(null,e.syncEngine),n.onUnlisten=K9.bind(null,e.syncEngine),n})}function h5(t){return t.asyncQueue.enqueue(()=>_(this,null,function*(){let e=yield _P(t),n=yield wP(t);return e.setNetworkEnabled(!0),function(i){let s=R(i);return s.C_.delete(0),zu(s)}(n)}))}function f5(t){return t.asyncQueue.enqueue(()=>_(this,null,function*(){let e=yield _P(t),n=yield wP(t);return e.setNetworkEnabled(!1),function(i){return _(this,null,function*(){let s=R(i);s.C_.add(0),yield fa(s),s.M_.set("Offline")})}(n)}))}function p5(t,e){let n=new Xe;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(i,s,o){return _(this,null,function*(){try{let a=yield function(u,l){let d=R(u);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new E(v.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=ma(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield aE(t),e,n)})),n.promise}function EP(t,e,n={}){let r=new Xe;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,c,u){let l=new ca({next:h=>{o.enqueueAndForget(()=>X0(s,d));let f=h.docs.has(a);!f&&h.fromCache?u.reject(new E(v.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?u.reject(new E(v.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new Ou(ha(a.path),l,{includeMetadataChanges:!0,J_:!0});return Z0(s,d)}(yield ua(t),t.asyncQueue,e,n,r)})),r.promise}function g5(t,e){let n=new Xe;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(i,s,o){return _(this,null,function*(){try{let a=yield Wf(i,s,!0),c=new sp(s,a.ls),u=c.ca(a.documents),l=c.applyChanges(u,!1);o.resolve(l.snapshot)}catch(a){let c=ma(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield aE(t),e,n)})),n.promise}function CP(t,e,n={}){let r=new Xe;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,c,u){let l=new ca({next:h=>{o.enqueueAndForget(()=>X0(s,d)),h.fromCache&&c.source==="server"?u.reject(new E(v.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new Ou(a,l,{includeMetadataChanges:!0,J_:!0});return Z0(s,d)}(yield ua(t),t.asyncQueue,e,n,r)})),r.promise}function m5(t,e){let n=new ca(e);return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(i,s){R(i).q_.add(s),s.next()}(yield ua(t),n)})),()=>{n.Na(),t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(i,s){R(i).q_.delete(s)}(yield ua(t),n)}))}}function y5(t,e,n,r){let i=function(o,a){let c;return c=typeof o=="string"?Fx().encode(o):o,function(l,d){return new y0(l,d)}(function(l,d){if(l instanceof Uint8Array)return G1(l,d);if(l instanceof ArrayBuffer)return G1(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,Hu(e));t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){l5(yield cE(t),i,r)}))}function v5(t,e){return t.asyncQueue.enqueue(()=>_(this,null,function*(){return function(r,i){let s=R(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield aE(t),e)}))}function IP(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var W1=new Map;function uE(t,e,n){if(!n)throw new E(v.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lE(t,e,n,r){if(e===!0&&r===!0)throw new E(v.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function K1(t){if(!x.isDocumentKey(t))throw new E(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Q1(t){if(x.isDocumentKey(t))throw new E(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _p(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":F()}function he(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new E(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=_p(t);throw new E(v.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function DP(t,e){if(e<=0)throw new E(v.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var ap=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new E(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new E(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new E(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new E(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new E(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},vs=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ap({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new E(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new E(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ap(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new U_;switch(r.type){case"firstParty":return new q_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new E(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=W1.get(n);r&&(C("ComponentProvider","Removing Datastore"),W1.delete(n),r.terminate())}(this),Promise.resolve()}};function bP(t,e,n,r={}){var i;let s=(t=he(t,vs))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&dn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ze.MOCK_USER;else{a=yC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new E(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ze(u)}t._authCredentials=new $_(new wf(a,c))}}var ht=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ce=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},er=class t extends ht{constructor(e,n,r){super(e,n,ha(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ce(this.firestore,null,new x(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function dE(t,e,...n){if(t=Me(t),uE("collection","path",e),t instanceof vs){let r=ge.fromString(e,...n);return Q1(r),new er(t,null,r)}{if(!(t instanceof Ce||t instanceof er))throw new E(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ge.fromString(e,...n));return Q1(r),new er(t.firestore,null,r)}}function TP(t,e){if(t=he(t,vs),uE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new E(v.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ht(t,null,function(r){return new Sn(ge.emptyPath(),r)}(e))}function qu(t,e,...n){if(t=Me(t),arguments.length===1&&(e=Ef.newId()),uE("doc","path",e),t instanceof vs){let r=ge.fromString(e,...n);return K1(r),new Ce(t,null,new x(r))}{if(!(t instanceof Ce||t instanceof er))throw new E(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ge.fromString(e,...n));return K1(r),new Ce(t.firestore,t instanceof er?t.converter:null,new x(r))}}function hE(t,e){return t=Me(t),e=Me(e),(t instanceof Ce||t instanceof er)&&(e instanceof Ce||e instanceof er)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function fE(t,e){return t=Me(t),e=Me(e),t instanceof ht&&e instanceof ht&&t.firestore===e.firestore&&Uu(t._query,e._query)&&t.converter===e.converter}var C0=class{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Ru(this,"async_queue_retry"),this.iu=()=>{let n=vf();n&&C("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};let e=vf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;let n=vf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});let n=new Xe;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){return _(this,null,function*(){if(this.Ya.length!==0){try{yield this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!_i(e))throw e;C("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}})}ou(e){let n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{this.eu=r,this.tu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw $e("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);let i=a0.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&F()}verifyOperationInProgress(){}uu(){return _(this,null,function*(){let e;do e=this.Ja,yield e;while(e!==this.Ja)})}cu(e){for(let n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){let n=this.Xa.indexOf(e);this.Xa.splice(n,1)}};function I0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var D0=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var SP=-1,Se=class extends vs{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new C0}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||AP(this),this._firestoreClient.terminate()}};function tt(t){return t._firestoreClient||AP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function AP(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new J_(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,IP(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new w0(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function MP(t,e){LP(t=he(t,Se));let n=tt(t);if(n._uninitializedComponentsProvider)throw new E(v.FAILED_PRECONDITION,"SDK cache is already specified.");dn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Fu;return PP(n,i,new op(i,r.cacheSizeBytes,e?.forceOwnership))}function xP(t){LP(t=he(t,Se));let e=tt(t);if(e._uninitializedComponentsProvider)throw new E(v.FAILED_PRECONDITION,"SDK cache is already specified.");dn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Fu;return PP(e,r,new m0(r,n.cacheSizeBytes))}function PP(t,e,n){let r=new Xe;return t.asyncQueue.enqueue(()=>_(this,null,function*(){try{yield _f(t,n),yield E0(t,e),r.resolve()}catch(i){let s=i;if(!vP(s))throw s;dn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function RP(t){if(t._initialized&&!t._terminated)throw new E(v.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Xe;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{yield function(r){return _(this,null,function*(){if(!ci.D())return Promise.resolve();let i=r+"main";yield ci.delete(i)})}(W0(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function NP(t){return function(n){let r=new Xe;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return J9(yield cE(n),r)})),r.promise}(tt(t=he(t,Se)))}function OP(t){return h5(tt(t=he(t,Se)))}function kP(t){return f5(tt(t=he(t,Se)))}function FP(t,e){let n=tt(t=he(t,Se)),r=new D0;return y5(n,t._databaseId,e,r),r}function VP(t,e){return v5(tt(t=he(t,Se)),e).then(n=>n?new ht(t,null,n.query):null)}function LP(t){if(t._initialized||t._terminated)throw new E(v.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ir=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ot.fromBase64String(e))}catch(n){throw new E(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Mn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new E(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Tr=class{constructor(e){this._methodName=e}};var _s=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new E(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new E(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}};var _5=/^__.*__$/,b0=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new An(e,this.data,this.fieldMask,n,this.fieldTransforms):new gi(e,this.data,n,this.fieldTransforms)}},cp=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new An(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function jP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F()}}var up=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return lp(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(jP(this.Iu)&&_5.test(e))throw this.mu('Document fields cannot begin and end with "__"')}},T0=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hu(e)}pu(e,n,r,i=!1){return new up({Iu:e,methodName:n,gu:r,path:He.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Is(t){let e=t._freezeSettings(),n=Hu(t._databaseId);return new T0(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wp(t,e,n,r,i,s={}){let o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);mE("Data must be an object, but it was:",o,r);let a=$P(r,o),c,u;if(s.merge)c=new Zt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let d of s.mergeFields){let h=P0(e,d,n);if(!o.contains(h))throw new E(v.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);zP(l,h)||l.push(h)}c=new Zt(l),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new b0(new wt(a),c,u)}var Vu=class t extends Tr{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function BP(t,e,n){return new up({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var S0=class t extends Tr{_toFieldTransform(e){return new gs(e.path,new fi)}isEqual(e){return e instanceof t}},A0=class extends Tr{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=BP(this,e,!0),r=this.yu.map(s=>Ds(s,n)),i=new Dr(r);return new gs(e.path,i)}isEqual(e){return this===e}},M0=class extends Tr{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=BP(this,e,!0),r=this.yu.map(s=>Ds(s,n)),i=new br(r);return new gs(e.path,i)}isEqual(e){return this===e}},x0=class extends Tr{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){let n=new pi(e.serializer,Sx(e.serializer,this.wu));return new gs(e.path,n)}isEqual(e){return this===e}};function pE(t,e,n,r){let i=t.pu(1,e,n);mE("Data must be an object, but it was:",i,r);let s=[],o=wt.empty();Cs(r,(c,u)=>{let l=yE(e,c,n);u=Me(u);let d=i.Ru(l);if(u instanceof Vu)s.push(l);else{let h=Ds(u,d);h!=null&&(s.push(l),o.set(l,h))}});let a=new Zt(s);return new cp(o,a,i.fieldTransforms)}function gE(t,e,n,r,i,s){let o=t.pu(1,e,n),a=[P0(e,r,n)],c=[i];if(s.length%2!=0)throw new E(v.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(P0(e,s[h])),c.push(s[h+1]);let u=[],l=wt.empty();for(let h=a.length-1;h>=0;--h)if(!zP(u,a[h])){let f=a[h],p=c[h];p=Me(p);let g=o.Ru(f);if(p instanceof Vu)u.push(f);else{let y=Ds(p,g);y!=null&&(u.push(f),l.set(f,y))}}let d=new Zt(u);return new cp(l,d,o.fieldTransforms)}function UP(t,e,n,r=!1){return Ds(n,t.pu(r?4:3,e))}function Ds(t,e){if(HP(t=Me(t)))return mE("Unsupported field value:",e,t),$P(t,e);if(t instanceof Tr)return function(r,i){if(!jP(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Ds(a,i.Vu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Sx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Oe.fromDate(r);return{timestampValue:ta(i.serializer,s)}}if(r instanceof Oe){let s=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ta(i.serializer,s)}}if(r instanceof _s)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ir)return{bytesValue:Vx(i.serializer,r._byteString)};if(r instanceof Ce){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:z0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${_p(r)}`)}(t,e)}function $P(t,e){let n={};return ux(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(t,(r,i)=>{let s=Ds(i,e.Eu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function HP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof _s||t instanceof ir||t instanceof Ce||t instanceof Tr)}function mE(t,e,n){if(!HP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=_p(n);throw r==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+r)}}function P0(t,e,n){if((e=Me(e))instanceof Mn)return e._internalPath;if(typeof e=="string")return yE(t,e);throw lp("Field path arguments must be of type string or ",t,!1,void 0,n)}var w5=new RegExp("[~\\*/\\[\\]]");function yE(t,e,n){if(e.search(w5)>=0)throw lp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mn(...e.split("."))._internalPath}catch{throw lp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lp(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new E(v.INVALID_ARGUMENT,a+t+c)}function zP(t,e){return t.some(n=>n.isEqual(e))}var ws=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new R0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Ep("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},R0=class extends ws{data(){return super.data()}};function Ep(t,e){return typeof e=="string"?yE(t,e):e instanceof Mn?e._internalPath:e._delegate._internalPath}function qP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new E(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Lu=class{},Es=class extends Lu{};function Mr(t,e,...n){let r=[];e instanceof Lu&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof N0).length,a=s.filter(c=>c instanceof dp).length;if(o>1||o>0&&a>0)throw new E(v.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var dp=class t extends Es{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return tR(e._query,n),new ht(e.firestore,e.converter,hw(e._query,n))}_parse(e){let n=Is(e.firestore);return function(s,o,a,c,u,l,d){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new E(v.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){Z1(d,l);let f=[];for(let p of d)f.push(Y1(c,s,p));h={arrayValue:{values:f}}}else h=Y1(c,s,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||Z1(d,l),h=UP(a,o,d,l==="in"||l==="not-in");return ue.create(u,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function GP(t,e,n){let r=e,i=Ep("where",t);return dp._create(i,r,n)}var N0=class t extends Lu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_e.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)tR(o,c),o=hw(o,c)}(e._query,n),new ht(e.firestore,e.converter,hw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var O0=class t extends Es{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new E(v.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new E(v.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fs(s,o)}(e._query,this._field,this._direction);return new ht(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Sn(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function WP(t,e="asc"){let n=e,r=Ep("orderBy",t);return O0._create(r,n)}var hp=class t extends Es{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new ht(e.firestore,e.converter,Pf(e._query,this._limit,this._limitType))}};function KP(t){return DP("limit",t),hp._create("limit",t,"F")}function QP(t){return DP("limitToLast",t),hp._create("limitToLast",t,"L")}var fp=class t extends Es{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=eR(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,s){return new Sn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}};function YP(...t){return fp._create("startAt",t,!0)}function ZP(...t){return fp._create("startAfter",t,!1)}var pp=class t extends Es{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=eR(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,s){return new Sn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}};function XP(...t){return pp._create("endBefore",t,!1)}function JP(...t){return pp._create("endAt",t,!0)}function eR(t,e,n,r){if(n[0]=Me(n[0]),n[0]instanceof ws)return function(s,o,a,c,u){if(!c)throw new E(v.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of Wo(s))if(d.field.isKeyField())l.push(hs(o,c.key));else{let h=c.data.field(d.field);if(mp(h))throw new E(v.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new E(v.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new nr(l,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Is(t.firestore);return function(o,a,c,u,l,d){let h=o.explicitOrderBy;if(l.length>h.length)throw new E(v.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let p=0;p<l.length;p++){let g=l[p];if(h[p].field.isKeyField()){if(typeof g!="string")throw new E(v.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof g}`);if(!$0(o)&&g.indexOf("/")!==-1)throw new E(v.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${g}' contains a slash.`);let y=o.path.child(ge.fromString(g));if(!x.isDocumentKey(y))throw new E(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);let w=new x(y);f.push(hs(a,w))}else{let y=UP(c,u,g);f.push(y)}}return new nr(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Y1(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new E(v.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$0(e)&&n.indexOf("/")!==-1)throw new E(v.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ge.fromString(n));if(!x.isDocumentKey(r))throw new E(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hs(t,new x(r))}if(n instanceof Ce)return hs(t,n._key);throw new E(v.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_p(n)}.`)}function Z1(t,e){if(!Array.isArray(t)||t.length===0)throw new E(v.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tR(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new E(v.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new E(v.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var la=class{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw F()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Cs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new _s(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=B0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){let n=ui(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ge.fromString(e);B(Wx(r));let i=new di(r.get(1),r.get(3)),s=new x(r.popFirst(5));return i.isEqual(n)||$e(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Cp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var k0=class extends la{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ce(this.firestore,null,n)}};var Ir=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},fn=class extends ws{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new oi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Ep("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},oi=class extends fn{data(e={}){return super.data(e)}},xn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ir(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new oi(this._firestore,this._userDataWriter,r.key,r,new Ir(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new E(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new oi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new oi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:E5(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function E5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return F()}}function vE(t,e){return t instanceof fn&&e instanceof fn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof xn&&e instanceof xn&&t._firestore===e._firestore&&fE(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function nR(t){t=he(t,Ce);let e=he(t.firestore,Se);return EP(tt(e),t._key).then(n=>CE(e,t,n))}var Sr=class extends la{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ce(this.firestore,null,n)}};function rR(t){t=he(t,Ce);let e=he(t.firestore,Se),n=tt(e),r=new Sr(e);return p5(n,t._key).then(i=>new fn(e,r,t._key,i,new Ir(i!==null&&i.hasLocalMutations,!0),t.converter))}function iR(t){t=he(t,Ce);let e=he(t.firestore,Se);return EP(tt(e),t._key,{source:"server"}).then(n=>CE(e,t,n))}function sR(t){t=he(t,ht);let e=he(t.firestore,Se),n=tt(e),r=new Sr(e);return qP(t._query),CP(n,t._query).then(i=>new xn(e,r,t,i))}function oR(t){t=he(t,ht);let e=he(t.firestore,Se),n=tt(e),r=new Sr(e);return g5(n,t._query).then(i=>new xn(e,r,t,i))}function aR(t){t=he(t,ht);let e=he(t.firestore,Se),n=tt(e),r=new Sr(e);return CP(n,t._query,{source:"server"}).then(i=>new xn(e,r,t,i))}function _E(t,e,n){t=he(t,Ce);let r=he(t.firestore,Se),i=Cp(t.converter,e,n);return ya(r,[wp(Is(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Be.none())])}function wE(t,e,n,...r){t=he(t,Ce);let i=he(t.firestore,Se),s=Is(i),o;return o=typeof(e=Me(e))=="string"||e instanceof Mn?gE(s,"updateDoc",t._key,e,n,r):pE(s,"updateDoc",t._key,e),ya(i,[o.toMutation(t._key,Be.exists(!0))])}function cR(t){return ya(he(t.firestore,Se),[new mi(t._key,Be.none())])}function uR(t,e){let n=he(t.firestore,Se),r=qu(t),i=Cp(t.converter,e);return ya(n,[wp(Is(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Be.exists(!1))]).then(()=>r)}function EE(t,...e){var n,r,i;t=Me(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||I0(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(I0(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof Ce)u=he(t.firestore,Se),l=ha(t._key.path),c={next:d=>{e[o]&&e[o](CE(u,t,d))},error:e[o+1],complete:e[o+2]};else{let d=he(t,ht);u=he(d.firestore,Se),l=d._query;let h=new Sr(u);c={next:f=>{e[o]&&e[o](new xn(u,h,d,f))},error:e[o+1],complete:e[o+2]},qP(t._query)}return function(h,f,p,g){let y=new ca(g),w=new Ou(f,y,p);return h.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return Z0(yield ua(h),w)})),()=>{y.Na(),h.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return X0(yield ua(h),w)}))}}(tt(u),l,a,c)}function lR(t,e){return m5(tt(t=he(t,Se)),I0(e)?e:{next:e})}function ya(t,e){return function(r,i){let s=new Xe;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return Q9(yield cE(r),i,s)})),s.promise}(tt(t),e)}function CE(t,e,n){let r=n.docs.get(e._key),i=new Sr(t);return new fn(t,i,e._key,r,new Ir(n.hasPendingWrites,n.fromCache),e.converter)}var C5={maxAttempts:5};var gp=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Is(e)}set(e,n,r){this._verifyNotCommitted();let i=ii(e,this._firestore),s=Cp(i.converter,n,r),o=wp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Be.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=ii(e,this._firestore),o;return o=typeof(n=Me(n))=="string"||n instanceof Mn?gE(this._dataReader,"WriteBatch.update",s._key,n,r,i):pE(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Be.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=ii(e,this._firestore);return this._mutations=this._mutations.concat(new mi(n._key,Be.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new E(v.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ii(t,e){if((t=Me(t)).firestore!==e)throw new E(v.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var F0=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Is(n)}get(n){let r=ii(n,this._firestore),i=new k0(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return F();let o=s[0];if(o.isFoundDocument())return new ws(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ws(this._firestore,i,r._key,null,r.converter);throw F()})}set(n,r,i){let s=ii(n,this._firestore),o=Cp(s.converter,r,i),a=wp(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){let o=ii(n,this._firestore),a;return a=typeof(r=Me(r))=="string"||r instanceof Mn?gE(this._dataReader,"Transaction.update",o._key,r,i,s):pE(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){let r=ii(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=ii(e,this._firestore),r=new Sr(this._firestore);return super.get(e).then(i=>new fn(this._firestore,r,n._key,i._document,new Ir(!1,!1),n.converter))}};function dR(t,e,n){t=he(t,Se);let r=Object.assign(Object.assign({},C5),n);return function(s){if(s.maxAttempts<1)throw new E(v.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new Xe;return s.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){let u=yield d5(s);new _0(s.asyncQueue,u,a,o,c).run()})),c.promise}(tt(t),i=>e(new F0(t,i)),r)}function hR(){return new Vu("deleteField")}function fR(){return new S0("serverTimestamp")}function pR(...t){return new A0("arrayUnion",t)}function gR(...t){return new M0("arrayRemove",t)}function mR(t){return new x0("increment",t)}(function(e,n=!0){(function(i){da=i})(EC),ba(new bi("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Se(new H_(r.getProvider("auth-internal")),new W_(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new E(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new di(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Rr(JM,"4.4.0",e),Rr(JM,"4.4.0","esm2017")})();var I5="@firebase/firestore-compat",D5="0.3.23";function AE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new E("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function yR(){if(typeof Uint8Array>"u")throw new E("unimplemented","Uint8Arrays are not available in this environment.")}function vR(){if(!lx())throw new E("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Ip=class t{constructor(e){this._delegate=e}static fromBase64String(e){return vR(),new t(ir.fromBase64String(e))}static fromUint8Array(e){return yR(),new t(ir.fromUint8Array(e))}toBase64(){return vR(),this._delegate.toBase64()}toUint8Array(){return yR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function IE(t){return b5(t,["next","error","complete"])}function b5(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var DE=class{enableIndexedDbPersistence(e,n){return MP(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return xP(e._delegate)}clearIndexedDbPersistence(e){return RP(e._delegate)}},Dp=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof di||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&dn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){bP(this._delegate,e,n,r)}enableNetwork(){return OP(this._delegate)}disableNetwork(){return kP(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lE("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return NP(this._delegate)}onSnapshotsInSync(e){return lR(this._delegate,e)}get app(){if(!this._appCompat)throw new E("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wa(this,dE(this._delegate,e))}catch(n){throw St(n,"collection()","Firestore.collection()")}}doc(e){try{return new sr(this,qu(this._delegate,e))}catch(n){throw St(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new As(this,TP(this._delegate,e))}catch(n){throw St(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return dR(this._delegate,n=>e(new bp(this,n)))}batch(){return tt(this._delegate),new Tp(new gp(this._delegate,e=>ya(this._delegate,e)))}loadBundle(e){return FP(this._delegate,e)}namedQuery(e){return VP(this._delegate,e).then(n=>n?new As(this,n):null)}},va=class extends la{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ip(new ir(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return sr.forKey(n,this.firestore,null)}};function T5(t){X1(t)}var bp=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new va(e)}get(e){let n=bs(e);return this._delegate.get(n).then(r=>new Ts(this._firestore,new fn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=bs(e);return r?(AE("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=bs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=bs(e);return this._delegate.delete(n),this}},Tp=class{constructor(e){this._delegate=e}set(e,n,r){let i=bs(e);return r?(AE("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=bs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=bs(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},_a=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new oi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ss(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new t(e,new va(e),n),i.set(n,s)),s}};_a.INSTANCES=new WeakMap;var sr=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new va(e)}static forPath(e,n,r){if(e.length%2!==0)throw new E("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Ce(n._delegate,r,new x(e)))}static forKey(e,n,r){return new t(n,new Ce(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new wa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wa(this.firestore,dE(this._delegate,e))}catch(n){throw St(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Me(e),e instanceof Ce?hE(this._delegate,e):!1}set(e,n){n=AE("DocumentReference.set",n);try{return n?_E(this._delegate,e,n):_E(this._delegate,e)}catch(r){throw St(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?wE(this._delegate,e):wE(this._delegate,e,n,...r)}catch(i){throw St(i,"updateDoc()","DocumentReference.update()")}}delete(){return cR(this._delegate)}onSnapshot(...e){let n=_R(e),r=wR(e,i=>new Ts(this.firestore,new fn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return EE(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=rR(this._delegate):e?.source==="server"?n=iR(this._delegate):n=nR(this._delegate),n.then(r=>new Ts(this.firestore,new fn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(_a.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function St(t,e,n){return t.message=t.message.replace(e,n),t}function _R(t){for(let e of t)if(typeof e=="object"&&!IE(e))return e;return{}}function wR(t,e){var n,r;let i;return IE(t[0])?i=t[0]:IE(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ts=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new sr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return vE(this._delegate,e._delegate)}},Ss=class extends Ts{data(e){let n=this._delegate.data(e);return this._delegate._converter||J1(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},As=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new va(e)}where(e,n,r){try{return new t(this.firestore,Mr(this._delegate,GP(e,n,r)))}catch(i){throw St(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Mr(this._delegate,WP(e,n)))}catch(r){throw St(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Mr(this._delegate,KP(e)))}catch(n){throw St(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Mr(this._delegate,QP(e)))}catch(n){throw St(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Mr(this._delegate,YP(...e)))}catch(n){throw St(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Mr(this._delegate,ZP(...e)))}catch(n){throw St(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Mr(this._delegate,XP(...e)))}catch(n){throw St(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Mr(this._delegate,JP(...e)))}catch(n){throw St(n,"endAt()","Query.endAt()")}}isEqual(e){return fE(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=oR(this._delegate):e?.source==="server"?n=aR(this._delegate):n=sR(this._delegate),n.then(r=>new Gu(this.firestore,new xn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=_R(e),r=wR(e,i=>new Gu(this.firestore,new xn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return EE(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(_a.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},bE=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Ss(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Gu=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new As(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ss(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new bE(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Ss(this._firestore,r))})}isEqual(e){return vE(this._delegate,e._delegate)}},wa=class t extends As{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new sr(this.firestore,e):null}doc(e){try{return e===void 0?new sr(this.firestore,qu(this._delegate)):new sr(this.firestore,qu(this._delegate,e))}catch(n){throw St(n,"doc()","CollectionReference.doc()")}}add(e){return uR(this._delegate,e).then(n=>new sr(this.firestore,n))}isEqual(e){return hE(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(_a.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function bs(t){return he(t,Ce)}var TE=class t{constructor(...e){this._delegate=new Mn(...e)}static documentId(){return new t(He.keyField().canonicalString())}isEqual(e){return e=Me(e),e instanceof Mn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var SE=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=fR();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=hR();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=pR(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=gR(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=mR(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var S5={Firestore:Dp,GeoPoint:_s,Timestamp:Oe,Blob:Ip,Transaction:bp,WriteBatch:Tp,DocumentReference:sr,DocumentSnapshot:Ts,Query:As,QueryDocumentSnapshot:Ss,QuerySnapshot:Gu,CollectionReference:wa,FieldPath:TE,FieldValue:SE,setLogLevel:T5,CACHE_SIZE_UNLIMITED:SP};function A5(t,e){t.INTERNAL.registerComponent(new bi("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},S5)))}function M5(t){A5(t,(e,n)=>new Dp(e,n,new DE)),t.registerVersion(I5,D5)}M5(At);function x5(t,e=Ma){return new ie(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function ER(t,e){return x5(t,e)}function P5(t,e){return ER(t,e).pipe(xi(void 0),Pa(),G(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function PE(t,e){return ER(t,e).pipe(G(n=>({payload:n,type:"query"})))}var Sp=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:s}=TR(r,n);return new Mp(i,s,this.afs)}snapshotChanges(){return P5(this.ref,this.afs.schedulers.outsideAngular).pipe(Rt)}valueChanges(e={}){return this.snapshotChanges().pipe(G(({payload:n})=>e.idField?me(N({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return le(this.ref.get(e)).pipe(Rt)}};function Ap(t,e){return PE(t,e).pipe(xi(void 0),Pa(),G(n=>{let[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=s.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function CR(t,e,n){return Ap(t,n).pipe(Mi((r,i)=>R5(r,i.map(s=>s.payload),e),[]),yg(),G(r=>r.map(i=>({type:i.type,payload:i}))))}function R5(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=N5(t,r))}),t}function ME(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function N5(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return ME(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return ME(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ME(t,e.oldIndex,1);break}return t}function IR(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Mp=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Ap(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(G(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(xi(void 0),Pa(),rt(([r,i])=>i.length>0||!r),G(([,r])=>r),Rt)}auditTrail(e){return this.stateChanges(e).pipe(Mi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=IR(e);return CR(this.query,n,this.afs.schedulers.outsideAngular).pipe(Rt)}valueChanges(e={}){return PE(this.query,this.afs.schedulers.outsideAngular).pipe(G(n=>n.payload.docs.map(r=>e.idField?me(N({},r.data()),{[e.idField]:r.id}):r.data())),Rt)}get(e){return le(this.query.get(e)).pipe(Rt)}add(e){return this.ref.add(e)}doc(e){return new Sp(this.ref.doc(e),this.afs)}},xE=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Ap(this.query,this.afs.schedulers.outsideAngular).pipe(Rt):Ap(this.query,this.afs.schedulers.outsideAngular).pipe(G(n=>n.filter(r=>e.indexOf(r.type)>-1)),rt(n=>n.length>0),Rt)}auditTrail(e){return this.stateChanges(e).pipe(Mi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=IR(e);return CR(this.query,n,this.afs.schedulers.outsideAngular).pipe(Rt)}valueChanges(e={}){return PE(this.query,this.afs.schedulers.outsideAngular).pipe(G(r=>r.payload.docs.map(i=>e.idField?N({[e.idField]:i.id},i.data()):i.data())),Rt)}get(e){return le(this.query.get(e)).pipe(Rt)}},DR=new k("angularfire2.enableFirestorePersistence"),bR=new k("angularfire2.firestore.persistenceSettings"),O5=new k("angularfire2.firestore.settings"),k5=new k("angularfire2.firestore.use-emulator");function TR(t,e=n=>n){return{query:e(t),ref:t}}var RE=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,c,u,l,d,h,f,p,g,y,w,S){this.schedulers=c;let T=Oc(n,a,r),O=l;d&&Gv(T,a,h,p,g,y,f,w),[this.firestore,this.persistenceEnabled$]=Nh(`${T.name}.firestore`,"AngularFirestore",T.name,()=>{let U=a.runOutsideAngular(()=>T.firestore());if(s&&U.settings(s),O&&U.useEmulator(...O),i&&!Wi(o)){let z=()=>{try{return le(U.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(ee){return typeof console<"u"&&console.warn(ee),$(!1)}};return[U,a.runOutsideAngular(z)]}else return[U,$(!1)]},[s,O,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:s,query:o}=TR(i,r),a=this.schedulers.ngZone.run(()=>s);return new Mp(a,o,this)}collectionGroup(n,r){let i=r||(o=>o),s=this.firestore.collectionGroup(n);return new xE(i(s),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Sp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(b(Ao),b(Mo,8),b(DR,8),b(O5,8),b(It),b(oe),b(xh),b(bR,8),b(k5,8),b(PA,8),b(Bv,8),b(Uv,8),b($v,8),b(Hv,8),b(zv,8),b(qv,8),b(Zi,8))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),SR=(()=>{class t{constructor(){At.registerVersion("angularfire",So.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:DR,useValue:!0},{provide:bR,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ne({type:t});static \u0275inj=Re({providers:[RE]})}return t})();function V5(t,e){t&1&&(I(0,"div",12),j(1," Maximum 15 words allowed for name and last name combined. "),M())}function L5(t,e){t&1&&(I(0,"div",12),j(1," Maximum 15 words allowed for name and last name combined. "),M())}function j5(t,e){t&1&&(I(0,"div",12),j(1," Please enter only alphabetical characters for the name. "),M())}function B5(t,e){t&1&&(I(0,"div",12),j(1," Please enter only alphabetical characters for the last name. "),M())}function U5(t,e){t&1&&(I(0,"div",12),j(1," Please enter a valid email address. "),M())}function $5(t,e){t&1&&(I(0,"div",12),j(1," Please enter a valid 8-digit phone number. "),M())}function H5(t,e){if(t&1&&(I(0,"div",13)(1,"div",14),j(2),M(),ae(3,"div",15),M()),t&2){let n=Od();De(2),hy(n.submitMessage)}}var xp=t=>({"invalid-input":t}),AR=(()=>{let e=class e{constructor(r,i){this.formBuilder=r,this.firestore=i,this.isSubmit=!1,this.submitMessage="",this.userdata=this.formBuilder.group({name:["",[Gn.required,this.nameValidator]],lastname:["",[Gn.required,this.nameValidator]],phone:["",[Gn.pattern("^[0-9]{8}$"),Gn.required]],email:["",[Gn.required,Gn.email,this.emailValidator]],message:["",Gn.required]})}ngOnInit(){}nameValidator(r){let i=r.value;return/^[A-Za-z]+$/.test(i)?i&&i.trim().split(" ").length>15?{nameLengthExceeded:!0}:null:{invalidNameFormat:!0}}emailValidator(r){let i=r.value;return i&&!i.includes("@")?{invalidEmailFormat:!0}:null}submitForm(){if(this.userdata.valid){this.isSubmit=!0,this.submitMessage="Submitting...";let r=this.userdata.value;this.firestore.collection("contactForms").add(r).then(()=>{this.submitMessage="Message sent successfully :)",this.userdata.reset(),setTimeout(()=>{this.isSubmit=!1},1500)}).catch(i=>{console.error("Error submitting form:",i),this.submitMessage="Error sending the message. Please try again.",this.isSubmit=!1})}}};e.\u0275fac=function(i){return new(i||e)(pe(hA),pe(RE))},e.\u0275cmp=Bn({type:e,selectors:[["app-contactme"]],decls:21,vars:20,consts:[["id","contact",1,"contact"],[1,"heading"],[3,"formGroup","ngSubmit"],[1,"input-box"],["type","text","placeholder","Name","formControlName","name",3,"ngClass"],["type","text","placeholder","Last Name","formControlName","lastname",3,"ngClass"],["class","error-message",4,"ngIf"],["type","tel","placeholder","Mobile Number","formControlName","phone",3,"ngClass"],["type","email","placeholder","Email","formControlName","email",3,"ngClass"],["cols","30","rows","10","placeholder","Your Message","formControlName","message","required",""],["type","submit","value","Send Message",1,"btn"],["class","loader",4,"ngIf"],[1,"error-message"],[1,"loader"],[1,"loader-text"],[1,"loader-bar"]],template:function(i,s){if(i&1&&(I(0,"section",0)(1,"h2",1),j(2,"Contact "),I(3,"span"),j(4,"Me"),M()(),I(5,"form",2),Wt("ngSubmit",function(){return s.submitForm()}),I(6,"div",3),ae(7,"input",4)(8,"input",5),M(),zi(9,V5,2,0,"div",6)(10,L5,2,0,"div",6)(11,j5,2,0,"div",6)(12,B5,2,0,"div",6),I(13,"div",3),ae(14,"input",7)(15,"input",8),M(),zi(16,U5,2,0,"div",6)(17,$5,2,0,"div",6),ae(18,"textarea",9)(19,"input",10),M(),zi(20,H5,4,1,"div",11),M()),i&2){let o,a,c,u,l,d,h,f,p,g;De(5),Ke("formGroup",s.userdata),De(2),Ke("ngClass",Gr(12,xp,((o=s.userdata.get("name"))==null?null:o.invalid)&&((o=s.userdata.get("name"))==null?null:o.touched))),De(1),Ke("ngClass",Gr(14,xp,((a=s.userdata.get("lastname"))==null?null:a.invalid)&&((a=s.userdata.get("lastname"))==null?null:a.touched))),De(1),Ke("ngIf",((c=s.userdata.get("name"))==null?null:c.hasError("nameLengthExceeded"))&&((c=s.userdata.get("name"))==null?null:c.touched)),De(1),Ke("ngIf",((u=s.userdata.get("lastname"))==null?null:u.hasError("nameLengthExceeded"))&&((u=s.userdata.get("lastname"))==null?null:u.touched)),De(1),Ke("ngIf",((l=s.userdata.get("name"))==null?null:l.hasError("invalidNameFormat"))&&((l=s.userdata.get("name"))==null?null:l.touched)),De(1),Ke("ngIf",((d=s.userdata.get("lastname"))==null?null:d.hasError("invalidNameFormat"))&&((d=s.userdata.get("lastname"))==null?null:d.touched)),De(2),Ke("ngClass",Gr(16,xp,((h=s.userdata.get("phone"))==null?null:h.invalid)&&((h=s.userdata.get("phone"))==null?null:h.touched))),De(1),Ke("ngClass",Gr(18,xp,((f=s.userdata.get("email"))==null?null:f.invalid)&&((f=s.userdata.get("email"))==null?null:f.touched))),De(1),Ke("ngIf",((p=s.userdata.get("email"))==null?null:p.hasError("invalidEmailFormat"))&&((p=s.userdata.get("email"))==null?null:p.touched)),De(1),Ke("ngIf",((g=s.userdata.get("phone"))==null?null:g.hasError("pattern"))&&((g=s.userdata.get("phone"))==null?null:g.touched)),De(3),Ke("ngIf",s.isSubmit)}},dependencies:[zd,qd,uA,Th,iA,sA,Pv,Mv,xv],styles:[".contact[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:3rem}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:70rem;margin:1rem auto 3rem;text-align:center;position:relative}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:1.5rem;font-size:1.6rem;color:#333;background:#fff;border-radius:.8rem;margin:.7rem 0;box-shadow:0 .1rem .5rem #0000001a}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:49%}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .invalid-input[_ngcontent-%COMP%]{border:1px solid red}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:1.4rem;margin-top:.5rem}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:2rem;cursor:pointer}.btn[_ngcontent-%COMP%]{display:inline-block;padding:1.2rem 2.8rem;background:var(--main-color);color:var(--white-color);border-radius:.6rem;box-shadow:0 .2rem .5rem var(--shadow-color);font-size:1.6rem;letter-spacing:.1rem;font-weight:700;border:.2rem solid transparent;transition:.5s ease}.btn[_ngcontent-%COMP%]:hover{background:transparent;color:var(--main-color);border-color:var(--main-color)}section[_ngcontent-%COMP%]{min-height:100vh;padding:10rem 7% 2rem}span[_ngcontent-%COMP%]{color:var(--main-color)}.heading[_ngcontent-%COMP%]{font-size:4.5rem;text-align:center}@keyframes _ngcontent-%COMP%_load-loop{0%{background-position:100%}40%{background-position:50%}50%{background-position:50%}90%{background-position:0%}to{background-position:0%}}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.loader[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.loader-text[_ngcontent-%COMP%]{font-size:14px;color:#000;margin-bottom:20px;align-self:center}.loader-bar[_ngcontent-%COMP%]{width:10%;height:2px;border-radius:5px;background-color:#000;animation:_ngcontent-%COMP%_loader-bar-animation 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_loader-bar-animation{0%{transform:translate(-100%)}50%{transform:translate(100%)}to{transform:translate(-100%)}}.invalid-input[_ngcontent-%COMP%]{border:1px solid red;transition:.4s ease}"]});let t=e;return t})();var or="*";function MR(t,e){return{type:7,name:t,definitions:e,options:{}}}function NE(t,e=null){return{type:4,styles:e,timings:t}}function xR(t,e=null){return{type:2,steps:t,options:e}}function Ms(t){return{type:6,styles:t,offset:null}}function PR(t,e,n){return{type:0,name:t,styles:e,options:n}}function OE(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}var Ei=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},Wu=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((n,r)=>n===null||r.totalTime>n.totalTime?r:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},Pp="!";function q5(t,e){if(t&1){let n=Xb();I(0,"div",7)(1,"div",8)(2,"div",9)(3,"div")(4,"p",10),j(5,"Ali Amhaz"),M()()(),I(6,"p",11),j(7," I am a multifaceted professional with a comprehensive skill set encompassing web development, video editing, and animation, each facet contributing to a holistic approach in crafting immersive digital experiences. As a web developer, I specialize in the art of coding, using languages such as HTML, CSS, and JavaScript to build dynamic and visually captivating websites. My projects seamlessly merge functionality with aesthetic appeal, providing users with an engaging online experience. In the realm of video editing, I wield the tools of storytelling, manipulating visuals and sound to create compelling narratives. My expertise lies in the ability to not only edit footage but also to craft a seamless and emotionally resonant story. Whether it's a promotional video, educational content, or a cinematic masterpiece, I bring a meticulous eye for detail and a passion for storytelling to every project. "),M()(),I(8,"a",5),Wt("click",function(){pD(n);let i=Od();return gD(i.toggleVisibility())}),j(9,"Return"),M()()}t&2&&(Ke("@fadeInOut",void 0),De(8),Ke("@fadeInOut",void 0))}var RR=t=>({hidden:t}),NR=(()=>{let e=class e{constructor(){this.hideContent=!1}toggleVisibility(){this.hideContent=!this.hideContent}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Bn({type:e,selectors:[["app-aboutme"]],decls:15,vars:7,consts:[["id","about",1,"about"],[1,"about-img",3,"ngClass"],["src","./assets/images/ahs.JPG","alt",""],[1,"about-content",3,"ngClass"],[1,"heading"],[1,"btn",3,"click"],["class","return-btn",4,"ngIf"],[1,"return-btn"],[1,"card"],[1,"header"],[1,"name"],[1,"message"]],template:function(i,s){i&1&&(I(0,"section",0)(1,"div",1),ae(2,"img",2),M(),I(3,"div",3)(4,"h2",4),j(5,"About "),I(6,"span"),j(7,"Me"),M()(),I(8,"h3"),j(9,"Hi I am Here To Help Your Next Project!"),M(),I(10,"p"),j(11," I am a versatile professional skilled in both web development and video editing. Proficient in languages like HTML, CSS, and JavaScript, I craft immersive digital experiences. With expertise in Blender, I merge creativity with technical prowess, ensuring captivating visual narratives and seamless, user-centric web solutions in my portfolio "),M(),I(12,"a",5),Wt("click",function(){return s.toggleVisibility()}),j(13,"Read More"),M()(),zi(14,q5,10,2,"div",6),M()),i&2&&(De(1),Ke("ngClass",Gr(3,RR,s.hideContent)),De(2),Ke("ngClass",Gr(5,RR,s.hideContent)),De(11),Ke("ngIf",s.hideContent))},dependencies:[zd,qd],styles:[".about[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}.content-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.return-btn[_ngcontent-%COMP%]{margin-top:20px}.return-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--white-color)}.about[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:4rem}.about-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25vw;border-radius:50%;border-bottom:1rem solid var(--main-color);box-shadow:0 1px 21px var(--shadow-color)}.heading[_ngcontent-%COMP%]{font-size:4.5rem;text-align:center}.about-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:left;line-height:1.2}.about-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem}.about-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.6rem;margin:2rem 0 3rem}.btn[_ngcontent-%COMP%]{display:inline-block;padding:1.2rem 2.8rem;background:var(--main-color);color:var(--white-color);border-radius:.6rem;box-shadow:0 .2rem .5rem var(--shadow-color);font-size:1.6rem;letter-spacing:.1rem;font-weight:700;border:.2rem solid transparent;transition:.5s ease}.btn[_ngcontent-%COMP%]:hover{background:transparent;color:var(--main-color);border-color:var(--main-color)}@media (max-width: 1200px){html[_ngcontent-%COMP%]{font-size:55%}section[_ngcontent-%COMP%]{padding:10rem 3% 2rem}}@media (max-width: 1060px){section[_ngcontent-%COMP%]{padding:10rem 3% 2rem}}@media (max-width: 991px){.contact[_ngcontent-%COMP%]{min-height:auto}}@media (max-width: 768px){.about[_ngcontent-%COMP%]{flex-direction:column-reverse;text-align:center}.about-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.about-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70vw;margin-top:-2rem}}@media (max-width: 365px){.about-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90vw}}.card[_ngcontent-%COMP%]{background-color:#fdfdfd;padding:2rem;max-width:1200px;border-radius:10px;box-shadow:0 20px 30px -20px #0505053d;box-shadow:0 1px 21px var(--shadow-color);margin-bottom:1rem}.header[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:1rem;gap:1rem}.name[_ngcontent-%COMP%]{margin-top:.25rem;font-size:2.125rem;line-height:1.75rem;font-weight:600;--tw-text-opacity: 1;color:#374151}.message[_ngcontent-%COMP%]{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;color:#6b7280;font-size:1.6rem;margin:2rem 0 3rem}.return-btn[_ngcontent-%COMP%]{justify-content:center;align-items:center;padding:1rem;text-align:center}"],data:{animation:[MR("fadeInOut",[PR("in",Ms({opacity:1})),OE("void => *",[Ms({opacity:0}),NE(300)]),OE("* => void",[NE(300,Ms({opacity:0}))])])]}});let t=e;return t})();var OR=(()=>{let e=class e{constructor(r,i){this.renderer=r,this.el=i,this.currentSection="",this.isNavbarOpen=!1}onWindowScroll(){let r=this.el.nativeElement.querySelector(".header");window.pageYOffset>100?this.renderer.addClass(r,"sticky"):this.renderer.removeClass(r,"sticky"),document.querySelectorAll("section").forEach(s=>{let o=s.getBoundingClientRect().top,a=s.getAttribute("id");o<=150&&o>=-150&&(this.currentSection=a||"")})}ngAfterViewInit(){let r=this.el.nativeElement.querySelector("#menu-icon"),i=this.el.nativeElement.querySelector(".navbar");r.addEventListener("click",()=>{this.isNavbarOpen=!this.isNavbarOpen,this.toggleMenuIcon(r,this.isNavbarOpen,i)})}toggleMenuIcon(r,i,s){let o='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;"><path d="m16.192 6.344-4.243 4.242-4.242-4.242-1.414 1.414L10.535 12l-4.242 4.242 1.414 1.414 4.242-4.242 4.243 4.242 1.414-1.414L13.364 12l4.242-4.242z"></path></svg>',a='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: msFilter"><path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"></path></svg>';r.innerHTML=i?o:a,i?(s.classList.add("active"),s.querySelectorAll("a").forEach(u=>{u.addEventListener("click",()=>{s.classList.remove("active"),r.innerHTML=a})})):s.classList.remove("active")}downloadfile(){let r=document.createElement("a");r.setAttribute("target","_blank"),r.setAttribute("href","./assets/images/mycv1.pdf"),r.setAttribute("download","MYCV"),document.body.appendChild(r),r.click(),r.remove()}};e.\u0275fac=function(i){return new(i||e)(pe(mr),pe(Un))},e.\u0275cmp=Bn({type:e,selectors:[["app-portfolio"]],hostBindings:function(i,s){i&1&&Wt("scroll",function(a){return s.onWindowScroll(a)},!1,WD)},decls:183,vars:10,consts:[[1,"header"],["href","#",1,"logo"],[1,"navbar"],["href","#home"],["href","#about"],["href","#services"],["href","#portfolio"],["href","#contact"],["id","darkMode-icon",1,"bx-moon"],["xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","width","30","height","30","viewBox","0 0 50 50"],["d","M 11.986328 0 C 11.815078 0.002 11.645188 0.048671875 11.492188 0.13867188 C 11.188188 0.31867188 11 0.646 11 1 L 11 13.353516 C 11 13.737516 11.219406 14.089859 11.566406 14.255859 L 29.566406 22.900391 C 29.703406 22.966391 29.853 23 30 23 C 30.194 23 30.387688 22.943031 30.554688 22.832031 L 39.554688 16.832031 C 39.844687 16.639031 40.013047 16.307984 39.998047 15.958984 C 39.984047 15.610984 39.789375 15.295953 39.484375 15.126953 L 12.484375 0.12695312 C 12.329375 0.040953125 12.157578 -0.002 11.986328 0 z M 12.025391 17 C 11.850016 16.9955 11.674625 17.038453 11.515625 17.126953 C 11.197625 17.302953 11 17.636 11 18 L 11 48.998047 C 11 49.758047 11.813469 50.241953 12.480469 49.876953 L 40.496094 33.867188 C 40.808094 33.689188 41 33.359 41 33 L 41 20 C 41 19.592 40.753 19.225266 40.375 19.072266 C 39.995 18.920266 39.562297 19.011688 39.279297 19.304688 L 13 47 L 20.955078 23.294922 C 21.088078 22.861922 20.913297 22.392344 20.529297 22.152344 L 12.529297 17.152344 C 12.374797 17.055844 12.200766 17.0045 12.025391 17 z"],["id","menu-icon",1,""],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",2,"fill","rgba(0, 0, 0, 1)","transform","msFilter"],["d","M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"],["id","home",1,"home"],[1,"home-content"],[1,"socail-media"],[1,"social-buttons"],["href","https://github.com/combatost","target","_blank",1,"social-button","github"],["xmlns","http://www.w3.org/2000/svg","viewBox","-2.5 0 19 19",1,"cf-icon-svg"],["d","M9.464 17.178a4.506 4.506 0 0 1-2.013.317 4.29 4.29 0 0 1-2.007-.317.746.746 0 0 1-.277-.587c0-.22-.008-.798-.012-1.567-2.564.557-3.105-1.236-3.105-1.236a2.44 2.44 0 0 0-1.024-1.348c-.836-.572.063-.56.063-.56a1.937 1.937 0 0 1 1.412.95 1.962 1.962 0 0 0 2.682.765 1.971 1.971 0 0 1 .586-1.233c-2.046-.232-4.198-1.023-4.198-4.554a3.566 3.566 0 0 1 .948-2.474 3.313 3.313 0 0 1 .091-2.438s.773-.248 2.534.945a8.727 8.727 0 0 1 4.615 0c1.76-1.193 2.532-.945 2.532-.945a3.31 3.31 0 0 1 .092 2.438 3.562 3.562 0 0 1 .947 2.474c0 3.54-2.155 4.32-4.208 4.548a2.195 2.195 0 0 1 .625 1.706c0 1.232-.011 2.227-.011 2.529a.694.694 0 0 1-.272.587z"],["href","https://wa.me/message/D7SD4ZO35TAKE1","target","_blank",1,"social-button","facebook"],["fill","#000000","height","200px","width","200px","version","1.1","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 308 308",0,"xml","space","preserve"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["id","XMLID_468_"],["id","XMLID_469_","d","M227.904,176.981c-0.6-0.288-23.054-11.345-27.044-12.781c-1.629-0.585-3.374-1.156-5.23-1.156 c-3.032,0-5.579,1.511-7.563,4.479c-2.243,3.334-9.033,11.271-11.131,13.642c-0.274,0.313-0.648,0.687-0.872,0.687 c-0.201,0-3.676-1.431-4.728-1.888c-24.087-10.463-42.37-35.624-44.877-39.867c-0.358-0.61-0.373-0.887-0.376-0.887 c0.088-0.323,0.898-1.135,1.316-1.554c1.223-1.21,2.548-2.805,3.83-4.348c0.607-0.731,1.215-1.463,1.812-2.153 c1.86-2.164,2.688-3.844,3.648-5.79l0.503-1.011c2.344-4.657,0.342-8.587-0.305-9.856c-0.531-1.062-10.012-23.944-11.02-26.348 c-2.424-5.801-5.627-8.502-10.078-8.502c-0.413,0,0,0-1.732,0.073c-2.109,0.089-13.594,1.601-18.672,4.802 c-5.385,3.395-14.495,14.217-14.495,33.249c0,17.129,10.87,33.302,15.537,39.453c0.116,0.155,0.329,0.47,0.638,0.922 c17.873,26.102,40.154,45.446,62.741,54.469c21.745,8.686,32.042,9.69,37.896,9.69c0.001,0,0.001,0,0.001,0 c2.46,0,4.429-0.193,6.166-0.364l1.102-0.105c7.512-0.666,24.02-9.22,27.775-19.655c2.958-8.219,3.738-17.199,1.77-20.458 C233.168,179.508,230.845,178.393,227.904,176.981z"],["id","XMLID_470_","d","M156.734,0C73.318,0,5.454,67.354,5.454,150.143c0,26.777,7.166,52.988,20.741,75.928L0.212,302.716 c-0.484,1.429-0.124,3.009,0.933,4.085C1.908,307.58,2.943,308,4,308c0.405,0,0.813-0.061,1.211-0.188l79.92-25.396 c21.87,11.685,46.588,17.853,71.604,17.853C240.143,300.27,308,232.923,308,150.143C308,67.354,240.143,0,156.734,0z M156.734,268.994c-23.539,0-46.338-6.797-65.936-19.657c-0.659-0.433-1.424-0.655-2.194-0.655c-0.407,0-0.815,0.062-1.212,0.188 l-40.035,12.726l12.924-38.129c0.418-1.234,0.209-2.595-0.561-3.647c-14.924-20.392-22.813-44.485-22.813-69.677 c0-65.543,53.754-118.867,119.826-118.867c66.064,0,119.812,53.324,119.812,118.867 C276.546,215.678,222.799,268.994,156.734,268.994z"],["href","https://www.instagram.com/combat.2033?igsh=bTRlZmd1cHl5d29q&utm_source=qr","target","_blank",1,"social-button","instagram"],["width","800px","height","800px","viewBox","0 0 20 20","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["id","Page-1","stroke","none","stroke-width","1"],["id","Dribbble-Light-Preview","transform","translate(-340.000000, -7439.000000)"],["id","icons","transform","translate(56.000000, 160.000000)"],["d","M289.869652,7279.12273 C288.241769,7279.19618 286.830805,7279.5942 285.691486,7280.72871 C284.548187,7281.86918 284.155147,7283.28558 284.081514,7284.89653 C284.035742,7285.90201 283.768077,7293.49818 284.544207,7295.49028 C285.067597,7296.83422 286.098457,7297.86749 287.454694,7298.39256 C288.087538,7298.63872 288.809936,7298.80547 289.869652,7298.85411 C298.730467,7299.25511 302.015089,7299.03674 303.400182,7295.49028 C303.645956,7294.859 303.815113,7294.1374 303.86188,7293.08031 C304.26686,7284.19677 303.796207,7282.27117 302.251908,7280.72871 C301.027016,7279.50685 299.5862,7278.67508 289.869652,7279.12273 M289.951245,7297.06748 C288.981083,7297.0238 288.454707,7296.86201 288.103459,7296.72603 C287.219865,7296.3826 286.556174,7295.72155 286.214876,7294.84312 C285.623823,7293.32944 285.819846,7286.14023 285.872583,7284.97693 C285.924325,7283.83745 286.155174,7282.79624 286.959165,7281.99226 C287.954203,7280.99968 289.239792,7280.51332 297.993144,7280.90837 C299.135448,7280.95998 300.179243,7281.19026 300.985224,7281.99226 C301.980262,7282.98483 302.473801,7284.28014 302.071806,7292.99991 C302.028024,7293.96767 301.865833,7294.49274 301.729513,7294.84312 C300.829003,7297.15085 298.757333,7297.47145 289.951245,7297.06748 M298.089663,7283.68956 C298.089663,7284.34665 298.623998,7284.88065 299.283709,7284.88065 C299.943419,7284.88065 300.47875,7284.34665 300.47875,7283.68956 C300.47875,7283.03248 299.943419,7282.49847 299.283709,7282.49847 C298.623998,7282.49847 298.089663,7283.03248 298.089663,7283.68956 M288.862673,7288.98792 C288.862673,7291.80286 291.150266,7294.08479 293.972194,7294.08479 C296.794123,7294.08479 299.081716,7291.80286 299.081716,7288.98792 C299.081716,7286.17298 296.794123,7283.89205 293.972194,7283.89205 C291.150266,7283.89205 288.862673,7286.17298 288.862673,7288.98792 M290.655732,7288.98792 C290.655732,7287.16159 292.140329,7285.67967 293.972194,7285.67967 C295.80406,7285.67967 297.288657,7287.16159 297.288657,7288.98792 C297.288657,7290.81525 295.80406,7292.29716 293.972194,7292.29716 C292.140329,7292.29716 290.655732,7290.81525 290.655732,7288.98792","id","instagram-[#167]"],[1,"download-button"],[1,"docs"],["stroke-linejoin","round","stroke-linecap","round","fill","none","stroke-width","2","stroke","currentColor","height","20","width","20","viewBox","0 0 24 24",1,"css-i6dzq1"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],["y2","13","x2","8","y1","13","x1","16"],["y2","17","x2","8","y1","17","x1","16"],["points","10 9 9 9 8 9"],[1,"download",3,"click"],["stroke-linejoin","round","stroke-linecap","round","fill","none","stroke-width","2","stroke","currentColor","height","24","width","24","viewBox","0 0 24 24",1,"css-i6dzq1"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["y2","3","x2","12","y1","15","x1","12"],[1,"pro-container"],[1,"pro-box"],[1,"pro",2,"--i","0"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24",2,"fill","#754ef9","transform","msFilter"],["d","m7.375 16.781 1.25-1.562L4.601 12l4.024-3.219-1.25-1.562-5 4a1 1 0 0 0 0 1.562l5 4zm9.25-9.562-1.25 1.562L19.399 12l-4.024 3.219 1.25 1.562 5-4a1 1 0 0 0 0-1.562l-5-4zm-1.649-4.003-4 18-1.953-.434 4-18z"],[1,"pro",2,"--i","1"],["d","M18 11c0-.959-.68-1.761-1.581-1.954C16.779 8.445 17 7.75 17 7c0-2.206-1.794-4-4-4-1.517 0-2.821.857-3.5 2.104C8.821 3.857 7.517 3 6 3 3.794 3 2 4.794 2 7c0 .902.312 1.727.817 2.396A1.994 1.994 0 0 0 2 11v8c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-2.638l4 2v-7l-4 2V11zm-5-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2zM6 5c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2zM4 19v-8h12l.002 8H4z"],[1,"circle"],[1,"overlay"],["id","about",1,"about"],["id","services",1,"services"],[1,"heading"],[1,"services-container"],[1,"services-box"],[1,"iconz"],["xmlns","http://www.w3.org/2000/svg","width","50","height","50","viewBox","0 0 24 24",2,"fill","#754ef9","transform","msFilter"],["d","M7.061 22c1.523 0 2.84-.543 3.91-1.613 1.123-1.123 1.707-2.854 1.551-4.494l8.564-8.564a3.123 3.123 0 0 0-.002-4.414c-1.178-1.18-3.234-1.18-4.412 0l-8.884 8.884c-1.913.169-3.807 1.521-3.807 3.919 0 .303.021.588.042.86.08 1.031.109 1.418-1.471 2.208a1.001 1.001 0 0 0-.122 1.717C2.52 20.563 4.623 22 7.061 22c-.001 0-.001 0 0 0zM18.086 4.328a1.144 1.144 0 0 1 1.586.002 1.12 1.12 0 0 1 0 1.584L12 13.586 10.414 12l7.672-7.672zM6.018 16.423c-.018-.224-.037-.458-.037-.706 0-1.545 1.445-1.953 2.21-1.953.356 0 .699.073.964.206.945.475 1.26 1.293 1.357 1.896.177 1.09-.217 2.368-.956 3.107C8.865 19.664 8.049 20 7.061 20H7.06c-.75 0-1.479-.196-2.074-.427 1.082-.973 1.121-1.989 1.032-3.15z"],["d","m10.4 17.8 1.21 2.07L19.77 22 22 14.08 20.72 12 22 10l-2.23-8-8.16 2.13L10.4 6.2H8L2 12l6 5.81zm9.92-5.8-1.73 6L15 12l3.59-6zM10.6 6.54 16.84 5l-3.59 6H6.08zM13.27 13l3.59 6-6.26-1.55L6.1 13z"],["id","portfolio",1,"portfolio"],[1,"portfolio-container"],[1,"portfolio-box"],["src","./assets/images/untitled.png","alt",""],[1,"portfolio-layer"],["src","./assets/images/web.png","alt",""],["src","./assets/images/soon.png","alt",""],[1,"test-conatiner"],[1,"test-wrapper"],[1,"test-box"],[1,"test-content"],[1,"test-slide"],["src","./assets/images/ahs.JPG","alt",""],[1,"footer"],[1,"footer-text"],[1,"footer-icon"],["d","M3 13h1v7c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-7h1a1 1 0 0 0 .707-1.707l-9-9a.999.999 0 0 0-1.414 0l-9 9A1 1 0 0 0 3 13zm7 7v-5h4v5h-4zm2-15.586 6 6V15l.001 5H16v-5c0-1.103-.897-2-2-2h-4c-1.103 0-2 .897-2 2v5H6v-9.586l6-6z"]],template:function(i,s){i&1&&(I(0,"header",0)(1,"a",1),j(2,"Portfolio"),M(),I(3,"nav",2)(4,"a",3),j(5,"Home"),M(),I(6,"a",4),j(7,"About"),M(),I(8,"a",5),j(9,"Services"),M(),I(10,"a",6),j(11,"Portfolio"),M(),I(12,"a",7),j(13,"Contact"),M()(),I(14,"div",8),Pt(),I(15,"svg",9),ae(16,"path",10),M()(),qt(),I(17,"div",11),Pt(),I(18,"svg",12),ae(19,"path",13),M()()(),qt(),I(20,"section",14)(21,"div",15)(22,"h3"),j(23,"Hello"),I(24,"span"),j(25," Iam "),M()(),I(26,"h1"),j(27,"Ali Amhaz"),M(),I(28,"p"),j(29," Web development empowers digital evolution, constructing responsive,interactive websites and applications,enabling dynamic, engaging online experiences. "),M(),I(30,"div",16)(31,"div",17)(32,"a",18),Pt(),I(33,"svg",19),ae(34,"path",20),M()(),qt(),I(35,"a",21),Pt(),I(36,"svg",22),ae(37,"g",23)(38,"g",24),I(39,"g",25)(40,"g",26),ae(41,"path",27)(42,"path",28),M()()()(),qt(),I(43,"a",29),Pt(),I(44,"svg",30)(45,"g",31)(46,"g",32)(47,"g",33),ae(48,"path",34),M()()()()()()(),qt(),I(49,"button",35)(50,"div",36),Pt(),I(51,"svg",37),ae(52,"path",38)(53,"polyline",39)(54,"line",40)(55,"line",41)(56,"polyline",42),M(),j(57," Dawnload CV"),M(),qt(),I(58,"div",43),Wt("click",function(){return s.downloadfile()}),Pt(),I(59,"svg",44),ae(60,"path",45)(61,"polyline",46)(62,"line",47),M()()()(),qt(),I(63,"div",48)(64,"div",49)(65,"div",50)(66,"i"),Pt(),I(67,"svg",51),ae(68,"path",52),M()(),qt(),I(69,"h3"),j(70,"Web Developer"),M()(),I(71,"div",53)(72,"i"),Pt(),I(73,"svg",51),ae(74,"path",54),M()(),qt(),I(75,"h3"),j(76,"Vidio Editor"),M()(),ae(77,"div",55),M(),ae(78,"div",56),M()(),I(79,"section",57),ae(80,"app-aboutme"),M(),I(81,"section",58)(82,"h2",59),j(83,"My "),I(84,"span"),j(85,"Services"),M()(),I(86,"div",60)(87,"div",61)(88,"i",62),Pt(),I(89,"svg",63),ae(90,"path",64),M()(),qt(),I(91,"h3"),j(92,"Graphic Desgine"),M(),I(93,"p"),j(94,"My graphic design services offer a fusion of creativity and strategy. With a keen eye for aesthetics and a focus on client needs, I craft visually compelling solutions that resonate. From branding to digital design, I create impactful visuals that elevate your message"),M()(),I(95,"div",61)(96,"i",62),Pt(),I(97,"svg",63),ae(98,"path",65),M()(),qt(),I(99,"h3"),j(100,"Animation"),M(),I(101,"p"),j(102," As an animator, my services breathe life into ideas. Through motion, storytelling, and artistic finesse, I craft engaging animations that captivate audiences. From character design to seamless movement, I bring concepts to vivid, dynamic existence"),M()(),I(103,"div",61)(104,"i",62),Pt(),I(105,"svg",63),ae(106,"path",54),M()(),qt(),I(107,"h3"),j(108,"Vedio Editor"),M(),I(109,"p"),j(110,"In video editing, my services orchestrate narratives. Seamlessly weaving together footage, sound, and effects, I craft compelling stories. With a keen sense of pacing and visual finesse, I transform raw content into captivating, polished videos that resonate"),M()()()(),I(111,"section",66)(112,"h2",59),j(113,"Lastest "),I(114,"span"),j(115,"Project"),M()(),I(116,"div",67)(117,"div",68),ae(118,"img",69),I(119,"div",70)(120,"h4"),j(121,"Animator"),M(),I(122,"p"),j(123,"This photo made by me using blender v4.0 Blender was a robust and versatile 3D creation suite renowned for its free, open-source nature. Offering powerful features for modeling, animation, rendering, compositing, and more "),M()()(),I(124,"div",68),ae(125,"img",71),I(126,"div",70)(127,"h4"),j(128,"Web Design"),M(),I(129,"p"),j(130,"This my First project but its not the last "),M()()(),I(131,"div",68),ae(132,"img",72),I(133,"div",70)(134,"h4"),j(135,"Vedio Editor"),M(),I(136,"p"),j(137,"STAY tuned for update"),M()()(),I(138,"div",68),ae(139,"img",72),I(140,"div",70)(141,"h4"),j(142,"Coming Soon"),M(),I(143,"p"),j(144,"STAY tuned for update"),M()()(),I(145,"div",68),ae(146,"img",72),I(147,"div",70)(148,"h4"),j(149,"Coming Soon"),M(),I(150,"p"),j(151,"STAY tuned for update"),M()()(),I(152,"div",68),ae(153,"img",72),I(154,"div",70)(155,"h4"),j(156,"Coming Soon"),M(),I(157,"p"),j(158,"STAY tuned for update"),M()()()()(),I(159,"div",73)(160,"h2",59),j(161,"Valuable "),I(162,"span"),j(163,"Testimonial"),M()(),I(164,"div",74)(165,"div",75)(166,"div",76)(167,"div",77),ae(168,"img",78),I(169,"h3"),j(170,"Ali AMHAZ"),M(),I(171,"p"),j(172,"Valuable testimonials are authentic expressions of satisfaction and trust from clients or users. They serve as powerful endorsements, highlighting positive experiences with a product, service, or expertise. These testimonials carry weight, influencing potential customers and fostering credibility by showcasing real-life success stories and affirming the value delivered"),M()()()()()(),ae(173,"app-contactme"),I(174,"footer",79)(175,"div",80)(176,"p"),j(177,"Copyright \xA9 2023 by Ali Amhaz | All Rights Reserved"),M()(),I(178,"div",81)(179,"a",3)(180,"i"),Pt(),I(181,"svg",12),ae(182,"path",82),M()()()()()),i&2&&(De(4),$n("active",s.currentSection==="home"),De(2),$n("active",s.currentSection==="about"),De(2),$n("active",s.currentSection==="services"),De(2),$n("active",s.currentSection==="portfolio"),De(2),$n("active",s.currentSection==="contact"))},dependencies:[AR,NR],styles:['[_ngcontent-%COMP%]:root{--bg-color: #fdfdfd;--text-color: #333;--main-color: #754ef9;--white-color: #fdfdfd;--shadow-color: rgba(0, 0, 0, .2)}.header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;padding:2rem 7%;background:transparent;display:flex;align-items:center;z-index:100;transition:.5s ease}.header.sticky[_ngcontent-%COMP%]{background:var(--bg-color);box-shadow:0 .1rem 1rem var(--shadow-color)}.header.sticky[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-color)}.header.sticky[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--main-color)}.logo[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--main-color);font-weight:600;cursor:default;margin-right:auto}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;font-size:1.7rem;color:var(--white-color);font-weight:500;margin-right:3.5rem}.navbar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:-6px;width:100%;height:.2rem;background:var(--white-color)}.header.sticky[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{background:var(--main-color);opacity:.7}.home[_ngcontent-%COMP%]{display:flex;align-items:center}.home[_ngcontent-%COMP%]   .home-content[_ngcontent-%COMP%]{max-width:40rem}.home-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:3.4rem;font-weight:700;line-height:1}.home-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5.6rem;font-weight:700;margin-bottom:.3rem}.home-content[_ngcontent-%COMP%]   P[_ngcontent-%COMP%]{font-size:1.6rem}.home-content[_ngcontent-%COMP%]   .socail-media[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;width:4rem;height:4rem;font-size:2rem;margin:2.5rem 1.5rem 3rem 0}.btn[_ngcontent-%COMP%]{display:inline-block;padding:1.2rem 2.8rem;background:var(--main-color);color:var(--white-color);border-radius:.6rem;box-shadow:0 .2rem .5rem var(--shadow-color);font-size:1.6rem;letter-spacing:.1rem;font-weight:700;border:.2rem solid transparent;transition:.5s ease}.btn[_ngcontent-%COMP%]:hover{background:transparent;color:var(--main-color);border-color:var(--main-color)}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]{position:absolute;top:50%;right:0;transform:translateY(-50%);width:768px;height:100%;overflow:hidden;pointer-events:none}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:768px;height:768px;border-radius:50%;display:flex;justify-content:center;align-items:center;animation:_ngcontent-%COMP%_proRotate 13s ease-in-out infinite}@keyframes _ngcontent-%COMP%_proRotate{0%,20%{transform:rotate(0)}25%,45%{transform:rotate(-90deg)}to{transform:rotate(-360deg)}}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]{position:absolute;left:0;display:flex;align-items:center;flex-direction:column;color:var(--main-color);transform:rotate(calc(360deg / 4 * var(--i)));transform-origin:384px;background:var(--bg-color);padding:13px 0}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(1)   i[_ngcontent-%COMP%]{margin-right:15px}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(2), .home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(4){padding-bottom:20px}.home[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:3.2rem;line-height:1;font-weight:600}.home[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.8rem}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:560px;height:560px;border:3px solid var(--main-color);border-radius:50%}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:0;height:0;border-top:384px solid var(--main-color);border-right:384px solid var(--main-color);border-bottom:384px solid var(--main-color);border-left:384px solid transparent}.home-img[_ngcontent-%COMP%]{position:absolute;inset:30% 0 0 70%;width:20%;pointer-events:none}.heading[_ngcontent-%COMP%]{font-size:4.5rem;text-align:center}#darkMode-icon[_ngcontent-%COMP%]{font-size:2.4rem;cursor:pointer;fill:#fdfdfd}.header.sticky[_ngcontent-%COMP%]   #darkMode-icon[_ngcontent-%COMP%]{fill:var(--text-color);opacity:.9}.services[_ngcontent-%COMP%]{min-height:auto;padding-bottom:25rem}.services[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:5rem}.services[_ngcontent-%COMP%]   .services-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;gap:2rem}.services-container[_ngcontent-%COMP%]   .services-box[_ngcontent-%COMP%]{flex:1 1 30rem;background:var(--bg-color);padding:3rem 2rem 4rem;border-radius:2rem;box-shadow:0 .1rem .5rem var(--shadow-color);text-align:center;border-top:.6rem solid var(--main-color);border-bottom:.6rem solid var(--main-color);transition:.3s ease}.services-container[_ngcontent-%COMP%]   .services-box[_ngcontent-%COMP%]:hover{box-shadow:0 .1rem 2rem var(--shadow-color);transform:scale(1.04)}.services-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:7rem}.services-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.6rem;transition:.5s ease}.services-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:hover{color:var(--main-color)}.services-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.6rem;margin:1rem 0 3rem}.portfolio[_ngcontent-%COMP%]{padding-bottom:10rem}.portfolio[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:4rem}.portfolio[_ngcontent-%COMP%]   .portfolio-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);align-items:center;gap:2.5rem}.portfolio-container[_ngcontent-%COMP%]   .portfolio-box[_ngcontent-%COMP%]{position:relative;display:flex;border-radius:2rem;box-shadow:0 0 1rem var(--shadow-color);overflow:hidden}.portfolio-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:.5s ease}.portfolio-box[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.portfolio-box[_ngcontent-%COMP%]   .portfolio-layer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:100%;background:linear-gradient(rgba(0,0,0,.1),var(--main-color));color:var(--white-color);display:flex;align-items:center;flex-direction:column;text-align:center;padding:0 4rem;justify-content:center;opacity:0;transition:.5s ease}.portfolio-box[_ngcontent-%COMP%]:hover   .portfolio-layer[_ngcontent-%COMP%]{opacity:1}.portfolio-layer[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:3rem}.portfolio[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.6rem;margin:.3rem 0 1rem}.test-conatiner[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;width:100%;padding:5rem 1rem}.test-conatiner[_ngcontent-%COMP%]   .test-wrapper[_ngcontent-%COMP%]{position:relative;max-width:90rem;width:100%;padding:5rem}.test-content[_ngcontent-%COMP%]   .test-slide[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;background:var(--bg-color);border-radius:2rem;box-shadow:0 .1rem .5rem var(--shadow-color);padding:3rem 5rem;border-top:.8rem solid var(--main-color);border-bottom:.8rem solid var(--main-color)}.test-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:14rem;height:14rem;object-fit:cover;border-radius:50%;border:.5rem solid var(--bg-color);outline:.5rem solid var(--main-color)}.test-slide[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.5rem;margin:2rem 0}.test-slide[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4rem;text-align:center}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;padding:2rem 7%;background:var(--main-color)}.footer-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.6rem;color:var(--white-color)}.footer-icon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;padding:.8rem;background:var(--white-color);border-radius:.8rem;border:.2rem solid var(--main-color);outline:.2rem solid transparent;transition:.5s ease}.footer-icon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{outline-color:var(--white-color)}#menu-icon[_ngcontent-%COMP%]{display:none}@media (max-width: 1200px){html[_ngcontent-%COMP%]{font-size:55%}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]{height:85.5rem}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]{right:-12rem;height:85.5rem}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{right:-9rem}section[_ngcontent-%COMP%]{padding:10rem 3% 2rem}}@media (max-width: 1060px){.social-button[_ngcontent-%COMP%]{justify-content:center;align-items:center;left:0}.header[_ngcontent-%COMP%]{padding:1rem 3%}section[_ngcontent-%COMP%]{padding:10rem 3% 2rem}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]{right:-22rem}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{right:-15rem}}@media (max-width: 991px){.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:nth-child(1), .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:nth-child(2){color:var(--main-color)}.home-img[_ngcontent-%COMP%]{display:none}.navbar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:before{background:var(--main-color);opacity:.7}.home[_ngcontent-%COMP%]   .home-content[_ngcontent-%COMP%]{max-width:50rem}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]{right:-45rem}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{right:-39.5rem}.services[_ngcontent-%COMP%], .portfolio[_ngcontent-%COMP%]{padding-bottom:7rem}.contact[_ngcontent-%COMP%]{min-height:auto}.footer[_ngcontent-%COMP%]{padding:2rem 3%}}@media (max-width: 768px){#menu-icon[_ngcontent-%COMP%]{display:block}.home-img[_ngcontent-%COMP%]{display:none}#darkMode-icon[_ngcontent-%COMP%]{position:absolute;right:7rem;font-size:2.6rem;fill:var(--text-color);margin-top:.5rem}.navbar[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:100%;padding:1rem 3%;border-top:.1rem solid rgba(0,0,0,.2);box-shadow:0 .5rem 1rem #0000001a;display:none;flex-direction:column;background-color:var(--bg-color);justify-content:center;text-align:center;border-bottom-right-radius:10px;border-bottom-left-radius:10px;transition:1s;padding:10px;overflow:hidden}.navbar.active[_ngcontent-%COMP%]{display:block}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;font-size:2rem;margin:3rem 0;color:var(--text-color)}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:nth-child(1), .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:nth-child(2){color:var(--text-color)}.navbar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--main-color)}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:none}.home[_ngcontent-%COMP%]{padding:0 3% 23rem;justify-content:center;text-align:center}.home-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.6rem}.home-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem}.social-buttons[_ngcontent-%COMP%]{justify-content:center;align-items:center}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]{left:0;width:100%;height:100%}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]{position:fixed;top:52%;left:0;border-radius:0;width:100%}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]{padding:0 13px;left:auto;transform-origin:0}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{position:fixed;width:670px;height:670px;z-index:-1}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:fixed;top:70rem;left:50%;right:0;transform:rotate(90deg) translate(-50%,50%) scaleY(3);border-width:23.9rem}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(1){transform:rotate(-90deg) translate(-120px,-210px)}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(1)   i[_ngcontent-%COMP%]{margin-right:0}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(2){transform:rotate(0) translateY(-335px)}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(3){transform:rotate(90deg) translate(-115px,-450px)}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(4){transform:rotate(180deg) translate(-220px,-335px)}.about[_ngcontent-%COMP%]{flex-direction:column-reverse;text-align:center}.about-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.about-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70vw;margin-top:-2rem}.services[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .pro[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:3rem}.portfolio[_ngcontent-%COMP%]   .portfolio-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 617px){.portfolio[_ngcontent-%COMP%]   .portfolio-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 450px){html[_ngcontent-%COMP%]{font-size:50%}#darkMode-icon[_ngcontent-%COMP%]{right:6rem}.home[_ngcontent-%COMP%]{padding:0 3% 30rem}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(1){transform:rotate(-90deg) translate(-110px,-220px)}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(2){transform:rotate(0) translate(5px,-335px)}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(3){transform:rotate(90deg) translate(-105px,-440px)}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(4){transform:rotate(180deg) translate(-210px,-335px)}}@media (max-width: 365px){.about-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90vw}.footer[_ngcontent-%COMP%]{flex-direction:column-reverse}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin-top:2rem}}.download-button[_ngcontent-%COMP%]{position:relative;border-width:0;color:#fff;font-size:15px;font-weight:600;border-radius:4px;z-index:1}.download-button[_ngcontent-%COMP%]   .docs[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;min-height:40px;padding:0 10px;border-radius:.6rem;z-index:1;background-color:var(--main-color);border:solid 1px #e8e8e82d;transition:all .5s cubic-bezier(.77,0,.175,1)}.download-button[_ngcontent-%COMP%]:hover{box-shadow:#00000040 0 54px 55px,#0000001f 0 -12px 30px,#0000001f 0 4px 6px,#0000002b 0 12px 13px,#00000017 0 -3px 5px}.download[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;max-width:90%;margin:0 auto;z-index:-1;border-bottom-left-radius:.6rem;border-bottom-right-radius:.6rem;transform:translateY(0);background-color:#01e056;border:solid 1px #01e0572d;transition:all .5s cubic-bezier(.77,0,.175,1)}.download-button[_ngcontent-%COMP%]:hover   .download[_ngcontent-%COMP%]{transform:translateY(100%)}.download[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%], .download[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_docs 1s infinite}@keyframes _ngcontent-%COMP%_docs{0%{transform:translateY(0)}50%{transform:translateY(-15%)}to{transform:translateY(0)}}.social-buttons[_ngcontent-%COMP%]{display:flex}.social-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:50px;height:50px;border-radius:50%;margin:0 10px;background-color:#fff;box-shadow:0 0 4px #00000027;transition:.3s}.social-button[_ngcontent-%COMP%]:hover{background-color:#f2f2f2;box-shadow:0 0 6px 3px #00000027}.social-buttons[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:.3s;height:20px}.facebook[_ngcontent-%COMP%]{background-color:var(--main-color)}.facebook[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#f2f2f2}.facebook[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:#129e12}.github[_ngcontent-%COMP%]{background-color:var(--main-color)}.github[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:25px;height:25px;fill:#f2f2f2}.github[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:#333}.instagram[_ngcontent-%COMP%]{background-color:var(--main-color)}.instagram[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#f2f2f2}.instagram[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:#c13584}']});let t=e;return t})();var kR=(()=>{let e=class e{constructor(){this.title="portfo"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Bn({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,s){i&1&&ae(0,"app-portfolio")},dependencies:[OR]});let t=e;return t})();var FR={production:!1,firebaseConfig:{apiKey:"AIzaSyDZHPiMVHPrHSXkC6eSLKxoWggi4xAuhqc",authDomain:"portfolio-6a00e.firebaseapp.com",projectId:"portfolio-6a00e",storageBucket:"portfolio-6a00e.appspot.com",messagingSenderId:"373549614909",appId:"1:373549614909:web:c506fcc82732bfc26b2754",measurementId:"G-0ZN85FW8EV"}};function VR(t){return new D(3e3,!1)}function K5(){return new D(3100,!1)}function Q5(){return new D(3101,!1)}function Y5(t){return new D(3001,!1)}function Z5(t){return new D(3003,!1)}function X5(t){return new D(3004,!1)}function J5(t,e){return new D(3005,!1)}function e8(){return new D(3006,!1)}function t8(){return new D(3007,!1)}function n8(t,e){return new D(3008,!1)}function r8(t){return new D(3002,!1)}function i8(t,e,n,r,i){return new D(3010,!1)}function s8(){return new D(3011,!1)}function o8(){return new D(3012,!1)}function a8(){return new D(3200,!1)}function c8(){return new D(3202,!1)}function u8(){return new D(3013,!1)}function l8(t){return new D(3014,!1)}function d8(t){return new D(3015,!1)}function h8(t){return new D(3016,!1)}function f8(t,e){return new D(3404,!1)}function p8(t){return new D(3502,!1)}function g8(t){return new D(3503,!1)}function m8(){return new D(3300,!1)}function y8(t){return new D(3504,!1)}function v8(t){return new D(3301,!1)}function _8(t,e){return new D(3302,!1)}function w8(t){return new D(3303,!1)}function E8(t,e){return new D(3400,!1)}function C8(t){return new D(3401,!1)}function I8(t){return new D(3402,!1)}function D8(t,e){return new D(3505,!1)}function Ci(t){switch(t.length){case 0:return new Ei;case 1:return t[0];default:return new Wu(t)}}function ZR(t,e,n=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let u=c.get("offset"),l=u==o,d=l&&a||new Map;c.forEach((h,f)=>{let p=f,g=h;if(f!=="offset")switch(p=t.normalizePropertyName(p,i),g){case Pp:g=n.get(f);break;case or:g=r.get(f);break;default:g=t.normalizeStyleValue(f,p,g,i);break}d.set(p,g)}),l||s.push(d),a=d,o=u}),i.length)throw p8(i);return s}function nC(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&kE(n,"start",t)));break;case"done":t.onDone(()=>r(n&&kE(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&kE(n,"destroy",t)));break}}function kE(t,e,n){let r=n.totalTime,i=!!n.disabled,s=rC(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,r??t.totalTime,i),o=t._data;return o!=null&&(s._data=o),s}function rC(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Jt(t,e,n){let r=t.get(e);return r||t.set(e,r=n),r}function LR(t){let e=t.indexOf(":"),n=t.substring(1,e),r=t.slice(e+1);return[n,r]}var b8=(()=>typeof document>"u"?null:document.documentElement)();function iC(t){let e=t.parentNode||t.host||null;return e===b8?null:e}function T8(t){return t.substring(1,6)=="ebkit"}var xs=null,jR=!1;function S8(t){xs||(xs=A8()||{},jR=xs.style?"WebkitAppearance"in xs.style:!1);let e=!0;return xs.style&&!T8(t)&&(e=t in xs.style,!e&&jR&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in xs.style)),e}function A8(){return typeof document<"u"?document.body:null}function XR(t,e){for(;e;){if(e===t)return!0;e=iC(e)}return!1}function JR(t,e,n){if(n)return Array.from(t.querySelectorAll(e));let r=t.querySelector(e);return r?[r]:[]}var sC=(()=>{let e=class e{validateStyleProperty(r){return S8(r)}matchesElement(r,i){return!1}containsElement(r,i){return XR(r,i)}getParentElement(r){return iC(r)}query(r,i,s){return JR(r,i,s)}computeStyle(r,i,s){return s||""}animate(r,i,s,o,a,c=[],u){return new Ei(s,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),el=(()=>{let e=class e{};e.NOOP=new sC;let t=e;return t})(),Ns=class{};var M8=1e3,eN="{{",x8="}}",tN="ng-enter",UE="ng-leave",Rp="ng-trigger",Vp=".ng-trigger",BR="ng-animating",$E=".ng-animating";function xr(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:HE(parseFloat(e[1]),e[2])}function HE(t,e){switch(e){case"s":return t*M8;default:return t}}function Lp(t,e,n){return t.hasOwnProperty("duration")?t:P8(t,e,n)}function P8(t,e,n){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof t=="string"){let a=t.match(r);if(a===null)return e.push(VR(t)),{duration:0,delay:0,easing:""};i=HE(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=HE(parseFloat(c),a[4]));let u=a[5];u&&(o=u)}else i=t;if(!n){let a=!1,c=e.length;i<0&&(e.push(K5()),a=!0),s<0&&(e.push(Q5()),a=!0),a&&e.splice(c,0,VR(t))}return{duration:i,delay:s,easing:o}}function tl(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function nN(t){let e=new Map;return Object.keys(t).forEach(n=>{let r=t[n];e.set(n,r)}),e}function R8(t){return t.length?t[0]instanceof Map?t:t.map(e=>nN(e)):[]}function Ca(t,e=new Map,n){if(n)for(let[r,i]of n)e.set(r,i);for(let[r,i]of t)e.set(r,i);return e}function ar(t,e,n){e.forEach((r,i)=>{let s=oC(i);n&&!n.has(i)&&n.set(i,t.style[s]),t.style[s]=r})}function Rs(t,e){e.forEach((n,r)=>{let i=oC(r);t.style[i]=""})}function Ku(t){return Array.isArray(t)?t.length==1?t[0]:xR(t):t}function N8(t,e,n){let r=e.params||{},i=rN(t);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||n.push(Y5(s))})}var zE=new RegExp(`${eN}\\s*(.+?)\\s*${x8}`,"g");function rN(t){let e=[];if(typeof t=="string"){let n;for(;n=zE.exec(t);)e.push(n[1]);zE.lastIndex=0}return e}function Yu(t,e,n){let r=t.toString(),i=r.replace(zE,(s,o)=>{let a=e[o];return a==null&&(n.push(Z5(o)),a=""),a.toString()});return i==r?t:i}function jp(t){let e=[],n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}var O8=/-+([a-z0-9])/g;function oC(t){return t.replace(O8,(...e)=>e[1].toUpperCase())}function k8(t,e){return t===0||e===0}function F8(t,e,n){if(n.size&&e.length){let r=e[0],i=[];if(n.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,iN(t,a)))}}return e}function Xt(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw X5(e.type)}}function iN(t,e){return window.getComputedStyle(t)[e]}var V8=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Bp=class extends Ns{normalizePropertyName(e,n){return oC(e)}normalizeStyleValue(e,n,r,i){let s="",o=r.toString().trim();if(V8.has(n)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(J5(e,r))}return o+s}};var Up="*";function L8(t,e){let n=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(r=>j8(r,n,e)):n.push(t),n}function j8(t,e,n){if(t[0]==":"){let c=B8(t,n);if(typeof c=="function"){e.push(c);return}t=c}let r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return n.push(d8(t)),e;let i=r[1],s=r[2],o=r[3];e.push(UR(i,o));let a=i==Up&&o==Up;s[0]=="<"&&!a&&e.push(UR(o,i))}function B8(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return e.push(h8(t)),"* => *"}}var Np=new Set(["true","1"]),Op=new Set(["false","0"]);function UR(t,e){let n=Np.has(t)||Op.has(t),r=Np.has(e)||Op.has(e);return(i,s)=>{let o=t==Up||t==i,a=e==Up||e==s;return!o&&n&&typeof i=="boolean"&&(o=i?Np.has(t):Op.has(t)),!a&&r&&typeof s=="boolean"&&(a=s?Np.has(e):Op.has(e)),o&&a}}var sN=":self",U8=new RegExp(`s*${sN}s*,?`,"g");function oN(t,e,n,r){return new qE(t).build(e,n,r)}var $R="",qE=class{constructor(e){this._driver=e}build(e,n,r){let i=new GE(n);return this._resetContextStyleTimingState(i),Xt(this,Ku(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=$R,e.collectedStyles=new Map,e.collectedStyles.set($R,new Map),e.currentTime=0}visitTrigger(e,n){let r=n.queryCount=0,i=n.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&n.errors.push(e8()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==0){let c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(l=>{c.name=l,s.push(this.visitState(c,n))}),c.name=u}else if(a.type==1){let c=this.visitTransition(a,n);r+=c.queryCount,i+=c.depCount,o.push(c)}else n.errors.push(t8())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,n){let r=this.visitStyle(e.styles,n),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};if(r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{rN(c).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size){let a=jp(s.values());n.errors.push(n8(e.name,a))}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let r=Xt(this,Ku(e.animation),n);return{type:1,matchers:L8(e.expr,n.errors),animation:r,queryCount:n.queryCount,depCount:n.depCount,options:Ps(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(r=>Xt(this,r,n)),options:Ps(e.options)}}visitGroup(e,n){let r=n.currentTime,i=0,s=e.steps.map(o=>{n.currentTime=r;let a=Xt(this,o,n);return i=Math.max(i,n.currentTime),a});return n.currentTime=i,{type:3,steps:s,options:Ps(e.options)}}visitAnimate(e,n){let r=q8(e.timings,n.errors);n.currentAnimateTimings=r;let i,s=e.styles?e.styles:Ms({});if(s.type==5)i=this.visitKeyframes(s,n);else{let o=e.styles,a=!1;if(!o){a=!0;let u={};r.easing&&(u.easing=r.easing),o=Ms(u)}n.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,n);c.isEmptyStep=a,i=c}return n.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,n){let r=this._makeStyleAst(e,n);return this._validateStyleAst(r,n),r}_makeStyleAst(e,n){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===or?r.push(a):n.errors.push(r8(a)):r.push(nN(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(eN)>=0){s=!0;break}}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){let r=n.currentAnimateTimings,i=n.currentTime,s=n.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let u=n.collectedStyles.get(n.currentQuerySelector),l=u.get(c),d=!0;l&&(s!=i&&s>=l.startTime&&i<=l.endTime&&(n.errors.push(i8(c,l.startTime,l.endTime,s,i)),d=!1),s=l.startTime),d&&u.set(c,{startTime:s,endTime:i}),n.options&&N8(a,n.options,n.errors)})})}visitKeyframes(e,n){let r={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(s8()),r;let i=1,s=0,o=[],a=!1,c=!1,u=0,l=e.steps.map(w=>{let S=this._makeStyleAst(w,n),T=S.offset!=null?S.offset:z8(S.styles),O=0;return T!=null&&(s++,O=S.offset=T),c=c||O<0||O>1,a=a||O<u,u=O,o.push(O),S});c&&n.errors.push(o8()),a&&n.errors.push(a8());let d=e.steps.length,h=0;s>0&&s<d?n.errors.push(c8()):s==0&&(h=i/(d-1));let f=d-1,p=n.currentTime,g=n.currentAnimateTimings,y=g.duration;return l.forEach((w,S)=>{let T=h>0?S==f?1:h*S:o[S],O=T*y;n.currentTime=p+g.delay+O,g.duration=O,this._validateStyleAst(w,n),w.offset=T,r.styles.push(w)}),r}visitReference(e,n){return{type:8,animation:Xt(this,Ku(e.animation),n),options:Ps(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:Ps(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:Ps(e.options)}}visitQuery(e,n){let r=n.currentQuerySelector,i=e.options||{};n.queryCount++,n.currentQuery=e;let[s,o]=$8(e.selector);n.currentQuerySelector=r.length?r+" "+s:s,Jt(n.collectedStyles,n.currentQuerySelector,new Map);let a=Xt(this,Ku(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Ps(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(u8());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Lp(e.timings,n.errors,!0);return{type:12,animation:Xt(this,Ku(e.animation),n),timings:r,options:null}}};function $8(t){let e=!!t.split(/\s*,\s*/).find(n=>n==sN);return e&&(t=t.replace(U8,"")),t=t.replace(/@\*/g,Vp).replace(/@\w+/g,n=>Vp+"-"+n.slice(1)).replace(/:animating/g,$E),[t,e]}function H8(t){return t?tl(t):null}var GE=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function z8(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){let r=n;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function q8(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let s=Lp(t,e).duration;return FE(s,0,"")}let n=t;if(n.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=FE(0,0,"");return s.dynamic=!0,s.strValue=n,s}let i=Lp(n,e);return FE(i.duration,i.delay,i.easing)}function Ps(t){return t?(t=tl(t),t.params&&(t.params=H8(t.params))):t={},t}function FE(t,e,n){return{duration:t,delay:e,easing:n}}function aC(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var Zu=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},G8=1,W8=":enter",K8=new RegExp(W8,"g"),Q8=":leave",Y8=new RegExp(Q8,"g");function aN(t,e,n,r,i,s=new Map,o=new Map,a,c,u=[]){return new WE().buildKeyframes(t,e,n,r,i,s,o,a,c,u)}var WE=class{buildKeyframes(e,n,r,i,s,o,a,c,u,l=[]){u=u||new Zu;let d=new KE(e,n,u,i,s,l,[]);d.options=c;let h=c.delay?xr(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,c),Xt(this,r,d);let f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){let y=f[g];if(y.element===n){p=y;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return f.length?f.map(p=>p.buildKeyframes()):[aC(n,[],[],[],0,h,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let r=n.subInstructions.get(n.element);if(r){let i=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){let r=n.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,r),this.visitReference(e.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:xr(Yu(s,i?.params??{},n.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,n,r){let s=n.currentTimeline.currentTime,o=r.duration!=null?xr(r.duration):null,a=r.delay!=null?xr(r.delay):null;return o!==0&&e.forEach(c=>{let u=n.appendInstructionToTimeline(c,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),Xt(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let r=n.subContextCount,i=n,s=e.options;if(s&&(s.params||s.delay)&&(i=n.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==6&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=$p);let o=xr(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Xt(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let r=[],i=n.currentTimeline.currentTime,s=e.options&&e.options.delay?xr(e.options.delay):0;e.steps.forEach(o=>{let a=n.createSubContext(e.options);s&&a.delayNextStep(s),Xt(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(i),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let r=e.strValue,i=n.params?Yu(r,n.params,n.errors):r;return Lp(i,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let r=n.currentAnimateTimings=this._visitTiming(e.timings,n),i=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==5?this.visitKeyframes(s,n):(n.incrementTime(r.duration),this.visitStyle(s,n),i.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let r=n.currentTimeline,i=n.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let r=n.currentAnimateTimings,i=n.currentTimeline.duration,s=r.duration,a=n.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let u=c.offset||0;a.forwardTime(u*s),a.setStyles(c.styles,c.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(i+s),n.previousNode=e}visitQuery(e,n){let r=n.currentTimeline.currentTime,i=e.options||{},s=i.delay?xr(i.delay):0;s&&(n.previousNode.type===6||r==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=$p);let o=r,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,n.errors);n.currentQueryTotal=a.length;let c=null;a.forEach((u,l)=>{n.currentQueryIndex=l;let d=n.createSubContext(e.options,u);s&&d.delayNextStep(s),u===n.element&&(c=d.currentTimeline),Xt(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;o=Math.max(o,h)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),c&&(n.currentTimeline.mergeTimelineCollectedStyles(c),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let r=n.parentContext,i=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1),c=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let l=n.currentTimeline;c&&l.delayNextStep(c);let d=l.currentTime;Xt(this,e.animation,n),n.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}},$p={},KE=class t{constructor(e,n,r,i,s,o,a,c){this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=$p,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Hp(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=xr(r.duration)),r.delay!=null&&(i.delay=xr(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=Yu(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let r=e.params={};Object.keys(n).forEach(i=>{r[i]=n[i]})}}return e}createSubContext(e=null,n,r){let i=n||this.element,s=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=$p,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,r){let i={duration:n??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new QE(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(K8,"."+this._enterClassName),e=e.replace(Y8,"."+this._leaveClassName);let c=r!=1,u=this._driver.query(this.element,e,c);r!==0&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&a.length==0&&o.push(l8(n)),a}},Hp=class t{constructor(e,n,r,i){this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=G8,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,r]of this._globalTimelineStyles)this._backFill.set(n,r||or),this._currentKeyframe.set(n,or);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,r,i){n&&this._previousKeyframe.set("easing",n);let s=i&&i.params||{},o=Z8(e,this._globalTimelineStyles);for(let[a,c]of o){let u=Yu(c,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??or),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,r)=>{let i=this._styleSummary.get(r);(!i||n.time>i.time)&&this._updateStyle(r,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let u=Ca(a,new Map,this._backFill);u.forEach((l,d)=>{l===Pp?e.add(d):l===or&&n.add(d)}),r||u.set("offset",c/this.duration),i.push(u)});let s=e.size?jp(e.values()):[],o=n.size?jp(n.values()):[];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return aC(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},QE=class extends Hp{constructor(e,n,r,i,s,o,a=!1){super(e,n,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&n){let s=[],o=r+n,a=n/o,c=Ca(e[0]);c.set("offset",0),s.push(c);let u=Ca(e[0]);u.set("offset",HR(a)),s.push(u);let l=e.length-1;for(let d=1;d<=l;d++){let h=Ca(e[d]),f=h.get("offset"),p=n+f*r;h.set("offset",HR(p/o)),s.push(h)}r=o,n=0,i="",e=s}return aC(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}};function HR(t,e=3){let n=Math.pow(10,e-1);return Math.round(t*n)/n}function Z8(t,e){let n=new Map,r;return t.forEach(i=>{if(i==="*"){r=r||e.keys();for(let s of r)n.set(s,or)}else Ca(i,n)}),n}function zR(t,e,n,r,i,s,o,a,c,u,l,d,h){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:l,totalTime:d,errors:h}}var VE={},zp=class{constructor(e,n,r){this._triggerName=e,this.ast=n,this._stateStyles=r}match(e,n,r,i){return X8(this.ast.matchers,e,n,r,i)}buildStyles(e,n,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(n,r):new Map}build(e,n,r,i,s,o,a,c,u,l){let d=[],h=this.ast.options&&this.ast.options.params||VE,f=a&&a.params||VE,p=this.buildStyles(r,f,d),g=c&&c.params||VE,y=this.buildStyles(i,g,d),w=new Set,S=new Map,T=new Map,O=i==="void",U={params:J8(g,h),delay:this.ast.options?.delay},z=l?[]:aN(e,n,this.ast.animation,s,o,p,y,U,u,d),ee=0;if(z.forEach(Ot=>{ee=Math.max(Ot.duration+Ot.delay,ee)}),d.length)return zR(n,this._triggerName,r,i,O,p,y,[],[],S,T,ee,d);z.forEach(Ot=>{let en=Ot.element,cC=Jt(S,en,new Set);Ot.preStyleProps.forEach(Ii=>cC.add(Ii));let Da=Jt(T,en,new Set);Ot.postStyleProps.forEach(Ii=>Da.add(Ii)),en!==n&&w.add(en)});let ke=jp(w.values());return zR(n,this._triggerName,r,i,O,p,y,z,ke,S,T,ee)}};function X8(t,e,n,r,i){return t.some(s=>s(e,n,r,i))}function J8(t,e){let n=tl(e);for(let r in t)t.hasOwnProperty(r)&&t[r]!=null&&(n[r]=t[r]);return n}var YE=class{constructor(e,n,r){this.styles=e,this.defaultParams=n,this.normalizer=r}buildStyles(e,n){let r=new Map,i=tl(this.defaultParams);return Object.keys(e).forEach(s=>{let o=e[s];o!==null&&(i[s]=o)}),this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Yu(o,i,n));let c=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,c,o,n),r.set(a,o)})}),r}};function e$(t,e,n){return new ZE(t,e,n)}var ZE=class{constructor(e,n,r){this.name=e,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states=new Map,n.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new YE(i.style,s,r))}),qR(this.states,"true","1"),qR(this.states,"false","0"),n.transitions.forEach(i=>{this.transitionFactories.push(new zp(e,i,this.states))}),this.fallbackTransition=t$(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,r,i){return this.transitionFactories.find(o=>o.match(e,n,r,i))||null}matchStyles(e,n,r){return this.fallbackTransition.buildStyles(e,n,r)}};function t$(t,e,n){let s={type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0};return new zp(t,s,e)}function qR(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}var n$=new Zu,XE=class{constructor(e,n,r){this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){let r=[],i=[],s=oN(this._driver,n,r,i);if(r.length)throw g8(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,n,r){let i=e.element,s=ZR(this._normalizer,e.keyframes,n,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=aN(this._driver,n,s,tN,UE,new Map,new Map,r,n$,i),o.forEach(l=>{let d=Jt(a,l.element,new Map);l.postStyleProps.forEach(h=>d.set(h,null))})):(i.push(m8()),o=[]),i.length)throw y8(i);a.forEach((l,d)=>{l.forEach((h,f)=>{l.set(f,this._driver.computeStyle(d,f,or))})});let c=o.map(l=>{let d=a.get(l.element);return this._buildPlayer(l,new Map,d)}),u=Ci(c);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw v8(e);return n}listen(e,n,r,i){let s=rC(n,"","","");return nC(this._getPlayer(e),r,s,i),()=>{}}command(e,n,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,n,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},GR="ng-animate-queued",r$=".ng-animate-queued",LE="ng-animate-disabled",i$=".ng-animate-disabled",s$="ng-star-inserted",o$=".ng-star-inserted",a$=[],cN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},c$={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Pn="__ng_removed",Xu=class{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=l$(i),r){let s=tl(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let r=this.options.params;Object.keys(n).forEach(i=>{r[i]==null&&(r[i]=n[i])})}}},Qu="void",jE=new Xu(Qu),JE=class{constructor(e,n,r){this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,pn(n,this._hostClassName)}listen(e,n,r,i){if(!this._triggers.has(n))throw _8(r,n);if(r==null||r.length==0)throw w8(n);if(!d$(r))throw E8(r,n);let s=Jt(this._elementListeners,e,[]),o={name:n,phase:r,callback:i};s.push(o);let a=Jt(this._engine.statesByElement,e,new Map);return a.has(n)||(pn(e,Rp),pn(e,Rp+"-"+n),a.set(n,jE)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw C8(e);return n}trigger(e,n,r,i=!0){let s=this._getTrigger(n),o=new Ju(this.id,n,e),a=this._engine.statesByElement.get(e);a||(pn(e,Rp),pn(e,Rp+"-"+n),this._engine.statesByElement.set(e,a=new Map));let c=a.get(n),u=new Xu(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(n,u),c||(c=jE),!(u.value===Qu)&&c.value===u.value){if(!p$(c.params,u.params)){let g=[],y=s.matchStyles(c.value,c.params,g),w=s.matchStyles(u.value,u.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Rs(e,y),ar(e,w)})}return}let h=Jt(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==n&&g.queued&&g.destroy()});let f=s.matchTransition(c.value,u.value,e,u.params),p=!1;if(!f){if(!i)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:f,fromState:c,toState:u,player:o,isFallbackTransition:p}),p||(pn(e,GR),o.onStart(()=>{Ea(e,GR)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let y=this._engine.playersByElement.get(e);if(y){let w=y.indexOf(o);w>=0&&y.splice(w,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let r=this._engine.driver.query(e,Vp,!0);r.forEach(i=>{if(i[Pn])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,n,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,n,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,u)=>{if(o.set(u,c.value),this._triggers.has(u)){let l=this.trigger(e,u,Qu,i);l&&a.push(l)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),r&&Ci(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(n&&r){let i=new Set;n.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,u=r.get(o)||jE,l=new Xu(Qu),d=new Ju(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:u,toState:l,player:d,isFallbackTransition:!0})})}}removeNode(e,n){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,n);else{let s=e[Pn];(!s||s===cN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,n))}}insertNode(e,n){pn(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=rC(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,nC(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):n.push(r)}),this._queue=[],n.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},eC=class{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,r){this.bodyNode=e,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,n){let r=new JE(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,n){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){let c=i.get(a);if(c){let u=r.indexOf(c);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(n,e),e}register(e,n){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,n)),r}registerTrigger(e,n,r){let i=this._namespaceLookup[e];i&&i.register(n,r)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&n.add(s)}}return n}trigger(e,n,r,i){if(kp(n)){let s=this._fetchNamespace(e);if(s)return s.trigger(n,r,i),!0}return!1}insertNode(e,n,r,i){if(!kp(n))return;let s=n[Pn];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(n,r)}i&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),pn(e,LE)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ea(e,LE))}removeNode(e,n,r){if(kp(n)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(n,r):this.markElementAsRemoved(e,n,!1,r);let s=this.namespacesByHostElement.get(n);s&&s.id!==e&&s.removeNode(n,r)}else this._onRemovalComplete(n,r)}markElementAsRemoved(e,n,r,i,s){this.collectedLeaveElements.push(n),n[Pn]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,r,i,s){return kp(n)?this._fetchNamespace(e).listen(n,r,i,s):()=>{}}_buildInstruction(e,n,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,Vp,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,$E,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ci(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[Pn];if(n&&n.setForRemoval){if(e[Pn]=cN,n.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(LE)&&this.markElementAsDisabled(e,!1),this.driver.query(e,i$,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];pn(i,s$)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{n=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],n.length?Ci(n).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw I8(e)}_flushAnimations(e,n){let r=new Zu,i=[],s=new Map,o=[],a=new Map,c=new Map,u=new Map,l=new Set;this.disabledNodes.forEach(L=>{l.add(L);let q=this.driver.query(L,r$,!0);for(let W=0;W<q.length;W++)l.add(q[W])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=QR(h,this.collectedEnterElements),p=new Map,g=0;f.forEach((L,q)=>{let W=tN+g++;p.set(q,W),L.forEach(fe=>pn(fe,W))});let y=[],w=new Set,S=new Set;for(let L=0;L<this.collectedLeaveElements.length;L++){let q=this.collectedLeaveElements[L],W=q[Pn];W&&W.setForRemoval&&(y.push(q),w.add(q),W.hasAnimation?this.driver.query(q,o$,!0).forEach(fe=>w.add(fe)):S.add(q))}let T=new Map,O=QR(h,Array.from(w));O.forEach((L,q)=>{let W=UE+g++;T.set(q,W),L.forEach(fe=>pn(fe,W))}),e.push(()=>{f.forEach((L,q)=>{let W=p.get(q);L.forEach(fe=>Ea(fe,W))}),O.forEach((L,q)=>{let W=T.get(q);L.forEach(fe=>Ea(fe,W))}),y.forEach(L=>{this.processLeaveNode(L)})});let U=[],z=[];for(let L=this._namespaceList.length-1;L>=0;L--)this._namespaceList[L].drainQueuedTransitions(n).forEach(W=>{let fe=W.player,nt=W.element;if(U.push(fe),this.collectedEnterElements.length){let ft=nt[Pn];if(ft&&ft.setForMove){if(ft.previousTriggersValues&&ft.previousTriggersValues.has(W.triggerName)){let Di=ft.previousTriggersValues.get(W.triggerName),tn=this.statesByElement.get(W.element);if(tn&&tn.has(W.triggerName)){let nl=tn.get(W.triggerName);nl.value=Di,tn.set(W.triggerName,nl)}}fe.destroy();return}}let Rn=!d||!this.driver.containsElement(d,nt),kt=T.get(nt),Pr=p.get(nt),Ae=this._buildInstruction(W,r,Pr,kt,Rn);if(Ae.errors&&Ae.errors.length){z.push(Ae);return}if(Rn){fe.onStart(()=>Rs(nt,Ae.fromStyles)),fe.onDestroy(()=>ar(nt,Ae.toStyles)),i.push(fe);return}if(W.isFallbackTransition){fe.onStart(()=>Rs(nt,Ae.fromStyles)),fe.onDestroy(()=>ar(nt,Ae.toStyles)),i.push(fe);return}let dC=[];Ae.timelines.forEach(ft=>{ft.stretchStartingKeyframe=!0,this.disabledNodes.has(ft.element)||dC.push(ft)}),Ae.timelines=dC,r.append(nt,Ae.timelines);let gN={instruction:Ae,player:fe,element:nt};o.push(gN),Ae.queriedElements.forEach(ft=>Jt(a,ft,[]).push(fe)),Ae.preStyleProps.forEach((ft,Di)=>{if(ft.size){let tn=c.get(Di);tn||c.set(Di,tn=new Set),ft.forEach((nl,Qp)=>tn.add(Qp))}}),Ae.postStyleProps.forEach((ft,Di)=>{let tn=u.get(Di);tn||u.set(Di,tn=new Set),ft.forEach((nl,Qp)=>tn.add(Qp))})});if(z.length){let L=[];z.forEach(q=>{L.push(D8(q.triggerName,q.errors))}),U.forEach(q=>q.destroy()),this.reportError(L)}let ee=new Map,ke=new Map;o.forEach(L=>{let q=L.element;r.has(q)&&(ke.set(q,q),this._beforeAnimationBuild(L.player.namespaceId,L.instruction,ee))}),i.forEach(L=>{let q=L.element;this._getPreviousPlayers(q,!1,L.namespaceId,L.triggerName,null).forEach(fe=>{Jt(ee,q,[]).push(fe),fe.destroy()})});let Ot=y.filter(L=>YR(L,c,u)),en=new Map;KR(en,this.driver,S,u,or).forEach(L=>{YR(L,c,u)&&Ot.push(L)});let Da=new Map;f.forEach((L,q)=>{KR(Da,this.driver,new Set(L),c,Pp)}),Ot.forEach(L=>{let q=en.get(L),W=Da.get(L);en.set(L,new Map([...q?.entries()??[],...W?.entries()??[]]))});let Ii=[],uC=[],lC={};o.forEach(L=>{let{element:q,player:W,instruction:fe}=L;if(r.has(q)){if(l.has(q)){W.onDestroy(()=>ar(q,fe.toStyles)),W.disabled=!0,W.overrideTotalTime(fe.totalTime),i.push(W);return}let nt=lC;if(ke.size>1){let kt=q,Pr=[];for(;kt=kt.parentNode;){let Ae=ke.get(kt);if(Ae){nt=Ae;break}Pr.push(kt)}Pr.forEach(Ae=>ke.set(Ae,nt))}let Rn=this._buildAnimation(W.namespaceId,fe,ee,s,Da,en);if(W.setRealPlayer(Rn),nt===lC)Ii.push(W);else{let kt=this.playersByElement.get(nt);kt&&kt.length&&(W.parentPlayer=Ci(kt)),i.push(W)}}else Rs(q,fe.fromStyles),W.onDestroy(()=>ar(q,fe.toStyles)),uC.push(W),l.has(q)&&i.push(W)}),uC.forEach(L=>{let q=s.get(L.element);if(q&&q.length){let W=Ci(q);L.setRealPlayer(W)}}),i.forEach(L=>{L.parentPlayer?L.syncPlayerEvents(L.parentPlayer):L.destroy()});for(let L=0;L<y.length;L++){let q=y[L],W=q[Pn];if(Ea(q,UE),W&&W.hasAnimation)continue;let fe=[];if(a.size){let Rn=a.get(q);Rn&&Rn.length&&fe.push(...Rn);let kt=this.driver.query(q,$E,!0);for(let Pr=0;Pr<kt.length;Pr++){let Ae=a.get(kt[Pr]);Ae&&Ae.length&&fe.push(...Ae)}}let nt=fe.filter(Rn=>!Rn.destroyed);nt.length?h$(this,q,nt):this.processLeaveNode(q)}return y.length=0,Ii.forEach(L=>{this.players.push(L),L.onDone(()=>{L.destroy();let q=this.players.indexOf(L);this.players.splice(q,1)}),L.play()}),Ii}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,r,i,s){let o=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==Qu;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,n,r){let i=n.triggerName,s=n.element,o=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:i;for(let c of n.timelines){let u=c.element,l=u!==s,d=Jt(r,u,[]);this._getPreviousPlayers(u,l,o,a,n.toState).forEach(f=>{let p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}Rs(s,n.fromStyles)}_buildAnimation(e,n,r,i,s,o){let a=n.triggerName,c=n.element,u=[],l=new Set,d=new Set,h=n.timelines.map(p=>{let g=p.element;l.add(g);let y=g[Pn];if(y&&y.removedBeforeQueried)return new Ei(p.duration,p.delay);let w=g!==c,S=f$((r.get(g)||a$).map(ee=>ee.getRealPlayer())).filter(ee=>{let ke=ee;return ke.element?ke.element===g:!1}),T=s.get(g),O=o.get(g),U=ZR(this._normalizer,p.keyframes,T,O),z=this._buildPlayer(p,U,S);if(p.subTimeline&&i&&d.add(g),w){let ee=new Ju(e,a,g);ee.setRealPlayer(z),u.push(ee)}return z});u.forEach(p=>{Jt(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>u$(this.playersByQueriedElement,p.element,p))}),l.forEach(p=>pn(p,BR));let f=Ci(h);return f.onDestroy(()=>{l.forEach(p=>Ea(p,BR)),ar(c,n.toStyles)}),d.forEach(p=>{Jt(i,p,[]).push(f)}),f}_buildPlayer(e,n,r){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,r):new Ei(e.duration,e.delay)}},Ju=class{constructor(e,n,r){this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new Ei,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,r)=>{n.forEach(i=>nC(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){Jt(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function u$(t,e,n){let r=t.get(e);if(r){if(r.length){let i=r.indexOf(n);r.splice(i,1)}r.length==0&&t.delete(e)}return r}function l$(t){return t??null}function kp(t){return t&&t.nodeType===1}function d$(t){return t=="start"||t=="done"}function WR(t,e){let n=t.style.display;return t.style.display=e??"none",n}function KR(t,e,n,r,i){let s=[];n.forEach(c=>s.push(WR(c)));let o=[];r.forEach((c,u)=>{let l=new Map;c.forEach(d=>{let h=e.computeStyle(u,d,i);l.set(d,h),(!h||h.length==0)&&(u[Pn]=c$,o.push(u))}),t.set(u,l)});let a=0;return n.forEach(c=>WR(c,s[a++])),o}function QR(t,e){let n=new Map;if(t.forEach(a=>n.set(a,[])),e.length==0)return n;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let u=a.parentNode;return n.has(u)?c=u:i.has(u)?c=r:c=o(u),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&n.get(c).push(a)}),n}function pn(t,e){t.classList?.add(e)}function Ea(t,e){t.classList?.remove(e)}function h$(t,e,n){Ci(n).onDone(()=>t.processLeaveNode(e))}function f$(t){let e=[];return uN(t,e),e}function uN(t,e){for(let n=0;n<t.length;n++){let r=t[n];r instanceof Wu?uN(r.players,e):e.push(r)}}function p$(t,e){let n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){let s=n[i];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}function YR(t,e,n){let r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(s=>i.add(s)):e.set(t,r),n.delete(t),!0}var Ia=class{constructor(e,n,r){this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new eC(e.body,n,r),this._timelineEngine=new XE(e.body,n,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,n,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],u=[],l=oN(this._driver,s,c,u);if(c.length)throw f8(i,c);u.length&&void 0,a=e$(i,l,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,i,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,r,i){this._transitionEngine.insertNode(e,n,r,i)}onRemove(e,n,r){this._transitionEngine.removeNode(e,n,r)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,r,i){if(r.charAt(0)=="@"){let[s,o]=LR(r),a=i;this._timelineEngine.command(s,n,o,a)}else this._transitionEngine.trigger(e,n,r,i)}listen(e,n,r,i,s){if(r.charAt(0)=="@"){let[o,a]=LR(r);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(e,n,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function g$(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=BE(e[0]),e.length>1&&(r=BE(e[e.length-1]))):e instanceof Map&&(n=BE(e)),n||r?new m$(t,n,r):null}var m$=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._startStyles=i,this._endStyles=s,this._state=0;let o=e.initialStylesByElement.get(r);o||e.initialStylesByElement.set(r,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&ar(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ar(this._element,this._initialStyles),this._endStyles&&(ar(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(Rs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Rs(this._element,this._endStyles),this._endStyles=null),ar(this._element,this._initialStyles),this._state=3)}};e.initialStylesByElement=new WeakMap;let t=e;return t})();function BE(t){let e=null;return t.forEach((n,r)=>{y$(r)&&(e=e||new Map,e.set(r,n))}),e}function y$(t){return t==="display"||t==="position"}var qp=class{constructor(e,n,r,i){this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(r=>{n.push(Object.fromEntries(r))}),n}_triggerWebAnimation(e,n,r){return e.animate(this._convertKeyframesToObject(n),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:iN(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},Gp=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return XR(e,n)}getParentElement(e){return iC(e)}query(e,n,r){return JR(e,n,r)}computeStyle(e,n,r){return window.getComputedStyle(e)[n]}animate(e,n,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let u=new Map,l=o.filter(f=>f instanceof qp);k8(r,i)&&l.forEach(f=>{f.currentSnapshot.forEach((p,g)=>u.set(g,p))});let d=R8(n).map(f=>Ca(f));d=F8(e,d,u);let h=g$(e,d);return new qp(e,d,c,h)}};var Fp="@",lN="@.disabled",Wp=class{constructor(e,n,r,i){this.namespaceId=e,this.delegate=n,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,r,i=!0){this.delegate.insertBefore(e,n,r),this.engine.onInsert(this.namespaceId,n,e,i)}removeChild(e,n,r){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,r,i){this.delegate.setAttribute(e,n,r,i)}removeAttribute(e,n,r){this.delegate.removeAttribute(e,n,r)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,r,i){this.delegate.setStyle(e,n,r,i)}removeStyle(e,n,r){this.delegate.removeStyle(e,n,r)}setProperty(e,n,r){n.charAt(0)==Fp&&n==lN?this.disableAnimations(e,!!r):this.delegate.setProperty(e,n,r)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,r){return this.delegate.listen(e,n,r)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},tC=class extends Wp{constructor(e,n,r,i,s){super(n,r,i,s),this.factory=e,this.namespaceId=n}setProperty(e,n,r){n.charAt(0)==Fp?n.charAt(1)=="."&&n==lN?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,n.slice(1),r):this.delegate.setProperty(e,n,r)}listen(e,n,r){if(n.charAt(0)==Fp){let i=v$(e),s=n.slice(1),o="";return s.charAt(0)!=Fp&&([s,o]=_$(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,r,a)})}return this.delegate.listen(e,n,r)}};function v$(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function _$(t){let e=t.indexOf("."),n=t.substring(0,e),r=t.slice(e+1);return[n,r]}var Kp=class{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(i,s)=>{let o=s?.parentNode(i);o&&s.removeChild(o,i)}}createRenderer(e,n){let r="",i=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let u=this._rendererCache,l=u.get(i);if(!l){let d=()=>u.delete(i);l=new Wp(r,i,this.engine,d),u.set(i,l)}return l}let s=n.id,o=n.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(s,o,e,u.name,u)};return n.data.animation.forEach(a),new tC(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([n,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var E$=(()=>{let e=class e extends Ia{constructor(r,i,s,o){super(r,i,s)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(i){return new(i||e)(b(ut),b(el),b(Ns),b(In))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})();function C$(){return new Bp}function I$(t,e,n){return new Kp(t,e,n)}var hN=[{provide:Ns,useFactory:C$},{provide:Ia,useClass:E$},{provide:Vi,useFactory:I$,deps:[Yd,Ia,oe]}],dN=[{provide:el,useFactory:()=>new Gp},{provide:zm,useValue:"BrowserAnimations"},...hN],D$=[{provide:el,useClass:sC},{provide:zm,useValue:"NoopAnimations"},...hN],fN=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:r.disableAnimations?D$:dN}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ne({type:e}),e.\u0275inj=Re({providers:dN,imports:[Xd]});let t=e;return t})();var pN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ne({type:e,bootstrap:[kR]}),e.\u0275inj=Re({providers:[HT()],imports:[Xd,NS,fA,pA,xA.initializeApp(FR.firebaseConfig),SR,Mc,fN]});let t=e;return t})();$T().bootstrapModule(pN).catch(t=>console.error(t));
