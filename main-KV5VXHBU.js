import{a as x,b as de,c as I0,d as Vf,e as y,f as C0,g as fu,h as D0,i as b0,j as T0,k as Lf,l as S0,m as pu,n as A0,o as gu,p as M0,q as x0,r as Ce,s as ti,t as fn,u as mu,v as zs,w as P0,x as R0,y as lr,z as yt}from"./chunk-KZ55BCB2.js";var N0=null;var jf=1;function Dt(t){let e=N0;return N0=t,e}var O0={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function G1(t){if(!($f(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===jf)){if(!t.producerMustRecompute(t)&&!Bf(t)){t.dirty=!1,t.lastCleanEpoch=jf;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=jf}}function k0(t){return t&&(t.nextProducerIndex=0),Dt(t)}function F0(t,e){if(Dt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if($f(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Uf(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Bf(t){yu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(G1(n),r!==n.version))return!0}return!1}function V0(t){if(yu(t),$f(t))for(let e=0;e<t.producerNode.length;e++)Uf(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Uf(t,e){if(W1(t),yu(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Uf(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];yu(i),i.producerIndexOfThis[r]=e}}function $f(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function yu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function W1(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function K1(){throw new Error}var Q1=K1;function L0(t){Q1=t}function q(t){return typeof t=="function"}function ro(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var vu=ro(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ni(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(o){e=o instanceof vu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{j0(o)}catch(s){e=e??[],s instanceof vu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new vu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)j0(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ni(n,e)}remove(e){let{_finalizers:n}=this;n&&ni(n,e),e instanceof t&&e._removeParent(this)}};Re.EMPTY=(()=>{let t=new Re;return t.closed=!0,t})();var Hf=Re.EMPTY;function _u(t){return t instanceof Re||t&&"closed"in t&&q(t.remove)&&q(t.add)&&q(t.unsubscribe)}function j0(t){q(t)?t():t.unsubscribe()}var Xt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var io={setTimeout(t,e,...n){let{delegate:r}=io;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=io;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function wu(t){io.setTimeout(()=>{let{onUnhandledError:e}=Xt;if(e)e(t);else throw t})}function qs(){}var B0=(()=>zf("C",void 0,void 0))();function U0(t){return zf("E",void 0,t)}function $0(t){return zf("N",t,void 0)}function zf(t,e,n){return{kind:t,value:e,error:n}}var ri=null;function oo(t){if(Xt.useDeprecatedSynchronousErrorHandling){let e=!ri;if(e&&(ri={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ri;if(ri=null,n)throw r}}else t()}function H0(t){Xt.useDeprecatedSynchronousErrorHandling&&ri&&(ri.errorThrown=!0,ri.error=t)}var ii=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,_u(e)&&e.add(this)):this.destination=X1}static create(e,n,r){return new Un(e,n,r)}next(e){this.isStopped?Gf($0(e),this):this._next(e)}error(e){this.isStopped?Gf(U0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Gf(B0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Y1=Function.prototype.bind;function qf(t,e){return Y1.call(t,e)}var Wf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Eu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Eu(r)}else Eu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Eu(n)}}},Un=class extends ii{constructor(e,n,r){super();let i;if(q(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Xt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qf(e.next,o),error:e.error&&qf(e.error,o),complete:e.complete&&qf(e.complete,o)}):i=e}this.destination=new Wf(i)}};function Eu(t){Xt.useDeprecatedSynchronousErrorHandling?H0(t):wu(t)}function Z1(t){throw t}function Gf(t,e){let{onStoppedNotification:n}=Xt;n&&io.setTimeout(()=>n(t,e))}var X1={closed:!0,next:qs,error:Z1,complete:qs};var so=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function ut(t){return t}function Kf(...t){return Qf(t)}function Qf(t){return t.length===0?ut:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=eP(n)?n:new Un(n,r,i);return oo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=z0(r),new r((i,o)=>{let s=new Un({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[so](){return this}pipe(...n){return Qf(n)(this)}toPromise(n){return n=z0(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function z0(t){var e;return(e=t??Xt.Promise)!==null&&e!==void 0?e:Promise}function J1(t){return t&&q(t.next)&&q(t.error)&&q(t.complete)}function eP(t){return t&&t instanceof ii||J1(t)&&_u(t)}function Yf(t){return q(t?.lift)}function Z(t){return e=>{if(Yf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function X(t,e,n,r,i){return new Zf(t,e,n,r,i)}var Zf=class extends ii{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ao(){return Z((t,e)=>{let n=null;t._refCount++;let r=X(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var co=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Yf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let n=this.getSubject();e.add(this.source.subscribe(X(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return ao()(this)}};var q0=ro(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ge=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Iu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new q0}next(n){oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Hf:(this.currentObservers=null,o.push(n),new Re(()=>{this.currentObservers=null,ni(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new Iu(e,n),t})(),Iu=class extends Ge{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Hf}};var Je=class extends Ge{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Gs={now(){return(Gs.delegate||Date).now()},delegate:void 0};var Cu=class extends Ge{constructor(e=1/0,n=1/0,r=Gs){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Du=class extends Re{constructor(e,n){super()}schedule(e,n=0){return this}};var Ws={setInterval(t,e,...n){let{delegate:r}=Ws;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ws;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var uo=class extends Du{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ws.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ws.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ni(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var lo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};lo.now=Gs.now;var ho=class extends lo{constructor(e,n=lo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ks=new ho(uo);var bu=class extends uo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Tu=class extends ho{};var Xf=new Tu(bu);var vt=new J(t=>t.complete());function G0(t){return t&&q(t.schedule)}function Jf(t){return t[t.length-1]}function Su(t){return q(Jf(t))?t.pop():void 0}function pn(t){return G0(Jf(t))?t.pop():void 0}function W0(t,e){return typeof Jf(t)=="number"?t.pop():e}var Au=t=>t&&typeof t.length=="number"&&typeof t!="function";function Mu(t){return q(t?.then)}function xu(t){return q(t[so])}function Pu(t){return Symbol.asyncIterator&&q(t?.[Symbol.asyncIterator])}function Ru(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function tP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Nu=tP();function Ou(t){return q(t?.[Nu])}function ku(t){return D0(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield fu(n.read());if(i)return yield fu(void 0);yield yield fu(r)}}finally{n.releaseLock()}})}function Fu(t){return q(t?.getReader)}function ve(t){if(t instanceof J)return t;if(t!=null){if(xu(t))return nP(t);if(Au(t))return rP(t);if(Mu(t))return iP(t);if(Pu(t))return K0(t);if(Ou(t))return oP(t);if(Fu(t))return sP(t)}throw Ru(t)}function nP(t){return new J(e=>{let n=t[so]();if(q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rP(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function iP(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,wu)})}function oP(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function K0(t){return new J(e=>{aP(t,e).catch(n=>e.error(n))})}function sP(t){return K0(ku(t))}function aP(t,e){var n,r,i,o;return C0(this,void 0,void 0,function*(){try{for(n=b0(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function _t(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ut(t,e=0){return Z((n,r)=>{n.subscribe(X(r,i=>_t(r,t,()=>r.next(i),e),()=>_t(r,t,()=>r.complete(),e),i=>_t(r,t,()=>r.error(i),e)))})}function Jt(t,e=0){return Z((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Q0(t,e){return ve(t).pipe(Jt(e),Ut(e))}function Y0(t,e){return ve(t).pipe(Jt(e),Ut(e))}function Z0(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function X0(t,e){return new J(n=>{let r;return _t(n,e,()=>{r=t[Nu](),_t(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}function Vu(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{_t(n,e,()=>{let r=t[Symbol.asyncIterator]();_t(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function J0(t,e){return Vu(ku(t),e)}function eE(t,e){if(t!=null){if(xu(t))return Q0(t,e);if(Au(t))return Z0(t,e);if(Mu(t))return Y0(t,e);if(Pu(t))return Vu(t,e);if(Ou(t))return X0(t,e);if(Fu(t))return J0(t,e)}throw Ru(t)}function se(t,e){return e?eE(t,e):ve(t)}function L(...t){let e=pn(t);return se(t,e)}function fo(t,e){let n=q(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function ep(t){return!!t&&(t instanceof J||q(t.lift)&&q(t.subscribe))}var $n=ro(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function $(t,e){return Z((n,r)=>{let i=0;n.subscribe(X(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:cP}=Array;function uP(t,e){return cP(e)?t(...e):t(e)}function Lu(t){return $(e=>uP(t,e))}var{isArray:lP}=Array,{getPrototypeOf:dP,prototype:hP,keys:fP}=Object;function ju(t){if(t.length===1){let e=t[0];if(lP(e))return{args:e,keys:null};if(pP(e)){let n=fP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function pP(t){return t&&typeof t=="object"&&dP(t)===hP}function Bu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Qs(...t){let e=pn(t),n=Su(t),{args:r,keys:i}=ju(t);if(r.length===0)return se([],e);let o=new J(gP(r,e,i?s=>Bu(i,s):ut));return n?o.pipe(Lu(n)):o}function gP(t,e,n=ut){return r=>{tE(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)tE(e,()=>{let u=se(t[c],e),l=!1;u.subscribe(X(r,d=>{o[c]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function tE(t,e,n){t?_t(n,t,e):e()}function nE(t,e,n,r,i,o,s,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=v=>u<r?m(v):c.push(v),m=v=>{o&&e.next(v),u++;let _=!1;ve(n(v,l++)).subscribe(X(e,C=>{i?.(C),o?f(C):e.next(C)},()=>{_=!0},void 0,()=>{if(_)try{for(u--;c.length&&u<r;){let C=c.shift();s?_t(e,s,()=>m(C)):m(C)}h()}catch(C){e.error(C)}}))};return t.subscribe(X(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Le(t,e,n=1/0){return q(e)?Le((r,i)=>$((o,s)=>e(r,o,i,s))(ve(t(r,i))),n):(typeof e=="number"&&(n=e),Z((r,i)=>nE(r,i,t,n)))}function dr(t=1/0){return Le(ut,t)}function rE(){return dr(1)}function po(...t){return rE()(se(t,pn(t)))}function Uu(t){return new J(e=>{ve(t()).subscribe(e)})}function tp(...t){let e=Su(t),{args:n,keys:r}=ju(t),i=new J(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let d=!1;ve(n[l]).subscribe(X(o,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||o.next(r?Bu(r,a):a),o.complete())}))}});return e?i.pipe(Lu(e)):i}function np(...t){let e=pn(t),n=W0(t,1/0),r=t;return r.length?r.length===1?ve(r[0]):dr(n)(se(r,e)):vt}function Ke(t,e){return Z((n,r)=>{let i=0;n.subscribe(X(r,o=>t.call(e,o,i++)&&r.next(o)))})}function hr(t){return Z((e,n)=>{let r=null,i=!1,o;r=e.subscribe(X(n,void 0,void 0,s=>{o=ve(t(s,hr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function iE(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(X(s,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function fr(t,e){return q(e)?Le(t,e,1):Le(t,1)}function pr(t){return Z((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Hn(t){return t<=0?()=>vt:Z((e,n)=>{let r=0;e.subscribe(X(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function rp(t){return $(()=>t)}function ip(t,e=ut){return t=t??mP,Z((n,r)=>{let i,o=!0;n.subscribe(X(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function mP(t,e){return t===e}function $u(t=yP){return Z((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function yP(){return new $n}function go(t){return Z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function bt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ke((i,o)=>t(i,o,r)):ut,Hn(1),n?pr(e):$u(()=>new $n))}function mo(t){return t<=0?()=>vt:Z((e,n)=>{let r=[];e.subscribe(X(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function op(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ke((i,o)=>t(i,o,r)):ut,mo(1),n?pr(e):$u(()=>new $n))}function Ys(){return Z((t,e)=>{let n,r=!1;t.subscribe(X(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function oi(t,e){return Z(iE(t,e,arguments.length>=2,!0))}function oE(t={}){let{connector:e=()=>new Ge,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,u=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,l=d=!1},m=()=>{let v=s;f(),v?.unsubscribe()};return Z((v,_)=>{u++,!d&&!l&&h();let C=c=c??e();_.add(()=>{u--,u===0&&!d&&!l&&(a=sp(m,i))}),C.subscribe(_),!s&&u>0&&(s=new Un({next:O=>C.next(O),error:O=>{d=!0,h(),a=sp(f,n,O),C.error(O)},complete:()=>{l=!0,h(),a=sp(f,r),C.complete()}}),ve(v).subscribe(s))})(o)}}function sp(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Un({next:()=>{r.unsubscribe(),t()}});return ve(e(...n)).subscribe(r)}function Hu(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,oE({connector:()=>new Cu(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function si(...t){let e=pn(t);return Z((n,r)=>{(e?po(t,n,e):po(t,n)).subscribe(r)})}function De(t,e){return Z((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(X(r,c=>{i?.unsubscribe();let u=0,l=o++;ve(t(c,l)).subscribe(i=X(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function zu(t,e){return q(e)?De(()=>t,e):De(()=>t)}function ap(t){return Z((e,n)=>{ve(t).subscribe(X(n,()=>n.complete(),qs)),!n.closed&&e.subscribe(n)})}function Te(t,e,n){let r=q(t)||e||n?{next:t,error:e,complete:n}:t;return r?Z((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(X(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):ut}function ge(t){for(let e in t)if(t[e]===ge)return e;throw Error("Could not find renamed property on target object.")}function qu(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function it(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(it).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function sE(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var vP=ge({__forward_ref__:ge});function Er(t){return t.__forward_ref__=Er,t.toString=function(){return it(this())},t}function lt(t){return GE(t)?t():t}function GE(t){return typeof t=="function"&&t.hasOwnProperty(vP)&&t.__forward_ref__===Er}function WE(t){return t&&!!t.\u0275providers}var _P="https://g.co/ng/security#xss",k=class extends Error{constructor(e,n){super(Tl(e,n)),this.code=e}};function Tl(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var wP=ge({\u0275cmp:ge}),EP=ge({\u0275dir:ge}),IP=ge({\u0275pipe:ge}),CP=ge({\u0275mod:ge}),rl=ge({\u0275fac:ge}),Xs=ge({__NG_ELEMENT_ID__:ge}),aE=ge({__NG_ENV_ID__:ge});function yg(t){return typeof t=="string"?t:t==null?"":String(t)}function DP(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():yg(t)}function bP(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new k(-200,`Circular dependency in DI detected for ${t}${n}`)}function vg(t,e){let n=e?` in ${e}`:"";throw new k(-201,!1)}function TP(t,e){t==null&&SP(e,t,null,"!=")}function SP(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function F(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ne(t){return{providers:t.providers||[],imports:t.imports||[]}}function Sl(t){return cE(t,QE)||cE(t,YE)}function KE(t){return Sl(t)!==null}function cE(t,e){return t.hasOwnProperty(e)?t[e]:null}function AP(t){let e=t&&(t[QE]||t[YE]);return e||null}function uE(t){return t&&(t.hasOwnProperty(lE)||t.hasOwnProperty(MP))?t[lE]:null}var QE=ge({\u0275prov:ge}),lE=ge({\u0275inj:ge}),YE=ge({ngInjectableDef:ge}),MP=ge({ngInjectorDef:ge}),ee=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ee||{}),Dp;function ZE(){return Dp}function $t(t){let e=Dp;return Dp=t,e}function XE(t,e,n){let r=Sl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ee.Optional)return null;if(e!==void 0)return e;vg(it(t),"Injector")}var St=globalThis;var R=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=F({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var xP={},ea=xP,bp="__NG_DI_FLAG__",il="ngTempTokenPath",PP="ngTokenPath",RP=/\n/gm,NP="\u0275",dE="__source",Eo;function OP(){return Eo}function gr(t){let e=Eo;return Eo=t,e}function kP(t,e=ee.Default){if(Eo===void 0)throw new k(-203,!1);return Eo===null?XE(t,void 0,e):Eo.get(t,e&ee.Optional?null:void 0,e)}function D(t,e=ee.Default){return(ZE()||kP)(lt(t),e)}function b(t,e=ee.Default){return D(t,Al(e))}function Al(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Tp(t){let e=[];for(let n=0;n<t.length;n++){let r=lt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new k(900,!1);let i,o=ee.Default;for(let s=0;s<r.length;s++){let a=r[s],c=FP(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(D(i,o))}else e.push(D(r))}return e}function JE(t,e){return t[bp]=e,t.prototype[bp]=e,t}function FP(t){return t[bp]}function VP(t,e,n,r){let i=t[il];throw e[dE]&&i.unshift(e[dE]),t.message=LP(`
`+t.message,i,n,r),t[PP]=i,t[il]=null,t}function LP(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==NP?t.slice(2):t;let i=it(e);if(Array.isArray(e))i=e.map(it).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):it(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(RP,`
  `)}`}function da(t){return{toString:t}.toString()}var eI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(eI||{}),vn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(vn||{}),Co={},Tt=[];function tI(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Sp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];BP(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function jP(t){return t===3||t===4||t===6}function BP(t){return t.charCodeAt(0)===64}function ta(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?hE(t,n,i,null,e[++r]):hE(t,n,i,null,null))}}return t}function hE(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var nI="ng-template";function UP(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&tI(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function rI(t){return t.type===4&&t.value!==nI}function $P(t,e,n){let r=t.type===4&&!n?nI:t.value;return e===r}function HP(t,e,n){let r=4,i=t.attrs||[],o=GP(i),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!en(r)&&!en(c))return!1;if(s&&en(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!$P(t,c,n)||c===""&&e.length===1){if(en(r))return!1;s=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!UP(t.attrs,u,n)){if(en(r))return!1;s=!0}continue}let l=r&8?"class":c,d=zP(l,i,rI(t),n);if(d===-1){if(en(r))return!1;s=!0;continue}if(u!==""){let h;d>o?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&tI(f,u,0)!==-1||r&2&&u!==h){if(en(r))return!1;s=!0}}}}return en(r)||s}function en(t){return(t&1)===0}function zP(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return WP(e,t)}function qP(t,e,n=!1){for(let r=0;r<e.length;r++)if(HP(t,e[r],n))return!0;return!1}function GP(t){for(let e=0;e<t.length;e++){let n=t[e];if(jP(n))return e}return t.length}function WP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function fE(t,e){return t?":not("+e.trim()+")":e}function KP(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!en(s)&&(e+=fE(o,i),i=""),r=s,o=o||!en(r);n++}return i!==""&&(e+=fE(o,i)),e}function QP(t){return t.map(KP).join(",")}function YP(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!en(i))break;i=o}r++}return{attrs:e,classes:n}}function Ir(t){return da(()=>{let e=cI(t),n=de(x({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===eI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vn.Emulated,styles:t.styles||Tt,_:null,schemas:t.schemas||null,tView:null,id:""});uI(n);let r=t.dependencies;return n.directiveDefs=gE(r,!1),n.pipeDefs=gE(r,!0),n.id=JP(n),n})}function ZP(t){return yr(t)||iI(t)}function XP(t){return t!==null}function Oe(t){return da(()=>({type:t.type,bootstrap:t.bootstrap||Tt,declarations:t.declarations||Tt,imports:t.imports||Tt,exports:t.exports||Tt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function pE(t,e){if(t==null)return Co;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function et(t){return da(()=>{let e=cI(t);return uI(e),e})}function yr(t){return t[wP]||null}function iI(t){return t[EP]||null}function oI(t){return t[IP]||null}function sI(t){let e=yr(t)||iI(t)||oI(t);return e!==null?e.standalone:!1}function aI(t,e){let n=t[CP]||null;if(!n&&e===!0)throw new Error(`Type ${it(t)} does not have '\u0275mod' property.`);return n}function cI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Co,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Tt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pE(t.inputs,e),outputs:pE(t.outputs),debugInfo:null}}function uI(t){t.features?.forEach(e=>e(t))}function gE(t,e){if(!t)return null;let n=e?oI:ZP;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(XP)}function JP(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var Mt=0,ne=1,z=2,Be=3,tn=4,rn=5,zn=6,na=7,_n=8,Do=9,vr=10,Se=11,ra=12,mE=13,Po=14,Ht=15,Ml=16,yo=17,ia=18,xl=19,lI=20,mr=21,cp=22,ci=23,xt=25,dI=1,oa=6,qn=7,ol=8,sl=9,At=10,bo=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(bo||{});function yn(t){return Array.isArray(t)&&typeof t[dI]=="object"}function zt(t){return Array.isArray(t)&&t[dI]===!0}function hI(t){return(t.flags&4)!==0}function ha(t){return t.componentOffset>-1}function _g(t){return(t.flags&1)===1}function _r(t){return!!t.template}function fI(t){return(t[z]&512)!==0}function To(t,e){let n=t.hasOwnProperty(rl);return n?t[rl]:null}var Ap=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Cr(){return pI}function pI(t){return t.type.prototype.ngOnChanges&&(t.setInput=tR),eR}Cr.ngInherit=!0;function eR(){let t=mI(this),e=t?.current;if(e){let n=t.previous;if(n===Co)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function tR(t,e,n,r){let i=this.declaredInputs[n],o=mI(t)||nR(t,{previous:Co,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[i];s[i]=new Ap(c&&c.currentValue,e,a===Co),t[r]=e}var gI="__ngSimpleChanges__";function mI(t){return t[gI]||null}function nR(t,e){return t[gI]=e}var yE=null;var gn=function(t,e,n){yE?.(t,e,n)},yI="svg",rR="math",iR=!1;function oR(){return iR}function nn(t){for(;Array.isArray(t);)t=t[Mt];return t}function vI(t,e){return nn(e[t])}function Rt(t,e){return nn(e[t.index])}function _I(t,e){return t.data[e]}function Dr(t,e){let n=e[t];return yn(n)?n:n[Mt]}function wg(t){return(t[z]&128)===128}function sR(t){return zt(t[Be])}function al(t,e){return e==null?null:t[e]}function wI(t){t[yo]=0}function aR(t){t[z]&1024||(t[z]|=1024,wg(t)&&sa(t))}function cR(t,e){for(;t>0;)e=e[Po],t--;return e}function EI(t){return t[z]&9216||t[ci]?.dirty}function Mp(t){EI(t)?sa(t):t[z]&64&&(oR()?(t[z]|=1024,sa(t)):t[vr].changeDetectionScheduler?.notify())}function sa(t){t[vr].changeDetectionScheduler?.notify();let e=t[Be];for(;e!==null&&!(zt(e)&&e[z]&bo.HasChildViewsToRefresh||yn(e)&&e[z]&8192);){if(zt(e))e[z]|=bo.HasChildViewsToRefresh;else if(e[z]|=8192,!wg(e))break;e=e[Be]}}function II(t,e){if((t[z]&256)===256)throw new k(911,!1);t[mr]===null&&(t[mr]=[]),t[mr].push(e)}function uR(t,e){if(t[mr]===null)return;let n=t[mr].indexOf(e);n!==-1&&t[mr].splice(n,1)}var te={lFrame:MI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function lR(){return te.lFrame.elementDepthCount}function dR(){te.lFrame.elementDepthCount++}function hR(){te.lFrame.elementDepthCount--}function CI(){return te.bindingsEnabled}function fa(){return te.skipHydrationRootTNode!==null}function fR(t){return te.skipHydrationRootTNode===t}function pR(t){te.skipHydrationRootTNode=t}function gR(){te.skipHydrationRootTNode=null}function Ae(){return te.lFrame.lView}function on(){return te.lFrame.tView}function qt(){let t=DI();for(;t!==null&&t.type===64;)t=t.parent;return t}function DI(){return te.lFrame.currentTNode}function mR(){let t=te.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function pa(t,e){let n=te.lFrame;n.currentTNode=t,n.isParent=e}function bI(){return te.lFrame.isParent}function yR(){te.lFrame.isParent=!1}function vR(){let t=te.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function _R(t){return te.lFrame.bindingIndex=t}function Eg(){return te.lFrame.bindingIndex++}function wR(t){let e=te.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ER(){return te.lFrame.inI18n}function IR(t,e){let n=te.lFrame;n.bindingIndex=n.bindingRootIndex=t,xp(e)}function CR(){return te.lFrame.currentDirectiveIndex}function xp(t){te.lFrame.currentDirectiveIndex=t}function DR(t){let e=te.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function TI(t){te.lFrame.currentQueryIndex=t}function bR(t){let e=t[ne];return e.type===2?e.declTNode:e.type===1?t[rn]:null}function SI(t,e,n){if(n&ee.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ee.Host);)if(i=bR(o),i===null||(o=o[Po],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=te.lFrame=AI();return r.currentTNode=e,r.lView=t,!0}function Ig(t){let e=AI(),n=t[ne];te.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function AI(){let t=te.lFrame,e=t===null?null:t.child;return e===null?MI(t):e}function MI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function xI(){let t=te.lFrame;return te.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var PI=xI;function Cg(){let t=xI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function TR(t){return(te.lFrame.contextLView=cR(t,te.lFrame.contextLView))[_n]}function Ro(){return te.lFrame.selectedIndex}function ui(t){te.lFrame.selectedIndex=t}function RI(){let t=te.lFrame;return _I(t.tView,t.selectedIndex)}function wt(){te.lFrame.currentNamespace=yI}function Nt(){SR()}function SR(){te.lFrame.currentNamespace=null}function NI(){return te.lFrame.currentNamespace}var OI=!0;function Dg(){return OI}function br(t){OI=t}function AR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=pI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function bg(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Xu(t,e,n){kI(t,e,3,n)}function Ju(t,e,n,r){(t[z]&3)===n&&kI(t,e,n,r)}function up(t,e){let n=t[z];(n&3)===e&&(n&=16383,n+=1,t[z]=n)}function kI(t,e,n,r){let i=r!==void 0?t[yo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[yo]+=65536),(a<o||o==-1)&&(MR(t,n,e,c),t[yo]=(t[yo]&4294901760)+c+2),c++}function vE(t,e){gn(4,t,e);let n=Dt(null);try{e.call(t)}finally{Dt(n),gn(5,t,e)}}function MR(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[z]>>14<t[yo]>>16&&(t[z]&3)===e&&(t[z]+=16384,vE(a,o)):vE(a,o)}var Io=-1,li=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function xR(t){return t instanceof li}function PR(t){return(t.flags&8)!==0}function RR(t){return(t.flags&16)!==0}function FI(t){return t!==Io}function cl(t){let e=t&32767;return t&32767}function NR(t){return t>>16}function ul(t,e){let n=NR(t),r=e;for(;n>0;)r=r[Po],n--;return r}var Pp=!0;function _E(t){let e=Pp;return Pp=t,e}var OR=256,VI=OR-1,LI=5,kR=0,mn={};function FR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Xs)&&(r=n[Xs]),r==null&&(r=n[Xs]=kR++);let i=r&VI,o=1<<i;e.data[t+(i>>LI)]|=o}function ll(t,e){let n=jI(t,e);if(n!==-1)return n;let r=e[ne];r.firstCreatePass&&(t.injectorIndex=e.length,lp(r.data,t),lp(e,null),lp(r.blueprint,null));let i=Tg(t,e),o=t.injectorIndex;if(FI(i)){let s=cl(i),a=ul(i,e),c=a[ne].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function lp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function jI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Tg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=zI(i),r===null)return Io;if(n++,i=i[Po],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Io}function Rp(t,e,n){FR(t,e,n)}function BI(t,e,n){if(n&ee.Optional||t!==void 0)return t;vg(e,"NodeInjector")}function UI(t,e,n,r){if(n&ee.Optional&&r===void 0&&(r=null),!(n&(ee.Self|ee.Host))){let i=t[Do],o=$t(void 0);try{return i?i.get(e,r,n&ee.Optional):XE(e,r,n&ee.Optional)}finally{$t(o)}}return BI(r,e,n)}function $I(t,e,n,r=ee.Default,i){if(t!==null){if(e[z]&2048&&!(r&ee.Self)){let s=UR(t,e,n,r,mn);if(s!==mn)return s}let o=HI(t,e,n,r,mn);if(o!==mn)return o}return UI(e,n,r,i)}function HI(t,e,n,r,i){let o=jR(n);if(typeof o=="function"){if(!SI(e,t,r))return r&ee.Host?BI(i,n,r):UI(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&ee.Optional))vg(n);else return s}finally{PI()}}else if(typeof o=="number"){let s=null,a=jI(t,e),c=Io,u=r&ee.Host?e[Ht][rn]:null;for((a===-1||r&ee.SkipSelf)&&(c=a===-1?Tg(t,e):e[a+8],c===Io||!EE(r,!1)?a=-1:(s=e[ne],a=cl(c),e=ul(c,e)));a!==-1;){let l=e[ne];if(wE(o,a,l.data)){let d=VR(a,e,n,s,r,u);if(d!==mn)return d}c=e[a+8],c!==Io&&EE(r,e[ne].data[a+8]===u)&&wE(o,a,e)?(s=l,a=cl(c),e=ul(c,e)):a=-1}}return i}function VR(t,e,n,r,i,o){let s=e[ne],a=s.data[t+8],c=r==null?ha(a)&&Pp:r!=s&&(a.type&3)!==0,u=i&ee.Host&&o===a,l=LR(a,s,n,c,u);return l!==null?So(e,s,l,a):mn}function LR(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let m=s[f];if(f<c&&n===m||f>=c&&m.type===n)return f}if(i){let f=s[c];if(f&&_r(f)&&f.type===n)return c}return null}function So(t,e,n,r){let i=t[n],o=e.data;if(xR(i)){let s=i;s.resolving&&bP(DP(o[n]));let a=_E(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?$t(s.injectImpl):null,l=SI(t,r,ee.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&AR(n,o[n],e)}finally{u!==null&&$t(u),_E(a),s.resolving=!1,PI()}}return i}function jR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Xs)?t[Xs]:void 0;return typeof e=="number"?e>=0?e&VI:BR:e}function wE(t,e,n){let r=1<<t;return!!(n[e+(t>>LI)]&r)}function EE(t,e){return!(t&ee.Self)&&!(t&ee.Host&&e)}var ai=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return $I(this._tNode,this._lView,e,Al(r),n)}};function BR(){return new ai(qt(),Ae())}function gi(t){return da(()=>{let e=t.prototype.constructor,n=e[rl]||Np(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[rl]||Np(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Np(t){return GE(t)?()=>{let e=Np(lt(t));return e&&e()}:To(t)}function UR(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[z]&2048&&!(s[z]&512);){let a=HI(o,s,n,r|ee.Self,mn);if(a!==mn)return a;let c=o.parent;if(!c){let u=s[lI];if(u){let l=u.get(n,mn,r);if(l!==mn)return l}c=zI(s),s=s[Po]}o=c}return i}function zI(t){let e=t[ne],n=e.type;return n===2?e.declTNode:n===1?t[rn]:null}var Gu="__parameters__";function $R(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function qI(t,e,n){return da(()=>{let r=$R(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(Gu)?c[Gu]:Object.defineProperty(c,Gu,{value:[]})[Gu];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function HR(t){let e=St.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function zR(t){return typeof t=="function"}function Sg(t,e){t.forEach(n=>Array.isArray(n)?Sg(n,e):e(n))}function GI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function qR(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function GR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function WR(t,e,n){let r=ga(t,e);return r>=0?t[r|1]=n:(r=~r,GR(t,r,e,n)),r}function dp(t,e){let n=ga(t,e);if(n>=0)return t[n|1]}function ga(t,e){return KR(t,e,1)}function KR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var mi=JE(qI("Optional"),8);var Pl=JE(qI("SkipSelf"),4);function QR(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(JR))}return o}return hl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(f=>{a[u+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>eN(o));e.push(c)}),ZR(),Promise.all(e).then(()=>{})}var hl=new Map,YR=new Set;function ZR(){let t=hl;return hl=new Map,t}function XR(){return hl.size===0}function JR(t){return typeof t=="string"?t:t.text()}function eN(t){YR.delete(t)}var di=new R("ENVIRONMENT_INITIALIZER"),WI=new R("INJECTOR",-1),KI=new R("INJECTOR_DEF_TYPES"),fl=class{get(e,n=ea){if(n===ea){let r=new Error(`NullInjectorError: No provider for ${it(e)}!`);throw r.name="NullInjectorError",r}return n}};function ma(t){return{\u0275providers:t}}function tN(...t){return{\u0275providers:QI(!0,t),\u0275fromNgModule:!0}}function QI(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Sg(e,s=>{let a=s;Op(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&YI(i,o),n}function YI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ag(i,o=>{e(o,r)})}}function Op(t,e,n,r){if(t=lt(t),!t)return!1;let i=null,o=uE(t),s=!o&&yr(t);if(!o&&!s){let c=t.ngModule;if(o=uE(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Op(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Sg(o.imports,l=>{Op(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&YI(u,e)}if(!a){let u=To(i)||(()=>new i);e({provide:i,useFactory:u,deps:Tt},i),e({provide:KI,useValue:i,multi:!0},i),e({provide:di,useValue:()=>D(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;Ag(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Ag(t,e){for(let n of t)WE(n)&&(n=n.\u0275providers),Array.isArray(n)?Ag(n,e):e(n)}var nN=ge({provide:String,useValue:ge});function ZI(t){return t!==null&&typeof t=="object"&&nN in t}function rN(t){return!!(t&&t.useExisting)}function iN(t){return!!(t&&t.useFactory)}function Ao(t){return typeof t=="function"}function oN(t){return!!t.useClass}var Rl=new R("Set Injector scope."),el={},sN={},hp;function Mg(){return hp===void 0&&(hp=new fl),hp}var Pt=class{},aa=class extends Pt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fp(e,s=>this.processProvider(s)),this.records.set(WI,vo(void 0,this)),i.has("environment")&&this.records.set(Pt,vo(void 0,this));let o=this.records.get(Rl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(KI,Tt,ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=gr(this),r=$t(void 0),i;try{return e()}finally{gr(n),$t(r)}}get(e,n=ea,r=ee.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(aE))return e[aE](this);r=Al(r);let i,o=gr(this),s=$t(void 0);try{if(!(r&ee.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=dN(e)&&Sl(e);u&&this.injectableDefInScope(u)?c=vo(kp(e),el):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ee.Self?Mg():this.parent;return n=r&ee.Optional&&n===ea?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[il]=a[il]||[]).unshift(it(e)),o)throw a;return VP(a,e,"R3InjectorError",this.source)}else throw a}finally{$t(s),gr(o)}}resolveInjectorInitializers(){let e=gr(this),n=$t(void 0),r;try{let i=this.get(di,Tt,ee.Self);for(let o of i)o()}finally{gr(e),$t(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(it(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new k(205,!1)}processProvider(e){e=lt(e);let n=Ao(e)?e:lt(e&&e.provide),r=cN(e);if(!Ao(e)&&e.multi===!0){let i=this.records.get(n);i||(i=vo(void 0,el,!0),i.factory=()=>Tp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}else{let i=this.records.get(n)}this.records.set(n,r)}hydrate(e,n){return n.value===el&&(n.value=sN,n.value=n.factory()),typeof n.value=="object"&&n.value&&lN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=lt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function kp(t){let e=Sl(t),n=e!==null?e.factory:To(t);if(n!==null)return n;if(t instanceof R)throw new k(204,!1);if(t instanceof Function)return aN(t);throw new k(204,!1)}function aN(t){let e=t.length;if(e>0){let r=qR(e,"?");throw new k(204,!1)}let n=AP(t);return n!==null?()=>n.factory(t):()=>new t}function cN(t){if(ZI(t))return vo(void 0,t.useValue);{let e=XI(t);return vo(e,el)}}function XI(t,e,n){let r;if(Ao(t)){let i=lt(t);return To(i)||kp(i)}else if(ZI(t))r=()=>lt(t.useValue);else if(iN(t))r=()=>t.useFactory(...Tp(t.deps||[]));else if(rN(t))r=()=>D(lt(t.useExisting));else{let i=lt(t&&(t.useClass||t.provide));if(uN(t))r=()=>new i(...Tp(t.deps));else return To(i)||kp(i)}return r}function vo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function uN(t){return!!t.deps}function lN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function dN(t){return typeof t=="function"||typeof t=="object"&&t instanceof R}function Fp(t,e){for(let n of t)Array.isArray(n)?Fp(n,e):n&&WE(n)?Fp(n.\u0275providers,e):e(n)}function Kn(t,e){t instanceof aa&&t.assertNotDestroyed();let n,r=gr(t),i=$t(void 0);try{return e()}finally{gr(r),$t(i)}}function hN(t){if(!ZE()&&!OP())throw new k(-203,!1)}function IE(t,e=null,n=null,r){let i=JI(t,e,n,r);return i.resolveInjectorInitializers(),i}function JI(t,e=null,n=null,r,i=new Set){let o=[n||Tt,tN(t)];return r=r||(typeof t=="object"?void 0:it(t)),new aa(o,e||Mg(),r||null,i)}var Ot=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return IE({name:""},i,r,"");{let o=r.name??"";return IE({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=ea,e.NULL=new fl,e.\u0275prov=F({token:e,providedIn:"any",factory:()=>D(WI)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Vp;function eC(t){Vp=t}function Nl(){if(Vp!==void 0)return Vp;if(typeof document<"u")return document;throw new k(210,!1)}var ya=new R("AppId",{providedIn:"root",factory:()=>fN}),fN="ng",xg=new R("Platform Initializer"),dt=new R("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Pg=new R("CSP nonce",{providedIn:"root",factory:()=>Nl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function tC(t){return t.ownerDocument.defaultView}function pN(t){return t.ownerDocument.body}function nC(t){return t instanceof Function?t():t}function Zs(t){return(t??b(Ot)).get(dt)==="browser"}var gN="ngSkipHydration",mN="ngskiphydration";function rC(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===mN)return!0}return!1}function iC(t){return t.hasAttribute(gN)}function pl(t){return(t.flags&128)===128}function yN(t){if(pl(t))return!0;let e=t.parent;for(;e;){if(pl(t)||rC(e))return!0;e=e.parent}return!1}var Gn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Gn||{}),vN=/^>|^->|<!--|-->|--!>|<!-$/g,_N=/(<|>)/g,wN="\u200B$1\u200B";function EN(t){return t.replace(vN,e=>e.replace(_N,wN))}var oC=new Map,IN=0;function CN(){return IN++}function DN(t){oC.set(t[xl],t)}function bN(t){oC.delete(t[xl])}var CE="__ngContext__";function hi(t,e){yn(e)?(t[CE]=e[xl],DN(e)):t[CE]=e}var TN;function Rg(t,e){return TN(t,e)}function Ng(t){let e=t[Be];return zt(e)?e[Be]:e}function sC(t){return cC(t[ra])}function aC(t){return cC(t[tn])}function cC(t){for(;t!==null&&!zt(t);)t=t[tn];return t}function _o(t,e,n,r,i){if(r!=null){let o,s=!1;zt(r)?o=r:yn(r)&&(s=!0,r=r[Mt]);let a=nn(r);t===0&&n!==null?i==null?fC(e,n,a):gl(e,n,a,i||null,!0):t===1&&n!==null?gl(e,n,a,i||null,!0):t===2?gC(e,a,s):t===3&&e.destroyNode(a),o!=null&&zN(e,t,o,n,i)}}function uC(t,e){return t.createText(e)}function SN(t,e,n){t.setValue(e,n)}function lC(t,e){return t.createComment(EN(e))}function Og(t,e,n){return t.createElement(e,n)}function AN(t,e){let n=e[Se];va(t,e,n,2,null,null),e[Mt]=null,e[rn]=null}function MN(t,e,n,r,i,o){r[Mt]=i,r[rn]=e,va(t,r,n,1,i,o)}function xN(t,e){va(t,e,e[Se],2,null,null)}function PN(t){let e=t[ra];if(!e)return fp(t[ne],t);for(;e;){let n=null;if(yn(e))n=e[ra];else{let r=e[At];r&&(n=r)}if(!n){for(;e&&!e[tn]&&e!==t;)yn(e)&&fp(e[ne],e),e=e[Be];e===null&&(e=t),yn(e)&&fp(e[ne],e),n=e&&e[tn]}e=n}}function RN(t,e,n,r){let i=At+r,o=n.length;r>0&&(n[i-1][tn]=e),r<o-At?(e[tn]=n[i],GI(n,At+r,e)):(n.push(e),e[tn]=null),e[Be]=n;let s=e[Ml];s!==null&&n!==s&&NN(s,e);let a=e[ia];a!==null&&a.insertView(t),Mp(e),e[z]|=128}function NN(t,e){let n=t[sl],i=e[Be][Be][Ht];e[Ht]!==i&&(t[z]|=bo.HasTransplantedViews),n===null?t[sl]=[e]:n.push(e)}function dC(t,e){let n=t[sl],r=n.indexOf(e),i=e[Be];n.splice(r,1)}function Lp(t,e){if(t.length<=At)return;let n=At+e,r=t[n];if(r){let i=r[Ml];i!==null&&i!==t&&dC(i,r),e>0&&(t[n-1][tn]=r[tn]);let o=dl(t,At+e);AN(r[ne],r);let s=o[ia];s!==null&&s.detachView(o[ne]),r[Be]=null,r[tn]=null,r[z]&=-129}return r}function hC(t,e){if(!(e[z]&256)){let n=e[Se];n.destroyNode&&va(t,e,n,3,null,null),PN(e)}}function fp(t,e){if(!(e[z]&256)){e[z]&=-129,e[z]|=256,e[ci]&&V0(e[ci]),kN(t,e),ON(t,e),e[ne].type===1&&e[Se].destroy();let n=e[Ml];if(n!==null&&zt(e[Be])){n!==e[Be]&&dC(n,e);let r=e[ia];r!==null&&r.detachView(t)}bN(e)}}function ON(t,e){let n=t.cleanup,r=e[na];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[na]=null);let i=e[mr];if(i!==null){e[mr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function kN(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof li)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];gn(4,a,c);try{c.call(a)}finally{gn(5,a,c)}}else{gn(4,i,o);try{o.call(i)}finally{gn(5,i,o)}}}}}function FN(t,e,n){return VN(t,e.parent,n)}function VN(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Mt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===vn.None||o===vn.Emulated)return null}return Rt(r,n)}}function gl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function fC(t,e,n){t.appendChild(e,n)}function DE(t,e,n,r,i){r!==null?gl(t,e,n,r,i):fC(t,e,n)}function LN(t,e,n,r){t.removeChild(e,n,r)}function kg(t,e){return t.parentNode(e)}function jN(t,e){return t.nextSibling(e)}function BN(t,e,n){return $N(t,e,n)}function UN(t,e,n){return t.type&40?Rt(t,n):null}var $N=UN,bE;function Fg(t,e,n,r){let i=FN(t,r,e),o=e[Se],s=r.parent||e[rn],a=BN(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)DE(o,i,n[c],a,!1);else DE(o,i,n,a,!1);bE!==void 0&&bE(o,r,e,n,i)}function tl(t,e){if(e!==null){let n=e.type;if(n&3)return Rt(e,t);if(n&4)return jp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return tl(t,r);{let i=t[e.index];return zt(i)?jp(-1,i):nn(i)}}else{if(n&32)return Rg(e,t)()||nn(t[e.index]);{let r=pC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ng(t[Ht]);return tl(i,r)}else return tl(t,e.next)}}}return null}function pC(t,e){if(e!==null){let r=t[Ht][rn],i=e.projection;return r.projection[i]}return null}function jp(t,e){let n=At+t+1;if(n<e.length){let r=e[n],i=r[ne].firstChild;if(i!==null)return tl(r,i)}return e[qn]}function gC(t,e,n){let r=kg(t,e);r&&LN(t,r,e,n)}function mC(t){t.textContent=""}function Vg(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&hi(nn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Vg(t,e,n.child,r,i,o,!1),_o(e,t,i,a,o);else if(c&32){let u=Rg(n,r),l;for(;l=u();)_o(e,t,i,l,o);_o(e,t,i,a,o)}else c&16?HN(t,e,r,n,i,o):_o(e,t,i,a,o);n=s?n.projectionNext:n.next}}function va(t,e,n,r,i,o){Vg(n,r,t.firstChild,e,i,o,!1)}function HN(t,e,n,r,i,o){let s=n[Ht],c=s[rn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];_o(e,t,i,l,o)}else{let u=c,l=s[Be];pl(r)&&(u.flags|=128),Vg(t,e,u,l,i,o,!0)}}function zN(t,e,n,r,i){let o=n[qn],s=nn(n);o!==s&&_o(e,t,r,o,i);for(let a=At;a<n.length;a++){let c=n[a];va(c[ne],c,t,e,r,o)}}function qN(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Gn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Gn.Important),t.setStyle(n,r,i,o))}}function GN(t,e,n){t.setAttribute(e,"style",n)}function yC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function vC(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Sp(t,e,r),i!==null&&yC(t,e,i),o!==null&&GN(t,e,o)}var Bp=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_P})`}};function Lg(t){return t instanceof Bp?t.changingThisBreaksApplicationSecurity:t}var Up=class{};function WN(){let t=new yi;return b(dt)==="browser"&&(t.store=KN(Nl(),b(ya))),t}var yi=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(r,i){return this.store[r]!==void 0?this.store[r]:i}set(r,i){this.store[r]=i}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(r,i){this.onSerializeCallbacks[r]=i}toJson(){for(let r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=F({token:e,providedIn:"root",factory:WN});let t=e;return t})();function KN(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var _C="h",wC="b",$p=function(t){return t.FirstChild="f",t.NextSibling="n",t}($p||{}),QN="e",YN="t",jg="c",EC="x",ml="r",ZN="i",XN="n",JN="d",eO="__nghData__",IC=eO,pp="ngh",tO="nghm",CC=(t,e,n)=>null;function nO(t,e,n=!1){let r=t.getAttribute(pp);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=n?i:o?`|${o}`:"",a={};if(r!==""){let u=e.get(yi,null,{optional:!0});u!==null&&(a=u.get(IC,[])[Number(r)])}let c={data:a,firstChild:t.firstChild??null};return n&&(c.firstChild=t,Ol(c,0,t.nextSibling)),s?t.setAttribute(pp,s):t.removeAttribute(pp),c}function rO(){CC=nO}function Bg(t,e,n=!1){return CC(t,e,n)}function iO(t){let e=t._lView;return e[ne].type===2?null:(fI(e)&&(e=e[xt]),e)}function oO(t){return t.textContent?.replace(/\s/gm,"")}function sO(t){let e=Nl(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=oO(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Ol(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function Hp(t,e){return t.segmentHeads?.[e]??null}function aO(t,e){let n=t.data,r=n[QN]?.[e]??null;return r===null&&n[jg]?.[e]&&(r=Ug(t,e)),r}function DC(t,e){return t.data[jg]?.[e]??null}function Ug(t,e){let n=DC(t,e)??[],r=0;for(let i of n)r+=i[ml]*(i[EC]??1);return r}function kl(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[JN];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var zp=class{},yl=class{};function cO(t){let e=Error(`No component factory found for ${it(t)}.`);return e[uO]=t,e}var uO="ngComponent";var qp=class{resolveComponentFactory(e){throw cO(e)}},Fl=(()=>{let e=class e{};e.NULL=new qp;let t=e;return t})();function lO(){return Vl(qt(),Ae())}function Vl(t,e){return new En(Rt(t,e))}var En=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=lO;let t=e;return t})();var ca=class{},Qn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>dO();let t=e;return t})();function dO(){let t=Ae(),e=qt(),n=Dr(e.index,t);return(yn(n)?n:t)[Se]}var hO=(()=>{let e=class e{};e.\u0275prov=F({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),gp={};function bC(t){return $g(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function fO(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function $g(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var Gp=class{constructor(){}supports(e){return bC(e)}create(e){return new Wp(e)}},pO=(t,e)=>e,Wp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||pO}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<TE(r,i,o)?n:r,a=TE(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<o.length?o[h]:o[h]=0,m=f+h;l<=m&&m<u&&(o[h]=f+1)}let d=s.previousIndex;o[d]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!bC(e))throw new k(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,fO(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Kp(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new vl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Kp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Qp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},vl=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Qp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function TE(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Yp=class{constructor(){}supports(e){return e instanceof Map||$g(e)}create(){return new Zp}},Zp=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||$g(e)))throw new k(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Xp(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},Xp=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function SE(){return new Hg([new Gp])}var Hg=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||SE()),deps:[[e,new Pl,new mi]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new k(901,!1)}};e.\u0275prov=F({token:e,providedIn:"root",factory:SE});let t=e;return t})();function AE(){return new zg([new Yp])}var zg=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||AE()),deps:[[e,new Pl,new mi]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i)return i;throw new k(901,!1)}};e.\u0275prov=F({token:e,providedIn:"root",factory:AE});let t=e;return t})();function _l(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(nn(o)),zt(o)&&gO(o,r);let s=n.type;if(s&8)_l(t,e,n.child,r);else if(s&32){let a=Rg(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=pC(e,n);if(Array.isArray(a))r.push(...a);else{let c=Ng(e[Ht]);_l(c[ne],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function gO(t,e){for(let n=At;n<t.length;n++){let r=t[n],i=r[ne].firstChild;i!==null&&_l(r[ne],r,i,e)}t[qn]!==t[Mt]&&e.push(t[qn])}var TC=[];function mO(t){return t[ci]??yO(t)}function yO(t){let e=TC.pop()??Object.create(_O);return e.lView=t,e}function vO(t){t.lView[ci]!==t&&(t.lView=null,TC.push(t))}var _O=de(x({},O0),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{sa(t.lView)},consumerOnSignalRead(){this.lView[ci]=this}}),wO="ngOriginalError";function mp(t){return t[wO]}var wn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&mp(e);for(;n&&mp(n);)n=mp(n);return n||null}},SC=new R("",{providedIn:"root",factory:()=>b(wn).handleError.bind(void 0)}),Wu=new R(""),AC=!1,MC=new R("",{providedIn:"root",factory:()=>AC});var vi={};function Et(t){xC(on(),Ae(),Ro()+t,!1)}function xC(t,e,n,r){if(!r)if((e[z]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Xu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ju(e,o,0,n)}ui(n)}function ue(t,e=ee.Default){let n=Ae();if(n===null)return D(t,e);let r=qt();return $I(r,n,lt(t),e)}function PC(){let t="invalid";throw new Error(t)}function EO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ui(~i);else{let o=i,s=n[++r],a=n[++r];IR(s,o);let c=e[o];a(2,c)}}}finally{ui(-1)}}function Ll(t,e,n,r,i,o,s,a,c,u,l){let d=e.blueprint.slice();return d[Mt]=i,d[z]=r|4|128|8|64,(u!==null||t&&t[z]&2048)&&(d[z]|=2048),wI(d),d[Be]=d[Po]=t,d[_n]=n,d[vr]=s||t&&t[vr],d[Se]=a||t&&t[Se],d[Do]=c||t&&t[Do]||null,d[rn]=o,d[xl]=CN(),d[zn]=l,d[lI]=u,d[Ht]=e.type==2?t[Ht]:d,d}function jl(t,e,n,r,i){let o=t.data[e];if(o===null)o=IO(t,e,n,r,i),ER()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=mR();o.injectorIndex=s===null?-1:s.injectorIndex}return pa(o,!0),o}function IO(t,e,n,r,i){let o=DI(),s=bI(),a=s?o:o&&o.parent,c=t.data[e]=AO(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function RC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function NC(t,e,n,r,i){let o=Ro(),s=r&2;try{ui(-1),s&&e.length>xt&&xC(t,e,xt,!1),gn(s?2:0,i),n(r,i)}finally{ui(o),gn(s?3:1,i)}}function OC(t,e,n){if(hI(e)){let r=Dt(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Dt(r)}}}function kC(t,e,n){CI()&&(kO(t,e,n,Rt(n,e)),(n.flags&64)===64&&UC(t,e,n))}function FC(t,e,n=Rt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function VC(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=qg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function qg(t,e,n,r,i,o,s,a,c,u,l){let d=xt+r,h=d+i,f=CO(d,h),m=typeof u=="function"?u():u;return f[ne]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:l}}function CO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:vi);return n}function DO(t,e,n,r){let o=r.get(MC,AC)||n===vn.ShadowDom,s=t.selectRootElement(e,o);return bO(s),s}function bO(t){LC(t)}var LC=t=>null;function TO(t){iC(t)?mC(t):sO(t)}function SO(){LC=TO}function AO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return fa()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ME(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=n===null?{}:n;let o=t[i];r===null?xE(n,e,i,o):r.hasOwnProperty(i)&&xE(n,e,r[i],o)}return n}function xE(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function MO(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=o[l],h=n?n.get(d):null,f=h?h.inputs:null,m=h?h.outputs:null;c=ME(d.inputs,l,c,f),u=ME(d.outputs,l,u,m);let v=c!==null&&s!==null&&!rI(e)?GO(c,l,s):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function xO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function PO(t,e,n,r,i,o,s,a){let c=Rt(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(Gg(t,n,l,r,i),ha(e)&&RO(n,e.index)):e.type&3?(r=xO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function RO(t,e){let n=Dr(e,t);n[z]&16||(n[z]|=64)}function jC(t,e,n,r){if(CI()){let i=r===null?null:{"":-1},o=VO(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&BC(t,e,n,s,i,a),i&&LO(n,r,i)}n.mergedAttrs=ta(n.mergedAttrs,n.attrs)}function BC(t,e,n,r,i,o){for(let u=0;u<r.length;u++)Rp(ll(n,e),t,r[u].type);BO(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=RC(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=ta(n.mergedAttrs,l.hostAttrs),UO(t,n,e,c,l),jO(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}MO(t,n,o)}function NO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;OO(s)!=a&&s.push(a),s.push(n,r,o)}}function OO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function kO(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;ha(n)&&$O(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ll(n,e),hi(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],u=So(e,t,a,n);if(hi(u,e),s!==null&&qO(e,a-i,u,c,n,s),_r(c)){let l=Dr(n.index,e);l[_n]=So(e,t,a,n)}}}function UC(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=CR();try{ui(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];xp(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&FO(c,u)}}finally{ui(-1),xp(s)}}function FO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function VO(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(qP(e,s.selectors,!1))if(r||(r=[]),_r(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Jp(t,e,c)}else r.unshift(s),Jp(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Jp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function LO(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new k(-301,!1);r.push(e[i],o)}}}function jO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;_r(e)&&(n[""]=t)}}function BO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function UO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=To(i.type,!0)),s=new li(o,_r(i),ue);t.blueprint[r]=s,n[r]=s,NO(t,e,r,RC(t,n,i.hostVars,vi),i)}function $O(t,e,n){let r=Rt(e,t),i=VC(n),o=t[vr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Bl(t,Ll(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function HO(t,e,n,r,i,o){let s=Rt(t,e);zO(e[Se],s,o,t.value,n,r,i)}function zO(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?yg(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function qO(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++];$C(r,n,c,u,l)}}function $C(t,e,n,r,i){let o=Dt(null);try{let s=t.inputTransforms;s!==null&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),t.setInput!==null?t.setInput(e,i,n,r):e[r]=i}finally{Dt(o)}}function GO(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}return r}function HC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function zC(t,e){let n=t.contentQueries;if(n!==null){let r=Dt(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];TI(o),a.contentQueries(2,e[s],s)}}}finally{Dt(r)}}}function Bl(t,e){return t[ra]?t[mE][tn]=e:t[ra]=e,t[mE]=e,e}function eg(t,e,n){TI(0);let r=Dt(null);try{e(t,n)}finally{Dt(r)}}function WO(t){return t[na]||(t[na]=[])}function KO(t){return t.cleanup||(t.cleanup=[])}function qC(t,e){let n=t[Do],r=n?n.get(wn,null):null;r&&r.handleError(e)}function Gg(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=e[s],u=t.data[s];$C(u,c,r,a,i)}}function QO(t,e,n){let r=vI(e,t);SN(t[Se],r,n)}var YO=100;function ZO(t,e=!0){let n=t[vr],r=n.rendererFactory,i=n.afterRenderEventManager,o=!1;o||(r.begin?.(),i?.begin());try{XO(t)}catch(s){throw e&&qC(t,s),s}finally{o||(r.end?.(),n.inlineEffectRunner?.flush(),i?.end())}}function XO(t){tg(t,0);let e=0;for(;EI(t);){if(e===YO)throw new k(103,!1);e++,tg(t,1)}}function JO(t,e,n,r){let i=e[z];if((i&256)===256)return;let o=!1;!o&&e[vr].inlineEffectRunner?.flush(),Ig(e);let s=null,a=null;!o&&ek(t)&&(a=mO(e),s=k0(a));try{wI(e),_R(t.bindingStartIndex),n!==null&&NC(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&Xu(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Ju(e,d,0,null),up(e,0)}if(tk(e),GC(e,0),t.contentQueries!==null&&zC(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&Xu(e,d)}else{let d=t.contentHooks;d!==null&&Ju(e,d,1),up(e,1)}EO(t,e);let u=t.components;u!==null&&KC(e,u,0);let l=t.viewQuery;if(l!==null&&eg(2,l,r),!o)if(c){let d=t.viewCheckHooks;d!==null&&Xu(e,d)}else{let d=t.viewHooks;d!==null&&Ju(e,d,2),up(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[cp]){for(let d of e[cp])d();e[cp]=null}o||(e[z]&=-73)}catch(c){throw sa(e),c}finally{a!==null&&(F0(a,s),vO(a)),Cg()}}function ek(t){return t.type!==2}function GC(t,e){for(let n=sC(t);n!==null;n=aC(n)){n[z]&=~bo.HasChildViewsToRefresh;for(let r=At;r<n.length;r++){let i=n[r];WC(i,e)}}}function tk(t){for(let e=sC(t);e!==null;e=aC(e)){if(!(e[z]&bo.HasTransplantedViews))continue;let n=e[sl];for(let r=0;r<n.length;r++){let i=n[r],o=i[Be];aR(i)}}}function nk(t,e,n){let r=Dr(e,t);WC(r,n)}function WC(t,e){wg(t)&&tg(t,e)}function tg(t,e){let r=t[ne],i=t[z],o=t[ci],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Bf(o)),o&&(o.dirty=!1),t[z]&=-9217,s)JO(r,t,r.template,t[_n]);else if(i&8192){GC(t,1);let a=r.components;a!==null&&KC(t,a,1)}}function KC(t,e,n){for(let r=0;r<e.length;r++)nk(t,e[r],n)}function Wg(t){for(t[vr].changeDetectionScheduler?.notify();t;){t[z]|=64;let e=Ng(t);if(fI(t)&&!e)return t;t=e}return null}var fi=class{get rootNodes(){let e=this._lView,n=e[ne];return _l(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_n]}set context(e){this._lView[_n]=e}get destroyed(){return(this._lView[z]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Be];if(zt(e)){let n=e[ol],r=n?n.indexOf(this):-1;r>-1&&(Lp(e,r),dl(n,r))}this._attachedToViewContainer=!1}hC(this._lView[ne],this._lView)}onDestroy(e){II(this._lView,e)}markForCheck(){Wg(this._cdRefInjectingView||this._lView)}detach(){this._lView[z]&=-129}reattach(){Mp(this._lView),this._lView[z]|=128}detectChanges(){this._lView[z]|=1024,ZO(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new k(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,xN(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new k(902,!1);this._appRef=e,Mp(this._lView)}},_a=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=rk;let t=e;return t})();function rk(t){return ik(qt(),Ae(),(t&16)===16)}function ik(t,e,n){if(ha(t)&&!n){let r=Dr(t.index,e);return new fi(r,r)}else if(t.type&47){let r=e[Ht];return new fi(r,e)}return null}var QC=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=ok,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),ng=class extends QC{constructor(e){super(),this._lView=e}onDestroy(e){return II(this._lView,e),()=>uR(this._lView,e)}};function ok(){return new ng(Ae())}var PE=new Set;function No(t){PE.has(t)||(PE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var rg=class extends Ge{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=yp(o),i&&(i=yp(i)),s&&(s=yp(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Re&&e.add(a),a}};function yp(t){return e=>{setTimeout(t,void 0,e)}}var je=rg;function RE(...t){}function sk(){let t=typeof St.requestAnimationFrame=="function",e=St[t?"requestAnimationFrame":"setTimeout"],n=St[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var re=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new je(!1),this.onMicrotaskEmpty=new je(!1),this.onStable=new je(!1),this.onError=new je(!1),typeof Zone>"u")throw new k(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=sk().nativeRequestAnimationFrame,uk(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new k(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new k(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,ak,RE,RE);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},ak={};function Kg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ck(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(St,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ig(t),t.isCheckStableRunning=!0,Kg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ig(t))}function uk(t){let e=()=>{ck(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(lk(a))return n.invokeTask(i,o,s,a);try{return NE(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),OE(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return NE(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),OE(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,ig(t),Kg(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function ig(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function NE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function OE(t){t._nesting--,Kg(t)}var og=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new je,this.onMicrotaskEmpty=new je,this.onStable=new je,this.onError=new je}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function lk(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function dk(t="zone.js",e){return t==="noop"?new og:t==="zone.js"?new re(e):t}var wo=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(wo||{}),hk={destroy(){}};function Qg(t,e){!e&&hN(Qg);let n=e?.injector??b(Ot);if(!Zs(n))return hk;No("NgAfterNextRender");let r=n.get(YC),i=r.handler??=new ag,o=e?.phase??wo.MixedReadWrite,s=()=>{i.unregister(c),a()},a=n.get(QC).onDestroy(s),c=new sg(n,o,()=>{s(),t()});return i.register(c),{destroy:s}}var sg=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(re),this.errorHandler=e.get(wn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},ag=class{constructor(){this.executingCallbacks=!1,this.buckets={[wo.EarlyRead]:new Set,[wo.Write]:new Set,[wo.MixedReadWrite]:new Set,[wo.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new k(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},YC=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let r of this.internalCallbacks)r();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=F({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function fk(t,e){let n=Dr(e,t),r=n[ne];pk(r,n);let i=n[Mt];i!==null&&n[zn]===null&&(n[zn]=Bg(i,n[Do])),Yg(r,n,n[_n])}function pk(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Yg(t,e,n){Ig(e);try{let r=t.viewQuery;r!==null&&eg(1,r,n);let i=t.template;i!==null&&NC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&zC(t,e),t.staticViewQueries&&eg(2,t.viewQuery,n);let o=t.components;o!==null&&gk(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[z]&=-5,Cg()}}function gk(t,e){for(let n=0;n<e.length;n++)fk(t,e[n])}function cg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=sE(i,a);else if(o==2){let c=a,u=e[++s];r=sE(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var wl=class extends Fl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=yr(e);return new Mo(n,this.ngModule)}};function kE(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push({propName:r,templateName:n})}return e}function mk(t){let e=t.toLowerCase();return e==="svg"?yI:e==="math"?rR:null}var ug=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Al(r);let i=this.injector.get(e,gp,r);return i!==gp||n===gp?i:this.parentInjector.get(e,n,r)}},Mo=class extends yl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=kE(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return kE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=QP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof Pt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new ug(e,o):e,a=s.get(ca,null);if(a===null)throw new k(407,!1);let c=s.get(hO,null),u=s.get(YC,null),l=s.get(Up,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",m=r?DO(h,r,this.componentDef.encapsulation,s):Og(h,f,mk(f)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let _=null;m!==null&&(_=Bg(m,s,!0));let C=qg(0,null,null,1,0,null,null,null,null,null,null),O=Ll(null,C,null,v,null,null,d,h,s,null,_);Ig(O);let M,U;try{let H=this.componentDef,K,Ee=null;H.findHostDirectiveDefs?(K=[],Ee=new Map,H.findHostDirectiveDefs(H,K,Ee),K.push(H)):K=[H];let Bt=yk(O,m),Ff=vk(Bt,m,H,K,O,d,h);U=_I(C,xt),m&&Ek(h,H,m,r),n!==void 0&&Ik(U,this.ngContentSelectors,n),M=wk(Ff,H,K,Ee,O,[Ck]),Yg(C,O,null)}finally{Cg()}return new lg(this.componentType,M,Vl(U,O),O,U)}},lg=class extends zp{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new fi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Gg(o[ne],o,i,e,n),this.previousInputValues.set(e,n);let s=Dr(this._tNode.index,o);Wg(s)}}get injector(){return new ai(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function yk(t,e){let n=t[ne],r=xt;return t[r]=e,jl(n,r,2,"#host",null)}function vk(t,e,n,r,i,o,s){let a=i[ne];_k(r,t,e,s);let c=null;e!==null&&(c=Bg(e,i[Do]));let u=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Ll(i,VC(n),null,l,i[t.index],t,o,u,null,null,c);return a.firstCreatePass&&Jp(a,t,r.length-1),Bl(i,d),i[t.index]=d}function _k(t,e,n,r){for(let i of t)e.mergedAttrs=ta(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(cg(e,e.mergedAttrs,!0),n!==null&&vC(r,n,e))}function wk(t,e,n,r,i,o){let s=qt(),a=i[ne],c=Rt(s,i);BC(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=So(i,a,d,s);hi(h,i)}UC(a,i,s),c&&hi(c,i);let u=So(i,a,s.directiveStart+s.componentOffset,s);if(t[_n]=i[_n]=u,o!==null)for(let l of o)l(u,e);return OC(a,s,t),u}function Ek(t,e,n,r){if(r)Sp(t,n,["ng-version","17.0.8"]);else{let{attrs:i,classes:o}=YP(e.selectors[0]);i&&Sp(t,n,i),o&&o.length>0&&yC(t,n,o.join(" "))}}function Ik(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function Ck(){let t=qt();bg(Ae()[ne],t)}function Dk(t){return Object.getPrototypeOf(t.prototype).constructor}function In(t){let e=Dk(t.type),n=!0,r=[t];for(;e;){let i;if(_r(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new k(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Ku(t.inputs),s.inputTransforms=Ku(t.inputTransforms),s.declaredInputs=Ku(t.declaredInputs),s.outputs=Ku(t.outputs);let a=i.hostBindings;a&&Ak(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&Tk(t,c),u&&Sk(t,u),qu(t.inputs,i.inputs),qu(t.declaredInputs,i.declaredInputs),qu(t.outputs,i.outputs),i.inputTransforms!==null&&(s.inputTransforms===null&&(s.inputTransforms={}),qu(s.inputTransforms,i.inputTransforms)),_r(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===In&&(n=!1)}}e=Object.getPrototypeOf(e)}bk(r)}function bk(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ta(i.hostAttrs,n=ta(n,i.hostAttrs))}}function Ku(t){return t===Co?{}:t===Tt?[]:t}function Tk(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Sk(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function Ak(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Mk(t,e,n){return t[e]=n}function wa(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Ea(t,e,n,r){let i=Ae(),o=Eg();if(wa(i,o,e)){let s=on(),a=RI();HO(a,i,t,e,n,r)}return Ea}function xk(t,e,n,r){return wa(t,Eg(),n)?e+yg(n)+r:vi}function Qu(t,e){return t<<17|e<<2}function pi(t){return t>>17&32767}function Pk(t){return(t&2)==2}function Rk(t,e){return t&131071|e<<17}function dg(t){return t|2}function xo(t){return(t&131068)>>2}function vp(t,e){return t&-131069|e<<2}function Nk(t){return(t&1)===1}function hg(t){return t|1}function Ok(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=pi(s),c=xo(s);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||ga(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let h=pi(t[a+1]);t[r+1]=Qu(h,a),h!==0&&(t[h+1]=vp(t[h+1],r)),t[a+1]=Rk(t[a+1],r)}else t[r+1]=Qu(a,0),a!==0&&(t[a+1]=vp(t[a+1],r)),a=r;else t[r+1]=Qu(c,0),a===0?a=r:t[c+1]=vp(t[c+1],r),c=r;u&&(t[r+1]=dg(t[r+1])),FE(t,l,r,!0,o),FE(t,l,r,!1,o),kk(e,l,t,r,o),s=Qu(a,c),o?e.classBindings=s:e.styleBindings=s}function kk(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ga(o,e)>=0&&(n[r+1]=hg(n[r+1]))}function FE(t,e,n,r,i){let o=t[n+1],s=e===null,a=r?pi(o):xo(o),c=!1;for(;a!==0&&(c===!1||s);){let u=t[a],l=t[a+1];Fk(u,e)&&(c=!0,t[a+1]=r?hg(l):dg(l)),a=r?pi(l):xo(l)}c&&(t[n+1]=r?dg(o):hg(o))}function Fk(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ga(t,e)>=0:!1}function Tr(t,e,n){let r=Ae(),i=Eg();if(wa(r,i,e)){let o=on(),s=RI();PO(o,s,r,t,e,r[Se],n,!1)}return Tr}function VE(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Gg(t,n,o[s],s,r)}function Cn(t,e){return Vk(t,e,null,!0),Cn}function Vk(t,e,n,r){let i=Ae(),o=on(),s=wR(2);if(o.firstUpdatePass&&jk(o,t,s,r),e!==vi&&wa(i,s,e)){let a=o.data[Ro()];zk(o,a,i,i[Se],t,i[s+1]=qk(e,n),r,s)}}function Lk(t,e){return e>=t.expandoStartIndex}function jk(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Ro()],s=Lk(t,n);Gk(o,r)&&e===null&&!s&&(e=!1),e=Bk(i,o,e,r),Ok(i,o,e,n,s,r)}}function Bk(t,e,n,r){let i=DR(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=_p(null,t,e,n,r),n=ua(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=_p(i,t,e,n,r),o===null){let c=Uk(t,e,r);c!==void 0&&Array.isArray(c)&&(c=_p(null,t,e,c[1],r),c=ua(c,e.attrs,r),$k(t,e,r,c))}else o=Hk(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function Uk(t,e,n){let r=n?e.classBindings:e.styleBindings;if(xo(r)!==0)return t[pi(r)]}function $k(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[pi(i)]=r}function Hk(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ua(r,s,n)}return ua(r,e.attrs,n)}function _p(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=ua(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ua(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),WR(t,s,n?!0:e[++o]))}return t===void 0?null:t}function zk(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=Nk(u)?LE(c,e,n,i,xo(u),s):void 0;if(!El(l)){El(o)||Pk(u)&&(o=LE(c,null,n,i,a,s));let d=vI(Ro(),n);qN(r,s,d,i,o)}}function LE(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[i+1];h===vi&&(h=d?Tt:void 0);let f=d?dp(h,r):l===r?h:void 0;if(u&&!El(f)&&(f=dp(c,r)),El(f)&&(a=f,s))return a;let m=t[i+1];i=s?pi(m):xo(m)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=dp(c,r))}return a}function El(t){return t!==void 0}function qk(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=it(Lg(t)))),t}function Gk(t,e){return(t.flags&(e?8:16))!==0}function ZC(t){let e=t[oa]??[],r=t[Be][Se];for(let i of e)Wk(i,r);t[oa]=Tt}function Wk(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[ml];for(;n<i;){let o=r.nextSibling;gC(e,r,!1),r=o,n++}}}function XC(t){ZC(t);for(let e=At;e<t.length;e++)Il(t[e])}function Il(t){let e=t[ne];for(let n=xt;n<e.bindingStartIndex;n++)if(zt(t[n])){let r=t[n];XC(r)}else yn(t[n])&&Il(t[n])}function Kk(t){let e=t._views;for(let n of e){let r=iO(n);if(r!==null&&r[Mt]!==null)if(yn(r))Il(r);else{let i=r[Mt];Il(i),XC(r)}}}var Qk=new RegExp(`^(\\d+)*(${wC}|${_C})*(.*)`);function Yk(t){let e=t.match(Qk),[n,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,u,l]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(l,10)||1;a.push(u,d)}return[s,...a]}function Zk(t){return!t.prev&&t.parent?.type===8}function wp(t){return t.index-xt}function Ul(t,e,n,r){let i=null,o=wp(r),s=t.data[XN];if(s?.[o])i=Jk(s[o],n);else if(e.firstChild===r)i=t.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(Zk(r)){let u=wp(r.parent);i=Hp(t,u)}else{let u=Rt(c,n);if(a)i=u.firstChild;else{let l=wp(c),d=Hp(t,l);if(c.type===2&&d){let f=Ug(t,l)+1;i=$l(f,d)}else i=u.nextSibling}}}return i}function $l(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function Xk(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case $p.FirstChild:n=n.firstChild;break;case $p.NextSibling:n=n.nextSibling;break}}return n}function Jk(t,e){let[n,...r]=Yk(t),i;if(n===_C)i=e[Ht][Mt];else if(n===wC)i=pN(e[Ht][Mt]);else{let o=Number(n);i=nn(e[o+xt])}return Xk(i,r)}function eF(t,e){let n=[];for(let r of e)for(let i=0;i<(r[EC]??1);i++){let o={data:r,firstChild:null};r[ml]>0&&(o.firstChild=t,t=$l(r[ml],t)),n.push(o)}return[t,n]}var JC=(t,e)=>null;function tF(t,e){let n=t[oa];return!e||n===null||n.length===0?null:n[0].data[ZN]===e?n.shift():(ZC(t),null)}function nF(){JC=tF}function jE(t,e){return JC(t,e)}function rF(t,e,n,r){let i=e.tView,s=t[z]&4096?4096:16,a=Ll(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[Ml]=c;let u=t[ia];return u!==null&&(a[ia]=u.createEmbeddedView(i)),Yg(i,a,n),a}function BE(t,e){return!e||e.firstChild===null||pl(t)}function iF(t,e,n,r=!0){let i=e[ne];if(RN(i,e,t,n),r){let s=jp(n,t),a=e[Se],c=kg(a,t[qn]);c!==null&&MN(i,t[rn],a,e,c,s)}let o=e[zn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}var Ia=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=oF;let t=e;return t})();function oF(){let t=qt();return aF(t,Ae())}var sF=Ia,eD=class extends sF{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Vl(this._hostTNode,this._hostLView)}get injector(){return new ai(this._hostTNode,this._hostLView)}get parentInjector(){let e=Tg(this._hostTNode,this._hostLView);if(FI(e)){let n=ul(e,this._hostLView),r=cl(e),i=n[ne].data[r+8];return new ai(i,n)}else return new ai(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=UE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-At}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=jE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,BE(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!zR(e),a;if(s)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let c=s?e:new Mo(yr(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let v=(s?u:this.parentInjector).get(Pt,null);v&&(o=v)}let l=yr(c.componentType??{}),d=jE(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,o);return this.insertImpl(f.hostView,a,BE(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(sR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Be],u=new eD(c,c[rn],c[Be]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return iF(s,i,o,r),e.attachToViewContainerRef(),GI(Ep(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=UE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Lp(this._lContainer,n);r&&(dl(Ep(this._lContainer),n),hC(r[ne],r))}detach(e){let n=this._adjustIndex(e,-1),r=Lp(this._lContainer,n);return r&&dl(Ep(this._lContainer),n)!=null?new fi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function UE(t){return t[ol]}function Ep(t){return t[ol]||(t[ol]=[])}function aF(t,e){let n,r=e[t.index];return zt(r)?n=r:(n=HC(r,e,null,t),e[t.index]=n,Bl(e,n)),tD(n,e,t,r),new eD(n,t,e)}function cF(t,e){let n=t[Se],r=n.createComment(""),i=Rt(e,t),o=kg(n,i);return gl(n,o,r,jN(n,i),!1),r}var tD=nD,Zg=(t,e,n)=>!1;function uF(t,e,n){return Zg(t,e,n)}function nD(t,e,n,r){if(t[qn])return;let i;n.type&8?i=nn(r):i=cF(e,n),t[qn]=i}function lF(t,e,n){if(t[qn]&&t[oa])return!0;let r=n[zn],i=e.index-xt;if(!r||yN(e)||kl(r,i))return!1;let s=Hp(r,i),a=r.data[jg]?.[i],[c,u]=eF(s,a);return t[qn]=c,t[oa]=u,!0}function dF(t,e,n,r){Zg(t,n,e)||nD(t,e,n,r)}function hF(){tD=dF,Zg=lF}function fF(t,e,n,r,i,o,s,a,c){let u=e.consts,l=jl(e,t,4,s||null,al(u,a));jC(e,n,l,al(u,c)),bg(e,l);let d=l.tView=qg(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Xg(t,e,n,r,i,o,s,a){let c=Ae(),u=on(),l=t+xt,d=u.firstCreatePass?fF(l,u,c,e,n,r,i,o,s):u.data[l];pa(d,!1);let h=rD(u,c,d,t);Dg()&&Fg(u,c,h,d),hi(h,c);let f=HC(h,c,h,d);return c[l]=f,Bl(c,f),uF(f,d,c),_g(d)&&kC(u,c,d),s!=null&&FC(c,d,a),Xg}var rD=iD;function iD(t,e,n,r){return br(!0),e[Se].createComment("")}function pF(t,e,n,r){let i=e[zn],o=!i||fa()||kl(i,r);if(br(o),o)return iD(t,e,n,r);let s=i.data[YN]?.[r]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=Ul(i,t,e,n);Ol(i,r,a);let c=Ug(i,r);return $l(c,a)}function gF(){rD=pF}function mF(t,e,n,r,i,o){let s=e.consts,a=al(s,i),c=jl(e,t,2,r,a);return jC(e,n,c,al(s,o)),c.attrs!==null&&cg(c,c.attrs,!1),c.mergedAttrs!==null&&cg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function I(t,e,n,r){let i=Ae(),o=on(),s=xt+t,a=i[Se],c=o.firstCreatePass?mF(s,o,i,e,n,r):o.data[s],u=oD(o,i,c,a,e,t);i[s]=u;let l=_g(c);return pa(c,!0),vC(a,u,c),(c.flags&32)!==32&&Dg()&&Fg(o,i,u,c),lR()===0&&hi(u,i),dR(),l&&(kC(o,i,c),OC(o,c,i)),r!==null&&FC(i,c),I}function P(){let t=qt();bI()?yR():(t=t.parent,pa(t,!1));let e=t;fR(e)&&gR(),hR();let n=on();return n.firstCreatePass&&(bg(n,t),hI(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&PR(e)&&VE(n,e,Ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&RR(e)&&VE(n,e,Ae(),e.stylesWithoutHost,!1),P}function oe(t,e,n,r){return I(t,e,n,r),P(),oe}var oD=(t,e,n,r,i,o)=>(br(!0),Og(r,i,NI()));function yF(t,e,n,r,i,o){let s=e[zn],a=!s||fa()||kl(s,o);if(br(a),a)return Og(r,i,NI());let c=Ul(s,t,e,n);return DC(s,o)&&Ol(s,o,c.nextSibling),s&&(rC(n)||iC(c))&&ha(n)&&(pR(n),mC(c)),c}function vF(){oD=yF}var _F=(t,e,n,r)=>(br(!0),lC(e[Se],""));function wF(t,e,n,r){let i,o=e[zn],s=!o||fa();if(br(s),s)return lC(e[Se],"");let a=Ul(o,t,e,n),c=aO(o,r);return Ol(o,r,a),i=$l(c,a),i}function EF(){_F=wF}var Cl="en-US";var IF=Cl;function CF(t){TP(t,"Expected localeId to be defined"),typeof t=="string"&&(IF=t.toLowerCase().replace(/_/g,"-"))}function _i(t){return!!t&&typeof t.then=="function"}function sD(t){return!!t&&typeof t.subscribe=="function"}function Yn(t,e,n,r){let i=Ae(),o=on(),s=qt();return bF(o,i,i[Se],s,t,e,r),Yn}function DF(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[na],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function bF(t,e,n,r,i,o,s){let a=_g(r),u=t.firstCreatePass&&KO(t),l=e[_n],d=WO(e),h=!0;if(r.type&3||s){let v=Rt(r,e),_=s?s(v):v,C=d.length,O=s?U=>s(nn(U[r.index])):r.index,M=null;if(!s&&a&&(M=DF(t,e,i,r.index)),M!==null){let U=M.__ngLastListenerFn__||M;U.__ngNextListenerFn__=o,M.__ngLastListenerFn__=o,h=!1}else{o=HE(r,e,l,o,!1);let U=n.listen(_,i,o);d.push(o,U),u&&u.push(i,O,C,C+1)}}else o=HE(r,e,l,o,!1);let f=r.outputs,m;if(h&&f!==null&&(m=f[i])){let v=m.length;if(v)for(let _=0;_<v;_+=2){let C=m[_],O=m[_+1],H=e[C][O].subscribe(o),K=d.length;d.push(o,H),u&&u.push(i,r.index,K,-(K+1))}}}function $E(t,e,n,r){try{return gn(6,e,n),n(r)!==!1}catch(i){return qC(t,i),!1}finally{gn(7,e,n)}}function HE(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?Dr(t.index,e):e;Wg(a);let c=$E(e,n,r,s),u=o.__ngNextListenerFn__;for(;u;)c=$E(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function aD(t=1){return TR(t)}function B(t,e=""){let n=Ae(),r=on(),i=t+xt,o=r.firstCreatePass?jl(r,i,1,e,null):r.data[i],s=cD(r,n,o,e,t);n[i]=s,Dg()&&Fg(r,n,s,o),pa(o,!1)}var cD=(t,e,n,r,i)=>(br(!0),uC(e[Se],r));function TF(t,e,n,r,i){let o=e[zn],s=!o||fa()||kl(o,i);return br(s),s?uC(e[Se],r):Ul(o,t,e,n)}function SF(){cD=TF}function Jg(t){return uD("",t,""),Jg}function uD(t,e,n){let r=Ae(),i=xk(r,t,e,n);return i!==vi&&QO(r,Ro(),i),uD}function AF(t,e,n){let r=on();if(r.firstCreatePass){let i=_r(t);fg(n,r.data,r.blueprint,i,!0),fg(e,r.data,r.blueprint,i,!1)}}function fg(t,e,n,r,i){if(t=lt(t),Array.isArray(t))for(let o=0;o<t.length;o++)fg(t[o],e,n,r,i);else{let o=on(),s=Ae(),a=qt(),c=Ao(t)?t:lt(t.provide),u=XI(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Ao(t)||!t.multi){let f=new li(u,i,ue),m=Cp(c,e,i?l:l+h,d);m===-1?(Rp(ll(a,s),o,c),Ip(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[m]=f,s[m]=f)}else{let f=Cp(c,e,l+h,d),m=Cp(c,e,l,l+h),v=f>=0&&n[f],_=m>=0&&n[m];if(i&&!_||!i&&!v){Rp(ll(a,s),o,c);let C=PF(i?xF:MF,n.length,i,r,u);!i&&_&&(n[m].providerFactory=C),Ip(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(C),s.push(C)}else{let C=lD(n[i?m:f],u,!i&&r);Ip(o,t,f>-1?f:m,C)}!i&&r&&_&&n[m].componentProviders++}}}function Ip(t,e,n,r){let i=Ao(e),o=oN(e);if(i||o){let c=(o?lt(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function lD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Cp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function MF(t,e,n,r){return pg(this.multi,[])}function xF(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=So(n,n[ne],this.providerFactory.index,r);o=a.slice(0,s),pg(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],pg(i,o);return o}function pg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function PF(t,e,n,r,i){let o=new li(t,n,ue);return o.multi=[],o.index=e,o.componentProviders=0,lD(o,i,r&&!n),o}function Oo(t,e=[]){return n=>{n.providersResolver=(r,i)=>AF(r,i?i(t):t,e)}}var wr=class{},la=class{};var Dl=class extends wr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wl(this);let i=aI(e);this._bootstrapComponents=nC(i.bootstrap),this._r3Injector=JI(e,n,[{provide:wr,useValue:this},{provide:Fl,useValue:this.componentFactoryResolver},...r],it(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},bl=class extends la{constructor(e){super(),this.moduleType=e}create(e){return new Dl(this.moduleType,e,[])}};function RF(t,e,n){return new Dl(t,e,n)}var gg=class extends wr{constructor(e){super(),this.componentFactoryResolver=new wl(this),this.instance=null;let n=new aa([...e.providers,{provide:wr,useValue:this},{provide:Fl,useValue:this.componentFactoryResolver}],e.parent||Mg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Hl(t,e,n=null){return new gg({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var NF=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=QI(!1,r.type),o=i.length>0?Hl([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=F({token:e,providedIn:"environment",factory:()=>new e(D(Pt))});let t=e;return t})();function dD(t){No("NgStandalone"),t.getStandaloneInjector=e=>e.get(NF).getOrCreateStandaloneInjector(t)}function Ca(t,e,n,r){return kF(Ae(),vR(),t,e,n,r)}function OF(t,e){let n=t[e];return n===vi?void 0:n}function kF(t,e,n,r,i,o){let s=e+n;return wa(t,s,i)?Mk(t,s+1,o?r.call(o,i):r(i)):OF(t,s+1)}var em=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=LF;let t=e;return t})(),FF=em,VF=class extends FF{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=rF(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new fi(i)}};function LF(){return jF(qt(),Ae())}function jF(t,e){return t.type&4?new VF(e,t,Vl(t,e)):null}var Yu=null;function BF(t){Yu!==null&&(t.defaultEncapsulation!==Yu.defaultEncapsulation||t.preserveWhitespaces!==Yu.preserveWhitespaces)||(Yu=t)}var Wn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},hD=new Wn("17.0.8");var zl=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),mg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},ql=(()=>{let e=class e{compileModuleSync(r){return new bl(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=aI(r),s=nC(o.declarations).reduce((a,c)=>{let u=yr(c);return u&&a.push(new Mo(u)),a},[]);return new mg(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),UF=new R("compilerOptions");var Da=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var tm=new R(""),ba=new R(""),Gl=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,nm||($F(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{re.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(D(re),D(Wl),D(ba))},e.\u0275prov=F({token:e,factory:e.\u0275fac});let t=e;return t})(),Wl=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return nm?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function $F(t){nm=t}var nm,Kl=new R("Application Initializer"),fD=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=b(Kl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(_i(s))r.push(s);else if(sD(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ko=new R("appBootstrapListener");function HF(t,e,n){let r=new bl(n);return Promise.resolve(r)}function zF(){L0(()=>{throw new k(600,!1)})}function qF(t){return t.isBoundToModule}function GF(t,e,n){try{let r=n();return _i(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function pD(t,e){return Array.isArray(e)?e.reduce(pD,t):x(x({},t),e)}var Zn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=b(SC),this.componentTypes=[],this.components=[],this.isStable=b(Da).hasPendingTasks.pipe($(r=>!r)),this._injector=b(Pt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof yl;if(!this._injector.get(fD).done){let m="Cannot bootstrap as there are still asynchronous initializers running."+(!o&&sI(r)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new k(405,!1)}let a;o?a=r:a=this._injector.get(Fl).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=qF(a)?void 0:this._injector.get(wr),u=i||a.selector,l=a.create(Ot.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(tm,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),nl(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new k(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;nl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ko,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>nl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new k(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function zE(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var Zu;function rm(t){Zu??=new WeakMap;let e=Zu.get(t);if(e)return e;let n=t.isStable.pipe(bt(r=>r)).toPromise().then(()=>{});return Zu.set(t,n),t.onDestroy(()=>Zu?.delete(t)),n}var WF=(()=>{let e=class e{constructor(){this.zone=b(re),this.applicationRef=b(Zn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function KF(t){return[{provide:re,useFactory:t},{provide:di,multi:!0,useFactory:()=>{let e=b(WF,{optional:!0});return()=>e.initialize()}},{provide:di,multi:!0,useFactory:()=>{let e=b(ZF);return()=>{e.initialize()}}},{provide:SC,useFactory:QF}]}function QF(){let t=b(re),e=b(wn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function YF(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var ZF=(()=>{let e=class e{constructor(){this.subscription=new Re,this.initialized=!1,this.zone=b(re),this.pendingTasks=b(Da)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{re.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{re.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function XF(){return typeof $localize<"u"&&$localize.locale||Cl}var im=new R("LocaleId",{providedIn:"root",factory:()=>b(im,ee.Optional|ee.SkipSelf)||XF()});var gD=new R("PlatformDestroyListeners"),mD=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=dk(i?.ngZone,YF({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=RF(r.moduleType,this.injector,KF(()=>o)),a=s.injector.get(wn,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:u=>{a.handleError(u)}});s.onDestroy(()=>{nl(this._modules,s),c.unsubscribe()})}),GF(a,o,()=>{let c=s.injector.get(fD);return c.runInitializers(),c.donePromise.then(()=>{let u=s.injector.get(im,Cl);return CF(u||Cl),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=pD({},i);return HF(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(Zn);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new k(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new k(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(gD,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(D(Ot))},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Js=null,yD=new R("AllowMultipleToken");function JF(t){if(Js&&!Js.get(yD,!1))throw new k(400,!1);zF(),Js=t;let e=t.get(mD);return nV(t),e}function om(t,e,n=[]){let r=`Platform: ${e}`,i=new R(r);return(o=[])=>{let s=vD();if(!s||s.injector.get(yD,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):JF(eV(a,r))}return tV(i)}}function eV(t=[],e){return Ot.create({name:e,providers:[{provide:Rl,useValue:"platform"},{provide:gD,useValue:new Set([()=>Js=null])},...t]})}function tV(t){let e=vD();if(!e)throw new k(401,!1);return e}function vD(){return Js?.get(mD)??null}function nV(t){t.get(xg,null)?.forEach(n=>n())}function sm(){return!1}var _D=om(null,"core",[]),wD=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(D(Zn))},e.\u0275mod=Oe({type:e}),e.\u0275inj=Ne({});let t=e;return t})();var qE=!1;function rV(){qE||(qE=!0,rO(),vF(),SF(),EF(),gF(),hF(),nF(),SO())}function iV(t,e){return rm(t)}function ED(){return ma([{provide:Wu,useFactory:()=>{let t=!0;return Zs()&&(t=!!b(yi,{optional:!0})?.get(IC,null)),t&&No("NgHydration"),t}},{provide:di,useValue:()=>{Zs()&&b(Wu)&&(oV(),rV())},multi:!0},{provide:MC,useFactory:()=>Zs()&&b(Wu)},{provide:ko,useFactory:()=>{if(Zs()&&b(Wu)){let t=b(Zn),e=b(Ot);return()=>{iV(t,e).then(()=>{re.assertInAngularZone(),Kk(t)})}}return()=>{}},multi:!0}])}function oV(){let t=Nl(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===tO){e=n;break}if(!e)throw new k(-507,!1)}function Ql(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function ID(t){let e=yr(t);if(!e)return null;let n=new Mo(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var cm=null;function Dn(){return cm}function SD(t){cm||(cm=t)}var Yl=class{},ht=new R("DocumentToken"),dm=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:()=>(()=>b(cV))(),providedIn:"platform"});let t=e;return t})(),AD=new R("Location Initialized"),cV=(()=>{let e=class e extends dm{constructor(){super(),this._doc=b(ht),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dn().getBaseHref(this._doc)}onPopState(r){let i=Dn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Dn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function hm(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function CD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Xn(t){return t&&t[0]!=="?"?"?"+t:t}var wi=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:()=>(()=>b(fm))(),providedIn:"root"});let t=e;return t})(),MD=new R("appBaseHref"),fm=(()=>{let e=class e extends wi{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??b(ht).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return hm(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Xn(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Xn(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Xn(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(dm),D(MD,8))},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xD=(()=>{let e=class e extends wi{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return i==null&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=hm(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Xn(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Xn(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(dm),D(MD,8))},e.\u0275prov=F({token:e,factory:e.\u0275fac});let t=e;return t})(),Fo=(()=>{let e=class e{constructor(r){this._subject=new je,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=dV(CD(DD(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Xn(i))}normalize(r){return e.stripTrailingSlash(lV(this._basePath,DD(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Xn(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Xn(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Xn,e.joinWithSlash=hm,e.stripTrailingSlash=CD,e.\u0275fac=function(i){return new(i||e)(D(wi))},e.\u0275prov=F({token:e,factory:()=>uV(),providedIn:"root"});let t=e;return t})();function uV(){return new Fo(D(wi))}function lV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function DD(t){return t.replace(/\/index.html$/,"")}function dV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function PD(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var am=/\s+/,bD=[],RD=(()=>{let e=class e{constructor(r,i,o,s){this._iterableDiffers=r,this._keyValueDiffers=i,this._ngEl=o,this._renderer=s,this.initialClasses=bD,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(am):bD}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(am):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(am).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(ue(Hg),ue(zg),ue(En),ue(Qn))},e.\u0275dir=et({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var ND=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new um,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){TD("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){TD("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ue(Ia),ue(em))},e.\u0275dir=et({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),um=class{constructor(){this.$implicit=null,this.ngIf=null}};function TD(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${it(e)}'.`)}var OD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Ne({});let t=e;return t})(),kD="browser",hV="server";function Ei(t){return t===hV}var FD=(()=>{let e=class e{};e.\u0275prov=F({token:e,providedIn:"root",factory:()=>new lm(D(ht),window)});let t=e;return t})(),lm=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let n=fV(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function fV(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Zl=class{};var Jl=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var HD=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(HD||{}),pm=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new Jl,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var ed=class t extends pm{constructor(e={}){super(e),this.type=HD.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var mV=new R("");var VD="b",LD="h",jD="s",BD="st",UD="u",$D="rt",Xl=new R(""),yV=["GET","HEAD"];function vV(t,e){let l=b(Xl),{isCacheActive:n}=l,r=I0(l,["isCacheActive"]),{transferCache:i,method:o}=t;if(!n||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!yV.includes(o)||i===!1||r.filter?.(t)===!1)return e(t);let s=b(yi),a=wV(t),c=s.get(a,null),u=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(u=i.includeHeaders),c){let{[VD]:d,[$D]:h,[LD]:f,[jD]:m,[BD]:v,[UD]:_}=c,C=d;switch(h){case"arraybuffer":C=new TextEncoder().encode(d).buffer;break;case"blob":C=new Blob([d]);break}let O=new Jl(f);return L(new ed({body:C,headers:O,status:m,statusText:v,url:_}))}return e(t).pipe(Te(d=>{d instanceof ed&&s.set(a,{[VD]:d.body,[LD]:_V(d.headers,u),[jD]:d.status,[BD]:d.statusText,[UD]:d.url||"",[$D]:t.responseType})}))}function _V(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function wV(t){let{params:e,method:n,responseType:r,url:i}=t,o=e.keys().sort().map(c=>`${c}=${e.getAll(c)}`).join("&"),s=n+"."+r+"."+i+"?"+o,a=EV(s);return a}function EV(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483647+1,e.toString()}function zD(t){return[{provide:Xl,useFactory:()=>(No("NgHttpTransferCache"),x({isCacheActive:!0},t))},{provide:mV,useValue:vV,multi:!0,deps:[yi,Xl]},{provide:ko,multi:!0,useFactory:()=>{let e=b(Zn),n=b(Xl);return()=>{rm(e).then(()=>{n.isCacheActive=!1})}}}]}var ym=class extends Yl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},vm=class t extends ym{static makeCurrent(){SD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=IV();return n==null?null:CV(n)}resetBaseElement(){Ta=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return PD(document.cookie,e)}},Ta=null;function IV(){return Ta=Ta||document.querySelector("base"),Ta?Ta.getAttribute("href"):null}function CV(t){return new URL(t,document.baseURI).pathname}var _m=class{addToWindow(e){St.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new k(5103,!1);return o},St.getAllAngularTestabilities=()=>e.getAllTestabilities(),St.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=St.getAllAngularTestabilities(),o=i.length,s=!1,a=function(c){s=s||c,o--,o==0&&r(s)};i.forEach(c=>{c.whenStable(a)})};St.frameworkStabilizers||(St.frameworkStabilizers=[]),St.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?Dn().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},DV=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac});let t=e;return t})(),wm=new R("EventManagerPlugins"),KD=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new k(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(D(wm),D(re))},e.\u0275prov=F({token:e,factory:e.\u0275fac});let t=e;return t})(),td=class{constructor(e){this._doc=e}},gm="ng-app-id",QD=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ei(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${gm}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(gm),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(gm,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(D(ht),D(ya),D(Pg,8),D(dt))},e.\u0275prov=F({token:e,factory:e.\u0275fac});let t=e;return t})(),mm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Im=/%COMP%/g,YD="%COMP%",bV=`_nghost-${YD}`,TV=`_ngcontent-${YD}`,SV=!0,AV=new R("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>SV});function MV(t){return TV.replace(Im,t)}function xV(t){return bV.replace(Im,t)}function ZD(t,e){return e.map(n=>n.replace(Im,t))}var qD=(()=>{let e=class e{constructor(r,i,o,s,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ei(c),this.defaultRenderer=new Sa(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===vn.ShadowDom&&(i=de(x({},i),{encapsulation:vn.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof nd?o.applyToHost(r):o instanceof Aa&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case vn.Emulated:s=new nd(u,l,i,this.appId,d,a,c,h);break;case vn.ShadowDom:return new Em(u,l,r,i,a,c,this.nonce,h);default:s=new Aa(u,l,i,d,a,c,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(D(KD),D(QD),D(ya),D(AV),D(ht),D(dt),D(re),D(Pg))},e.\u0275prov=F({token:e,factory:e.\u0275fac});let t=e;return t})(),Sa=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(mm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(GD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(GD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new k(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=mm[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=mm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Gn.DashCase|Gn.Important)?e.style.setProperty(n,r,i&Gn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Gn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Dn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function GD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Em=class extends Sa{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=ZD(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Aa=class extends Sa{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?ZD(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},nd=class extends Aa{constructor(e,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=MV(u),this.hostAttr=xV(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},PV=(()=>{let e=class e extends td{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(D(ht))},e.\u0275prov=F({token:e,factory:e.\u0275fac});let t=e;return t})(),WD=["alt","control","meta","shift"],RV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},OV=(()=>{let e=class e extends td{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dn().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),WD.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let o=RV[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),WD.forEach(a=>{if(a!==o){let c=NV[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(D(ht))},e.\u0275prov=F({token:e,factory:e.\u0275fac});let t=e;return t})();function kV(){vm.makeCurrent()}function FV(){return new wn}function VV(){return eC(document),document}var LV=[{provide:dt,useValue:kD},{provide:xg,useValue:kV,multi:!0},{provide:ht,useFactory:VV,deps:[]}],XD=om(_D,"browser",LV),jV=new R(""),BV=[{provide:ba,useClass:_m,deps:[]},{provide:tm,useClass:Gl,deps:[re,Wl,ba]},{provide:Gl,useClass:Gl,deps:[re,Wl,ba]}],UV=[{provide:Rl,useValue:"root"},{provide:wn,useFactory:FV,deps:[]},{provide:wm,useClass:PV,multi:!0,deps:[ht,re,dt]},{provide:wm,useClass:OV,multi:!0,deps:[ht]},qD,QD,KD,{provide:ca,useExisting:qD},{provide:Zl,useClass:DV,deps:[]},[]],JD=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:ya,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(D(jV,12))},e.\u0275mod=Oe({type:e}),e.\u0275inj=Ne({providers:[...UV,...BV],imports:[OD,wD]});let t=e;return t})();function $V(){return new Cm(D(ht))}var Cm=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(D(ht))},e.\u0275prov=F({token:e,factory:function(i){let o=null;return i?o=new i:o=$V(),o},providedIn:"root"});let t=e;return t})();function eb(...t){let e=[],n=new Set,r=n.has(1);for(let{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);return ma([[],ED(),n.has(0)||r?[]:zD({}),e])}var Y="primary",Ha=Symbol("RouteTitle"),Am=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Uo(t){return new Am(t)}function HV(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function zV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!bn(t[n],e[n]))return!1;return!0}function bn(t,e){let n=t?Mm(t):void 0,r=e?Mm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!lb(t[i],e[i]))return!1;return!0}function Mm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function lb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function db(t){return t.length>0?t[t.length-1]:null}function xr(t){return ep(t)?t:_i(t)?se(Promise.resolve(t)):L(t)}var qV={exact:fb,subset:pb},hb={exact:GV,subset:WV,ignored:()=>!0};function nb(t,e,n){return qV[n.paths](t.root,e.root,n.matrixParams)&&hb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function GV(t,e){return bn(t,e)}function fb(t,e,n){if(!Ci(t.segments,e.segments)||!od(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!fb(t.children[r],e.children[r],n))return!1;return!0}function WV(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>lb(t[n],e[n]))}function pb(t,e,n){return gb(t,e,e.segments,n)}function gb(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ci(i,n)||e.hasChildren()||!od(i,n,r))}else if(t.segments.length===n.length){if(!Ci(t.segments,n)||!od(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!pb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ci(t.segments,i)||!od(t.segments,i,r)||!t.children[Y]?!1:gb(t.children[Y],e,o,r)}}function od(t,e,n){return e.every((r,i)=>hb[n](t[i].parameters,r.parameters))}var Sr=class{constructor(e=new he([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uo(this.queryParams)),this._queryParamMap}toString(){return YV.serialize(this)}},he=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sd(this)}},Ii=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Uo(this.parameters)),this._parameterMap}toString(){return yb(this)}};function KV(t,e){return Ci(t,e)&&t.every((n,r)=>bn(n.parameters,e[r].parameters))}function Ci(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function QV(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Y&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Y&&(n=n.concat(e(i,r)))}),n}var za=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:()=>(()=>new ka)(),providedIn:"root"});let t=e;return t})(),ka=class{parse(e){let n=new Pm(e);return new Sr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ma(e.root,!0)}`,r=JV(e.queryParams),i=typeof e.fragment=="string"?`#${ZV(e.fragment)}`:"";return`${n}${r}${i}`}},YV=new ka;function sd(t){return t.segments.map(e=>yb(e)).join("/")}function Ma(t,e){if(!t.hasChildren())return sd(t);if(e){let n=t.children[Y]?Ma(t.children[Y],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Y&&r.push(`${i}:${Ma(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=QV(t,(r,i)=>i===Y?[Ma(t.children[Y],!1)]:[`${i}:${Ma(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Y]!=null?`${sd(t)}/${n[0]}`:`${sd(t)}/(${n.join("//")})`}}function mb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rd(t){return mb(t).replace(/%3B/gi,";")}function ZV(t){return encodeURI(t)}function xm(t){return mb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ad(t){return decodeURIComponent(t)}function rb(t){return ad(t.replace(/\+/g,"%20"))}function yb(t){return`${xm(t.path)}${XV(t.parameters)}`}function XV(t){return Object.keys(t).map(e=>`;${xm(e)}=${xm(t[e])}`).join("")}function JV(t){let e=Object.keys(t).map(n=>{let r=t[n];return Array.isArray(r)?r.map(i=>`${rd(n)}=${rd(i)}`).join("&"):`${rd(n)}=${rd(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}var e2=/^[^\/()?;#]+/;function Dm(t){let e=t.match(e2);return e?e[0]:""}var t2=/^[^\/()?;=#]+/;function n2(t){let e=t.match(t2);return e?e[0]:""}var r2=/^[^=?&#]+/;function i2(t){let e=t.match(r2);return e?e[0]:""}var o2=/^[^&#]+/;function s2(t){let e=t.match(o2);return e?e[0]:""}var Pm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new he([],{}):new he([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Y]=new he(e,n)),r}parseSegment(){let e=Dm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new k(4009,!1);return this.capture(e),new Ii(ad(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=n2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Dm(this.remaining);i&&(r=i,this.capture(r))}e[ad(n)]=ad(r)}parseQueryParam(e){let n=i2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=s2(this.remaining);s&&(r=s,this.capture(r))}let i=rb(n),o=rb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Dm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new k(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Y);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Y]:new he([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new k(4011,!1)}};function vb(t){return t.segments.length>0?new he([],{[Y]:t}):t}function _b(t){let e={};for(let r of Object.keys(t.children)){let i=t.children[r],o=_b(i);if(r===Y&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new he(t.segments,e);return a2(n)}function a2(t){if(t.numberOfChildren===1&&t.children[Y]){let e=t.children[Y];return new he(t.segments.concat(e.segments),e.children)}return t}function $o(t){return t instanceof Sr}function c2(t,e,n=null,r=null){let i=wb(t);return Eb(i,e,n,r)}function wb(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new he(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=vb(r);return e??i}function Eb(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return bm(i,i,i,n,r);let o=u2(e);if(o.toRoot())return bm(i,i,new he([],{}),n,r);let s=l2(o,i,t),a=s.processChildren?Ra(s.segmentGroup,s.index,o.commands):Cb(s.segmentGroup,s.index,o.commands);return bm(i,s.segmentGroup,a,n,r)}function cd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Fa(t){return typeof t=="object"&&t!=null&&t.outlets}function bm(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let s;t===e?s=n:s=Ib(t,e,n);let a=vb(_b(s));return new Sr(a,o,i)}function Ib(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Ib(o,e,n)}),new he(t.segments,r)}var ud=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&cd(r[0]))throw new k(4003,!1);let i=r.find(Fa);if(i&&i!==db(r))throw new k(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function u2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ud(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ud(n,e,r)}var jo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function l2(t,e,n){if(t.isAbsolute)return new jo(e,!0,0);if(!n)return new jo(e,!1,NaN);if(n.parent===null)return new jo(n,!0,0);let r=cd(t.commands[0])?0:1,i=n.segments.length-1+r;return d2(n,i,t.numberOfDoubleDots)}function d2(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new k(4005,!1);i=r.segments.length}return new jo(r,!1,i-o)}function h2(t){return Fa(t[0])?t[0].outlets:{[Y]:t}}function Cb(t,e,n){if(t||(t=new he([],{})),t.segments.length===0&&t.hasChildren())return Ra(t,e,n);let r=f2(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new he(t.segments.slice(0,r.pathIndex),{});return o.children[Y]=new he(t.segments.slice(r.pathIndex),t.children),Ra(o,0,i)}else return r.match&&i.length===0?new he(t.segments,{}):r.match&&!t.hasChildren()?Rm(t,e,n):r.match?Ra(t,0,i):Rm(t,e,n)}function Ra(t,e,n){if(n.length===0)return new he(t.segments,{});{let r=h2(n),i={};if(Object.keys(r).some(o=>o!==Y)&&t.children[Y]&&t.numberOfChildren===1&&t.children[Y].segments.length===0){let o=Ra(t.children[Y],e,n);return new he(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Cb(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new he(t.segments,i)}}function f2(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Fa(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!ob(c,u,s))return o;r+=2}else{if(!ob(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Rm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Fa(o)){let c=p2(o.outlets);return new he(r,c)}if(i===0&&cd(n[0])){let c=t.segments[e];r.push(new Ii(c.path,ib(n[0]))),i++;continue}let s=Fa(o)?o.outlets[Y]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&cd(a)?(r.push(new Ii(s,ib(a))),i+=2):(r.push(new Ii(s,{})),i++)}return new he(r,{})}function p2(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Rm(new he([],{}),0,r))}),e}function ib(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ob(t,e,n){return t==n.path&&bn(e,n.parameters)}var Na="imperative",Gt=class{constructor(e,n){this.id=e,this.url=n}},Ho=class extends Gt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Jn=class extends Gt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ar=class extends Gt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mr=class extends Gt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}},Va=class extends Gt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ld=class extends Gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nm=class extends Gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Om=class extends Gt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},km=class extends Gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fm=class extends Gt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vm=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Lm=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},jm=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bm=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Um=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$m=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dd=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},La=class{},ja=class{constructor(e){this.url=e}};var Hm=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new qa,this.attachRef=null}},qa=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Hm,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=zm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=zm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=qm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qm(e,this._root).map(n=>n.value)}};function zm(t,e){if(t===e.value)return e;for(let n of e.children){let r=zm(t,n);if(r)return r}return null}function qm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=qm(t,n);if(r.length)return r.unshift(e),r}return[]}var Ft=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Lo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var fd=class extends hd{constructor(e,n){super(e),this.snapshot=n,ty(this,e)}toString(){return this.snapshot.toString()}};function Db(t,e){let n=g2(t,e),r=new Je([new Ii("",{})]),i=new Je({}),o=new Je({}),s=new Je({}),a=new Je(""),c=new zo(r,i,s,a,o,Y,e,n.root);return c.snapshot=n.root,new fd(new Ft(c,[]),n)}function g2(t,e){let n={},r={},i={},o="",s=new Ba([],n,i,o,r,Y,e,null,{});return new pd("",new Ft(s,[]))}var zo=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe($(u=>u[Ha]))??L(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe($(e=>Uo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe($(e=>Uo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ey(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:x(x({},e.params),t.params),data:x(x({},e.data),t.data),resolve:x(x(x(x({},t.data),e.data),i?.data),t._resolvedData)}:r={params:x({},t.params),data:x({},t.data),resolve:x(x({},t.data),t._resolvedData??{})},i&&Tb(i)&&(r.resolve[Ha]=i.title),r}var Ba=class{get title(){return this.data?.[Ha]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Uo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uo(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},pd=class extends hd{constructor(e,n){super(n),this.url=e,ty(this,n)}toString(){return bb(this._root)}};function ty(t,e){e.value._routerState=t,e.children.forEach(n=>ty(t,n))}function bb(t){let e=t.children.length>0?` { ${t.children.map(bb).join(", ")} } `:"";return`${t.value}${e}`}function Tm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,bn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),bn(e.params,n.params)||t.paramsSubject.next(n.params),zV(e.url,n.url)||t.urlSubject.next(n.url),bn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Gm(t,e){let n=bn(t.params,e.params)&&KV(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Gm(t.parent,e.parent))}function Tb(t){return typeof t.title=="string"||t.title===null}var m2=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Y,this.activateEvents=new je,this.deactivateEvents=new je,this.attachEvents=new je,this.detachEvents=new je,this.parentContexts=b(qa),this.location=b(Ia),this.changeDetector=b(_a),this.environmentInjector=b(Pt),this.inputBinder=b(_d,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new k(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new k(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new k(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new k(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Wm(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=et({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Cr]});let t=e;return t})(),Wm=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===zo?this.route:e===qa?this.childContexts:this.parent.get(e,n)}},_d=new R(""),sb=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Qs([i.queryParams,i.params,i.data]).pipe(De(([s,a,c],u)=>(c=x(x(x({},s),a),c),u===0?L(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=ID(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac});let t=e;return t})();function y2(t,e,n){let r=Ua(t,e._root,n?n._root:void 0);return new fd(r,e)}function Ua(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=v2(t,e,n);return new Ft(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ua(t,a)),s}}let r=_2(e.value),i=e.children.map(o=>Ua(t,o));return new Ft(r,i)}}function v2(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ua(t,r,i);return Ua(t,r)})}function _2(t){return new zo(new Je(t.url),new Je(t.params),new Je(t.queryParams),new Je(t.fragment),new Je(t.data),t.outlet,t.component,t)}var Sb="ngNavigationCancelingError";function Ab(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=$o(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Mb(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function Mb(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[Sb]=!0,r.cancellationCode=e,n&&(r.url=n),r}function w2(t){return xb(t)&&$o(t.url)}function xb(t){return t&&t[Sb]}var E2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ir({type:e,selectors:[["ng-component"]],standalone:!0,features:[dD],decls:1,vars:0,template:function(i,o){i&1&&oe(0,"router-outlet")},dependencies:[m2],encapsulation:2});let t=e;return t})();function I2(t,e){return t.providers&&!t._injector&&(t._injector=Hl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function ny(t){let e=t.children&&t.children.map(ny),n=e?de(x({},t),{children:e}):x({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Y&&(n.component=E2),n}function Tn(t){return t.outlet||Y}function C2(t,e){let n=t.filter(r=>Tn(r)===e);return n.push(...t.filter(r=>Tn(r)!==e)),n}function Ga(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var D2=(t,e,n,r)=>$(i=>(new Km(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Km=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Tm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Lo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Lo(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Lo(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Lo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new $m(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Bm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Tm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Tm(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Ga(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},gd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Bo=class{constructor(e,n){this.component=e,this.route=n}};function b2(t,e,n){let r=t._root,i=e?e._root:null;return xa(r,i,n,[r.value])}function T2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Go(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!KE(t)?t:e.get(t):r}function xa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Lo(e);return t.children.forEach(s=>{S2(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Oa(a,n.getContext(s),i)),i}function S2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=A2(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new gd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?xa(t,e,a?a.children:null,r,i):xa(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Bo(a.outlet.component,s))}else s&&Oa(e,a,i),i.canActivateChecks.push(new gd(r)),o.component?xa(t,null,a?a.children:null,r,i):xa(t,null,n,r,i);return i}function A2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ci(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ci(t.url,e.url)||!bn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gm(t,e)||!bn(t.queryParams,e.queryParams);case"paramsChange":default:return!Gm(t,e)}}function Oa(t,e,n){let r=Lo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Oa(s,e.children.getContext(o),n):Oa(s,null,n):Oa(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Bo(e.outlet.component,i)):n.canDeactivateChecks.push(new Bo(null,i)):n.canDeactivateChecks.push(new Bo(null,i))}function Wa(t){return typeof t=="function"}function M2(t){return typeof t=="boolean"}function x2(t){return t&&Wa(t.canLoad)}function P2(t){return t&&Wa(t.canActivate)}function R2(t){return t&&Wa(t.canActivateChild)}function N2(t){return t&&Wa(t.canDeactivate)}function O2(t){return t&&Wa(t.canMatch)}function Pb(t){return t instanceof $n||t?.name==="EmptyError"}var id=Symbol("INITIAL_VALUE");function qo(){return De(t=>Qs(t.map(e=>e.pipe(Hn(1),si(id)))).pipe($(e=>{for(let n of e)if(n!==!0){if(n===id)return id;if(n===!1||n instanceof Sr)return n}return!0}),Ke(e=>e!==id),Hn(1)))}function k2(t,e){return Le(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?L(de(x({},n),{guardsResult:!0})):F2(s,r,i,t).pipe(Le(a=>a&&M2(a)?V2(r,o,t,e):L(a)),$(a=>de(x({},n),{guardsResult:a})))})}function F2(t,e,n,r){return se(t).pipe(Le(i=>$2(i.component,i.route,n,e,r)),bt(i=>i!==!0,!0))}function V2(t,e,n,r){return se(e).pipe(fr(i=>po(j2(i.route.parent,r),L2(i.route,r),U2(t,i.path,n),B2(t,i.route,n))),bt(i=>i!==!0,!0))}function L2(t,e){return t!==null&&e&&e(new Um(t)),L(!0)}function j2(t,e){return t!==null&&e&&e(new jm(t)),L(!0)}function B2(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return L(!0);let i=r.map(o=>Uu(()=>{let s=Ga(e)??n,a=Go(o,s),c=P2(a)?a.canActivate(e,t):Kn(s,()=>a(e,t));return xr(c).pipe(bt())}));return L(i).pipe(qo())}function U2(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>T2(s)).filter(s=>s!==null).map(s=>Uu(()=>{let a=s.guards.map(c=>{let u=Ga(s.node)??n,l=Go(c,u),d=R2(l)?l.canActivateChild(r,t):Kn(u,()=>l(r,t));return xr(d).pipe(bt())});return L(a).pipe(qo())}));return L(o).pipe(qo())}function $2(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return L(!0);let s=o.map(a=>{let c=Ga(e)??i,u=Go(a,c),l=N2(u)?u.canDeactivate(t,e,n,r):Kn(c,()=>u(t,e,n,r));return xr(l).pipe(bt())});return L(s).pipe(qo())}function H2(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return L(!0);let o=i.map(s=>{let a=Go(s,t),c=x2(a)?a.canLoad(e,n):Kn(t,()=>a(e,n));return xr(c)});return L(o).pipe(qo(),Rb(r))}function Rb(t){return Kf(Te(e=>{if($o(e))throw Ab(t,e)}),$(e=>e===!0))}function z2(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return L(!0);let o=i.map(s=>{let a=Go(s,t),c=O2(a)?a.canMatch(e,n):Kn(t,()=>a(e,n));return xr(c)});return L(o).pipe(qo(),Rb(r))}var $a=class{constructor(e){this.segmentGroup=e||null}},md=class extends Error{constructor(e){super(),this.urlTree=e}};function Vo(t){return fo(new $a(t))}function q2(t){return fo(new k(4e3,!1))}function G2(t){return fo(Mb(!1,3))}var Qm=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return L(r);if(i.numberOfChildren>1||!i.children[Y])return q2(e.redirectTo);i=i.children[Y]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new md(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Sr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new he(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new k(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Ym={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function W2(t,e,n,r,i){let o=ry(t,e,n);return o.matched?(r=I2(e,r),z2(r,e,n,i).pipe($(s=>s===!0?o:x({},Ym)))):L(o)}function ry(t,e,n){if(e.path==="**")return K2(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?x({},Ym):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||HV)(n,t,e);if(!i)return x({},Ym);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?x(x({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function K2(t){return{matched:!0,parameters:t.length>0?db(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ab(t,e,n,r){return n.length>0&&Z2(t,n,r)?{segmentGroup:new he(e,Y2(r,new he(n,t.children))),slicedSegments:[]}:n.length===0&&X2(t,n,r)?{segmentGroup:new he(t.segments,Q2(t,e,n,r,t.children)),slicedSegments:n}:{segmentGroup:new he(t.segments,t.children),slicedSegments:n}}function Q2(t,e,n,r,i){let o={};for(let s of r)if(wd(t,n,s)&&!i[Tn(s)]){let a=new he([],{});o[Tn(s)]=a}return x(x({},i),o)}function Y2(t,e){let n={};n[Y]=e;for(let r of t)if(r.path===""&&Tn(r)!==Y){let i=new he([],{});n[Tn(r)]=i}return n}function Z2(t,e,n){return n.some(r=>wd(t,e,r)&&Tn(r)!==Y)}function X2(t,e,n){return n.some(r=>wd(t,e,r))}function wd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function J2(t,e,n,r){return Tn(t)!==r&&(r===Y||!wd(e,n,t))?!1:ry(e,t,n).matched}function eL(t,e,n){return e.length===0&&!t.children[n]}var Zm=class{};function tL(t,e,n,r,i,o,s="emptyOnly"){return new Xm(t,e,n,r,i,s,o).recognize()}var nL=31,Xm=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Qm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new k(4002,`'${e.segmentGroup}'`)}recognize(){let e=ab(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe($(n=>{let r=new Ba([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,{},Y,this.rootComponentType,null,{}),i=new Ft(r,n),o=new pd("",i),s=c2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Y).pipe(hr(r=>{if(r instanceof md)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof $a?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=ey(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe($(o=>o instanceof Ft?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return se(i).pipe(fr(o=>{let s=r.children[o],a=C2(n,o);return this.processSegmentGroup(e,a,s,o)}),oi((o,s)=>(o.push(...s),o)),pr(null),op(),Le(o=>{if(o===null)return Vo(r);let s=Nb(o);return rL(s),L(s)}))}processSegment(e,n,r,i,o,s){return se(n).pipe(fr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(hr(c=>{if(c instanceof $a)return L(null);throw c}))),bt(a=>!!a),hr(a=>{if(Pb(a))return eL(r,i,o)?L(new Zm):Vo(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return J2(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Vo(i):Vo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=ry(n,i,o);if(!a)return Vo(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>nL&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(Le(h=>this.processSegment(e,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=W2(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(De(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(De(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new Ba(l,h,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,oL(r),Tn(r),r.component??r._loadedComponent??null,r,sL(r)),{segmentGroup:m,slicedSegments:v}=ab(n,l,d,c);if(v.length===0&&m.hasChildren())return this.processChildren(u,c,m).pipe($(C=>C===null?null:new Ft(f,C)));if(c.length===0&&v.length===0)return L(new Ft(f,[]));let _=Tn(r)===o;return this.processSegment(u,c,m,v,_?Y:o,!0).pipe($(C=>new Ft(f,C instanceof Ft?[C]:[])))}))):Vo(n)))}getChildConfig(e,n,r){return n.children?L({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?L({routes:n._loadedRoutes,injector:n._loadedInjector}):H2(e,n,r,this.urlSerializer).pipe(Le(i=>i?this.configLoader.loadChildren(e,n).pipe(Te(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):G2(n))):L({routes:[],injector:e})}};function rL(t){t.sort((e,n)=>e.value.outlet===Y?-1:n.value.outlet===Y?1:e.value.outlet.localeCompare(n.value.outlet))}function iL(t){let e=t.value.routeConfig;return e&&e.path===""}function Nb(t){let e=[],n=new Set;for(let r of t){if(!iL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Nb(r.children);e.push(new Ft(r.value,i))}return e.filter(r=>!n.has(r))}function oL(t){return t.data||{}}function sL(t){return t.resolve||{}}function aL(t,e,n,r,i,o){return Le(s=>tL(t,e,n,r,s.extractedUrl,i,o).pipe($(({state:a,tree:c})=>de(x({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function cL(t,e){return Le(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return L(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of Ob(c))s.add(u);let a=0;return se(s).pipe(fr(c=>o.has(c)?uL(c,r,t,e):(c.data=ey(c,c.parent,t).resolve,L(void 0))),Te(()=>a++),mo(1),Le(c=>a===s.size?L(n):vt))})}function Ob(t){let e=t.children.map(n=>Ob(n)).flat();return[t,...e]}function uL(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Tb(i)&&(o[Ha]=i.title),lL(o,t,e,r).pipe($(s=>(t._resolvedData=s,t.data=ey(t,t.parent,n).resolve,null)))}function lL(t,e,n,r){let i=Mm(t);if(i.length===0)return L({});let o={};return se(i).pipe(Le(s=>dL(t[s],e,n,r).pipe(bt(),Te(a=>{o[s]=a}))),mo(1),rp(o),hr(s=>Pb(s)?vt:fo(s)))}function dL(t,e,n,r){let i=Ga(e)??r,o=Go(t,i),s=o.resolve?o.resolve(e,n):Kn(i,()=>o(e,n));return xr(s)}function Sm(t){return De(e=>{let n=t(e);return n?se(n).pipe($(()=>e)):L(e)})}var kb=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===Y);return i}getResolvedTitleForRoute(r){return r.data[Ha]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:()=>(()=>b(hL))(),providedIn:"root"});let t=e;return t})(),hL=(()=>{let e=class e extends kb{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(D(Cm))},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ka=new R("",{providedIn:"root",factory:()=>({})}),yd=new R("ROUTES"),iy=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=b(ql)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return L(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=xr(r.loadComponent()).pipe($(Fb),Te(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),go(()=>{this.componentLoaders.delete(r)})),o=new co(i,()=>new Ge).pipe(ao());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return L({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=fL(i,this.compiler,r,this.onLoadEndListener).pipe(go(()=>{this.childrenLoaders.delete(i)})),a=new co(s,()=>new Ge).pipe(ao());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function fL(t,e,n,r){return xr(t.loadChildren()).pipe($(Fb),Le(i=>i instanceof la||Array.isArray(i)?L(i):se(e.compileModuleAsync(i))),$(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(yd,[],{optional:!0,self:!0}).flat()),{routes:s.map(ny),injector:o}}))}function pL(t){return t&&typeof t=="object"&&"default"in t}function Fb(t){return pL(t)?t.default:t}var oy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:()=>(()=>b(gL))(),providedIn:"root"});let t=e;return t})(),gL=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vb=new R(""),Lb=new R("");function mL(t,e,n){let r=t.get(Lb),i=t.get(ht);return t.get(re).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),yL(t))),{onViewTransitionCreated:c}=r;return c&&Kn(t,()=>c({transition:a,from:e,to:n})),s})}function yL(t){return new Promise(e=>{Qg(e,{injector:t})})}var sy=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ge,this.transitionAbortSubject=new Ge,this.configLoader=b(iy),this.environmentInjector=b(Pt),this.urlSerializer=b(za),this.rootContexts=b(qa),this.location=b(Fo),this.inputBindingEnabled=b(_d,{optional:!0})!==null,this.titleStrategy=b(kb),this.options=b(Ka,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=b(oy),this.createViewTransition=b(Vb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>L(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Vm(o)),i=o=>this.events.next(new Lm(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(de(x(x({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Je({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Na,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ke(s=>s.id!==0),$(s=>de(x({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),De(s=>{this.currentTransition=s;let a=!1,c=!1;return L(s).pipe(Te(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?de(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),De(u=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Mr(u.id,this.urlSerializer.serialize(u.rawUrl),h,0)),u.resolve(null),vt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return L(u).pipe(De(h=>{let f=this.transitions?.getValue();return this.events.next(new Ho(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?vt:Promise.resolve(h)}),aL(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Te(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=de(x({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new ld(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:m,restoredState:v,extras:_}=u,C=new Ho(h,this.urlSerializer.serialize(f),m,v);this.events.next(C);let O=Db(f,this.rootComponentType).snapshot;return this.currentTransition=s=de(x({},u),{targetSnapshot:O,urlAfterRedirects:f,extras:de(x({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,L(s)}else{let h="";return this.events.next(new Mr(u.id,this.urlSerializer.serialize(u.extractedUrl),h,1)),u.resolve(null),vt}}),Te(u=>{let l=new Nm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),$(u=>(this.currentTransition=s=de(x({},u),{guards:b2(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),k2(this.environmentInjector,u=>this.events.next(u)),Te(u=>{if(s.guardsResult=u.guardsResult,$o(u.guardsResult))throw Ab(this.urlSerializer,u.guardsResult);let l=new Om(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Ke(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",3),!1)),Sm(u=>{if(u.guards.canActivateChecks.length)return L(u).pipe(Te(l=>{let d=new km(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),De(l=>{let d=!1;return L(l).pipe(cL(this.paramsInheritanceStrategy,this.environmentInjector),Te({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",2)}}))}),Te(l=>{let d=new Fm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Sm(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Te(f=>{d.component=f}),$(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Qs(l(u.targetSnapshot.root)).pipe(pr(null),Hn(1))}),Sm(()=>this.afterPreactivation()),De(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?se(d).pipe($(()=>s)):L(s)}),$(u=>{let l=y2(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=de(x({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Te(()=>{this.events.next(new La)}),D2(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Hn(1),Te({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),ap(this.transitionAbortSubject.pipe(Te(u=>{throw u}))),go(()=>{if(!a&&!c){let u="";this.cancelNavigationTransition(s,u,1)}this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),hr(u=>{if(c=!0,xb(u))this.events.next(new Ar(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),w2(u)?this.events.next(new ja(u.url)):s.resolve(!1);else{this.events.next(new Va(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(u))}catch(l){s.reject(l)}}return vt}))}))}cancelNavigationTransition(r,i,o){let s=new Ar(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vL(t){return t!==Na}var _L=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:()=>(()=>b(wL))(),providedIn:"root"});let t=e;return t})(),Jm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},wL=(()=>{let e=class e extends Jm{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=gi(e)))(o||e)}})(),e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:()=>(()=>b(EL))(),providedIn:"root"});let t=e;return t})(),EL=(()=>{let e=class e extends jb{constructor(){super(...arguments),this.location=b(Fo),this.urlSerializer=b(za),this.options=b(Ka,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=b(oy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Sr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Db(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ho)this.stateMemento=this.createStateMemento();else if(r instanceof Mr)this.rawUrlTree=i.initialUrl;else if(r instanceof ld){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof La?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Ar&&(r.code===3||r.code===2)?this.restoreHistory(i):r instanceof Va?this.restoreHistory(i,!0):r instanceof Jn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=x(x({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=x(x({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=gi(e)))(o||e)}})(),e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Pa||{});function Bb(t,e){t.events.pipe(Ke(n=>n instanceof Jn||n instanceof Ar||n instanceof Va||n instanceof Mr),$(n=>n instanceof Jn||n instanceof Mr?Pa.COMPLETE:(n instanceof Ar?n.code===0||n.code===1:!1)?Pa.REDIRECTING:Pa.FAILED),Ke(n=>n!==Pa.REDIRECTING),Hn(1)).subscribe(()=>{e()})}function IL(t){throw t}var CL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Di=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=b(zl),this.stateManager=b(jb),this.options=b(Ka,{optional:!0})||{},this.pendingTasks=b(Da),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=b(sy),this.urlSerializer=b(za),this.location=b(Fo),this.urlHandlingStrategy=b(oy),this._events=new Ge,this.errorHandler=this.options.errorHandler||IL,this.navigated=!1,this.routeReuseStrategy=b(_L),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=b(yd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!b(_d,{optional:!0}),this.eventsSubscription=new Re,this.isNgZoneEnabled=b(re)instanceof re&&re.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Ar&&i.code!==0&&i.code!==1)this.navigated=!0;else if(i instanceof Jn)this.navigated=!0;else if(i instanceof ja){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||vL(o.source)};this.scheduleNavigation(a,Na,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}TL(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Na,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)}))}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=x({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(ny),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=x(x({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=wb(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return Eb(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=$o(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Na,null,i)}navigate(r,i={skipLocationChange:!1}){return bL(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=x({},CL):i===!1?o=x({},DL):o=i,$o(r))return nb(this.currentUrlTree,r,o);let s=this.parseUrl(r);return nb(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.keys(r).reduce((i,o)=>{let s=r[o];return s!=null&&(i[o]=s),i},{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return Bb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function bL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new k(4008,!1)}function TL(t){return!(t instanceof La)&&!(t instanceof ja)}var vd=class{};var SL=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ke(r=>r instanceof Jn),fr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Hl(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return se(o).pipe(dr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=L(null);let s=o.pipe(Le(a=>a===null?L(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return se([s,a]).pipe(dr())}else return s})}};e.\u0275fac=function(i){return new(i||e)(D(Di),D(ql),D(Pt),D(vd),D(iy))},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ub=new R(""),AL=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ho?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Jn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Mr&&r.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof dd&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new dd(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){PC()},e.\u0275prov=F({token:e,factory:e.\u0275fac});let t=e;return t})();function ML(t){return t.routerState.root}function Qa(t,e){return{\u0275kind:t,\u0275providers:e}}function xL(){let t=b(Ot);return e=>{let n=t.get(Zn);if(e!==n.components[0])return;let r=t.get(Di),i=t.get($b);t.get(ay)===1&&r.initialNavigation(),t.get(Hb,null,ee.Optional)?.setUpPreloading(),t.get(Ub,null,ee.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var $b=new R("",{factory:()=>new Ge}),ay=new R("",{providedIn:"root",factory:()=>1});function PL(){return Qa(2,[{provide:ay,useValue:0},{provide:Kl,multi:!0,deps:[Ot],useFactory:e=>{let n=e.get(AD,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Di),o=e.get($b);Bb(i,()=>{r(!0)}),e.get(sy).afterPreactivation=()=>(r(!0),o.closed?L(void 0):o),i.initialNavigation()}))}}])}function RL(){return Qa(3,[{provide:Kl,multi:!0,useFactory:()=>{let e=b(Di);return()=>{e.setUpLocationChangeListener()}}},{provide:ay,useValue:2}])}var Hb=new R("");function NL(t){return Qa(0,[{provide:Hb,useExisting:SL},{provide:vd,useExisting:t}])}function OL(){return Qa(8,[sb,{provide:_d,useExisting:sb}])}function kL(t){let e=[{provide:Vb,useValue:mL},{provide:Lb,useValue:x({skipNextTransition:!!t?.skipInitialTransition},t)}];return Qa(9,e)}var cb=new R("ROUTER_FORROOT_GUARD"),FL=[Fo,{provide:za,useClass:ka},Di,qa,{provide:zo,useFactory:ML,deps:[Di]},iy,[]],cy=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[FL,[],{provide:yd,multi:!0,useValue:r},{provide:cb,useFactory:BL,deps:[[Di,new mi,new Pl]]},{provide:Ka,useValue:i||{}},i?.useHash?LL():jL(),VL(),i?.preloadingStrategy?NL(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?UL(i):[],i?.bindToComponentInputs?OL().\u0275providers:[],i?.enableViewTransitions?kL().\u0275providers:[],$L()]}}static forChild(r){return{ngModule:e,providers:[{provide:yd,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(D(cb,8))},e.\u0275mod=Oe({type:e}),e.\u0275inj=Ne({});let t=e;return t})();function VL(){return{provide:Ub,useFactory:()=>{let t=b(FD),e=b(re),n=b(Ka),r=b(sy),i=b(za);return n.scrollOffset&&t.setOffset(n.scrollOffset),new AL(i,r,t,e,n)}}}function LL(){return{provide:wi,useClass:xD}}function jL(){return{provide:wi,useClass:fm}}function BL(t){return"guarded"}function UL(t){return[t.initialNavigation==="disabled"?RL().\u0275providers:[],t.initialNavigation==="enabledBlocking"?PL().\u0275providers:[]]}var ub=new R("");function $L(){return[{provide:ub,useFactory:xL},{provide:ko,multi:!0,useExisting:ub}]}var HL=[],zb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Ne({imports:[cy.forRoot(HL),cy]});let t=e;return t})();var Jb=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(ue(Qn),ue(En))},e.\u0275dir=et({type:e});let t=e;return t})(),zL=(()=>{let e=class e extends Jb{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=gi(e)))(o||e)}})(),e.\u0275dir=et({type:e,features:[In]});let t=e;return t})(),eT=new R("NgValueAccessor");var qL={provide:eT,useExisting:Er(()=>xd),multi:!0};function GL(){let t=Dn()?Dn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var WL=new R("CompositionEventMode"),xd=(()=>{let e=class e extends Jb{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!GL())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(ue(Qn),ue(En),ue(WL,8))},e.\u0275dir=et({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Yn("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Oo([qL]),In]});let t=e;return t})();function Pr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function tT(t){return t!=null&&typeof t.length=="number"}var Pd=new R("NgValidators"),nT=new R("NgAsyncValidators"),KL=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Sn=class{static min(e){return QL(e)}static max(e){return YL(e)}static required(e){return rT(e)}static requiredTrue(e){return ZL(e)}static email(e){return XL(e)}static minLength(e){return JL(e)}static maxLength(e){return ej(e)}static pattern(e){return iT(e)}static nullValidator(e){return Cd(e)}static compose(e){return lT(e)}static composeAsync(e){return hT(e)}};function QL(t){return e=>{if(Pr(e.value)||Pr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function YL(t){return e=>{if(Pr(e.value)||Pr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function rT(t){return Pr(t.value)?{required:!0}:null}function ZL(t){return t.value===!0?null:{required:!0}}function XL(t){return Pr(t.value)||KL.test(t.value)?null:{email:!0}}function JL(t){return e=>Pr(e.value)||!tT(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function ej(t){return e=>tT(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function iT(t){if(!t)return Cd;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Pr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function Cd(t){return null}function oT(t){return t!=null}function sT(t){return _i(t)?se(t):t}function aT(t){let e={};return t.forEach(n=>{e=n!=null?x(x({},e),n):e}),Object.keys(e).length===0?null:e}function cT(t,e){return e.map(n=>n(t))}function tj(t){return!t.validate}function uT(t){return t.map(e=>tj(e)?e:n=>e.validate(n))}function lT(t){if(!t)return null;let e=t.filter(oT);return e.length==0?null:function(n){return aT(cT(n,e))}}function dT(t){return t!=null?lT(uT(t)):null}function hT(t){if(!t)return null;let e=t.filter(oT);return e.length==0?null:function(n){let r=cT(n,e).map(sT);return tp(r).pipe($(aT))}}function fT(t){return t!=null?hT(uT(t)):null}function qb(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function pT(t){return t._rawValidators}function gT(t){return t._rawAsyncValidators}function uy(t){return t?Array.isArray(t)?t:[t]:[]}function Dd(t,e){return Array.isArray(t)?t.includes(e):t===e}function Gb(t,e){let n=uy(e);return uy(t).forEach(i=>{Dd(n,i)||n.push(i)}),n}function Wb(t,e){return uy(e).filter(n=>!Dd(t,n))}var bd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ko=class extends bd{get formDirective(){return null}get path(){return null}},Xa=class extends bd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Td=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},nj={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},rG=de(x({},nj),{"[class.ng-submitted]":"isSubmitted"}),mT=(()=>{let e=class e extends Td{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ue(Xa,2))},e.\u0275dir=et({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Cn("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[In]});let t=e;return t})(),yT=(()=>{let e=class e extends Td{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ue(Ko,10))},e.\u0275dir=et({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Cn("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[In]});let t=e;return t})();var Ya="VALID",Ed="INVALID",Wo="PENDING",Za="DISABLED";function hy(t){return(Rd(t)?t.validators:t)||null}function rj(t){return Array.isArray(t)?dT(t):t||null}function fy(t,e){return(Rd(e)?e.asyncValidators:t)||null}function ij(t){return Array.isArray(t)?fT(t):t||null}function Rd(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function vT(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new k(1e3,"");if(!r[n])throw new k(1001,"")}function _T(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new k(1002,"")})}var Qo=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ya}get invalid(){return this.status===Ed}get pending(){return this.status==Wo}get disabled(){return this.status===Za}get enabled(){return this.status!==Za}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Gb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Gb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Wb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Wb(e,this._rawAsyncValidators))}hasValidator(e){return Dd(this._rawValidators,e)}hasAsyncValidator(e){return Dd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wo,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Za,this.errors=null,this._forEachChild(r=>{r.disable(de(x({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(x({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ya,this._forEachChild(r=>{r.enable(de(x({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(x({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ya||this.status===Wo)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Za:Ya}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wo,this._hasOwnPendingAsyncValidator=!0;let n=sT(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new je,this.statusChanges=new je}_calculateStatus(){return this._allControlsDisabled()?Za:this.errors?Ed:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wo)?Wo:this._anyControlsHaveStatus(Ed)?Ed:Ya}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Rd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=rj(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=ij(this._rawAsyncValidators)}},Sd=class extends Qo{constructor(e,n,r){super(hy(n),fy(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){_T(this,!0,e),Object.keys(e).forEach(r=>{vT(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ly=class extends Sd{};var py=new R("CallSetDisabledState",{providedIn:"root",factory:()=>Nd}),Nd="always";function oj(t,e){return[...e.path,t]}function Kb(t,e,n=Nd){gy(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),aj(t,e),uj(t,e),cj(t,e),sj(t,e)}function Qb(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Md(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ad(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function sj(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function gy(t,e){let n=pT(t);e.validator!==null?t.setValidators(qb(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=gT(t);e.asyncValidator!==null?t.setAsyncValidators(qb(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Ad(e._rawValidators,i),Ad(e._rawAsyncValidators,i)}function Md(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=pT(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=gT(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Ad(e._rawValidators,r),Ad(e._rawAsyncValidators,r),n}function aj(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&wT(t,e)})}function cj(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&wT(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function wT(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function uj(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function lj(t,e){t==null,gy(t,e)}function dj(t,e){return Md(t,e)}function hj(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function fj(t){return Object.getPrototypeOf(t.constructor)===zL}function pj(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function gj(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===xd?n=o:fj(o)?r=o:i=o}),i||r||n||null}function mj(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Yb(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Zb(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Id=class extends Qo{constructor(e=null,n,r){super(hy(n),fy(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Zb(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Yb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Yb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Zb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var yj=t=>t instanceof Id;var ET=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=et({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var vj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Ne({});let t=e;return t})();var IT=new R("NgModelWithFormControlWarning");var _j={provide:Ko,useExisting:Er(()=>my)},my=(()=>{let e=class e extends Ko{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new je,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Md(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return Kb(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){Qb(r.control||null,r,!1),mj(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,pj(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,o=this.form.get(r.path);i!==o&&(Qb(i||null,r),yj(o)&&(Kb(o,r,this.callSetDisabledState),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);lj(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&dj(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){gy(this.form,this),this._oldForm&&Md(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(ue(Pd,10),ue(nT,10),ue(py,8))},e.\u0275dir=et({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&Yn("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Oo([_j]),In,Cr]});let t=e;return t})();var wj={provide:Xa,useExisting:Er(()=>yy)},yy=(()=>{let e=class e extends Xa{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new je,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=gj(this,s)}ngOnChanges(r){this._added||this._setUpControl(),hj(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return oj(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(ue(Ko,13),ue(Pd,10),ue(nT,10),ue(eT,10),ue(IT,8))},e.\u0275dir=et({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Oo([wj]),In,Cr]});let t=e;return t})();var CT=(()=>{let e=class e{constructor(){this._validator=Cd}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Cd,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=et({type:e,features:[Cr]});let t=e;return t})();var Ej={provide:Pd,useExisting:Er(()=>vy),multi:!0};var vy=(()=>{let e=class e extends CT{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ql,this.createValidator=r=>rT}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=gi(e)))(o||e)}})(),e.\u0275dir=et({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&Ea("required",o._enabled?"":null)},inputs:{required:"required"},features:[Oo([Ej]),In]});let t=e;return t})();var Ij={provide:Pd,useExisting:Er(()=>_y),multi:!0},_y=(()=>{let e=class e extends CT{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=r=>r,this.createValidator=r=>iT(r)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=gi(e)))(o||e)}})(),e.\u0275dir=et({type:e,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,o){i&2&&Ea("pattern",o._enabled?o.pattern:null)},inputs:{pattern:"pattern"},features:[Oo([Ij]),In]});let t=e;return t})();var DT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Ne({imports:[vj]});let t=e;return t})(),dy=class extends Qo{constructor(e,n,r){super(hy(n),fy(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){_T(this,!1,e),e.forEach((r,i)=>{vT(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Xb(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var bT=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let o=this._reduceControls(r),s={};return Xb(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Sd(o,s)}record(r,i=null){let o=this._reduceControls(r);return new ly(o,i)}control(r,i,o){let s={};return this.useNonNullable?(Xb(i)?s=i:(s.validators=i,s.asyncValidators=o),new Id(r,de(x({},s),{nonNullable:!0}))):new Id(r,i,o)}array(r,i,o){let s=r.map(a=>this._createControl(a));return new dy(s,i,o)}_reduceControls(r){let i={};return Object.keys(r).forEach(o=>{i[o]=this._createControl(r[o])}),i}_createControl(r){if(r instanceof Id)return r;if(r instanceof Qo)return r;if(Array.isArray(r)){let i=r[0],o=r.length>1?r[1]:null,s=r.length>2?r[2]:null;return this.control(i,o,s)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var TT=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:py,useValue:r.callSetDisabledState??Nd}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Ne({imports:[DT]});let t=e;return t})(),ST=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:IT,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:py,useValue:r.callSetDisabledState??Nd}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Ne({imports:[DT]});let t=e;return t})();var Dj="firebase",bj="10.7.1";lr(Dj,bj,"app");var Yo=new Wn("ANGULARFIRE2_VERSION");var Tj=(t,e)=>{let n=e?[e]:R0(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},bi=class{constructor(){return Tj(Sj)}},Sj="app-check";function wy(){}var Od=class{zone;delegate;constructor(e,n=Xf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Ey=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wy,{},wy,wy)),n.pipe(Te({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},kd=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Od(Zone.current)),this.insideAngular=n.run(()=>new Od(Zone.current,Ks)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(D(re))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Aj(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function It(t){return Mj(Aj())(t)}function Mj(t){return function(n){return n=n.lift(new Ey(t.ngZone)),n.pipe(Jt(t.outsideAngular),Ut(t.insideAngular))}}var Rj=new Map,Nj={activated:!1,tokenObservers:[]},Oj={initialized:!1,enabled:!1};function sn(t){return Rj.get(t)||Object.assign({},Nj)}function NT(){return Oj}var kj="https://content-firebaseappcheck.googleapis.com/v1";var Fj="exchangeDebugToken",MT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},IG=24*60*60*1e3;var Cy=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new Lf,this.pending.promise.catch(n=>{}),yield Vj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Lf,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Vj(t){return new Promise(e=>{setTimeout(e,t)})}var Lj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Rr=new x0("appCheck","AppCheck",Lj);function OT(t){if(!sn(t).activated)throw Rr.create("use-before-activation",{appName:t.name})}function kT(r,i){return y(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(f){throw Rr.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw Rr.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(f){throw Rr.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=u.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Rr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:u.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function FT(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${kj}/projects/${n}/apps/${r}:${Fj}?key=${i}`,body:{debug_token:e}}}var jj="firebase-app-check-database",Bj=1,Dy="firebase-app-check-store";var Fd=null;function Uj(){return Fd||(Fd=new Promise((t,e)=>{try{let n=indexedDB.open(jj,Bj);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Rr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Dy,{keyPath:"compositeKey"})}}}catch(n){e(Rr.create("storage-open",{originalErrorMessage:n?.message}))}}),Fd)}function $j(t,e){return Hj(zj(t),e)}function Hj(t,e){return y(this,null,function*(){let r=(yield Uj()).transaction(Dy,"readwrite"),o=r.objectStore(Dy).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Rr.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function zj(t){return`${t.options.appId}-${t.name}`}var by=new mu("@firebase/app-check");function Iy(t,e){return gu()?$j(t,e).catch(n=>{by.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function VT(){return NT().enabled}function LT(){return y(this,null,function*(){let t=NT();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var qj={error:"UNKNOWN_ERROR"};function Gj(t){return T0.encodeString(JSON.stringify(t),!1)}function Ty(t,e=!1){return y(this,null,function*(){let n=t.app;OT(n);let r=sn(n),i=r.token,o;if(i&&!Ja(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Ja(c)?i=c:yield Iy(n,void 0))}if(!e&&i&&Ja(i))return{token:i.token};let s=!1;if(VT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=kT(FT(n,yield LT()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Iy(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield sn(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?by.warn(c.message):by.error(c),o=c}let a;return i?o?Ja(i)?a={token:i.token,internalError:o}:a=PT(o):(a={token:i.token},r.token=i,yield Iy(n,i)):a=PT(o),s&&Yj(n,a),a})}function Wj(t){return y(this,null,function*(){let e=t.app;OT(e);let{provider:n}=sn(e);if(VT()){let r=yield LT(),{token:i}=yield kT(FT(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function Kj(t,e,n,r){let{app:i}=t,o=sn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ja(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),xT(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>xT(t))}function jT(t,e){let n=sn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function xT(t){let{app:e}=t,n=sn(e),r=n.tokenRefresher;r||(r=Qj(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Qj(t){let{app:e}=t;return new Cy(()=>y(this,null,function*(){let n=sn(e),r;if(n.token?r=yield Ty(t,!0):r=yield Ty(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=sn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},MT.RETRIAL_MIN_WAIT,MT.RETRIAL_MAX_WAIT)}function Yj(t,e){let n=sn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ja(t){return t.expireTimeMillis-Date.now()>0}function PT(t){return{token:Gj(qj),error:t}}var Sy=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=sn(this.app);for(let n of e)jT(this.app,n.next);return Promise.resolve()}};function Zj(t,e){return new Sy(t,e)}function Xj(t){return{getToken:e=>Ty(t,e),getLimitedUseToken:()=>Wj(t),addTokenListener:e=>Kj(t,"INTERNAL",e),removeTokenListener:e=>jT(t.app,e)}}var Jj="@firebase/app-check",e4="0.8.1";var t4="app-check",RT="app-check-internal";function n4(){zs(new ti(t4,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Zj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(RT).initialize()})),zs(new ti(RT,t=>{let e=t.getProvider("app-check").getImmediate();return Xj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),lr(Jj,e4)}n4();var r4=["localhost","0.0.0.0","127.0.0.1"],OG=typeof window<"u"&&r4.includes(window.location.hostname);var i4="firebase",o4="10.7.1";yt.registerVersion(i4,o4,"app-compat");var s4=["ngOnDestroy"],$T=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(s4.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(l=>{let d=l?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,d),d})})})});var Vd=class{constructor(e){return e}},Zo=new R("angularfire2.app.options"),Xo=new R("angularfire2.app.name");function ec(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=yt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>yt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;a4("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Vd(s)}var a4=(t,...e)=>{sm()&&typeof console<"u"&&console[t](...e)},c4={provide:Vd,useFactory:ec,deps:[Zo,re,[new mi,Xo]]},HT=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Zo,useValue:n},{provide:Xo,useValue:r}]}}constructor(n){yt.registerVersion("angularfire",Yo.full,"core"),yt.registerVersion("angularfire",Yo.full,"app-compat"),yt.registerVersion("angular",hD.full,n.toString())}static \u0275fac=function(r){return new(r||t)(D(dt))};static \u0275mod=Oe({type:t});static \u0275inj=Ne({providers:[c4]})}return t})();function Ld(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return u4(i,s)||(UT("error",`${e} was already initialized on the ${n} Firebase App with different settings.${l4?" You may need to reload as Firebase is not HMR aware.":""}`),UT("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function u4(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var l4=typeof module<"u"&&!!module.hot,UT=(t,...e)=>{sm()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Ay=new R("angularfire2.auth.use-emulator"),My=new R("angularfire2.auth.settings"),xy=new R("angularfire2.auth.tenant-id"),Py=new R("angularfire2.auth.langugage-code"),Ry=new R("angularfire2.auth.use-device-language"),Ny=new R("angularfire.auth.persistence"),Oy=(t,e,n,r,i,o,s,a)=>Ld(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[u,l]of Object.entries(s))c.settings[u]=l;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),zT=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,u,l,d,h,f){let m=new Ge,v=L(void 0).pipe(Ut(s.outsideAngular),De(()=>o.runOutsideAngular(()=>import("./chunk-KTRENSU5.js"))),$(()=>ec(n,o,r)),$(_=>Oy(_,o,a,u,l,d,c,h)),Hu({bufferSize:1,refCount:!1}));if(Ei(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=L(null);else{v.pipe(bt()).subscribe();let _=v.pipe(De(M=>M.getRedirectResult().then(U=>U,()=>null)),It,Hu({bufferSize:1,refCount:!1})),C=v.pipe(De(M=>new J(U=>({unsubscribe:o.runOutsideAngular(()=>M.onAuthStateChanged(H=>U.next(H),H=>U.error(H),()=>U.complete()))})))),O=v.pipe(De(M=>new J(U=>({unsubscribe:o.runOutsideAngular(()=>M.onIdTokenChanged(H=>U.next(H),H=>U.error(H),()=>U.complete()))}))));this.authState=_.pipe(zu(C),Jt(s.outsideAngular),Ut(s.insideAngular)),this.user=_.pipe(zu(O),Jt(s.outsideAngular),Ut(s.insideAngular)),this.idToken=this.user.pipe(De(M=>M?se(M.getIdToken()):L(null))),this.idTokenResult=this.user.pipe(De(M=>M?se(M.getIdTokenResult()):L(null))),this.credential=np(_,m,this.authState.pipe(Ke(M=>!M))).pipe($(M=>M?.user?M:null),Jt(s.outsideAngular),Ut(s.insideAngular))}return $T(this,v,o,{spy:{apply:(_,C,O)=>{(_.startsWith("signIn")||_.startsWith("createUser"))&&O.then(M=>m.next(M))}}})}static \u0275fac=function(r){return new(r||t)(D(Zo),D(Xo,8),D(dt),D(re),D(kd),D(Ay,8),D(My,8),D(xy,8),D(Py,8),D(Ry,8),D(Ny,8),D(bi,8))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var h4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cn={},S,nv=nv||{},G=h4||self;function Xd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function pc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function f4(t){return Object.prototype.hasOwnProperty.call(t,ky)&&t[ky]||(t[ky]=++p4)}var ky="closure_uid_"+(1e9*Math.random()>>>0),p4=0;function g4(t,e,n){return t.call.apply(t.bind,arguments)}function m4(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function ot(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ot=g4:ot=m4,ot.apply(null,arguments)}function jd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Ye(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Nr(){this.s=this.s,this.o=this.o}var y4=0;Nr.prototype.s=!1;Nr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),y4!=0)&&f4(this)};Nr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var rS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function rv(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function qT(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Xd(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function st(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var v4=function(){if(!G.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};G.addEventListener("test",n,e),G.removeEventListener("test",n,e)}catch{}return t}();function sc(t){return/^[\s\xa0]*$/.test(t)}function Jd(){var t=G.navigator;return t&&(t=t.userAgent)?t:""}function An(t){return Jd().indexOf(t)!=-1}function iv(t){return iv[" "](t),t}iv[" "]=function(){};function _4(t,e){var n=aB;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var w4=An("Opera"),ns=An("Trident")||An("MSIE"),iS=An("Edge"),By=iS||ns,oS=An("Gecko")&&!(Jd().toLowerCase().indexOf("webkit")!=-1&&!An("Edge"))&&!(An("Trident")||An("MSIE"))&&!An("Edge"),E4=Jd().toLowerCase().indexOf("webkit")!=-1&&!An("Edge");function sS(){var t=G.document;return t?t.documentMode:void 0}var Uy;e:{if(Bd="",Ud=function(){var t=Jd();if(oS)return/rv:([^\);]+)(\)|;)/.exec(t);if(iS)return/Edge\/([\d\.]+)/.exec(t);if(ns)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(E4)return/WebKit\/(\S+)/.exec(t);if(w4)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Ud&&(Bd=Ud?Ud[1]:""),ns&&($d=sS(),$d!=null&&$d>parseFloat(Bd))){Uy=String($d);break e}Uy=Bd}var Bd,Ud,$d,$y;G.document&&ns?(Fy=sS(),$y=Fy||parseInt(Uy,10)||void 0):$y=void 0;var Fy,I4=$y;function ac(t,e){if(st.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(oS){e:{try{iv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:C4[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ac.$.h.call(this)}}Ye(ac,st);var C4={2:"touch",3:"pen",4:"mouse"};ac.prototype.h=function(){ac.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var gc="closure_listenable_"+(1e6*Math.random()|0),D4=0;function b4(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++D4,this.fa=this.ia=!1}function eh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ov(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function T4(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function aS(t){let e={};for(let n in t)e[n]=t[n];return e}var GT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cS(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<GT.length;o++)n=GT[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function th(t){this.src=t,this.g={},this.h=0}th.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=zy(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new b4(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function Hy(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=rS(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(eh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function zy(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var sv="closure_lm_"+(1e6*Math.random()|0),Vy={};function uS(t,e,n,r,i){if(r&&r.once)return dS(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)uS(t,e[o],n,r,i);return null}return n=uv(n),t&&t[gc]?t.O(e,n,pc(r)?!!r.capture:!!r,i):lS(t,e,n,!1,r,i)}function lS(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=pc(i)?!!i.capture:!!i,a=cv(t);if(a||(t[sv]=a=new th(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=S4(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)v4||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(fS(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function S4(){function t(n){return e.call(t.src,t.listener,n)}let e=A4;return t}function dS(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)dS(t,e[o],n,r,i);return null}return n=uv(n),t&&t[gc]?t.P(e,n,pc(r)?!!r.capture:!!r,i):lS(t,e,n,!0,r,i)}function hS(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hS(t,e[o],n,r,i);else r=pc(r)?!!r.capture:!!r,n=uv(n),t&&t[gc]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=zy(o,n,r,i),-1<n&&(eh(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=cv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=zy(e,n,r,i)),(n=-1<t?e[t]:null)&&av(n))}function av(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[gc])Hy(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fS(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cv(e))?(Hy(n,t),n.h==0&&(n.src=null,e[sv]=null)):eh(t)}}}function fS(t){return t in Vy?Vy[t]:Vy[t]="on"+t}function A4(t,e){if(t.fa)t=!0;else{e=new ac(e,this);var n=t.listener,r=t.la||t.src;t.ia&&av(t),t=n.call(r,e)}return t}function cv(t){return t=t[sv],t instanceof th?t:null}var Ly="__closure_events_fn_"+(1e9*Math.random()>>>0);function uv(t){return typeof t=="function"?t:(t[Ly]||(t[Ly]=function(e){return t.handleEvent(e)}),t[Ly])}function Qe(){Nr.call(this),this.i=new th(this),this.S=this,this.J=null}Ye(Qe,Nr);Qe.prototype[gc]=!0;Qe.prototype.removeEventListener=function(t,e,n,r){hS(this,t,e,n,r)};function nt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new st(e,t);else if(e instanceof st)e.target=e.target||t;else{var i=e;e=new st(r,t),cS(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Hd(s,r,!0,e)&&i}if(s=e.g=t,i=Hd(s,r,!0,e)&&i,i=Hd(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=Hd(s,r,!1,e)&&i}Qe.prototype.N=function(){if(Qe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)eh(n[r]);delete t.g[e],t.h--}}this.J=null};Qe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Qe.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Hd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&Hy(t.i,s),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var lv=G.JSON.stringify,qy=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function M4(){var t=dv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Gy=class{constructor(){this.h=this.g=null}add(e,n){let r=pS.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},pS=new qy(()=>new Wy,t=>t.reset()),Wy=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function x4(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function P4(t){G.setTimeout(()=>{throw t},0)}var cc,uc=!1,dv=new Gy,gS=()=>{let t=G.Promise.resolve(void 0);cc=()=>{t.then(R4)}},R4=()=>{for(var t;t=M4();){try{t.h.call(t.g)}catch(n){P4(n)}var e=pS;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}uc=!1};function nh(t,e){Qe.call(this),this.h=t||1,this.g=e||G,this.j=ot(this.qb,this),this.l=Date.now()}Ye(nh,Qe);S=nh.prototype;S.ga=!1;S.T=null;S.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),nt(this,"tick"),this.ga&&(hv(this),this.start()))}};S.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function hv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}S.N=function(){nh.$.N.call(this),hv(this),delete this.g};function fv(t,e,n){if(typeof t=="function")n&&(t=ot(t,n));else if(t&&typeof t.handleEvent=="function")t=ot(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:G.setTimeout(t,e||0)}function mS(t){t.g=fv(()=>{t.g=null,t.i&&(t.i=!1,mS(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Ky=class extends Nr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mS(this)}N(){super.N(),this.g&&(G.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function lc(t){Nr.call(this),this.h=t,this.g={}}Ye(lc,Nr);var WT=[];function yS(t,e,n,r){Array.isArray(n)||(n&&(WT[0]=n.toString()),n=WT);for(var i=0;i<n.length;i++){var o=uS(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function vS(t){ov(t.g,function(e,n){this.g.hasOwnProperty(n)&&av(e)},t),t.g={}}lc.prototype.N=function(){lc.$.N.call(this),vS(this)};lc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function rh(){this.g=!0}rh.prototype.Ea=function(){this.g=!1};function N4(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");s=2<=d.length&&d[1]=="type"?s+(l+"="+u+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function O4(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function es(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+F4(t,n)+(r?" "+r:"")})}function k4(t,e){t.info(function(){return"TIMEOUT: "+e})}rh.prototype.info=function(){};function F4(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return lv(n)}catch{return e}}var Mi={},KT=null;function ih(){return KT=KT||new Qe}Mi.Ta="serverreachability";function _S(t){st.call(this,Mi.Ta,t)}Ye(_S,st);function dc(t){let e=ih();nt(e,new _S(e))}Mi.STAT_EVENT="statevent";function wS(t,e){st.call(this,Mi.STAT_EVENT,t),this.stat=e}Ye(wS,st);function ft(t){let e=ih();nt(e,new wS(e,t))}Mi.Ua="timingevent";function ES(t,e){st.call(this,Mi.Ua,t),this.size=e}Ye(ES,st);function mc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return G.setTimeout(function(){t()},e)}var oh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},IS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function pv(){}pv.prototype.h=null;function QT(t){return t.h||(t.h=t.i())}function CS(){}var yc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function gv(){st.call(this,"d")}Ye(gv,st);function mv(){st.call(this,"c")}Ye(mv,st);var Qy;function sh(){}Ye(sh,pv);sh.prototype.g=function(){return new XMLHttpRequest};sh.prototype.i=function(){return{}};Qy=new sh;function vc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new lc(this),this.P=V4,t=By?125:void 0,this.V=new nh(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new DS}function DS(){this.i=null,this.g="",this.h=!1}var V4=45e3,bS={},Yy={};S=vc.prototype;S.setTimeout=function(t){this.P=t};function Zy(t,e,n){t.L=1,t.A=ch(tr(e)),t.u=n,t.S=!0,TS(t,null)}function TS(t,e){t.G=Date.now(),_c(t),t.B=tr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),OS(n.i,"t",r),t.o=0,n=t.l.J,t.h=new DS,t.g=tA(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Ky(ot(t.Pa,t,t.g),t.O)),yS(t.U,t.g,"readystatechange",t.nb),e=t.I?aS(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),dc(),N4(t.j,t.v,t.B,t.m,t.W,t.u)}S.nb=function(t){t=t.target;let e=this.M;e&&Mn(t)==3?e.l():this.Pa(t)};S.Pa=function(t){try{if(t==this.g)e:{let l=Mn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||By||this.g&&(this.h.h||this.g.ja()||JT(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?dc(3):dc(2)),ah(this);var n=this.g.da();this.ca=n;t:if(SS(this)){var r=JT(this.g);t="";var i=r.length,o=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ti(this),oc(this);var s="";break t}this.h.i=new G.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,O4(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sc(a)){var u=a;break t}}u=null}if(n=u)es(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xy(this,n);else{this.i=!1,this.s=3,ft(12),Ti(this),oc(this);break e}}this.S?(AS(this,l,s),By&&this.i&&l==3&&(yS(this.U,this.V,"tick",this.mb),this.V.start())):(es(this.j,this.m,s,null),Xy(this,s)),l==4&&Ti(this),this.i&&!this.J&&(l==4?ZS(this.l,this):(this.i=!1,_c(this)))}else iB(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Ti(this),oc(this)}}}catch{}finally{}};function SS(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function AS(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=L4(t,n),i==Yy){e==4&&(t.s=4,ft(14),r=!1),es(t.j,t.m,null,"[Incomplete Response]");break}else if(i==bS){t.s=4,ft(15),es(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else es(t.j,t.m,i,null),Xy(t,i);SS(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,ft(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Iv(e),e.M=!0,ft(11))):(es(t.j,t.m,n,"[Invalid Chunked Response]"),Ti(t),oc(t))}S.mb=function(){if(this.g){var t=Mn(this.g),e=this.g.ja();this.o<e.length&&(ah(this),AS(this,t,e),this.i&&t!=4&&_c(this))}};function L4(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Yy:(n=Number(e.substring(n,r)),isNaN(n)?bS:(r+=1,r+n>e.length?Yy:(e=e.slice(r,r+n),t.o=r+n,e)))}S.cancel=function(){this.J=!0,Ti(this)};function _c(t){t.Y=Date.now()+t.P,MS(t,t.P)}function MS(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=mc(ot(t.lb,t),e)}function ah(t){t.C&&(G.clearTimeout(t.C),t.C=null)}S.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(k4(this.j,this.B),this.L!=2&&(dc(),ft(17)),Ti(this),this.s=2,oc(this)):MS(this,this.Y-t)};function oc(t){t.l.H==0||t.J||ZS(t.l,t)}function Ti(t){ah(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,hv(t.V),vS(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Xy(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Jy(n.i,t))){if(!t.K&&Jy(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Kd(n),dh(n);else break e;Ev(n),ft(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=mc(ot(n.ib,n),6e3));if(1>=VS(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Si(n,11)}else if((t.K||n.g==t)&&Kd(n),!sc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var o=r.i;o.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(yv(o,o.h),o.h=null))}if(r.F){let v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,_e(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=eA(r,r.J?r.pa:null,r.Y),s.K){LS(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(ah(a),_c(a)),r.g=s}else QS(r);0<n.j.length&&hh(n)}else u[0]!="stop"&&u[0]!="close"||Si(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Si(n,7):wv(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}dc(4)}catch{}}function j4(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Xd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function B4(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Xd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function xS(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Xd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=B4(t),r=j4(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var PS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function U4(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ai(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ai){this.h=t.h,Gd(this,t.j),this.s=t.s,this.g=t.g,Wd(this,t.m),this.l=t.l;var e=t.i,n=new hc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),YT(this,n),this.o=t.o}else t&&(e=String(t).match(PS))?(this.h=!1,Gd(this,e[1]||"",!0),this.s=rc(e[2]||""),this.g=rc(e[3]||"",!0),Wd(this,e[4]),this.l=rc(e[5]||"",!0),YT(this,e[6]||"",!0),this.o=rc(e[7]||"")):(this.h=!1,this.i=new hc(null,this.h))}Ai.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ic(e,ZT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ic(e,ZT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ic(n,n.charAt(0)=="/"?z4:H4,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ic(n,G4)),t.join("")};function tr(t){return new Ai(t)}function Gd(t,e,n){t.j=n?rc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Wd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function YT(t,e,n){e instanceof hc?(t.i=e,W4(t.i,t.h)):(n||(e=ic(e,q4)),t.i=new hc(e,t.h))}function _e(t,e,n){t.i.set(e,n)}function ch(t){return _e(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function rc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ic(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,$4),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $4(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ZT=/[#\/\?@]/g,H4=/[#\?:]/g,z4=/[#\?]/g,q4=/[#\?@]/g,G4=/#/g;function hc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Or(t){t.g||(t.g=new Map,t.h=0,t.i&&U4(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}S=hc.prototype;S.add=function(t,e){Or(this),this.i=null,t=rs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function RS(t,e){Or(t),e=rs(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function NS(t,e){return Or(t),e=rs(t,e),t.g.has(e)}S.forEach=function(t,e){Or(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};S.ta=function(){Or(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};S.Z=function(t){Or(this);let e=[];if(typeof t=="string")NS(this,t)&&(e=e.concat(this.g.get(rs(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};S.set=function(t,e){return Or(this),this.i=null,t=rs(this,t),NS(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};S.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function OS(t,e,n){RS(t,e),0<n.length&&(t.i=null,t.g.set(rs(t,e),rv(n)),t.h+=n.length)}S.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function rs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function W4(t,e){e&&!t.j&&(Or(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(RS(this,r),OS(this,i,n))},t)),t.j=e}var K4=class{constructor(t,e){this.g=t,this.map=e}};function kS(t){this.l=t||Q4,G.PerformanceNavigationTiming?(t=G.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(G.g&&G.g.Ka&&G.g.Ka()&&G.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Q4=10;function FS(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function VS(t){return t.h?1:t.g?t.g.size:0}function Jy(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function yv(t,e){t.g?t.g.add(e):t.h=e}function LS(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}kS.prototype.cancel=function(){if(this.i=jS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function jS(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return rv(t.i)}var Y4=class{stringify(t){return G.JSON.stringify(t,void 0)}parse(t){return G.JSON.parse(t,void 0)}};function Z4(){this.g=new Y4}function X4(t,e,n){let r=n||"";try{xS(t,function(i,o){let s=i;pc(i)&&(s=lv(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function J4(t,e){let n=new rh;if(G.Image){let r=new Image;r.onload=jd(zd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=jd(zd,n,r,"TestLoadImage: error",!1,e),r.onabort=jd(zd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=jd(zd,n,r,"TestLoadImage: timeout",!1,e),G.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function zd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function wc(t){this.l=t.ec||null,this.j=t.ob||!1}Ye(wc,pv);wc.prototype.g=function(){return new uh(this.l,this.j)};wc.prototype.i=function(t){return function(){return t}}({});function uh(t,e){Qe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=vv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ye(uh,Qe);var vv=0;S=uh.prototype;S.open=function(t,e){if(this.readyState!=vv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,fc(this)};S.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||G).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};S.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ec(this)),this.readyState=vv};S.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,fc(this)),this.g&&(this.readyState=3,fc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof G.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;BS(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function BS(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}S.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ec(this):fc(this),this.readyState==3&&BS(this)}};S.Za=function(t){this.g&&(this.response=this.responseText=t,Ec(this))};S.Ya=function(t){this.g&&(this.response=t,Ec(this))};S.ka=function(){this.g&&Ec(this)};function Ec(t){t.readyState=4,t.l=null,t.j=null,t.A=null,fc(t)}S.setRequestHeader=function(t,e){this.v.append(t,e)};S.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};S.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function fc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(uh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var eB=G.JSON.parse;function Me(t){Qe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=US,this.L=this.M=!1}Ye(Me,Qe);var US="",tB=/^https?$/i,nB=["POST","PUT"];S=Me.prototype;S.Oa=function(t){this.M=t};S.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Qy.g(),this.C=this.u?QT(this.u):QT(Qy),this.g.onreadystatechange=ot(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){XT(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=G.FormData&&t instanceof G.FormData,!(0<=rS(nB,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{zS(this),0<this.B&&((this.L=rB(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ot(this.ua,this)):this.A=fv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){XT(this,o)}};function rB(t){return ns&&typeof t.timeout=="number"&&t.ontimeout!==void 0}S.ua=function(){typeof nv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nt(this,"timeout"),this.abort(8))};function XT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,$S(t),lh(t)}function $S(t){t.F||(t.F=!0,nt(t,"complete"),nt(t,"error"))}S.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,nt(this,"complete"),nt(this,"abort"),lh(this))};S.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),lh(this,!0)),Me.$.N.call(this)};S.La=function(){this.s||(this.G||this.v||this.l?HS(this):this.kb())};S.kb=function(){HS(this)};function HS(t){if(t.h&&typeof nv<"u"&&(!t.C[1]||Mn(t)!=4||t.da()!=2)){if(t.v&&Mn(t)==4)fv(t.La,0,t);else if(nt(t,"readystatechange"),Mn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(PS)[1]||null;!i&&G.self&&G.self.location&&(i=G.self.location.protocol.slice(0,-1)),r=!tB.test(i?i.toLowerCase():"")}n=r}if(n)nt(t,"complete"),nt(t,"success");else{t.m=6;try{var o=2<Mn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",$S(t)}}finally{lh(t)}}}}function lh(t,e){if(t.g){zS(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||nt(t,"ready");try{n.onreadystatechange=r}catch{}}}function zS(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(G.clearTimeout(t.A),t.A=null)}S.isActive=function(){return!!this.g};function Mn(t){return t.g?t.g.readyState:0}S.da=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}};S.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};S.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),eB(e)}};function JT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case US:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function iB(t){let e={};t=(t.g&&2<=Mn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(sc(t[r]))continue;var n=x4(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}T4(e,function(r){return r.join(", ")})}S.Ia=function(){return this.m};S.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function qS(t){let e="";return ov(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function _v(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=qS(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):_e(t,e,n))}function tc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function GS(t){this.Ga=0,this.j=[],this.l=new rh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=tc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=tc("baseRetryDelayMs",5e3,t),this.hb=tc("retryDelaySeedMs",1e4,t),this.eb=tc("forwardChannelMaxRetries",2,t),this.xa=tc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new kS(t&&t.concurrentRequestLimit),this.Ja=new Z4,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}S=GS.prototype;S.ra=8;S.H=1;function wv(t){if(WS(t),t.H==3){var e=t.W++,n=tr(t.I);if(_e(n,"SID",t.K),_e(n,"RID",e),_e(n,"TYPE","terminate"),Ic(t,n),e=new vc(t,t.l,e),e.L=2,e.A=ch(tr(n)),n=!1,G.navigator&&G.navigator.sendBeacon)try{n=G.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&G.Image&&(new Image().src=e.A,n=!0),n||(e.g=tA(e.l,null),e.g.ha(e.A)),e.G=Date.now(),_c(e)}JS(t)}function dh(t){t.g&&(Iv(t),t.g.cancel(),t.g=null)}function WS(t){dh(t),t.u&&(G.clearTimeout(t.u),t.u=null),Kd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&G.clearTimeout(t.m),t.m=null)}function hh(t){if(!FS(t.i)&&!t.m){t.m=!0;var e=t.Na;cc||gS(),uc||(cc(),uc=!0),dv.add(e,t),t.C=0}}function oB(t,e){return VS(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=mc(ot(t.Na,t,e),XS(t,t.C)),t.C++,!0)}S.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new vc(this,this.l,t),o=this.s;if(this.U&&(o?(o=aS(o),cS(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=KS(this,i,e),n=tr(this.I),_e(n,"RID",t),_e(n,"CVER",22),this.F&&_e(n,"X-HTTP-Session-Id",this.F),Ic(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(qS(o)))+"&"+e:this.o&&_v(n,this.o,o)),yv(this.i,i),this.bb&&_e(n,"TYPE","init"),this.P?(_e(n,"$req",e),_e(n,"SID","null"),i.aa=!0,Zy(i,n,null)):Zy(i,n,e),this.H=2}}else this.H==3&&(t?eS(this,t):this.j.length==0||FS(this.i)||eS(this))};function eS(t,e){var n;e?n=e.m:n=t.W++;let r=tr(t.I);_e(r,"SID",t.K),_e(r,"RID",n),_e(r,"AID",t.V),Ic(t,r),t.o&&t.s&&_v(r,t.o,t.s),n=new vc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=KS(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),yv(t.i,n),Zy(n,r,e)}function Ic(t,e){t.na&&ov(t.na,function(n,r){_e(e,r,n)}),t.h&&xS({},function(n,r){_e(e,r,n)})}function KS(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ot(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=o,0>u)o=Math.max(0,i[c].g-100),a=!1;else try{X4(l,s,"req"+u+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function QS(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;cc||gS(),uc||(cc(),uc=!0),dv.add(e,t),t.A=0}}function Ev(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=mc(ot(t.Ma,t),XS(t,t.A)),t.A++,!0)}S.Ma=function(){if(this.u=null,YS(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=mc(ot(this.jb,this),t)}};S.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ft(10),dh(this),YS(this))};function Iv(t){t.B!=null&&(G.clearTimeout(t.B),t.B=null)}function YS(t){t.g=new vc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=tr(t.wa);_e(e,"RID","rpc"),_e(e,"SID",t.K),_e(e,"AID",t.V),_e(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&_e(e,"TO",t.qa),_e(e,"TYPE","xmlhttp"),Ic(t,e),t.o&&t.s&&_v(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=ch(tr(e)),n.u=null,n.S=!0,TS(n,t)}S.ib=function(){this.v!=null&&(this.v=null,dh(this),Ev(this),ft(19))};function Kd(t){t.v!=null&&(G.clearTimeout(t.v),t.v=null)}function ZS(t,e){var n=null;if(t.g==e){Kd(t),Iv(t),t.g=null;var r=2}else if(Jy(t.i,e))n=e.F,LS(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=ih(),nt(r,new ES(r,n)),hh(t)}else QS(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&oB(t,e)||r==2&&Ev(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Si(t,5);break;case 4:Si(t,10);break;case 3:Si(t,6);break;default:Si(t,2)}}}function XS(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Si(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=ot(t.pb,t);n||(n=new Ai("//www.google.com/images/cleardot.gif"),G.location&&G.location.protocol=="http"||Gd(n,"https"),ch(n)),J4(n.toString(),r)}else ft(2);t.H=0,t.h&&t.h.za(e),JS(t),WS(t)}S.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ft(2)):(this.l.info("Failed to ping google.com"),ft(1))};function JS(t){if(t.H=0,t.ma=[],t.h){let e=jS(t.i);(e.length!=0||t.j.length!=0)&&(qT(t.ma,e),qT(t.ma,t.j),t.i.i.length=0,rv(t.j),t.j.length=0),t.h.ya()}}function eA(t,e,n){var r=n instanceof Ai?tr(n):new Ai(n);if(r.g!="")e&&(r.g=e+"."+r.g),Wd(r,r.m);else{var i=G.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Ai(null);r&&Gd(o,r),e&&(o.g=e),i&&Wd(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&_e(r,n,e),_e(r,"VER",t.ra),Ic(t,r),r}function tA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Me(new wc({ob:n})):new Me(t.va),e.Oa(t.J),e}S.isActive=function(){return!!this.h&&this.h.isActive(this)};function nA(){}S=nA.prototype;S.Ba=function(){};S.Aa=function(){};S.za=function(){};S.ya=function(){};S.isActive=function(){return!0};S.Va=function(){};function Qd(){if(ns&&!(10<=Number(I4)))throw Error("Environmental error: no available transport.")}Qd.prototype.g=function(t,e){return new Vt(t,e)};function Vt(t,e){Qe.call(this),this.g=new GS(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!sc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!sc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new is(this)}Ye(Vt,Qe);Vt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ft(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=eA(t,null,t.Y),hh(t)};Vt.prototype.close=function(){wv(this.g)};Vt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=lv(t),t=n);e.j.push(new K4(e.fb++,t)),e.H==3&&hh(e)};Vt.prototype.N=function(){this.g.h=null,delete this.j,wv(this.g),delete this.g,Vt.$.N.call(this)};function rA(t){gv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ye(rA,gv);function iA(){mv.call(this),this.status=1}Ye(iA,mv);function is(t){this.g=t}Ye(is,nA);is.prototype.Ba=function(){nt(this.g,"a")};is.prototype.Aa=function(t){nt(this.g,new rA(t))};is.prototype.za=function(t){nt(this.g,new iA)};is.prototype.ya=function(){nt(this.g,"b")};function sB(){this.blockSize=-1}function an(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ye(an,sB);an.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function jy(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}an.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)jy(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){jy(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){jy(this,r),i=0;break}}this.h=i,this.i+=e};an.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function fe(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var aB={};function Cv(t){return-128<=t&&128>t?_4(t,function(e){return new fe([e|0],0>e?-1:0)}):new fe([t|0],0>t?-1:0)}function xn(t){if(isNaN(t)||!isFinite(t))return ts;if(0>t)return tt(xn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=ev;return new fe(e,0)}function oA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return tt(oA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=xn(Math.pow(e,8)),r=ts,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=xn(Math.pow(e,o)),r=r.R(o).add(xn(s))):(r=r.R(n),r=r.add(xn(s)))}return r}var ev=4294967296,ts=Cv(0),tv=Cv(1),tS=Cv(16777216);S=fe.prototype;S.ea=function(){if(Wt(this))return-tt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:ev+r)*e,e*=ev}return t};S.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(er(this))return"0";if(Wt(this))return"-"+tt(this).toString(t);for(var e=xn(Math.pow(t,6)),n=this,r="";;){var i=Zd(n,e).g;n=Yd(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,er(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};S.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function er(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Wt(t){return t.h==-1}S.X=function(t){return t=Yd(this,t),Wt(t)?-1:er(t)?0:1};function tt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new fe(n,~t.h).add(tv)}S.abs=function(){return Wt(this)?tt(this):this};S.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new fe(n,n[n.length-1]&-2147483648?-1:0)};function Yd(t,e){return t.add(tt(e))}S.R=function(t){if(er(this)||er(t))return ts;if(Wt(this))return Wt(t)?tt(this).R(tt(t)):tt(tt(this).R(t));if(Wt(t))return tt(this.R(tt(t)));if(0>this.X(tS)&&0>t.X(tS))return xn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=s*c,qd(n,2*r+2*i),n[2*r+2*i+1]+=o*c,qd(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,qd(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,qd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new fe(n,0)};function qd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function nc(t,e){this.g=t,this.h=e}function Zd(t,e){if(er(e))throw Error("division by zero");if(er(t))return new nc(ts,ts);if(Wt(t))return e=Zd(tt(t),e),new nc(tt(e.g),tt(e.h));if(Wt(e))return e=Zd(t,tt(e)),new nc(tt(e.g),e.h);if(30<t.g.length){if(Wt(t)||Wt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=tv,r=e;0>=r.X(t);)n=nS(n),r=nS(r);var i=Jo(n,1),o=Jo(r,1);for(r=Jo(r,2),n=Jo(n,2);!er(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Jo(r,1),n=Jo(n,1)}return e=Yd(t,i.R(e)),new nc(i,e)}for(i=ts;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=xn(n),s=o.R(e);Wt(s)||0<s.X(t);)n-=r,o=xn(n),s=o.R(e);er(o)&&(o=tv),i=i.add(o),t=Yd(t,s)}return new nc(i,t)}S.gb=function(t){return Zd(this,t).h};S.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new fe(n,this.h&t.h)};S.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new fe(n,this.h|t.h)};S.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new fe(n,this.h^t.h)};function nS(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new fe(n,t.h)}function Jo(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new fe(i,t.h)}Qd.prototype.createWebChannel=Qd.prototype.g;Vt.prototype.send=Vt.prototype.u;Vt.prototype.open=Vt.prototype.m;Vt.prototype.close=Vt.prototype.close;oh.NO_ERROR=0;oh.TIMEOUT=8;oh.HTTP_ERROR=6;IS.COMPLETE="complete";CS.EventType=yc;yc.OPEN="a";yc.CLOSE="b";yc.ERROR="c";yc.MESSAGE="d";Qe.prototype.listen=Qe.prototype.O;Me.prototype.listenOnce=Me.prototype.P;Me.prototype.getLastError=Me.prototype.Sa;Me.prototype.getLastErrorCode=Me.prototype.Ia;Me.prototype.getStatus=Me.prototype.da;Me.prototype.getResponseJson=Me.prototype.Wa;Me.prototype.getResponseText=Me.prototype.ja;Me.prototype.send=Me.prototype.ha;Me.prototype.setWithCredentials=Me.prototype.Oa;an.prototype.digest=an.prototype.l;an.prototype.reset=an.prototype.reset;an.prototype.update=an.prototype.j;fe.prototype.add=fe.prototype.add;fe.prototype.multiply=fe.prototype.R;fe.prototype.modulo=fe.prototype.gb;fe.prototype.compare=fe.prototype.X;fe.prototype.toNumber=fe.prototype.ea;fe.prototype.toString=fe.prototype.toString;fe.prototype.getBits=fe.prototype.D;fe.fromNumber=xn;fe.fromString=oA;var sA=cn.createWebChannelTransport=function(){return new Qd},aA=cn.getStatEventTarget=function(){return ih()},fh=cn.ErrorCode=oh,cA=cn.EventType=IS,uA=cn.Event=Mi,Dv=cn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},o7=cn.FetchXmlHttpFactory=wc,Cc=cn.WebChannel=CS,lA=cn.XhrIo=Me,dA=cn.Md5=an,xi=cn.Integer=fe;var hA="@firebase/firestore";var He=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");var Os="10.7.0";var Ur=new mu("@firebase/firestore");function us(){return Ur.logLevel}function dM(t){Ur.setLogLevel(t)}function E(t,...e){if(Ur.logLevel<=fn.DEBUG){let n=e.map(bw);Ur.debug(`Firestore (${Os}): ${t}`,...n)}}function ke(t,...e){if(Ur.logLevel<=fn.ERROR){let n=e.map(bw);Ur.error(`Firestore (${Os}): ${t}`,...n)}}function Qt(t,...e){if(Ur.logLevel<=fn.WARN){let n=e.map(bw);Ur.warn(`Firestore (${Os}): ${t}`,...n)}}function bw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function N(t="Unexpected state"){let e=`FIRESTORE (${Os}) INTERNAL ASSERTION FAILED: `+t;throw ke(e),new Error(e)}function V(t,e){t||N()}function hM(t,e){t||N()}function A(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=class extends M0{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ze=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Dh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Mv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(He.UNAUTHENTICATED))}shutdown(){}},xv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Pv=class{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new ze;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ze,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ze)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(V(typeof r.accessToken=="string"),new Dh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return V(e===null||typeof e=="string"),new He(e)}},Rv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Nv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Rv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ov=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},kv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,E("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(V(typeof n.token=="string"),this.R=n.token,new Ov(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function cB(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var bh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=cB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function W(t,e){return t<e?-1:t>e?1:0}function vs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function fM(t){return t+"\0"}var be=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var j=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new be(0,0))}static max(){return new t(new be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Th=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&N(),r===void 0?r=e.length-n:r>e.length-n&&N(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},le=class t extends Th{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},uB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fe=class t extends Th{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return uB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new w(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new w(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new w(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var T=class t{constructor(e){this.path=e}static fromPath(e){return new t(le.fromString(e))}static fromName(e){return new t(le.fromString(e).popFirst(5))}static empty(){return new t(le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new le(e.slice()))}};var _s=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Fv(t){return t.fields.find(e=>e.kind===2)}function Ri(t){return t.fields.filter(e=>e.kind!==2)}_s.UNKNOWN_ID=-1;var gs=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var kc=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Yt.min())}};function pM(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=j.fromTimestamp(r===1e9?new be(n+1,0):new be(n,r));return new Yt(i,T.empty(),e)}function gM(t){return new Yt(t.readTime,t.key,-1)}var Yt=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(j.min(),T.empty(),-1)}static max(){return new t(j.max(),T.empty(),-1)}};function Tw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=T.comparator(t.documentKey,e.documentKey),n!==0?n:W(t.largestBatchId,e.largestBatchId))}var mM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xr(t){return y(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==mM)throw t;E("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&N(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(l=>{s[u]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Ah=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new ze,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Li(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Sw(r.target.error);this.V.reject(new Li(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Li(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Lv(n)}},$r=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(pu())===12.2&&ke("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),Ni(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!gu())return!1;if(t.C())return!0;let e=pu(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return y(this,null,function*(){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new Li(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new w(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new w(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Li(e,s))},i.onupgradeneeded=o=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return y(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=Ah.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),p.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(E("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Vv=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ni(this.k.delete())}},Li=class extends w{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Jr(t){return t.name==="IndexedDbTransactionError"}var Lv=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(E("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ni(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),Ni(this.store.add(e))}get(e){return Ni(this.store.get(e)).next(n=>(n===void 0&&(n=null),E("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),Ni(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),Ni(this.store.count())}W(e,n){let r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){let i=this.cursor(r),o=[];return this.G(i,(s,a)=>{o.push(a)}).next(()=>o)}{let i=this.store.getAll(r.range);return new p((o,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{o(a.target.result)}})}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){E("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=o=>{let s=Sw(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new p((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Vv(a),u=n(a.primaryKey,a.value,c);if(u instanceof p){let l=u.catch(d=>(c.done(),p.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Ni(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Sw(r.target.error);n(i)}})}var fA=!1;function Sw(t){let e=$r.S(pu());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fA||(fA=!0,setTimeout(()=>{throw r},0)),r}}return t}var jv=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){E("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>y(this,null,function*(){this.task=null;try{E("IndexBackiller",`Documents written: ${yield this.X.te()}`)}catch(n){Jr(n)?E("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):yield Xr(n)}yield this.ee(6e4)}))}},Bv=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return y(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return p.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return E("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(E("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=gM(o);Tw(s,r)>0&&(r=s)}),new Yt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Lt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function ou(t){return t==null}function Fc(t){return t===0&&1/t==-1/0}function yM(t){return typeof t=="number"&&Number.isInteger(t)&&!Fc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function pt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pA(e)),e=lB(t.get(n),e);return pA(e)}function lB(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function pA(t){return t+""}function Pn(t){let e=t.length;if(V(e>=2),e===2)return V(t.charAt(0)===""&&t.charAt(1)===""),le.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&N(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:N()}o=s+2}return new le(r)}var gA=["userId","batchId"];function vh(t,e){return[t,pt(e)]}function vM(t,e,n){return[t,pt(e),n]}var dB={},hB=["prefixPath","collectionGroup","readTime","documentId"],fB=["prefixPath","collectionGroup","documentId"],pB=["collectionGroup","readTime","prefixPath","documentId"],gB=["canonicalId","targetId"],mB=["targetId","path"],yB=["path","targetId"],vB=["collectionId","parent"],_B=["indexId","uid"],wB=["uid","sequenceNumber"],EB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],IB=["indexId","uid","orderedDocumentKey"],CB=["userId","collectionPath","documentId"],DB=["userId","collectionPath","largestBatchId"],bB=["userId","collectionGroup","largestBatchId"],_M=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],TB=[..._M,"documentOverlays"],wM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],EM=wM,SB=[...EM,"indexConfiguration","indexState","indexEntries"];var Vc=class extends Sh{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function Xe(t,e){let n=A(t);return $r.M(n.ae,e)}function mA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function IM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var we=class t{constructor(e,n){this.comparator=e,this.root=n||Nn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ps(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ps(this.root,e,this.comparator,!1)}getReverseIterator(){return new ps(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ps(this.root,e,this.comparator,!0)}},ps=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw N();let e=this.left.check();if(e!==this.right.check())throw N();return e+(this.isRed()?0:1)}};Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw N()}get value(){throw N()}get color(){throw N()}get left(){throw N()}get right(){throw N()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var me=class t{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mh(this.data.getIterator())}getIteratorFrom(e){return new Mh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Mh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function os(t){return t.hasNext()?t.getNext():void 0}var jt=class t{constructor(e){this.fields=e,e.sort(Fe.comparator)}static empty(){return new t([])}unionWith(e){let n=new me(Fe.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var xh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function CM(){return typeof atob<"u"}var Ze=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xh("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return W(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ze.EMPTY_BYTE_STRING=new Ze("");var AB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(t){if(V(!!t),typeof t=="string"){let e=0,n=AB.exec(t);if(V(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xe(t.seconds),nanos:xe(t.nanos)}}function xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zr(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}function Ef(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Aw(t){let e=t.mapValue.fields.__previous_value__;return Ef(e)?Aw(e):e}function Lc(t){let e=Hr(t.mapValue.fields.__local_write_time__.timestampValue);return new be(e.seconds,e.nanos)}var Uv=class{constructor(e,n,r,i,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},qr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var jr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_h={nullValue:"NULL_VALUE"};function ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ef(t)?4:DM(t)?9007199254740991:10:N()}function Fn(t,e){if(t===e)return!0;let n=ji(t);if(n!==ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lc(t).isEqual(Lc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Hr(i.timestampValue),a=Hr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return zr(i.bytesValue).isEqual(zr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return xe(i.geoPointValue.latitude)===xe(o.geoPointValue.latitude)&&xe(i.geoPointValue.longitude)===xe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return xe(i.integerValue)===xe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=xe(i.doubleValue),a=xe(o.doubleValue);return s===a?Fc(s)===Fc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return vs(t.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(mA(s)!==mA(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Fn(s[c],a[c])))return!1;return!0}(t,e);default:return N()}}function jc(t,e){return(t.values||[]).find(n=>Fn(n,e))!==void 0}function Gr(t,e){if(t===e)return 0;let n=ji(t),r=ji(e);if(n!==r)return W(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return W(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=xe(o.integerValue||o.doubleValue),c=xe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return yA(t.timestampValue,e.timestampValue);case 4:return yA(Lc(t),Lc(e));case 5:return W(t.stringValue,e.stringValue);case 6:return function(o,s){let a=zr(o),c=zr(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=W(a[u],c[u]);if(l!==0)return l}return W(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=W(xe(o.latitude),xe(s.latitude));return a!==0?a:W(xe(o.longitude),xe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=Gr(a[u],c[u]);if(l)return l}return W(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===jr.mapValue&&s===jr.mapValue)return 0;if(o===jr.mapValue)return 1;if(s===jr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=W(c[d],l[d]);if(h!==0)return h;let f=Gr(a[c[d]],u[l[d]]);if(f!==0)return f}return W(c.length,l.length)}(t.mapValue,e.mapValue);default:throw N()}}function yA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return W(t,e);let n=Hr(t),r=Hr(e),i=W(n.seconds,r.seconds);return i!==0?i:W(n.nanos,r.nanos)}function ws(t){return $v(t)}function $v(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Hr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return T.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=$v(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${$v(n.fields[s])}`;return i+"}"}(t.mapValue):N()}function Bi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hv(t){return!!t&&"integerValue"in t}function Bc(t){return!!t&&"arrayValue"in t}function vA(t){return!!t&&"nullValue"in t}function _A(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wh(t){return!!t&&"mapValue"in t}function xc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Yi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=xc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function MB(t){return"nullValue"in t?_h:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Bi(qr.empty(),T.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:N()}function xB(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Bi(qr.empty(),T.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?jr:N()}function wA(t,e){let n=Gr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function EA(t,e){let n=Gr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var ct=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xc(n)}setAll(e){let n=Fe.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=xc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());wh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];wh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Yi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(xc(this.value))}};function bM(t){let e=[];return Yi(t.fields,(n,r)=>{let i=new Fe([n]);if(wh(r)){let o=bM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new jt(e)}var qe=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,j.min(),j.min(),j.min(),ct.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,j.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,j.min(),j.min(),ct.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,j.min(),j.min(),ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(j.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vn=class{constructor(e,n){this.position=e,this.inclusive=n}};function IA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=T.comparator(T.fromName(s.referenceValue),n.key):r=Gr(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function CA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fn(t.position[n],e.position[n]))return!1;return!0}var Ui=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function PB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ph=class{},ie=class t extends Ph{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Gv(e,n,r):n==="array-contains"?new Qv(e,r):n==="in"?new Rh(e,r):n==="not-in"?new Yv(e,r):n==="array-contains-any"?new Zv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Wv(e,r):new Kv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gr(n,this.value)):n!==null&&ji(this.value)===ji(n)&&this.matchesComparison(Gr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return N()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},pe=class t extends Ph{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Es(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Es(t){return t.op==="and"}function zv(t){return t.op==="or"}function Mw(t){return TM(t)&&Es(t)}function TM(t){for(let e of t.filters)if(e instanceof pe)return!1;return!0}function qv(t){if(t instanceof ie)return t.field.canonicalString()+t.op.toString()+ws(t.value);if(Mw(t))return t.filters.map(e=>qv(e)).join(",");{let e=t.filters.map(n=>qv(n)).join(",");return`${t.op}(${e})`}}function SM(t,e){return t instanceof ie?function(r,i){return i instanceof ie&&r.op===i.op&&r.field.isEqual(i.field)&&Fn(r.value,i.value)}(t,e):t instanceof pe?function(r,i){return i instanceof pe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&SM(s,i.filters[a]),!0):!1}(t,e):void N()}function AM(t,e){let n=t.filters.concat(e);return pe.create(n,t.op)}function MM(t){return t instanceof ie?function(n){return`${n.field.canonicalString()} ${n.op} ${ws(n.value)}`}(t):t instanceof pe?function(n){return n.op.toString()+" {"+n.getFilters().map(MM).join(" ,")+"}"}(t):"Filter"}var Gv=class extends ie{constructor(e,n,r){super(e,n,r),this.key=T.fromName(r.referenceValue)}matches(e){let n=T.comparator(e.key,this.key);return this.matchesComparison(n)}},Wv=class extends ie{constructor(e,n){super(e,"in",n),this.keys=xM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Kv=class extends ie{constructor(e,n){super(e,"not-in",n),this.keys=xM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function xM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>T.fromName(r.referenceValue))}var Qv=class extends ie{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Bc(n)&&jc(n.arrayValue,this.value)}},Rh=class extends ie{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&jc(this.value.arrayValue,n)}},Yv=class extends ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!jc(this.value.arrayValue,n)}},Zv=class extends ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Bc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>jc(this.value.arrayValue,r))}};var Xv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function Jv(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Xv(t,e,n,r,i,o,s)}function $i(t){let e=A(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ou(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ws(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ws(r)).join(",")),e.ce=n}return e.ce}function su(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!SM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!CA(t.startAt,e.startAt)&&CA(t.endAt,e.endAt)}function Nh(t){return T.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Oh(t,e){return t.filters.filter(n=>n instanceof ie&&n.field.isEqual(e))}function DA(t,e,n){let r=_h,i=!0;for(let o of Oh(t,e)){let s=_h,a=!0;switch(o.op){case"<":case"<=":s=MB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=_h}wA({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];wA({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function bA(t,e,n){let r=jr,i=!0;for(let o of Oh(t,e)){let s=jr,a=!0;switch(o.op){case">=":case">":s=xB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=jr}EA({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];EA({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var un=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function PM(t,e,n,r,i,o,s,a){return new un(t,e,n,r,i,o,s,a)}function ks(t){return new un(t)}function TA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xw(t){return t.collectionGroup!==null}function ms(t){let e=A(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new me(Fe.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Ui(o,r))}),n.has(Fe.keyField().canonicalString())||e.le.push(new Ui(Fe.keyField(),r))}return e.le}function gt(t){let e=A(t);return e.he||(e.he=RB(e,ms(t))),e.he}function RB(t,e){if(t.limitType==="F")return Jv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ui(i.field,o)});let n=t.endAt?new Vn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vn(t.startAt.position,t.startAt.inclusive):null;return Jv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function e_(t,e){let n=t.filters.concat([e]);return new un(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kh(t,e,n){return new un(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function au(t,e){return su(gt(t),gt(e))&&t.limitType===e.limitType}function RM(t){return`${$i(gt(t))}|lt:${t.limitType}`}function ls(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>MM(i)).join(", ")}]`),ou(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ws(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ws(i)).join(",")),`Target(${r})`}(gt(t))}; limitType=${t.limitType})`}function cu(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):T.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of ms(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=IA(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,ms(r),i)||r.endAt&&!function(s,a,c){let u=IA(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,ms(r),i))}(t,e)}function NM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OM(t){return(e,n)=>{let r=!1;for(let i of ms(t)){let o=NB(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function NB(t,e,n){let r=t.field.isKeyField()?T.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Gr(c,u):N()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return N()}}var Ln=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return IM(this.inner)}size(){return this.innerSize}};var OB=new we(T.comparator);function Ct(){return OB}var kM=new we(T.comparator);function Ac(...t){let e=kM;for(let n of t)e=e.insert(n.key,n);return e}function FM(t){let e=kM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Rn(){return Pc()}function VM(){return Pc()}function Pc(){return new Ln(t=>t.toString(),(t,e)=>t.isEqual(e))}var kB=new we(T.comparator),FB=new me(T.comparator);function Q(...t){let e=FB;for(let n of t)e=e.add(n);return e}var VB=new me(W);function Pw(){return VB}function LM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fc(e)?"-0":e}}function jM(t){return{integerValue:""+t}}function BM(t,e){return yM(e)?jM(e):LM(t,e)}var Is=class{constructor(){this._=void 0}};function LB(t,e,n){return t instanceof Wr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ef(o)&&(o=Aw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ir?$M(t,e):t instanceof or?HM(t,e):function(i,o){let s=UM(i,o),a=SA(s)+SA(i.Ie);return Hv(s)&&Hv(i.Ie)?jM(a):LM(i.serializer,a)}(t,e)}function jB(t,e,n){return t instanceof ir?$M(t,e):t instanceof or?HM(t,e):n}function UM(t,e){return t instanceof Kr?function(r){return Hv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Wr=class extends Is{},ir=class extends Is{constructor(e){super(),this.elements=e}};function $M(t,e){let n=zM(e);for(let r of t.elements)n.some(i=>Fn(i,r))||n.push(r);return{arrayValue:{values:n}}}var or=class extends Is{constructor(e){super(),this.elements=e}};function HM(t,e){let n=zM(e);for(let r of t.elements)n=n.filter(i=>!Fn(i,r));return{arrayValue:{values:n}}}var Kr=class extends Is{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function SA(t){return xe(t.integerValue||t.doubleValue)}function zM(t){return Bc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Hi=class{constructor(e,n){this.field=e,this.transform=n}};function BB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ir&&i instanceof ir||r instanceof or&&i instanceof or?vs(r.elements,i.elements,Fn):r instanceof Kr&&i instanceof Kr?Fn(r.Ie,i.Ie):r instanceof Wr&&i instanceof Wr}(t.transform,e.transform)}var t_=class{constructor(e,n){this.version=e,this.transformResults=n}},Pe=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Eh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Cs=class{};function qM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Yr(t.key,Pe.none()):new Qr(t.key,t.data,Pe.none());{let n=t.data,r=ct.empty(),i=new me(Fe.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ln(t.key,r,new jt(i.toArray()),Pe.none())}}function UB(t,e,n){t instanceof Qr?function(i,o,s){let a=i.value.clone(),c=MA(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ln?function(i,o,s){if(!Eh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=MA(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(GM(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Rc(t,e,n,r){return t instanceof Qr?function(o,s,a,c){if(!Eh(o.precondition,s))return a;let u=o.value.clone(),l=xA(o.fieldTransforms,c,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ln?function(o,s,a,c){if(!Eh(o.precondition,s))return a;let u=xA(o.fieldTransforms,c,s),l=s.data;return l.setAll(GM(o)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return Eh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function $B(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=UM(r.transform,i||null);o!=null&&(n===null&&(n=ct.empty()),n.set(r.field,o))}return n||null}function AA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vs(r,i,(o,s)=>BB(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Qr=class extends Cs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ln=class extends Cs{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function GM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function MA(t,e,n){let r=new Map;V(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,jB(s,a,n[i]))}return r}function xA(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,LB(o,s,e))}return r}var Yr=class extends Cs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Uc=class extends Cs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var $c=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&UB(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Rc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=VM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=qM(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(j.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Q())}isEqual(e){return this.batchId===e.batchId&&vs(this.mutations,e.mutations,(n,r)=>AA(n,r))&&vs(this.baseMutations,e.baseMutations,(n,r)=>AA(n,r))}},n_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){V(e.mutations.length===r.length);let i=function(){return kB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Hc=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var r_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ue,ae;function WM(t){switch(t){default:return N();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function KM(t){if(t===void 0)return ke("GRPC error has no .code"),g.UNKNOWN;switch(t){case Ue.OK:return g.OK;case Ue.CANCELLED:return g.CANCELLED;case Ue.UNKNOWN:return g.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return g.INTERNAL;case Ue.UNAVAILABLE:return g.UNAVAILABLE;case Ue.UNAUTHENTICATED:return g.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case Ue.NOT_FOUND:return g.NOT_FOUND;case Ue.ALREADY_EXISTS:return g.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return g.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case Ue.ABORTED:return g.ABORTED;case Ue.OUT_OF_RANGE:return g.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return g.UNIMPLEMENTED;case Ue.DATA_LOSS:return g.DATA_LOSS;default:return N()}}(ae=Ue||(Ue={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";var PA=null;function QM(){return new TextEncoder}var HB=new xi([4294967295,4294967295],0);function RA(t){let e=QM().encode(t),n=new dA;return n.update(e),new Uint8Array(n.digest())}function NA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new xi([n,r],0),new xi([i,o],0)]}var i_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vi(`Invalid padding: ${n}`);if(r<0)throw new Vi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vi(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=xi.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(xi.fromNumber(r)));return i.compare(HB)===1&&(i=new xi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=RA(e),[r,i]=NA(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=RA(e),[r,i]=NA(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Vi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var zc=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,qc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(j.min(),i,new we(W),Ct(),Q())}},qc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Q(),Q(),Q())}};var ys=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Fh=class{constructor(e,n){this.targetId=e,this.fe=n}},Vh=class{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Lh=class{constructor(){this.ge=0,this.pe=kA(),this.ye=Ze.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Q(),n=Q(),r=Q();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:N()}}),new qc(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=kA()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,V(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},o_=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=Ct(),this.Qe=OA(),this.Ke=new we(W)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:N()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(Nh(o))if(r===0){let s=new T(o.path);this.We(n,s,qe.newNoDocument(s,j.min()))}else V(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}PA?.tt(function(l,d,h,f,m){var v,_,C,O,M,U;let H={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},K=d.unchangedNames;return K&&(H.bloomFilter={applied:m===0,hashCount:(v=K?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(O=(C=(_=K?.bits)===null||_===void 0?void 0:_.bitmap)===null||C===void 0?void 0:C.length)!==null&&O!==void 0?O:0,padding:(U=(M=K?.bits)===null||M===void 0?void 0:M.padding)!==null&&U!==void 0?U:0,mightContain:Ee=>{var Bt;return(Bt=f?.mightContain(Ee))!==null&&Bt!==void 0&&Bt}}),H}(s,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=zr(r).toUint8Array()}catch(c){if(c instanceof xh)return Qt("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new i_(s,i,o)}catch(c){return Qt(c instanceof Vi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Nh(a.target)){let c=new T(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,qe.newNoDocument(c,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=Q();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new zc(e,n,this.Ke,this.qe,r);return this.qe=Ct(),this.Qe=OA(),this.Ke=new we(W),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Lh,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new me(W),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||E("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Lh),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function OA(){return new we(T.comparator)}function kA(){return new we(T.comparator)}var zB=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),qB=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),GB=(()=>({and:"AND",or:"OR"}))(),s_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function a_(t,e){return t.useProto3Json||ou(e)?e:{value:e}}function Ds(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WB(t,e){return Ds(t,e.toTimestamp())}function Ve(t){return V(!!t),j.fromTimestamp(function(n){let r=Hr(n);return new be(r.seconds,r.nanos)}(t))}function Rw(t,e){return function(r){return new le(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function ZM(t){let e=le.fromString(t);return V(sx(e)),e}function Gc(t,e){return Rw(t.databaseId,e.path)}function On(t,e){let n=ZM(e);if(n.get(1)!==t.databaseId.projectId)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new T(JM(n))}function c_(t,e){return Rw(t.databaseId,e)}function XM(t){let e=ZM(t);return e.length===4?le.emptyPath():JM(e)}function Wc(t){return new le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JM(t){return V(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function FA(t,e,n){return{name:Gc(t,e),fields:n.value.mapValue.fields}}function ex(t,e,n){let r=On(t,e.name),i=Ve(e.updateTime),o=e.createTime?Ve(e.createTime):j.min(),s=new ct({mapValue:{fields:e.fields}}),a=qe.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function KB(t,e){return"found"in e?function(r,i){V(!!i.found),i.found.name,i.found.updateTime;let o=On(r,i.found.name),s=Ve(i.found.updateTime),a=i.found.createTime?Ve(i.found.createTime):j.min(),c=new ct({mapValue:{fields:i.found.fields}});return qe.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){V(!!i.missing),V(!!i.readTime);let o=On(r,i.missing),s=Ve(i.readTime);return qe.newNoDocument(o,s)}(t,e):N()}function QB(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:N()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,l){return u.useProto3Json?(V(l===void 0||typeof l=="string"),Ze.fromBase64String(l||"")):(V(l===void 0||l instanceof Uint8Array),Ze.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let l=u.code===void 0?g.UNKNOWN:KM(u.code);return new w(l,u.message||"")}(s);n=new Vh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=On(t,r.document.name),o=Ve(r.document.updateTime),s=r.document.createTime?Ve(r.document.createTime):j.min(),a=new ct({mapValue:{fields:r.document.fields}}),c=qe.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new ys(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=On(t,r.document),o=r.readTime?Ve(r.readTime):j.min(),s=qe.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ys([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=On(t,r.document),o=r.removedTargetIds||[];n=new ys([],o,i,null)}else{if(!("filter"in e))return N();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new r_(i,o),a=r.targetId;n=new Fh(a,s)}}return n}function Kc(t,e){let n;if(e instanceof Qr)n={update:FA(t,e.key,e.value)};else if(e instanceof Yr)n={delete:Gc(t,e.key)};else if(e instanceof ln)n={update:FA(t,e.key,e.data),updateMask:tU(e.fieldMask)};else{if(!(e instanceof Uc))return N();n={verify:Gc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Wr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ir)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof or)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Kr)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw N()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:WB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:N()}(t,e.precondition)),n}function u_(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Pe.updateTime(Ve(o.updateTime)):o.exists!==void 0?Pe.exists(o.exists):Pe.none()}(e.currentDocument):Pe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)V(a.setToServerValue==="REQUEST_TIME"),c=new Wr;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];c=new ir(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];c=new or(l)}else"increment"in a?c=new Kr(s,a.increment):N();let u=Fe.fromServerFormat(a.fieldPath);return new Hi(u,c)}(t,i)):[];if(e.update){e.update.name;let i=On(t,e.update.name),o=new ct({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new jt(u.map(l=>Fe.fromServerFormat(l)))}(e.updateMask);return new ln(i,o,s,n,r)}return new Qr(i,o,n,r)}if(e.delete){let i=On(t,e.delete);return new Yr(i,n)}if(e.verify){let i=On(t,e.verify);return new Uc(i,n)}return N()}function YB(t,e){return t&&t.length>0?(V(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Ve(i.updateTime):Ve(o);return s.isEqual(j.min())&&(s=Ve(o)),new t_(s,i.transformResults||[])}(n,e))):[]}function tx(t,e){return{documents:[c_(t,e.path)]}}function nx(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=c_(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=c_(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(c){if(c.length!==0)return ox(pe.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);let o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:ds(d.field),direction:XB(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let s=a_(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function rx(t){let e=XM(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){V(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){let h=ix(d);return h instanceof pe&&Mw(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(m){return new Ui(hs(m.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,ou(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Vn(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new Vn(f,h)}(n.endAt)),PM(e,i,s,o,a,"F",c,u)}function ZB(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return N()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ix(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=hs(n.unaryFilter.field);return ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=hs(n.unaryFilter.field);return ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=hs(n.unaryFilter.field);return ie.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=hs(n.unaryFilter.field);return ie.create(s,"!=",{nullValue:"NULL_VALUE"});default:return N()}}(t):t.fieldFilter!==void 0?function(n){return ie.create(hs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return N()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pe.create(n.compositeFilter.filters.map(r=>ix(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return N()}}(n.compositeFilter.op))}(t):N()}function XB(t){return zB[t]}function JB(t){return qB[t]}function eU(t){return GB[t]}function ds(t){return{fieldPath:t.canonicalString()}}function hs(t){return Fe.fromServerFormat(t.fieldPath)}function ox(t){return t instanceof ie?function(n){if(n.op==="=="){if(_A(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NAN"}};if(vA(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_A(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NAN"}};if(vA(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ds(n.field),op:JB(n.op),value:n.value}}}(t):t instanceof pe?function(n){let r=n.getFilters().map(i=>ox(i));return r.length===1?r[0]:{compositeFilter:{op:eU(n.op),filters:r}}}(t):N()}function tU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var bs=class t{constructor(e,n,r,i,o=j.min(),s=j.min(),a=Ze.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var jh=class{constructor(e){this.ut=e}};function nU(t,e){let n;if(e.document)n=ex(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=T.fromSegments(e.noDocument.path),i=qi(e.noDocument.readTime);n=qe.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return N();{let r=T.fromSegments(e.unknownDocument.path),i=qi(e.unknownDocument.version);n=qe.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new be(i[0],i[1]);return j.fromTimestamp(o)}(e.readTime)),n}function VA(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Bh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Gc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ds(o,s.version.toTimestamp()),createTime:Ds(o,s.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:zi(e.version)};else{if(!e.isUnknownDocument())return N();r.unknownDocument={path:n.path.toArray(),version:zi(e.version)}}return r}function Bh(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zi(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qi(t){let e=new be(t.seconds,t.nanoseconds);return j.fromTimestamp(e)}function Oi(t,e){let n=(e.baseMutations||[]).map(o=>u_(t.ut,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>u_(t.ut,o)),i=be.fromMillis(e.localWriteTimeMs);return new $c(e.batchId,i,n,r)}function Mc(t){let e=qi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?qi(t.lastLimboFreeSnapshotVersion):j.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return V(o.documents.length===1),gt(ks(XM(o.documents[0])))}(t.query):function(o){return gt(rx(o))}(t.query),new bs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ze.fromBase64String(t.resumeToken))}function ax(t,e){let n=zi(e.snapshotVersion),r=zi(e.lastLimboFreeSnapshotVersion),i;i=Nh(e.target)?tx(t.ut,e.target):nx(t.ut,e.target);let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$i(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Nw(t){let e=rx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kh(e,e.limit,"L"):e}function bv(t,e){return new Hc(e.largestBatchId,u_(t.ut,e.overlayMutation))}function LA(t,e){let n=e.path.lastSegment();return[t,pt(e.path.popLast()),n]}function jA(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:zi(r.readTime),documentKey:pt(r.documentKey.path),largestBatchId:r.largestBatchId}}var l_=class{getBundleMetadata(e,n){return BA(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:qi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return BA(e).put(function(i){return{bundleId:i.id,createTime:zi(Ve(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return UA(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:Nw(o.bundledQuery),readTime:qi(o.readTime)}}(r)})}saveNamedQuery(e,n){return UA(e).put(function(i){return{name:i.name,readTime:zi(Ve(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function BA(t){return Xe(t,"bundles")}function UA(t){return Xe(t,"namedQueries")}var Uh=class t{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Dc(e).get(LA(this.userId,n)).next(r=>r?bv(this.serializer,r):null)}getOverlays(e,n){let r=Rn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Hc(n,s);i.push(this.lt(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(pt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Dc(e).H("collectionPathOverlayIndex",a))}),p.waitFor(o)}getOverlaysForCollection(e,n,r){let i=Rn(),o=pt(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Dc(e).W("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let u=bv(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=Rn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Dc(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,u,l)=>{let d=bv(this.serializer,u);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):l.done()}).next(()=>o)}lt(e,n){return Dc(e).put(function(i,o,s){let[a,c,u]=LA(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Kc(i.ut,s.mutation)}}(this.serializer,this.userId,n))}};function Dc(t){return Xe(t,"documentOverlays")}var nr=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(xe(e.integerValue));else if("doubleValue"in e){let r=xe(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),Fc(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(zr(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?DM(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):N()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),T.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};nr.St=new nr;function rU(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function $A(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=rU(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var d_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{let i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){let n=this.Bt(e),r=$A(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){let n=this.Bt(e),r=$A(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){let n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},h_=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},f_=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},ki=class{constructor(){this.Wt=new d_,this.Gt=new h_(this.Wt),this.zt=new f_(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var Fi=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function kr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=HA(t.arrayValue,e.arrayValue),n!==0?n:(n=HA(t.directionalValue,e.directionalValue),n!==0?n:T.comparator(t.documentKey,e.documentKey)))}function HA(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var $h=class{constructor(e){this.Jt=new me((n,r)=>Fe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(V(e.collectionGroup===this.collectionId),this.Xt)return!1;let n=Fv(e);if(n!==void 0&&!this.tn(n))return!1;let r=Ri(e),i=new Set,o=0,s=0;for(;o<r.length&&this.tn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Jt.size>0){let a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.nn(a,c)||!this.rn(this.Yt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Yt.length||!this.rn(this.Yt[s++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new me(Fe.comparator),n=[];for(let r of this.Zt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new gs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new gs(r.field,0))}for(let r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new gs(r.field,r.dir==="asc"?0:1)));return new _s(_s.UNKNOWN_ID,this.collectionId,n,kc.empty())}tn(e){for(let n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function cx(t){var e,n;if(V(t instanceof ie||t instanceof pe),t instanceof ie){if(t instanceof Rh){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>ie.create(t.field,"==",o)))||[];return pe.create(i,"or")}return t}let r=t.filters.map(i=>cx(i));return pe.create(r,t.op)}function iU(t){if(t.getFilters().length===0)return[];let e=m_(cx(t));return V(ux(e)),p_(e)||g_(e)?[e]:e.getFilters()}function p_(t){return t instanceof ie}function g_(t){return t instanceof pe&&Mw(t)}function ux(t){return p_(t)||g_(t)||function(n){if(n instanceof pe&&zv(n)){for(let r of n.getFilters())if(!p_(r)&&!g_(r))return!1;return!0}return!1}(t)}function m_(t){if(V(t instanceof ie||t instanceof pe),t instanceof ie)return t;if(t.filters.length===1)return m_(t.filters[0]);let e=t.filters.map(r=>m_(r)),n=pe.create(e,t.op);return n=Hh(n),ux(n)?n:(V(n instanceof pe),V(Es(n)),V(n.filters.length>1),n.filters.reduce((r,i)=>Ow(r,i)))}function Ow(t,e){let n;return V(t instanceof ie||t instanceof pe),V(e instanceof ie||e instanceof pe),n=t instanceof ie?e instanceof ie?function(i,o){return pe.create([i,o],"and")}(t,e):zA(t,e):e instanceof ie?zA(e,t):function(i,o){if(V(i.filters.length>0&&o.filters.length>0),Es(i)&&Es(o))return AM(i,o.getFilters());let s=zv(i)?i:o,a=zv(i)?o:i,c=s.filters.map(u=>Ow(u,a));return pe.create(c,"or")}(t,e),Hh(n)}function zA(t,e){if(Es(e))return AM(e,t.getFilters());{let n=e.filters.map(r=>Ow(t,r));return pe.create(n,"or")}}function Hh(t){if(V(t instanceof ie||t instanceof pe),t instanceof ie)return t;let e=t.getFilters();if(e.length===1)return Hh(e[0]);if(TM(t))return t;let n=e.map(i=>Hh(i)),r=[];return n.forEach(i=>{i instanceof ie?r.push(i):i instanceof pe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:pe.create(r,t.op)}var y_=class{constructor(){this.on=new Qc}addToCollectionParentIndex(e,n){return this.on.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve(Yt.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve(Yt.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},Qc=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new me(le.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new me(le.comparator)).toArray()}};var ph=new Uint8Array(0),v_=class{constructor(e,n){this.user=e,this.databaseId=n,this._n=new Qc,this.an=new Ln(r=>$i(r),(r,i)=>su(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});let o={collectionId:r,parent:pt(i)};return qA(e).put(o)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[fM(n),""],!1,!0);return qA(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(Pn(s.parent))}return r})}addFieldIndex(e,n){let r=bc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=as(e);return o.next(a=>{s.put(jA(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=bc(e),i=as(e),o=ss(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=bc(e),r=ss(e),i=as(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return p.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new $h(r).sn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=ss(e),i=!0,o=new Map;return p.forEach(this.un(n),s=>this.cn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Q(),a=[];return p.forEach(o,(c,u)=>{E("IndexedDbIndexManager",`Using index ${function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`}(c)} to execute ${$i(n)}`);let l=function(M,U){let H=Fv(U);if(H===void 0)return null;for(let K of Oh(M,H.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(u,c),d=function(M,U){let H=new Map;for(let K of Ri(U))for(let Ee of Oh(M,K.fieldPath))switch(Ee.op){case"==":case"in":H.set(K.fieldPath.canonicalString(),Ee.value);break;case"not-in":case"!=":return H.set(K.fieldPath.canonicalString(),Ee.value),Array.from(H.values())}return null}(u,c),h=function(M,U){let H=[],K=!0;for(let Ee of Ri(U)){let Bt=Ee.kind===0?DA(M,Ee.fieldPath,M.startAt):bA(M,Ee.fieldPath,M.startAt);H.push(Bt.value),K&&(K=Bt.inclusive)}return new Vn(H,K)}(u,c),f=function(M,U){let H=[],K=!0;for(let Ee of Ri(U)){let Bt=Ee.kind===0?bA(M,Ee.fieldPath,M.endAt):DA(M,Ee.fieldPath,M.endAt);H.push(Bt.value),K&&(K=Bt.inclusive)}return new Vn(H,K)}(u,c),m=this.ln(c,u,h),v=this.ln(c,u,f),_=this.hn(c,u,d),C=this.Pn(c.indexId,l,m,h.inclusive,v,f.inclusive,_);return p.forEach(C,O=>r.j(O,n.limit).next(M=>{M.forEach(U=>{let H=T.fromSegments(U.documentKey);s.has(H)||(s=s.add(H),a.push(H))})}))}).next(()=>a)}return p.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=iU(pe.create(e.filters,"and")).map(r=>Jv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),u=c/(n!=null?n.length:1),l=[];for(let d=0;d<c;++d){let h=n?this.In(n[d/u]):ph,f=this.Tn(e,h,r[d%u],i),m=this.En(e,h,o[d%u],s),v=a.map(_=>this.Tn(e,h,_,!0));l.push(...this.createRange(f,m,v))}return l}Tn(e,n,r,i){let o=new Fi(e,T.empty(),n,r);return i?o:o.Ht()}En(e,n,r,i){let o=new Fi(e,T.empty(),n,r);return i?o.Ht():o}cn(e,n){let r=new $h(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.un(n);return p.forEach(i,o=>this.cn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let u=new me(Fe.comparator),l=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:u=u.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(l?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}dn(e,n){let r=new ki;for(let i of Ri(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.jt(i.kind);nr.St.ht(o,s)}return r.Ut()}In(e){let n=new ki;return nr.St.ht(e,n.jt(0)),n.Ut()}An(e,n){let r=new ki;return nr.St.ht(Bi(this.databaseId,n),r.jt(function(o){let s=Ri(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(r===null)return[];let i=[];i.push(new ki);let o=0;for(let s of Ri(e)){let a=r[o++];for(let c of i)if(this.Rn(n,s.fieldPath)&&Bc(a))i=this.Vn(i,s,a);else{let u=c.jt(s.kind);nr.St.ht(a,u)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new ki;c.seed(a.Ut()),nr.St.ht(s,c.jt(n.kind)),o.push(c)}return o}Rn(e,n){return!!e.filters.find(r=>r instanceof ie&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=bc(e),i=as(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return p.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(l,d){let h=d?new kc(d.sequenceNumber,new Yt(qi(d.readTime),new T(Pn(d.documentKey)),d.largestBatchId)):kc.empty(),f=l.fields.map(([m,v])=>new gs(Fe.fromServerFormat(m),v));return new _s(l.indexId,l.collectionGroup,f,h)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:W(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=bc(e),o=as(e);return this.fn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,c=>o.put(jA(c.indexId,this.user,s,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?p.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,c=>this.gn(e,i,c).next(u=>{let l=this.pn(o,c);return u.isEqual(l)?p.resolve():this.yn(e,o,c,u,l)}))))})}wn(e,n,r,i){return ss(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return ss(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){let i=ss(e),o=new me(kr);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(s,a)=>{o=o.add(new Fi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,n){let r=new me(kr),i=this.dn(n,e);if(i==null)return r;let o=Fv(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Bc(s))for(let a of s.arrayValue.values||[])r=r.add(new Fi(n.indexId,e.key,this.In(a),i))}else r=r.add(new Fi(n.indexId,e.key,ph,i));return r}yn(e,n,r,i,o){E("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,u,l,d,h){let f=c.getIterator(),m=u.getIterator(),v=os(f),_=os(m);for(;v||_;){let C=!1,O=!1;if(v&&_){let M=l(v,_);M<0?O=!0:M>0&&(C=!0)}else v!=null?O=!0:C=!0;C?(d(_),_=os(m)):O?(h(v),v=os(f)):(v=os(f),_=os(m))}}(i,o,kr,a=>{s.push(this.wn(e,n,r,a))},a=>{s.push(this.Sn(e,n,r,a))}),p.waitFor(s)}fn(e){let n=1;return as(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>kr(s,a)).filter((s,a,c)=>!a||kr(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=kr(s,e),c=kr(s,n);if(a===0)i[0]=e.Ht();else if(a>0&&c<0)i.push(s),i.push(s.Ht());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,ph,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,ph,[]];o.push(IDBKeyRange.bound(a,c))}return o}bn(e,n){return kr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(GA)}getMinOffset(e,n){return p.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||N())).next(GA)}};function qA(t){return Xe(t,"collectionParents")}function ss(t){return Xe(t,"indexEntries")}function bc(t){return Xe(t,"indexConfiguration")}function as(t){return Xe(t,"indexState")}function GA(t){V(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;Tw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Yt(e.readTime,e.documentKey,n)}var WA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function lx(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.Y({range:s},(l,d,h)=>(a++,h.delete()));o.push(c.next(()=>{V(a===1)}));let u=[];for(let l of n.mutations){let d=vM(e,l.key.path,n.batchId);o.push(i.delete(d)),u.push(l.key)}return p.waitFor(o).next(()=>u)}function zh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw N();e=t.noDocument}return JSON.stringify(e).length}Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(41943040,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);var qh=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){V(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fr(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=fs(e),s=Fr(e);return s.add({}).next(a=>{V(typeof a=="number");let c=new $c(a,n,r,i),u=function(f,m,v){let _=v.baseMutations.map(O=>Kc(f.ut,O)),C=v.mutations.map(O=>Kc(f.ut,O));return{userId:m,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:_,mutations:C}}(this.serializer,this.userId,c),l=[],d=new me((h,f)=>W(h.canonicalString(),f.canonicalString()));for(let h of i){let f=vM(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(s.put(u)),l.push(o.put(f,dB))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Dn[a]=c.keys()}),p.waitFor(l).next(()=>c)})}lookupMutationBatch(e,n){return Fr(e).get(n).next(r=>r?(V(r.userId===this.userId),Oi(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?p.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Fr(e).Y({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(V(a.batchId>=r),o=Oi(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Fr(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fr(e).W("userMutationsIndex",n).next(r=>r.map(i=>Oi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=vh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return fs(e).Y({range:i},(s,a,c)=>{let[u,l,d]=s,h=Pn(l);if(u===this.userId&&n.path.isEqual(h))return Fr(e).get(d).next(f=>{if(!f)throw N();V(f.userId===this.userId),o.push(Oi(this.serializer,f))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new me(W),i=[];return n.forEach(o=>{let s=vh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=fs(e).Y({range:a},(u,l,d)=>{let[h,f,m]=u,v=Pn(f);h===this.userId&&o.path.isEqual(v)?r=r.add(m):d.done()});i.push(c)}),p.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=vh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new me(W);return fs(e).Y({range:s},(c,u,l)=>{let[d,h,f]=c,m=Pn(h);d===this.userId&&r.isPrefixOf(m)?m.length===i&&(a=a.add(f)):l.done()}).next(()=>this.vn(e,a))}vn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(Fr(e).get(o).next(s=>{if(s===null)throw N();V(s.userId===this.userId),r.push(Oi(this.serializer,s))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return lx(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return fs(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Pn(o[1]);i.push(c)}else a.done()}).next(()=>{V(i.length===0)})})}containsKey(e,n){return dx(e,this.userId,n)}Mn(e){return hx(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function dx(t,e,n){let r=vh(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return fs(t).Y({range:o,J:!0},(a,c,u)=>{let[l,d,h]=a;l===e&&d===i&&(s=!0),u.done()}).next(()=>s)}function Fr(t){return Xe(t,"mutations")}function fs(t){return Xe(t,"documentMutations")}function hx(t){return Xe(t,"mutationQueues")}var Ts=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var __=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new Ts(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>j.fromTimestamp(new be(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>cs(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(V(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0,o=[];return cs(e).Y((s,a)=>{let c=Mc(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>p.waitFor(o)).next(()=>i)}forEachTarget(e,n){return cs(e).Y((r,i)=>{let o=Mc(i);n(o)})}Bn(e){return KA(e).get("targetGlobalKey").next(n=>(V(n!==null),n))}Ln(e,n){return KA(e).put("targetGlobalKey",n)}kn(e,n){return cs(e).put(ax(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=$i(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return cs(e).Y({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let u=Mc(a);su(n,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=Vr(e);return n.forEach(s=>{let a=pt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=Vr(e);return p.forEach(n,o=>{let s=pt(o.path);return p.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=Vr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Vr(e),o=Q();return i.Y({range:r,J:!0},(s,a,c)=>{let u=Pn(s[1]),l=new T(u);o=o.add(l)}).next(()=>o)}containsKey(e,n){let r=pt(n.path),i=IDBKeyRange.bound([r],[fM(r)],!1,!0),o=0;return Vr(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}_t(e,n){return cs(e).get(n).next(r=>r?Mc(r):null)}};function cs(t){return Xe(t,"targets")}function KA(t){return Xe(t,"targetGlobal")}function Vr(t){return Xe(t,"targetDocuments")}function QA([t,e],[n,r]){let i=W(t,n);return i===0?W(e,r):i}var w_=class{constructor(e){this.Qn=e,this.buffer=new me(QA),this.Kn=0}$n(){return++this.Kn}Un(e){let n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();QA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},E_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){E("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Jr(n)?E("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Xr(n)}yield this.Gn(3e5)}))}},I_=class{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(Lt._e);let r=new w_(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(E("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(WA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(E("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WA):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,o,s,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(E("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),us()<=fn.DEBUG&&E("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function oU(t,e){return new I_(t,e)}var C_=class{constructor(e,n){this.db=e,this.garbageCollector=oU(this,n)}jn(e){let n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return gh(e,r)}removeReference(e,n,r){return gh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return gh(e,n)}Xn(e,n){return function(i,o){let s=!1;return hx(i).Z(a=>dx(i,a,o).next(c=>(c&&(s=!0),p.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Zn(e,(s,a)=>{if(a<=n){let c=this.Xn(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,j.min()),Vr(e).delete(function(d){return[0,pt(d.path)]}(s))))});i.push(c)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return gh(e,n)}Zn(e,n){let r=Vr(e),i,o=Lt._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==Lt._e&&n(new T(Pn(i)),o),o=u,i=c):o=Lt._e}).next(()=>{o!==Lt._e&&n(new T(Pn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function gh(t,e){return Vr(t).put(function(r,i){return{targetId:0,path:pt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Gh=class{constructor(){this.changes=new Ln(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var D_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Pi(e).put(r)}removeEntry(e,n,r){return Pi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Bh(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=qe.newInvalidDocument(n);return Pi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Tc(n))},(i,o)=>{r=this.tr(n,o)}).next(()=>r)}nr(e,n){let r={size:0,document:qe.newInvalidDocument(n)};return Pi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Tc(n))},(i,o)=>{r={document:this.tr(n,o),size:zh(o)}}).next(()=>r)}getEntries(e,n){let r=Ct();return this.rr(e,n,(i,o)=>{let s=this.tr(i,o);r=r.insert(i,s)}).next(()=>r)}ir(e,n){let r=Ct(),i=new we(T.comparator);return this.rr(e,n,(o,s)=>{let a=this.tr(o,s);r=r.insert(o,a),i=i.insert(o,zh(s))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return p.resolve();let i=new me(XA);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Tc(i.first()),Tc(i.last())),s=i.getIterator(),a=s.getNext();return Pi(e).Y({index:"documentKeyIndex",range:o},(c,u,l)=>{let d=T.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&XA(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?l.U(Tc(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Bh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pi(e).W(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let l=Ct();for(let d of u){let h=this.tr(T.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(cu(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let o=Ct(),s=ZA(n,r),a=ZA(n,Yt.max());return Pi(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,l)=>{let d=this.tr(T.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(d.key,d),o.size===i&&l.done()}).next(()=>o)}newChangeBuffer(e){return new b_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return YA(e).get("remoteDocumentGlobalKey").next(n=>(V(!!n),n))}er(e,n){return YA(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){let r=nU(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(j.min())))return r}return qe.newInvalidDocument(e)}};function fx(t){return new D_(t)}var b_=class extends Gh{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Ln(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new me((o,s)=>W(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=VA(this._r.serializer,s);i=i.add(o.path.popLast());let u=zh(c);r+=u-a.size,n.push(this._r.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=VA(this._r.serializer,s.convertToNoDocument(j.min()));n.push(this._r.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function YA(t){return Xe(t,"remoteDocumentGlobal")}function Pi(t){return Xe(t,"remoteDocumentsV14")}function Tc(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ZA(t,e){let n=e.documentKey.path.toArray();return[t,Bh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function XA(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=W(n[o],r[o]),i)return i;return i=W(n.length,r.length),i||(i=W(n[n.length-2],r[r.length-2]),i||W(n[n.length-1],r[r.length-1]))}var T_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Wh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Rc(r.mutation,i,jt.empty(),be.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Q()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Q()){let i=Rn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Ac();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Rn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Q()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Ct(),s=Pc(),a=function(){return Pc()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof ln)?o=o.insert(u.key,u):l!==void 0?(s.set(u.key,l.mutation.getFieldMask()),Rc(l.mutation,u,l.mutation.getFieldMask(),be.now())):s.set(u.key,jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,l)=>s.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new T_(l,(d=s.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Pc(),i=new we((s,a)=>s-a),o=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||jt.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||Q()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=VM();l.forEach(h=>{if(!o.has(h)){let f=qM(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,d))}return p.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return T.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):p.resolve(Rn()),a=-1,c=o;return s.next(u=>p.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?p.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Q())).next(l=>({batchId:a,changes:FM(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new T(n)).next(r=>{let i=Ac();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Ac();return this.indexManager.getCollectionParents(e,o).next(a=>p.forEach(a,c=>{let u=function(d,h){return new un(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{let l=u.getKey();s.get(l)===null&&(s=s.insert(l,qe.newInvalidDocument(l)))});let a=Ac();return s.forEach((c,u)=>{let l=o.get(c);l!==void 0&&Rc(l.mutation,u,jt.empty(),be.now()),cu(n,u)&&(a=a.insert(c,u))}),a})}};var S_=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return p.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ve(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:Nw(i.bundledQuery),readTime:Ve(i.readTime)}}(n)),p.resolve()}};var A_=class{constructor(){this.overlays=new we(T.comparator),this.lr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Rn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.lt(e,n,o)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=Rn(),o=n.length+1,s=new T(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new we((u,l)=>u-l),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=o.get(u.largestBatchId);l===null&&(l=Rn(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=Rn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return p.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Hc(n,r));let o=this.lr.get(n);o===void 0&&(o=Q(),this.lr.set(n,o)),this.lr.set(n,o.add(r.key))}};var Yc=class{constructor(){this.hr=new me($e.Pr),this.Ir=new me($e.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new $e(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new $e(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new T(new le([])),r=new $e(n,e),i=new $e(n,e+1),o=[];return this.Ir.forEachInRange([r,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new T(new le([])),r=new $e(n,e),i=new $e(n,e+1),o=Q();return this.Ir.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new $e(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},$e=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return T.comparator(e.key,n.key)||W(e.gr,n.gr)}static Tr(e,n){return W(e.gr,n.gr)||T.comparator(e.key,n.key)}};var M_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new me($e.Pr)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new $c(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.yr=this.yr.add(new $e(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(s)}lookupMutationBatch(e,n){return p.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),o=i<0?0:i;return p.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new $e(n,0),i=new $e(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([r,i],s=>{let a=this.wr(s.gr);o.push(a)}),p.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new me(W);return n.forEach(i=>{let o=new $e(i,0),s=new $e(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{r=r.add(a.gr)})}),p.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;T.isDocumentKey(o)||(o=o.child(""));let s=new $e(new T(o),0),a=new me(W);return this.yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.gr)),!0)},s),p.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){V(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return p.forEach(n.mutations,i=>{let o=new $e(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new $e(n,0),i=this.yr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var x_=class{constructor(e){this.Cr=e,this.docs=function(){return new we(T.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():qe.newInvalidDocument(n))}getEntries(e,n){let r=Ct();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():qe.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ct(),s=n.path,a=new T(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||Tw(gM(l),r)<=0||(i.has(l.key)||cu(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return p.resolve(o)}getAllFromCollectionGroup(e,n,r,i){N()}vr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new P_(this)}getSize(e){return p.resolve(this.size)}},P_=class extends Gh{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var R_=class{constructor(e){this.persistence=e,this.Fr=new Ln(n=>$i(n),su),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Yc,this.targetCount=0,this.Nr=Ts.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),p.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new Ts(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.kn(n),p.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(o).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),p.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Or.containsKey(n))}};var Kh=class{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Lt(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new R_(this),this.indexManager=new y_,this.remoteDocumentCache=function(i){return new x_(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new jh(n),this.Kr=new S_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new A_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new M_(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){E("MemoryPersistence","Starting transaction:",e);let i=new N_(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,n){return p.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},N_=class extends Sh{constructor(e){super(),this.currentSequenceNumber=e}},Qh=class t{constructor(e){this.persistence=e,this.Gr=new Yc,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw N()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),p.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Hr,r=>{let i=T.fromPath(r);return this.Jr(e,i).next(o=>{o||n.removeEntry(i,j.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return p.or([()=>p.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var O_=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new Ah("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gA,{unique:!0}),c.createObjectStore("documentMutations")}(e),JA(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=p.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),JA(e)),s=s.next(()=>function(c){let u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:j.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,u){return u.store("mutations").W().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gA,{unique:!0});let d=u.store("mutations"),h=l.map(f=>d.put(f));return p.waitFor(h)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Zr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),r<7&&i>=7&&(s=s.next(()=>this.ei(o))),r<8&&i>=8&&(s=s.next(()=>this.ti(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ni(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:CB});u.createIndex("collectionPathOverlayIndex",DB,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",bB,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:hB});u.createIndex("documentKeyIndex",fB),u.createIndex("collectionGroupIndex",pB)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ii(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:_B}).createIndex("sequenceNumberIndex",wB,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:EB}).createIndex("documentKeyIndex",IB,{unique:!1})}(e))),s}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=zh(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>p.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>p.forEach(a,c=>{V(c.userId===o.userId);let u=Oi(this.serializer,c);return lx(e,o.userId,u).next(()=>{})}))}))}ei(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,a)=>{let c=new le(s),u=function(d){return[0,pt(d)]}(c);o.push(n.get(u).next(l=>l?p.resolve():(d=>n.put({targetId:0,path:pt(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>p.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:vB});let r=n.store("collectionParents"),i=new Qc,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:pt(c)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let c=new le(s);return o(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,c],u)=>{let l=Pn(a);return o(l.popLast())}))}ni(e){let n=e.store("targets");return n.Y((r,i)=>{let o=Mc(i),s=ax(this.serializer,o);return n.put(s)})}ri(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new T(le.fromString(d.document.name).popFirst(5)):d.noDocument?T.fromSegments(d.noDocument.path):d.unknownDocument?T.fromSegments(d.unknownDocument.path):N()}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(u))}).next(()=>p.waitFor(i))}ii(e,n){let r=n.store("mutations"),i=fx(this.serializer),o=new Kh(Qh.jr,this.serializer.ut);return r.W().next(s=>{let a=new Map;return s.forEach(c=>{var u;let l=(u=a.get(c.userId))!==null&&u!==void 0?u:Q();Oi(this.serializer,c).keys().forEach(d=>l=l.add(d)),a.set(c.userId,l)}),p.forEach(a,(c,u)=>{let l=new He(u),d=Uh.ct(this.serializer,l),h=o.getIndexManager(l),f=qh.ct(l,this.serializer,h,o.referenceDelegate);return new Wh(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Vc(n,Lt._e),c).next()})})}};function JA(t){t.createObjectStore("targetDocuments",{keyPath:mB}).createIndex("documentTargetsIndex",yB,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gB,{unique:!0}),t.createObjectStore("targetGlobal")}var Tv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",k_=class t{constructor(e,n,r,i,o,s,a,c,u,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=o,this.window=s,this.document=a,this.oi=u,this._i=l,this.ai=d,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=h=>Promise.resolve(),!t.D())throw new w(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new C_(this,i),this.Ii=n+"main",this.serializer=new jh(c),this.Ti=new $r(this.Ii,this.ai,new O_(this.serializer)),this.qr=new __(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fx(this.serializer),this.Kr=new l_,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,l===!1&&ke("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,Tv);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Lt(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=n=>y(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(n=>y(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>y(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Jr(e))return E("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return E("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Sc(e).get("owner").next(n=>p.resolve(this.wi(n)))}Si(e){return mh(e).delete(this.clientId)}bi(){return y(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Xe(n,"clientMetadata");return r.W().next(i=>{let o=this.Ci(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return p.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ei)for(let n of e)this.Ei.removeItem(this.vi(n.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?p.resolve(!0):Sc(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,Tv);return!1}}return!(!this.networkEnabled||!this.inForeground)||mh(e).W().next(r=>this.Ci(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&E("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return y(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Vc(e,Lt._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()})}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>mh(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return qh.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new v_(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Uh.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){E("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===15?SB:c===14?EM:c===13?wM:c===12?TB:c===11?_M:void N()}(this.ai),s;return this.Ti.runTransaction(e,i,o,a=>(s=new Vc(a,this.Lr?this.Lr.next():Lt._e),n==="readwrite-primary"?this.fi(s).next(c=>!!c||this.gi(s)).next(c=>{if(!c)throw ke(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new w(g.FAILED_PRECONDITION,mM);return r(s)}).next(c=>this.yi(s).next(()=>c)):this.Li(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Li(e){return Sc(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new w(g.FAILED_PRECONDITION,Tv)})}yi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Sc(e).put("owner",n)}static D(){return $r.D()}pi(e){let n=Sc(e);return n.get("owner").next(r=>this.wi(r)?(E("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Di(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(ke(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let n=/(?:Version|Mobile)\/1[456]/;A0()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{let r=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return E("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ke("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){ke("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Sc(t){return Xe(t,"owner")}function mh(t){return Xe(t,"clientMetadata")}function kw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var F_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Q(),i=Q();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var V_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Yh=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new V_;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(us()<=fn.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),p.resolve()):(us()<=fn.DEBUG&&E("QueryEngine","Query:",ls(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(us()<=fn.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gt(n))):p.resolve())}zi(e,n){if(TA(n))return p.resolve(null);let r=gt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=kh(n,null,"F"),r=gt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Q(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Yi(n,a);return this.Zi(n,u,s,c.readTime)?this.zi(e,kh(n,null,"F")):this.Xi(e,u,n,c)}))})))}ji(e,n,r,i){return TA(n)||i.isEqual(j.min())?p.resolve(null):this.Gi.getDocuments(e,r).next(o=>{let s=this.Yi(n,o);return this.Zi(n,s,r,i)?p.resolve(null):(us()<=fn.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ls(n)),this.Xi(e,s,n,pM(i,-1)).next(a=>a))})}Yi(e,n){let r=new me(OM(e));return n.forEach((i,o)=>{cu(e,o)&&(r=r.add(o))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,n,r){return us()<=fn.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",ls(n)),this.Gi.getDocumentsMatchingQuery(e,n,Yt.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var L_=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new we(W),this.ns=new Ln(o=>$i(o),su),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wh(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function px(t,e,n,r){return new L_(t,e,n,r)}function gx(t,e){return y(this,null,function*(){let n=A(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Q();for(let u of i){s.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of o){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({_s:u,removedBatchIds:s,addedBatchIds:a}))})})})}function sU(t,e){let n=A(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=p.resolve();return h.forEach(m=>{f=f.next(()=>l.getEntry(c,m)).next(v=>{let _=u.docVersions.get(m);V(_!==null),v.version.compareTo(_)<0&&(d.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),l.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Q();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function mx(t){let e=A(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function aU(t,e){let n=A(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Ze.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(v,_,C){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(h,f,l)&&a.push(n.qr.updateTargetData(o,f))});let c=Ct(),u=Q();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(yx(o,s,e.documentUpdates).next(l=>{c=l.us,u=l.cs})),!r.isEqual(j.min())){let l=n.qr.getLastRemoteSnapshotVersion(o).next(d=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return p.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.ts=i,o))}function yx(t,e,n){let r=Q(),i=Q();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Ct();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(j.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{us:s,cs:i}})}function cU(t,e){let n=A(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ss(t,e){let n=A(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(o=>o?(i=o,p.resolve(i)):n.qr.allocateTargetId(r).next(s=>(i=new bs(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function As(t,e,n){return y(this,null,function*(){let r=A(t),i=r.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Jr(s))throw s;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function Zh(t,e,n){let r=A(t),i=j.min(),o=Q();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,l){let d=A(c),h=d.ns.get(l);return h!==void 0?p.resolve(d.ts.get(h)):d.qr.getTargetData(u,l)}(r,s,gt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.es.getDocumentsMatchingQuery(s,e,n?i:j.min(),n?o:Q())).next(a=>(wx(r,NM(e),a),{documents:a,ls:o})))}function vx(t,e){let n=A(t),r=A(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function _x(t,e){let n=A(t),r=n.rs.get(e)||j.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,pM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(wx(n,e,i),i))}function wx(t,e,n){let r=t.rs.get(e)||j.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.rs.set(e,r)}function uU(t,e,n,r){return y(this,null,function*(){let i=A(t),o=Q(),s=Ct();for(let u of n){let l=e.hs(u.metadata.name);u.document&&(o=o.add(l));let d=e.Ps(u);d.setReadTime(e.Is(u.metadata.readTime)),s=s.insert(l,d)}let a=i.ss.newChangeBuffer({trackRemovals:!0}),c=yield Ss(i,function(l){return gt(ks(le.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>yx(u,a,s).next(l=>(a.apply(u),l)).next(l=>i.qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.qr.addMatchingKeys(u,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,l.us,l.cs)).next(()=>l.us)))})}function lU(r,i){return y(this,arguments,function*(t,e,n=Q()){let o=yield Ss(t,gt(Nw(e.bundledQuery))),s=A(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Ve(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Kr.saveNamedQuery(a,e);let u=o.withResumeToken(Ze.EMPTY_BYTE_STRING,c);return s.ts=s.ts.insert(u.targetId,u),s.qr.updateTargetData(a,u).next(()=>s.qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.Kr.saveNamedQuery(a,e))})})}function eM(t,e){return`firestore_clients_${t}_${e}`}function tM(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Sv(t,e){return`firestore_targets_${t}_${e}`}var Xh=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new w(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(ke("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Nc=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new w(r.error.code,r.error.message))),o?new t(e,r.state,i):(ke("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Jh=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Pw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=yM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ke("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},j_=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(ke("SharedClientState",`Failed to parse online state: ${e}`),null)}},Zc=class{constructor(){this.activeTargetIds=Pw()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Oc=class{constructor(e,n,r,i,o){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new we(W),this.started=!1,this.ps=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=eM(this.persistenceKey,this.Rs),this.ws=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new Zc),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return y(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Rs)continue;let i=this.getItem(eM(this.persistenceKey,r));if(i){let o=Jh.Ts(r,i);o&&(this.gs=this.gs.insert(o.clientId,o))}}this.Fs();let n=this.storage.getItem(this.Cs);if(n){let r=this.Ms(n);r&&this.xs(r)}for(let r of this.ps)this.fs(r);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Sv(this.persistenceKey,e));if(r){let i=Nc.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Sv(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return E("SharedClientState","READ",e,n),n}setItem(e,n){E("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){E("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let n=e;if(n.storageArea===this.storage){if(E("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void ke("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>y(this,null,function*(){if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){let r=this.Ks(n.key);return this.$s(r,null)}{let r=this.Us(n.key,n.newValue);if(r)return this.$s(r.clientId,r)}}else if(this.bs.test(n.key)){if(n.newValue!==null){let r=this.Ws(n.key,n.newValue);if(r)return this.Gs(r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(n.key===this.Cs){if(n.newValue!==null){let r=this.Ms(n.newValue);if(r)return this.xs(r)}}else if(n.key===this.ws){let r=function(o){let s=Lt._e;if(o!=null)try{let a=JSON.parse(o);V(typeof a=="number"),s=a}catch(a){ke("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==Lt._e&&this.sequenceNumberHandler(r)}else if(n.key===this.vs){let r=this.Hs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Js(i)))}}}else this.ps.push(n)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){let i=new Xh(this.currentUser,e,n,r),o=tM(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Es())}Bs(e){let n=tM(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){let n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,r){let i=Sv(this.persistenceKey,e),o=new Nc(e,n,r);this.setItem(i,o.Es())}Qs(e){let n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){let n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){let r=this.Ks(e);return Jh.Ts(r,n)}Ws(e,n){let r=this.bs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Xh.Ts(new He(o),i,n)}zs(e,n){let r=this.Ds.exec(e),i=Number(r[1]);return Nc.Ts(i,n)}Ms(e){return j_.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return y(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);E("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){let r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),o=this.Os(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=Pw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},ef=class{constructor(){this.eo=new Zc,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Zc,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var B_=class{ro(e){}shutdown(){}};var tf=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var yh=null;function Av(){return yh===null?yh=function(){return 268435456+Math.round(2147483648*Math.random())}():yh++,"0x"+yh.toString(16)}var dU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var U_=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}};var at="WebChannelConnection",$_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${o}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get yo(){return!1}wo(n,r,i,o,s){let a=Av(),c=this.So(n,r);E("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(u,o,s),this.Do(n,c,u,i).then(l=>(E("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Qt("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}Co(n,r,i,o,s,a){return this.wo(n,r,i,o,s)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Os}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}So(n,r){let i=dU[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){let o=Av();return new Promise((s,a)=>{let c=new lA;c.setWithCredentials(!0),c.listenOnce(cA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case fh.NO_ERROR:let l=c.getResponseJson();E(at,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case fh.TIMEOUT:E(at,`RPC '${e}' ${o} timed out`),a(new w(g.DEADLINE_EXCEEDED,"Request time out"));break;case fh.HTTP_ERROR:let d=c.getStatus();if(E(at,`RPC '${e}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let m=function(_){let C=_.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(C)>=0?C:g.UNKNOWN}(f.status);a(new w(m,f.message))}else a(new w(g.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new w(g.UNAVAILABLE,"Connection failed."));break;default:N()}}finally{E(at,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);E(at,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)})}vo(e,n,r){let i=Av(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=sA(),a=aA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.bo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=o.join("");E(at,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=s.createWebChannel(l,c),h=!1,f=!1,m=new U_({co:_=>{f?E(at,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(E(at,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),E(at,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},lo:()=>d.close()}),v=(_,C,O)=>{_.listen(C,M=>{try{O(M)}catch(U){setTimeout(()=>{throw U},0)}})};return v(d,Cc.EventType.OPEN,()=>{f||E(at,`RPC '${e}' stream ${i} transport opened.`)}),v(d,Cc.EventType.CLOSE,()=>{f||(f=!0,E(at,`RPC '${e}' stream ${i} transport closed`),m.Ro())}),v(d,Cc.EventType.ERROR,_=>{f||(f=!0,Qt(at,`RPC '${e}' stream ${i} transport errored:`,_),m.Ro(new w(g.UNAVAILABLE,"The operation could not be completed")))}),v(d,Cc.EventType.MESSAGE,_=>{var C;if(!f){let O=_.data[0];V(!!O);let M=O,U=M.error||((C=M[0])===null||C===void 0?void 0:C.error);if(U){E(at,`RPC '${e}' stream ${i} received error:`,U);let H=U.status,K=function(Ff){let E0=Ue[Ff];if(E0!==void 0)return KM(E0)}(H),Ee=U.message;K===void 0&&(K=g.INTERNAL,Ee="Unknown error status: "+H+" with message "+U.message),f=!0,m.Ro(new w(K,Ee)),d.close()}else E(at,`RPC '${e}' stream ${i} received:`,O),m.Vo(O)}}),v(a,uA.STAT_EVENT,_=>{_.stat===Dv.PROXY?E(at,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===Dv.NOPROXY&&E(at,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.Ao()},0),m}};function Ex(){return typeof window<"u"?window:null}function Ih(){return typeof document<"u"?document:null}function uu(t){return new s_(t,!0)}var Xc=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();let n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&E("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}};var nf=class{constructor(e,n,r,i,o,s,a,c){this.si=e,this.Ko=r,this.$o=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Xc(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}stop(){return y(this,null,function*(){this.jo()&&(yield this.close(0))})}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){return y(this,null,function*(){if(this.Ho())return this.close(0)})}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){return y(this,null,function*(){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(ke(n.toString()),ke("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Io(n)})}r_(){}auth(){this.state=1;let e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{let i=new w(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){let r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(()=>y(this,null,function*(){this.state=0,this.start()}))}o_(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},H_=class extends nf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();let n=QB(this.serializer,e),r=function(o){if(!("targetChange"in o))return j.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?j.min():s.readTime?Ve(s.readTime):j.min()}(e);return this.listener.a_(n,r)}u_(e){let n={};n.database=Wc(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=Nh(c)?{documents:tx(o,c)}:{query:nx(o,c)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=YM(o,s.resumeToken);let u=a_(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(j.min())>0){a.readTime=Ds(o,s.snapshotVersion.toTimestamp());let u=a_(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=ZB(this.serializer,e);r&&(n.labels=r),this.e_(n)}c_(e){let n={};n.database=Wc(this.serializer),n.removeTarget=e,this.e_(n)}},z_=class extends nf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(V(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();let n=YB(e.writeResults,e.commitTime),r=Ve(e.commitTime);return this.listener.I_(r,n)}return V(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){let e={};e.database=Wc(this.serializer),this.e_(e)}P_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Kc(this.serializer,r))};this.e_(n)}};var q_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.wo(e,n,r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new w(g.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,n,r,o,s,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new w(g.UNKNOWN,o.toString())})}terminate(){this.d_=!0}};var G_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(ke(n),this.f_=!1):E("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}};var W_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(s=>{r.enqueueAndForget(()=>y(this,null,function*(){ei(this)&&(E("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let u=A(c);u.C_.add(4),yield Fs(u),u.M_.set("Unknown"),u.C_.delete(4),yield lu(u)})}(this))}))}),this.M_=new G_(r,i)}};function lu(t){return y(this,null,function*(){if(ei(t))for(let e of t.v_)yield e(!0)})}function Fs(t){return y(this,null,function*(){for(let e of t.v_)yield e(!1)})}function If(t,e){let n=A(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),Lw(n)?Vw(n):Ls(n).Ho()&&Fw(n,e))}function Jc(t,e){let n=A(t),r=Ls(n);n.D_.delete(e),r.Ho()&&Ix(n,e),n.D_.size===0&&(r.Ho()?r.Zo():ei(n)&&n.M_.set("Unknown"))}function Fw(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(j.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ls(t).u_(e)}function Ix(t,e){t.x_.Oe(e),Ls(t).c_(e)}function Vw(t){t.x_=new o_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Ls(t).start(),t.M_.g_()}function Lw(t){return ei(t)&&!Ls(t).jo()&&t.D_.size>0}function ei(t){return A(t).C_.size===0}function Cx(t){t.x_=void 0}function hU(t){return y(this,null,function*(){t.D_.forEach((e,n)=>{Fw(t,e)})})}function fU(t,e){return y(this,null,function*(){Cx(t),Lw(t)?(t.M_.w_(e),Vw(t)):t.M_.set("Unknown")})}function pU(t,e,n){return y(this,null,function*(){if(t.M_.set("Online"),e instanceof Vh&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.D_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.D_.delete(a),i.x_.removeTarget(a))})}(t,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rf(t,r)}else if(e instanceof ys?t.x_.$e(e):e instanceof Fh?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(j.min()))try{let r=yield mx(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.x_.it(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=o.D_.get(u);l&&o.D_.set(u,l.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let l=o.D_.get(c);if(!l)return;o.D_.set(c,l.withResumeToken(Ze.EMPTY_BYTE_STRING,l.snapshotVersion)),Ix(o,c);let d=new bs(l.target,c,u,l.sequenceNumber);Fw(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){E("RemoteStore","Failed to raise snapshot:",r),yield rf(t,r)}})}function rf(t,e,n){return y(this,null,function*(){if(!Jr(e))throw e;t.C_.add(1),yield Fs(t),t.M_.set("Offline"),n||(n=()=>mx(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){E("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield lu(t)}))})}function Dx(t,e){return e().catch(n=>rf(t,n,e))}function Vs(t){return y(this,null,function*(){let e=A(t),n=Zr(e),r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;gU(e);)try{let i=yield cU(e.localStore,r);if(i===null){e.b_.length===0&&n.Zo();break}r=i.batchId,mU(e,i)}catch(i){yield rf(e,i)}bx(e)&&Tx(e)})}function gU(t){return ei(t)&&t.b_.length<10}function mU(t,e){t.b_.push(e);let n=Zr(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function bx(t){return ei(t)&&!Zr(t).jo()&&t.b_.length>0}function Tx(t){Zr(t).start()}function yU(t){return y(this,null,function*(){Zr(t).E_()})}function vU(t){return y(this,null,function*(){let e=Zr(t);for(let n of t.b_)e.P_(n.mutations)})}function _U(t,e,n){return y(this,null,function*(){let r=t.b_.shift(),i=n_.from(r,e,n);yield Dx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Vs(t)})}function wU(t,e){return y(this,null,function*(){e&&Zr(t).h_&&(yield function(r,i){return y(this,null,function*(){if(function(s){return WM(s)&&s!==g.ABORTED}(i.code)){let o=r.b_.shift();Zr(r).Yo(),yield Dx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Vs(r)}})}(t,e)),bx(t)&&Tx(t)})}function nM(t,e){return y(this,null,function*(){let n=A(t);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");let r=ei(n);n.C_.add(3),yield Fs(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield lu(n)})}function K_(t,e){return y(this,null,function*(){let n=A(t);e?(n.C_.delete(2),yield lu(n)):e||(n.C_.add(2),yield Fs(n),n.M_.set("Unknown"))})}function Ls(t){return t.O_||(t.O_=function(n,r,i){let o=A(n);return o.A_(),new H_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:hU.bind(null,t),Io:fU.bind(null,t),a_:pU.bind(null,t)}),t.v_.push(e=>y(this,null,function*(){e?(t.O_.Yo(),Lw(t)?Vw(t):t.M_.set("Unknown")):(yield t.O_.stop(),Cx(t))}))),t.O_}function Zr(t){return t.N_||(t.N_=function(n,r,i){let o=A(n);return o.A_(),new z_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:yU.bind(null,t),Io:wU.bind(null,t),T_:vU.bind(null,t),I_:_U.bind(null,t)}),t.v_.push(e=>y(this,null,function*(){e?(t.N_.Yo(),yield Vs(t)):(yield t.N_.stop(),t.b_.length>0&&(E("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))}))),t.N_}var Q_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ze,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function js(t,e){if(ke("AsyncQueue",`${e}: ${t}`),Jr(t))return new w(g.UNAVAILABLE,`${e}: ${t}`);throw t}var of=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||T.comparator(n.key,r.key):(n,r)=>T.comparator(n.key,r.key),this.keyedMap=Ac(),this.sortedSet=new we(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var sf=class{constructor(){this.B_=new we(T.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):N():this.B_=this.B_.insert(n,e)}L_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},Ms=class t{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,of.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Y_=class{constructor(){this.k_=void 0,this.listeners=[]}},Z_=class{constructor(){this.queries=new Ln(e=>RM(e),au),this.onlineState="Unknown",this.q_=new Set}};function jw(t,e){return y(this,null,function*(){let n=A(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new Y_),i)try{o.k_=yield n.onListen(r)}catch(s){let a=js(s,`Initialization of query '${ls(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.listeners.push(e),e.Q_(n.onlineState),o.k_&&e.K_(o.k_)&&Uw(n)})}function Bw(t,e){return y(this,null,function*(){let n=A(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=o.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function EU(t,e){let n=A(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.listeners)a.K_(i)&&(r=!0);s.k_=i}}r&&Uw(n)}function IU(t,e,n){let r=A(t),i=r.queries.get(e);if(i)for(let o of i.listeners)o.onError(n);r.queries.delete(e)}function Uw(t){t.q_.forEach(e=>{e.next()})}var eu=class{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ms(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.J_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;let n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=Ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}};var X_=class{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}};var af=class{constructor(e){this.serializer=e}hs(e){return On(this.serializer,e)}Ps(e){return e.metadata.exists?ex(this.serializer,e.document,!1):qe.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Ve(e)}},J_=class{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Sx(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;let r=le.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){let n=new Map,r=new af(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.hs(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||Q()).add(o);n.set(s,a)}}return n}complete(){return y(this,null,function*(){let e=yield uU(this.localStore,new af(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(let r of this.queries)yield lU(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}})}};function Sx(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var cf=class{constructor(e){this.key=e}},uf=class{constructor(e){this.key=e}},lf=class{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Q(),this.mutatedKeys=Q(),this._a=OM(e),this.aa=new of(this._a)}get ua(){return this.ia}ca(e,n){let r=n?n.la:new sf,i=n?n.aa:this.aa,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=cu(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),_=!1;h&&f?h.data.isEqual(f.data)?m!==v&&(r.track({type:3,doc:f}),_=!0):this.ha(h,f)||(r.track({type:2,doc:f}),_=!0,(c&&this._a(f,c)>0||u&&this._a(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(c||u)&&(a=!0)),_&&(f?(s=s.add(f),o=v?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{aa:s,la:r,Zi:a,mutatedKeys:o}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;let s=e.la.L_();s.sort((l,d)=>function(f,m){let v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return N()}};return v(f)-v(m)}(l.type,d.type)||this._a(l.doc,d.doc)),this.Pa(r),i=i!=null&&i;let a=n&&!i?this.Ia():[],c=this.oa.size===0&&this.current&&!i?1:0,u=c!==this.sa;return this.sa=c,s.length!==0||u?{snapshot:new Ms(this.query,e.aa,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new sf,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];let e=this.oa;this.oa=Q(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});let n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new uf(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new cf(r))}),n}da(e){this.ia=e.ls,this.oa=Q();let n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Ms.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}},ew=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},tw=class{constructor(e){this.key=e,this.Ra=!1}},nw=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Ln(a=>RM(a),au),this.fa=new Map,this.ga=new Set,this.pa=new we(T.comparator),this.ya=new Map,this.wa=new Yc,this.Sa={},this.ba=new Map,this.Da=Ts.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}};function CU(t,e){return y(this,null,function*(){let n=Gw(t),r,i,o=n.ma.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{let s=yield Ss(n.localStore,gt(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield $w(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&If(n.remoteStore,s)}return i})}function $w(t,e,n,r,i){return y(this,null,function*(){t.va=(d,h,f)=>function(v,_,C,O){return y(this,null,function*(){let M=_.view.ca(C);M.Zi&&(M=yield Zh(v.localStore,_.query,!1).then(({documents:Ee})=>_.view.ca(Ee,M)));let U=O&&O.targetChanges.get(_.targetId),H=O&&O.targetMismatches.get(_.targetId)!=null,K=_.view.applyChanges(M,v.isPrimaryClient,U,H);return rw(v,_.targetId,K.Ta),K.snapshot})}(t,d,h,f);let o=yield Zh(t.localStore,e,!0),s=new lf(e,o.ls),a=s.ca(o.documents),c=qc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,c);rw(t,n,u.Ta);let l=new ew(e,n,s);return t.ma.set(e,l),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),u.snapshot})}function DU(t,e){return y(this,null,function*(){let n=A(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(o=>!au(o,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield As(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Jc(n.remoteStore,r.targetId),xs(n,r.targetId)}).catch(Xr))):(xs(n,r.targetId),yield As(n.localStore,r.targetId,!0))})}function bU(t,e,n){return y(this,null,function*(){let r=Ww(t);try{let i=yield function(s,a){let c=A(s),u=be.now(),l=a.reduce((f,m)=>f.add(m.key),Q()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=Ct(),v=Q();return c.ss.getEntries(f,l).next(_=>{m=_,m.forEach((C,O)=>{O.isValidDocument()||(v=v.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,m)).next(_=>{d=_;let C=[];for(let O of a){let M=$B(O,d.get(O.key).overlayedDocument);M!=null&&C.push(new ln(O.key,M,bM(M.value.mapValue),Pe.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,C,a)}).next(_=>{h=_;let C=_.applyToLocalDocumentSet(d,v);return c.documentOverlayCache.saveOverlays(f,_.batchId,C)})}).then(()=>({batchId:h.batchId,changes:FM(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Sa[s.currentUser.toKey()];u||(u=new we(W)),u=u.insert(a,c),s.Sa[s.currentUser.toKey()]=u}(r,i.batchId,n),yield cr(r,i.changes),yield Vs(r.remoteStore)}catch(i){let o=js(i,"Failed to persist write");n.reject(o)}})}function Ax(t,e){return y(this,null,function*(){let n=A(t);try{let r=yield aU(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.ya.get(o);s&&(V(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ra=!0:i.modifiedDocuments.size>0?V(s.Ra):i.removedDocuments.size>0&&(V(s.Ra),s.Ra=!1))}),yield cr(n,r,e)}catch(r){yield Xr(r)}})}function rM(t,e,n){let r=A(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ma.forEach((o,s)=>{let a=s.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=A(s);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.listeners)h.Q_(a)&&(u=!0)}),u&&Uw(c)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function TU(t,e,n){return y(this,null,function*(){let r=A(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.ya.get(e),o=i&&i.key;if(o){let s=new we(T.comparator);s=s.insert(o,qe.newNoDocument(o,j.min()));let a=Q().add(o),c=new zc(j.min(),new Map,new we(W),s,a);yield Ax(r,c),r.pa=r.pa.remove(o),r.ya.delete(e),qw(r)}else yield As(r.localStore,e,!1).then(()=>xs(r,e,n)).catch(Xr)})}function SU(t,e){return y(this,null,function*(){let n=A(t),r=e.batch.batchId;try{let i=yield sU(n.localStore,e);zw(n,r,null),Hw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield cr(n,i)}catch(i){yield Xr(i)}})}function AU(t,e,n){return y(this,null,function*(){let r=A(t);try{let i=yield function(s,a){let c=A(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(V(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);zw(r,e,n),Hw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield cr(r,i)}catch(i){yield Xr(i)}})}function MU(t,e){return y(this,null,function*(){let n=A(t);ei(n.remoteStore)||E("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=A(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){let i=js(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Hw(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function zw(t,e,n){let r=A(t),i=r.Sa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function xs(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||Mx(t,r)})}function Mx(t,e){t.ga.delete(e.path.canonicalString());let n=t.pa.get(e);n!==null&&(Jc(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),qw(t))}function rw(t,e,n){for(let r of n)r instanceof cf?(t.wa.addReference(r.key,e),xU(t,r)):r instanceof uf?(E("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||Mx(t,r.key)):N()}function xU(t,e){let n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(E("SyncEngine","New document in limbo: "+n),t.ga.add(r),qw(t))}function qw(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){let e=t.ga.values().next().value;t.ga.delete(e);let n=new T(le.fromString(e)),r=t.Da.next();t.ya.set(r,new tw(n)),t.pa=t.pa.insert(n,r),If(t.remoteStore,new bs(gt(ks(n.path)),r,"TargetPurposeLimboResolution",Lt._e))}}function cr(t,e,n){return y(this,null,function*(){let r=A(t),i=[],o=[],s=[];r.ma.isEmpty()||(r.ma.forEach((a,c)=>{s.push(r.va(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=F_.Qi(c.targetId,u);o.push(l)}}))}),yield Promise.all(s),r.Va.a_(i),yield function(c,u){return y(this,null,function*(){let l=A(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(u,h=>p.forEach(h.ki,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>p.forEach(h.qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Jr(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ts.get(h),m=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(m);l.ts=l.ts.insert(h,v)}}})}(r.localStore,o))})}function PU(t,e){return y(this,null,function*(){let n=A(t);if(!n.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());let r=yield gx(n.localStore,e);n.currentUser=e,function(o,s){o.ba.forEach(a=>{a.forEach(c=>{c.reject(new w(g.CANCELLED,s))})}),o.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cr(n,r._s)}})}function RU(t,e){let n=A(t),r=n.ya.get(e);if(r&&r.Ra)return Q().add(r.key);{let i=Q(),o=n.fa.get(e);if(!o)return i;for(let s of o){let a=n.ma.get(s);i=i.unionWith(a.view.ua)}return i}}function NU(t,e){return y(this,null,function*(){let n=A(t),r=yield Zh(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&rw(n,e.targetId,i.Ta),i})}function OU(t,e){return y(this,null,function*(){let n=A(t);return _x(n.localStore,e).then(r=>cr(n,r))})}function kU(t,e,n,r){return y(this,null,function*(){let i=A(t),o=yield function(a,c){let u=A(a),l=A(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.Cn(d,c).next(h=>h?u.localDocuments.getDocuments(d,h):p.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield Vs(i.remoteStore):n==="acknowledged"||n==="rejected"?(zw(i,e,r||null),Hw(i,e),function(a,c){A(A(a).mutationQueue).Fn(c)}(i.localStore,e)):N(),yield cr(i,o)):E("SyncEngine","Cannot apply mutation batch with id: "+e)})}function FU(t,e){return y(this,null,function*(){let n=A(t);if(Gw(n),Ww(n),e===!0&&n.Ca!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield iM(n,r.toArray());n.Ca=!0,yield K_(n.remoteStore,!0);for(let o of i)If(n.remoteStore,o)}else if(e===!1&&n.Ca!==!1){let r=[],i=Promise.resolve();n.fa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(xs(n,s),As(n.localStore,s,!0))),Jc(n.remoteStore,s)}),yield i,yield iM(n,r),function(s){let a=A(s);a.ya.forEach((c,u)=>{Jc(a.remoteStore,u)}),a.wa.Vr(),a.ya=new Map,a.pa=new we(T.comparator)}(n),n.Ca=!1,yield K_(n.remoteStore,!1)}})}function iM(t,e,n){return y(this,null,function*(){let r=A(t),i=[],o=[];for(let s of e){let a,c=r.fa.get(s);if(c&&c.length!==0){a=yield Ss(r.localStore,gt(c[0]));for(let u of c){let l=r.ma.get(u),d=yield NU(r,l);d.snapshot&&o.push(d.snapshot)}}else{let u=yield vx(r.localStore,s);a=yield Ss(r.localStore,u),yield $w(r,xx(u),s,!1,a.resumeToken)}i.push(a)}return r.Va.a_(o),i})}function xx(t){return PM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function VU(t){return function(n){return A(A(n).persistence).Bi()}(A(t).localStore)}function LU(t,e,n,r){return y(this,null,function*(){let i=A(t);if(i.Ca)return void E("SyncEngine","Ignoring unexpected query state notification.");let o=i.fa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield _x(i.localStore,NM(o[0])),a=zc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ze.EMPTY_BYTE_STRING);yield cr(i,s,a);break}case"rejected":yield As(i.localStore,e,!0),xs(i,e,r);break;default:N()}})}function jU(t,e,n){return y(this,null,function*(){let r=Gw(t);if(r.Ca){for(let i of e){if(r.fa.has(i)){E("SyncEngine","Adding an already active target "+i);continue}let o=yield vx(r.localStore,i),s=yield Ss(r.localStore,o);yield $w(r,xx(o),s.targetId,!1,s.resumeToken),If(r.remoteStore,s)}for(let i of n)r.fa.has(i)&&(yield As(r.localStore,i,!1).then(()=>{Jc(r.remoteStore,i),xs(r,i)}).catch(Xr))}})}function Gw(t){let e=A(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ax.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TU.bind(null,e),e.Va.a_=EU.bind(null,e.eventManager),e.Va.Fa=IU.bind(null,e.eventManager),e}function Ww(t){let e=A(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AU.bind(null,e),e}function BU(t,e,n){let r=A(t);(function(o,s,a){return y(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(f,m){let v=A(f),_=Ve(m.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",C=>v.Kr.getBundleMetadata(C,m.id)).then(C=>!!C&&C.createTime.compareTo(_)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(Sx(c));let u=new J_(c,o.localStore,s.serializer),l=yield s.Ma();for(;l;){let h=yield u.ea(l);h&&a._updateProgress(h),l=yield s.Ma()}let d=yield u.complete();return yield cr(o,d.ra,void 0),yield function(f,m){let v=A(f);return v.persistence.runTransaction("Save bundle","readwrite",_=>v.Kr.saveBundleMetadata(_,m))}(o.localStore,c),a._completeWith(d.progress),Promise.resolve(d.na)}catch(c){return Qt("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var tu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){this.serializer=uu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return px(this.persistence,new Yh,e.initialUser,this.serializer)}createPersistence(e){return new Kh(Qh.jr,this.serializer)}createSharedClientState(e){return new ef}terminate(){return y(this,null,function*(){this.gcScheduler&&this.gcScheduler.stop(),yield this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var df=class t extends tu{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){yield Vf(t.prototype,this,"initialize").call(this,e),yield this.xa.initialize(this,e),yield Ww(this.xa.syncEngine),yield Vs(this.xa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return px(this.persistence,new Yh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new E_(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new Bv(n,this.persistence);return new jv(e.asyncQueue,r)}createPersistence(e){let n=kw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new k_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Ex(),Ih(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new ef}},iw=class t extends df{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return y(this,null,function*(){yield Vf(t.prototype,this,"initialize").call(this,e);let n=this.xa.syncEngine;this.sharedClientState instanceof Oc&&(this.sharedClientState.syncEngine={Ys:kU.bind(null,n),Zs:LU.bind(null,n),Xs:jU.bind(null,n),Bi:VU.bind(null,n),Js:OU.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.mi(r=>y(this,null,function*(){yield FU(this.xa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=Ex();if(!Oc.D(n))throw new w(g.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=kw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Oc(n,e.asyncQueue,r,e.clientId,e.initialUser)}},nu=class{initialize(e,n){return y(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rM(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PU.bind(null,this.syncEngine),yield K_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Z_}()}createDatastore(e){let n=uu(e.databaseInfo.databaseId),r=function(o){return new $_(o)}(e.databaseInfo);return function(o,s,a,c){return new q_(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new W_(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>rM(this.syncEngine,n,0),function(){return tf.D()?new tf:new B_}())}createSyncEngine(e,n){return function(i,o,s,a,c,u,l){let d=new nw(i,o,s,a,c,u);return l&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(n){return y(this,null,function*(){let r=A(n);E("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield Fs(r),r.F_.shutdown(),r.M_.set("Unknown")})}(this.remoteStore)}};function oM(t,e=10240){let n=0;return{read(){return y(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return y(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ps=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):ke("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var ow=class{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new ze,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){return y(this,null,function*(){return this.metadata.promise})}Ma(){return y(this,null,function*(){return yield this.getMetadata(),this.ka()})}ka(){return y(this,null,function*(){let e=yield this.qa();if(e===null)return null;let n=this.La.decode(e),r=Number(n);isNaN(r)&&this.Qa(`length string (${n}) is not valid number`);let i=yield this.Ka(r);return new X_(JSON.parse(i),e.length+r)})}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){return y(this,null,function*(){for(;this.$a()<0&&!(yield this.Ua()););if(this.buffer.length===0)return null;let e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ka(e){return y(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ua())&&this.Qa("Reached the end of bundle when more is expected.");let n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){return y(this,null,function*(){let e=yield this.Ba.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var sw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new w(g.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let n=yield function(i,o){return y(this,null,function*(){let s=A(i),a=Wc(s.serializer)+"/documents",c={documents:o.map(h=>Gc(s.serializer,h))},u=yield s.Co("BatchGetDocuments",a,c,o.length),l=new Map;u.forEach(h=>{let f=KB(s.serializer,h);l.set(f.key.toString(),f)});let d=[];return o.forEach(h=>{let f=l.get(h.toString());V(!!f),d.push(f)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=T.fromPath(r);this.mutations.push(new Uc(i,this.precondition(i)))}),yield function(r,i){return y(this,null,function*(){let o=A(r),s=Wc(o.serializer)+"/documents",a={writes:i.map(c=>Kc(o.serializer,c))};yield o.wo("Commit",s,a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw N();n=j.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new w(g.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(j.min())?Pe.exists(!1):Pe.updateTime(n):Pe.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(j.min()))throw new w(g.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pe.updateTime(n)}return Pe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var aw=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Wa=r.maxAttempts,this.zo=new Xc(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(()=>y(this,null,function*(){let e=new sw(this.datastore),n=this.za(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ja(i)}))}).catch(r=>{this.ja(r)})}))}za(e){try{let n=this.updateFunction(e);return!ou(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!WM(n)}return!1}};var cw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=He.UNAUTHENTICATED,this.clientId=bh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>y(this,null,function*(){E("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(E("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){return y(this,null,function*(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}})}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ze;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=js(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ch(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");let n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield gx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function uw(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Kw(t);E("FirestoreClient","Initializing OnlineComponentProvider");let r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>nM(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>nM(e.remoteStore,o)),t._onlineComponents=e})}function Px(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Kw(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ch(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!Px(n))throw n;Qt("Error using user provided cache. Falling back to memory cache: "+n),yield Ch(t,new tu)}}else E("FirestoreClient","Using default OfflineComponentProvider"),yield Ch(t,new tu);return t._offlineComponents})}function Cf(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),yield uw(t,t._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),yield uw(t,new nu))),t._onlineComponents})}function Rx(t){return Kw(t).then(e=>e.persistence)}function Qw(t){return Kw(t).then(e=>e.localStore)}function Nx(t){return Cf(t).then(e=>e.remoteStore)}function Yw(t){return Cf(t).then(e=>e.syncEngine)}function UU(t){return Cf(t).then(e=>e.datastore)}function Rs(t){return y(this,null,function*(){let e=yield Cf(t),n=e.eventManager;return n.onListen=CU.bind(null,e.syncEngine),n.onUnlisten=DU.bind(null,e.syncEngine),n})}function $U(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield Rx(t),n=yield Nx(t);return e.setNetworkEnabled(!0),function(i){let o=A(i);return o.C_.delete(0),lu(o)}(n)}))}function HU(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield Rx(t),n=yield Nx(t);return e.setNetworkEnabled(!1),function(i){return y(this,null,function*(){let o=A(i);o.C_.add(0),yield Fs(o),o.M_.set("Offline")})}(n)}))}function zU(t,e){let n=new ze;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,s){return y(this,null,function*(){try{let a=yield function(u,l){let d=A(u);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new w(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=js(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Qw(t),e,n)})),n.promise}function Ox(t,e,n={}){let r=new ze;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,c,u){let l=new Ps({next:h=>{s.enqueueAndForget(()=>Bw(o,d));let f=h.docs.has(a);!f&&h.fromCache?u.reject(new w(g.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?u.reject(new w(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new eu(ks(a.path),l,{includeMetadataChanges:!0,J_:!0});return jw(o,d)}(yield Rs(t),t.asyncQueue,e,n,r)})),r.promise}function qU(t,e){let n=new ze;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,s){return y(this,null,function*(){try{let a=yield Zh(i,o,!0),c=new lf(o,a.ls),u=c.ca(a.documents),l=c.applyChanges(u,!1);s.resolve(l.snapshot)}catch(a){let c=js(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Qw(t),e,n)})),n.promise}function kx(t,e,n={}){let r=new ze;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,c,u){let l=new Ps({next:h=>{s.enqueueAndForget(()=>Bw(o,d)),h.fromCache&&c.source==="server"?u.reject(new w(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new eu(a,l,{includeMetadataChanges:!0,J_:!0});return jw(o,d)}(yield Rs(t),t.asyncQueue,e,n,r)})),r.promise}function GU(t,e){let n=new Ps(e);return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o){A(i).q_.add(o),o.next()}(yield Rs(t),n)})),()=>{n.Na(),t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o){A(i).q_.delete(o)}(yield Rs(t),n)}))}}function WU(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?QM().encode(s):s,function(l,d){return new ow(l,d)}(function(l,d){if(l instanceof Uint8Array)return oM(l,d);if(l instanceof ArrayBuffer)return oM(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,uu(e));t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){BU(yield Yw(t),i,r)}))}function KU(t,e){return t.asyncQueue.enqueue(()=>y(this,null,function*(){return function(r,i){let o=A(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,i))}(yield Qw(t),e)}))}function Fx(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var sM=new Map;function Zw(t,e,n){if(!n)throw new w(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Xw(t,e,n,r){if(e===!0&&r===!0)throw new w(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function aM(t){if(!T.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cM(t){if(T.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Df(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":N()}function ce(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new w(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Df(t);throw new w(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Vx(t,e){if(e<=0)throw new w(g.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var hf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new w(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new w(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Xw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Gi=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Mv;switch(r.type){case"firstParty":return new Nv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=sM.get(n);r&&(E("ComponentProvider","Removing Datastore"),sM.delete(n),r.terminate())}(this),Promise.resolve()}};function Lx(t,e,n,r={}){var i;let o=(t=ce(t,Gi))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Qt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=He.MOCK_USER;else{a=S0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new w(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new He(u)}t._authCredentials=new xv(new Dh(a,c))}}var rt=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ye=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},kn=class t extends rt{constructor(e,n,r){super(e,n,ks(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ye(this.firestore,null,new T(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Jw(t,e,...n){if(t=Ce(t),Zw("collection","path",e),t instanceof Gi){let r=le.fromString(e,...n);return cM(r),new kn(t,null,r)}{if(!(t instanceof ye||t instanceof kn))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(le.fromString(e,...n));return cM(r),new kn(t.firestore,null,r)}}function jx(t,e){if(t=ce(t,Gi),Zw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new rt(t,null,function(r){return new un(le.emptyPath(),r)}(e))}function du(t,e,...n){if(t=Ce(t),arguments.length===1&&(e=bh.newId()),Zw("doc","path",e),t instanceof Gi){let r=le.fromString(e,...n);return aM(r),new ye(t,null,new T(r))}{if(!(t instanceof ye||t instanceof kn))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(le.fromString(e,...n));return aM(r),new ye(t.firestore,t instanceof kn?t.converter:null,new T(r))}}function e0(t,e){return t=Ce(t),e=Ce(e),(t instanceof ye||t instanceof kn)&&(e instanceof ye||e instanceof kn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function t0(t,e){return t=Ce(t),e=Ce(e),t instanceof rt&&e instanceof rt&&t.firestore===e.firestore&&au(t._query,e._query)&&t.converter===e.converter}var lw=class{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Xc(this,"async_queue_retry"),this.iu=()=>{let n=Ih();n&&E("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};let e=Ih();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;let n=Ih();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});let n=new ze;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){return y(this,null,function*(){if(this.Ya.length!==0){try{yield this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Jr(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}})}ou(e){let n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{this.eu=r,this.tu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ke("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);let i=Q_.createAndSchedule(this,e,n,r,o=>this.au(o));return this.Xa.push(i),i}su(){this.eu&&N()}verifyOperationInProgress(){}uu(){return y(this,null,function*(){let e;do e=this.Ja,yield e;while(e!==this.Ja)})}cu(e){for(let n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){let n=this.Xa.indexOf(e);this.Xa.splice(n,1)}};function dw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var hw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new ze,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var Bx=-1,Ie=class extends Gi{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new lw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ux(this),this._firestoreClient.terminate()}};function We(t){return t._firestoreClient||Ux(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ux(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,u,l){return new Uv(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Fx(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new cw(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function $x(t,e){Zx(t=ce(t,Ie));let n=We(t);if(n._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");Qt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new nu;return zx(n,i,new df(i,r.cacheSizeBytes,e?.forceOwnership))}function Hx(t){Zx(t=ce(t,Ie));let e=We(t);if(e._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");Qt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new nu;return zx(e,r,new iw(r,n.cacheSizeBytes))}function zx(t,e,n){let r=new ze;return t.asyncQueue.enqueue(()=>y(this,null,function*(){try{yield Ch(t,n),yield uw(t,e),r.resolve()}catch(i){let o=i;if(!Px(o))throw o;Qt("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function qx(t){if(t._initialized&&!t._terminated)throw new w(g.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new ze;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{yield function(r){return y(this,null,function*(){if(!$r.D())return Promise.resolve();let i=r+"main";yield $r.delete(i)})}(kw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function Gx(t){return function(n){let r=new ze;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return MU(yield Yw(n),r)})),r.promise}(We(t=ce(t,Ie)))}function Wx(t){return $U(We(t=ce(t,Ie)))}function Kx(t){return HU(We(t=ce(t,Ie)))}function Qx(t,e){let n=We(t=ce(t,Ie)),r=new hw;return WU(n,t._databaseId,e,r),r}function Yx(t,e){return KU(We(t=ce(t,Ie)),e).then(n=>n?new rt(t,null,n.query):null)}function Zx(t){if(t._initialized||t._terminated)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var jn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ze.fromBase64String(e))}catch(n){throw new w(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var dn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new w(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var sr=class{constructor(e){this._methodName=e}};var Wi=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new w(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new w(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return W(this._lat,e._lat)||W(this._long,e._long)}};var QU=/^__.*__$/,fw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ln(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qr(e,this.data,n,this.fieldTransforms)}},ff=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ln(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function Xx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw N()}}var pf=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return gf(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(Xx(this.Iu)&&QU.test(e))throw this.mu('Document fields cannot begin and end with "__"')}},pw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||uu(e)}pu(e,n,r,i=!1){return new pf({Iu:e,methodName:n,gu:r,path:Fe.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Zi(t){let e=t._freezeSettings(),n=uu(t._databaseId);return new pw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bf(t,e,n,r,i,o={}){let s=t.pu(o.merge||o.mergeFields?2:0,e,n,i);i0("Data must be an object, but it was:",s,r);let a=t1(r,s),c,u;if(o.merge)c=new jt(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let h=_w(e,d,n);if(!s.contains(h))throw new w(g.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);r1(l,h)||l.push(h)}c=new jt(l),u=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=s.fieldTransforms;return new fw(new ct(a),c,u)}var ru=class t extends sr{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Jx(t,e,n){return new pf({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var gw=class t extends sr{_toFieldTransform(e){return new Hi(e.path,new Wr)}isEqual(e){return e instanceof t}},mw=class extends sr{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=Jx(this,e,!0),r=this.yu.map(o=>Xi(o,n)),i=new ir(r);return new Hi(e.path,i)}isEqual(e){return this===e}},yw=class extends sr{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=Jx(this,e,!0),r=this.yu.map(o=>Xi(o,n)),i=new or(r);return new Hi(e.path,i)}isEqual(e){return this===e}},vw=class extends sr{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){let n=new Kr(e.serializer,BM(e.serializer,this.wu));return new Hi(e.path,n)}isEqual(e){return this===e}};function n0(t,e,n,r){let i=t.pu(1,e,n);i0("Data must be an object, but it was:",i,r);let o=[],s=ct.empty();Yi(r,(c,u)=>{let l=o0(e,c,n);u=Ce(u);let d=i.Ru(l);if(u instanceof ru)o.push(l);else{let h=Xi(u,d);h!=null&&(o.push(l),s.set(l,h))}});let a=new jt(o);return new ff(s,a,i.fieldTransforms)}function r0(t,e,n,r,i,o){let s=t.pu(1,e,n),a=[_w(e,r,n)],c=[i];if(o.length%2!=0)throw new w(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(_w(e,o[h])),c.push(o[h+1]);let u=[],l=ct.empty();for(let h=a.length-1;h>=0;--h)if(!r1(u,a[h])){let f=a[h],m=c[h];m=Ce(m);let v=s.Ru(f);if(m instanceof ru)u.push(f);else{let _=Xi(m,v);_!=null&&(u.push(f),l.set(f,_))}}let d=new jt(u);return new ff(l,d,s.fieldTransforms)}function e1(t,e,n,r=!1){return Xi(n,t.pu(r?4:3,e))}function Xi(t,e){if(n1(t=Ce(t)))return i0("Unsupported field value:",e,t),t1(t,e);if(t instanceof sr)return function(r,i){if(!Xx(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Xi(a,i.Vu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=be.fromDate(r);return{timestampValue:Ds(i.serializer,o)}}if(r instanceof be){let o=new be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ds(i.serializer,o)}}if(r instanceof Wi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:YM(i.serializer,r._byteString)};if(r instanceof ye){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Rw(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${Df(r)}`)}(t,e)}function t1(t,e){let n={};return IM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yi(t,(r,i)=>{let o=Xi(i,e.Eu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function n1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof be||t instanceof Wi||t instanceof jn||t instanceof ye||t instanceof sr)}function i0(t,e,n){if(!n1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Df(n);throw r==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+r)}}function _w(t,e,n){if((e=Ce(e))instanceof dn)return e._internalPath;if(typeof e=="string")return o0(t,e);throw gf("Field path arguments must be of type string or ",t,!1,void 0,n)}var YU=new RegExp("[~\\*/\\[\\]]");function o0(t,e,n){if(e.search(YU)>=0)throw gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new dn(...e.split("."))._internalPath}catch{throw gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new w(g.INVALID_ARGUMENT,a+t+c)}function r1(t,e){return t.some(n=>n.isEqual(e))}var Ki=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ww(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Tf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},ww=class extends Ki{data(){return super.data()}};function Tf(t,e){return typeof e=="string"?o0(t,e):e instanceof dn?e._internalPath:e._delegate._internalPath}function i1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new w(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var iu=class{},Qi=class extends iu{};function ur(t,e,...n){let r=[];e instanceof iu&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof Ew).length,a=o.filter(c=>c instanceof mf).length;if(s>1||s>0&&a>0)throw new w(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var mf=class t extends Qi{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return p1(e._query,n),new rt(e.firestore,e.converter,e_(e._query,n))}_parse(e){let n=Zi(e.firestore);return function(o,s,a,c,u,l,d){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new w(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){lM(d,l);let f=[];for(let m of d)f.push(uM(c,o,m));h={arrayValue:{values:f}}}else h=uM(c,o,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||lM(d,l),h=e1(a,s,d,l==="in"||l==="not-in");return ie.create(u,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function o1(t,e,n){let r=e,i=Tf("where",t);return mf._create(i,r,n)}var Ew=class t extends iu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pe.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)p1(s,c),s=e_(s,c)}(e._query,n),new rt(e.firestore,e.converter,e_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Iw=class t extends Qi{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ui(o,s)}(e._query,this._field,this._direction);return new rt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new un(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function s1(t,e="asc"){let n=e,r=Tf("orderBy",t);return Iw._create(r,n)}var yf=class t extends Qi{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new rt(e.firestore,e.converter,kh(e._query,this._limit,this._limitType))}};function a1(t){return Vx("limit",t),yf._create("limit",t,"F")}function c1(t){return Vx("limitToLast",t),yf._create("limitToLast",t,"L")}var vf=class t extends Qi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=f1(e,this.type,this._docOrFields,this._inclusive);return new rt(e.firestore,e.converter,function(i,o){return new un(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function u1(...t){return vf._create("startAt",t,!0)}function l1(...t){return vf._create("startAfter",t,!1)}var _f=class t extends Qi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=f1(e,this.type,this._docOrFields,this._inclusive);return new rt(e.firestore,e.converter,function(i,o){return new un(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function d1(...t){return _f._create("endBefore",t,!1)}function h1(...t){return _f._create("endAt",t,!0)}function f1(t,e,n,r){if(n[0]=Ce(n[0]),n[0]instanceof Ki)return function(o,s,a,c,u){if(!c)throw new w(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of ms(o))if(d.field.isKeyField())l.push(Bi(s,c.key));else{let h=c.data.field(d.field);if(Ef(h))throw new w(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new w(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new Vn(l,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Zi(t.firestore);return function(s,a,c,u,l,d){let h=s.explicitOrderBy;if(l.length>h.length)throw new w(g.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let m=0;m<l.length;m++){let v=l[m];if(h[m].field.isKeyField()){if(typeof v!="string")throw new w(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof v}`);if(!xw(s)&&v.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${v}' contains a slash.`);let _=s.path.child(le.fromString(v));if(!T.isDocumentKey(_))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);let C=new T(_);f.push(Bi(a,C))}else{let _=e1(c,u,v);f.push(_)}}return new Vn(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function uM(t,e,n){if(typeof(n=Ce(n))=="string"){if(n==="")throw new w(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xw(e)&&n.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(le.fromString(n));if(!T.isDocumentKey(r))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bi(t,new T(r))}if(n instanceof ye)return Bi(t,n._key);throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(n)}.`)}function lM(t,e){if(!Array.isArray(t)||t.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function p1(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Ns=class{convertValue(e,n="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw N()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Yi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Wi(xe(e.latitude),xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Aw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lc(e));default:return null}}convertTimestamp(e){let n=Hr(e);return new be(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=le.fromString(e);V(sx(r));let i=new qr(r.get(1),r.get(3)),o=new T(r.popFirst(5));return i.isEqual(n)||ke(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Sf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Cw=class extends Ns{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ye(this.firestore,null,n)}};var rr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Zt=class extends Ki{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Br(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Tf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Br=class extends Zt{data(e={}){return super.data(e)}},hn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new rr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Br(this._firestore,this._userDataWriter,r.key,r,new rr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Br(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Br(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:ZU(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function ZU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return N()}}function s0(t,e){return t instanceof Zt&&e instanceof Zt?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof hn&&e instanceof hn&&t._firestore===e._firestore&&t0(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function g1(t){t=ce(t,ye);let e=ce(t.firestore,Ie);return Ox(We(e),t._key).then(n=>l0(e,t,n))}var ar=class extends Ns{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ye(this.firestore,null,n)}};function m1(t){t=ce(t,ye);let e=ce(t.firestore,Ie),n=We(e),r=new ar(e);return zU(n,t._key).then(i=>new Zt(e,r,t._key,i,new rr(i!==null&&i.hasLocalMutations,!0),t.converter))}function y1(t){t=ce(t,ye);let e=ce(t.firestore,Ie);return Ox(We(e),t._key,{source:"server"}).then(n=>l0(e,t,n))}function v1(t){t=ce(t,rt);let e=ce(t.firestore,Ie),n=We(e),r=new ar(e);return i1(t._query),kx(n,t._query).then(i=>new hn(e,r,t,i))}function _1(t){t=ce(t,rt);let e=ce(t.firestore,Ie),n=We(e),r=new ar(e);return qU(n,t._query).then(i=>new hn(e,r,t,i))}function w1(t){t=ce(t,rt);let e=ce(t.firestore,Ie),n=We(e),r=new ar(e);return kx(n,t._query,{source:"server"}).then(i=>new hn(e,r,t,i))}function a0(t,e,n){t=ce(t,ye);let r=ce(t.firestore,Ie),i=Sf(t.converter,e,n);return Bs(r,[bf(Zi(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Pe.none())])}function c0(t,e,n,...r){t=ce(t,ye);let i=ce(t.firestore,Ie),o=Zi(i),s;return s=typeof(e=Ce(e))=="string"||e instanceof dn?r0(o,"updateDoc",t._key,e,n,r):n0(o,"updateDoc",t._key,e),Bs(i,[s.toMutation(t._key,Pe.exists(!0))])}function E1(t){return Bs(ce(t.firestore,Ie),[new Yr(t._key,Pe.none())])}function I1(t,e){let n=ce(t.firestore,Ie),r=du(t),i=Sf(t.converter,e);return Bs(n,[bf(Zi(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Pe.exists(!1))]).then(()=>r)}function u0(t,...e){var n,r,i;t=Ce(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||dw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(dw(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof ye)u=ce(t.firestore,Ie),l=ks(t._key.path),c={next:d=>{e[s]&&e[s](l0(u,t,d))},error:e[s+1],complete:e[s+2]};else{let d=ce(t,rt);u=ce(d.firestore,Ie),l=d._query;let h=new ar(u);c={next:f=>{e[s]&&e[s](new hn(u,h,d,f))},error:e[s+1],complete:e[s+2]},i1(t._query)}return function(h,f,m,v){let _=new Ps(v),C=new eu(f,_,m);return h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return jw(yield Rs(h),C)})),()=>{_.Na(),h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Bw(yield Rs(h),C)}))}}(We(u),l,a,c)}function C1(t,e){return GU(We(t=ce(t,Ie)),dw(e)?e:{next:e})}function Bs(t,e){return function(r,i){let o=new ze;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return bU(yield Yw(r),i,o)})),o.promise}(We(t),e)}function l0(t,e,n){let r=n.docs.get(e._key),i=new ar(t);return new Zt(t,i,e._key,r,new rr(n.hasPendingWrites,n.fromCache),e.converter)}var XU={maxAttempts:5};var wf=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Zi(e)}set(e,n,r){this._verifyNotCommitted();let i=Lr(e,this._firestore),o=Sf(i.converter,n,r),s=bf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Pe.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Lr(e,this._firestore),s;return s=typeof(n=Ce(n))=="string"||n instanceof dn?r0(this._dataReader,"WriteBatch.update",o._key,n,r,i):n0(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Pe.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Lr(e,this._firestore);return this._mutations=this._mutations.concat(new Yr(n._key,Pe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new w(g.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Lr(t,e){if((t=Ce(t)).firestore!==e)throw new w(g.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Dw=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Zi(n)}get(n){let r=Lr(n,this._firestore),i=new Cw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return N();let s=o[0];if(s.isFoundDocument())return new Ki(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Ki(this._firestore,i,r._key,null,r.converter);throw N()})}set(n,r,i){let o=Lr(n,this._firestore),s=Sf(o.converter,r,i),a=bf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=Lr(n,this._firestore),a;return a=typeof(r=Ce(r))=="string"||r instanceof dn?r0(this._dataReader,"Transaction.update",s._key,r,i,o):n0(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=Lr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Lr(e,this._firestore),r=new ar(this._firestore);return super.get(e).then(i=>new Zt(this._firestore,r,n._key,i._document,new rr(!1,!1),n.converter))}};function D1(t,e,n){t=ce(t,Ie);let r=Object.assign(Object.assign({},XU),n);return function(o){if(o.maxAttempts<1)throw new w(g.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new ze;return o.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){let u=yield UU(o);new aw(o.asyncQueue,u,a,s,c).run()})),c.promise}(We(t),i=>e(new Dw(t,i)),r)}function b1(){return new ru("deleteField")}function T1(){return new gw("serverTimestamp")}function S1(...t){return new mw("arrayUnion",t)}function A1(...t){return new yw("arrayRemove",t)}function M1(t){return new vw("increment",t)}(function(e,n=!0){(function(i){Os=i})(P0),zs(new ti("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ie(new Pv(r.getProvider("auth-internal")),new kv(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new w(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qr(u.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),lr(hA,"4.4.0",e),lr(hA,"4.4.0","esm2017")})();var JU="@firebase/firestore-compat",e$="0.3.23";function m0(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new w("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function x1(){if(typeof Uint8Array>"u")throw new w("unimplemented","Uint8Arrays are not available in this environment.")}function P1(){if(!CM())throw new w("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Af=class t{constructor(e){this._delegate=e}static fromBase64String(e){return P1(),new t(jn.fromBase64String(e))}static fromUint8Array(e){return x1(),new t(jn.fromUint8Array(e))}toBase64(){return P1(),this._delegate.toBase64()}toUint8Array(){return x1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function d0(t){return t$(t,["next","error","complete"])}function t$(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var h0=class{enableIndexedDbPersistence(e,n){return $x(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Hx(e._delegate)}clearIndexedDbPersistence(e){return qx(e._delegate)}},Mf=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Qt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){Lx(this._delegate,e,n,r)}enableNetwork(){return Wx(this._delegate)}disableNetwork(){return Kx(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Xw("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Gx(this._delegate)}onSnapshotsInSync(e){return C1(this._delegate,e)}get app(){if(!this._appCompat)throw new w("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hs(this,Jw(this._delegate,e))}catch(n){throw mt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Bn(this,du(this._delegate,e))}catch(n){throw mt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new no(this,jx(this._delegate,e))}catch(n){throw mt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return D1(this._delegate,n=>e(new xf(this,n)))}batch(){return We(this._delegate),new Pf(new wf(this._delegate,e=>Bs(this._delegate,e)))}loadBundle(e){return Qx(this._delegate,e)}namedQuery(e){return Yx(this._delegate,e).then(n=>n?new no(this,n):null)}},Us=class extends Ns{constructor(e){super(),this.firestore=e}convertBytes(e){return new Af(new jn(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Bn.forKey(n,this.firestore,null)}};function n$(t){dM(t)}var xf=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Us(e)}get(e){let n=Ji(e);return this._delegate.get(n).then(r=>new eo(this._firestore,new Zt(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=Ji(e);return r?(m0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Ji(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Ji(e);return this._delegate.delete(n),this}},Pf=class{constructor(e){this._delegate=e}set(e,n,r){let i=Ji(e);return r?(m0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Ji(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Ji(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},$s=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Br(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new to(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new Us(e),n),i.set(n,o)),o}};$s.INSTANCES=new WeakMap;var Bn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Us(e)}static forPath(e,n,r){if(e.length%2!==0)throw new w("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new ye(n._delegate,r,new T(e)))}static forKey(e,n,r){return new t(n,new ye(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Hs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hs(this.firestore,Jw(this._delegate,e))}catch(n){throw mt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ce(e),e instanceof ye?e0(this._delegate,e):!1}set(e,n){n=m0("DocumentReference.set",n);try{return n?a0(this._delegate,e,n):a0(this._delegate,e)}catch(r){throw mt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?c0(this._delegate,e):c0(this._delegate,e,n,...r)}catch(i){throw mt(i,"updateDoc()","DocumentReference.update()")}}delete(){return E1(this._delegate)}onSnapshot(...e){let n=R1(e),r=N1(e,i=>new eo(this.firestore,new Zt(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return u0(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=m1(this._delegate):e?.source==="server"?n=y1(this._delegate):n=g1(this._delegate),n.then(r=>new eo(this.firestore,new Zt(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter($s.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function mt(t,e,n){return t.message=t.message.replace(e,n),t}function R1(t){for(let e of t)if(typeof e=="object"&&!d0(e))return e;return{}}function N1(t,e){var n,r;let i;return d0(t[0])?i=t[0]:d0(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var eo=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return s0(this._delegate,e._delegate)}},to=class extends eo{data(e){let n=this._delegate.data(e);return this._delegate._converter||hM(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},no=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Us(e)}where(e,n,r){try{return new t(this.firestore,ur(this._delegate,o1(e,n,r)))}catch(i){throw mt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,ur(this._delegate,s1(e,n)))}catch(r){throw mt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,ur(this._delegate,a1(e)))}catch(n){throw mt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,ur(this._delegate,c1(e)))}catch(n){throw mt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,ur(this._delegate,u1(...e)))}catch(n){throw mt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,ur(this._delegate,l1(...e)))}catch(n){throw mt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,ur(this._delegate,d1(...e)))}catch(n){throw mt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,ur(this._delegate,h1(...e)))}catch(n){throw mt(n,"endAt()","Query.endAt()")}}isEqual(e){return t0(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=_1(this._delegate):e?.source==="server"?n=w1(this._delegate):n=v1(this._delegate),n.then(r=>new hu(this.firestore,new hn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=R1(e),r=N1(e,i=>new hu(this.firestore,new hn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return u0(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter($s.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},f0=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new to(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},hu=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new no(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new to(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new f0(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new to(this._firestore,r))})}isEqual(e){return s0(this._delegate,e._delegate)}},Hs=class t extends no{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Bn(this.firestore,e):null}doc(e){try{return e===void 0?new Bn(this.firestore,du(this._delegate)):new Bn(this.firestore,du(this._delegate,e))}catch(n){throw mt(n,"doc()","CollectionReference.doc()")}}add(e){return I1(this._delegate,e).then(n=>new Bn(this.firestore,n))}isEqual(e){return e0(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter($s.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ji(t){return ce(t,ye)}var p0=class t{constructor(...e){this._delegate=new dn(...e)}static documentId(){return new t(Fe.keyField().canonicalString())}isEqual(e){return e=Ce(e),e instanceof dn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var g0=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=T1();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=b1();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=S1(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=A1(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=M1(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var r$={Firestore:Mf,GeoPoint:Wi,Timestamp:be,Blob:Af,Transaction:xf,WriteBatch:Pf,DocumentReference:Bn,DocumentSnapshot:eo,Query:no,QueryDocumentSnapshot:to,QuerySnapshot:hu,CollectionReference:Hs,FieldPath:p0,FieldValue:g0,setLogLevel:n$,CACHE_SIZE_UNLIMITED:Bx};function i$(t,e){t.INTERNAL.registerComponent(new ti("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},r$)))}function o$(t){i$(t,(e,n)=>new Mf(e,n,new h0)),t.registerVersion(JU,e$)}o$(yt);function s$(t,e=Ks){return new J(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function O1(t,e){return s$(t,e)}function a$(t,e){return O1(t,e).pipe(si(void 0),Ys(),$(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function _0(t,e){return O1(t,e).pipe($(n=>({payload:n,type:"query"})))}var Rf=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=j1(r,n);return new Of(i,o,this.afs)}snapshotChanges(){return a$(this.ref,this.afs.schedulers.outsideAngular).pipe(It)}valueChanges(e={}){return this.snapshotChanges().pipe($(({payload:n})=>e.idField?de(x({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return se(this.ref.get(e)).pipe(It)}};function Nf(t,e){return _0(t,e).pipe(si(void 0),Ys(),$(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=o.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function k1(t,e,n){return Nf(t,n).pipe(oi((r,i)=>c$(r,i.map(o=>o.payload),e),[]),ip(),$(r=>r.map(i=>({type:i.type,payload:i}))))}function c$(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=u$(t,r))}),t}function y0(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function u$(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return y0(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return y0(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return y0(t,e.oldIndex,1);break}return t}function F1(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Of=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Nf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe($(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(si(void 0),Ys(),Ke(([r,i])=>i.length>0||!r),$(([,r])=>r),It)}auditTrail(e){return this.stateChanges(e).pipe(oi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=F1(e);return k1(this.query,n,this.afs.schedulers.outsideAngular).pipe(It)}valueChanges(e={}){return _0(this.query,this.afs.schedulers.outsideAngular).pipe($(n=>n.payload.docs.map(r=>e.idField?de(x({},r.data()),{[e.idField]:r.id}):r.data())),It)}get(e){return se(this.query.get(e)).pipe(It)}add(e){return this.ref.add(e)}doc(e){return new Rf(this.ref.doc(e),this.afs)}},v0=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Nf(this.query,this.afs.schedulers.outsideAngular).pipe(It):Nf(this.query,this.afs.schedulers.outsideAngular).pipe($(n=>n.filter(r=>e.indexOf(r.type)>-1)),Ke(n=>n.length>0),It)}auditTrail(e){return this.stateChanges(e).pipe(oi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=F1(e);return k1(this.query,n,this.afs.schedulers.outsideAngular).pipe(It)}valueChanges(e={}){return _0(this.query,this.afs.schedulers.outsideAngular).pipe($(r=>r.payload.docs.map(i=>e.idField?x({[e.idField]:i.id},i.data()):i.data())),It)}get(e){return se(this.query.get(e)).pipe(It)}},V1=new R("angularfire2.enableFirestorePersistence"),L1=new R("angularfire2.firestore.persistenceSettings"),l$=new R("angularfire2.firestore.settings"),d$=new R("angularfire2.firestore.use-emulator");function j1(t,e=n=>n){return{query:e(t),ref:t}}var w0=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,u,l,d,h,f,m,v,_,C,O){this.schedulers=c;let M=ec(n,a,r),U=l;d&&Oy(M,a,h,m,v,_,f,C),[this.firestore,this.persistenceEnabled$]=Ld(`${M.name}.firestore`,"AngularFirestore",M.name,()=>{let H=a.runOutsideAngular(()=>M.firestore());if(o&&H.settings(o),U&&H.useEmulator(...U),i&&!Ei(s)){let K=()=>{try{return se(H.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(Ee){return typeof console<"u"&&console.warn(Ee),L(!1)}};return[H,a.runOutsideAngular(K)]}else return[H,L(!1)]},[o,U,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=j1(i,r),a=this.schedulers.ngZone.run(()=>o);return new Of(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new v0(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Rf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(D(Zo),D(Xo,8),D(V1,8),D(l$,8),D(dt),D(re),D(kd),D(L1,8),D(d$,8),D(zT,8),D(Ay,8),D(My,8),D(xy,8),D(Py,8),D(Ry,8),D(Ny,8),D(bi,8))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),B1=(()=>{class t{constructor(){yt.registerVersion("angularfire",Yo.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:V1,useValue:!0},{provide:L1,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Oe({type:t});static \u0275inj=Ne({providers:[w0]})}return t})();function f$(t,e){if(t&1&&(I(0,"div",11)(1,"div",12),B(2),P(),oe(3,"div",13),P()),t&2){let n=aD();Et(2),Jg(n.submitMessage)}}var kf=t=>({"invalid-input":t}),U1=(()=>{let e=class e{constructor(r,i){this.formBuilder=r,this.firestore=i,this.isSubmit=!1,this.submitMessage="",this.userdata=this.formBuilder.group({name:["",Sn.required],lastname:["",Sn.required],phone:["",[Sn.pattern("^[0-9]+$"),Sn.required]],email:["",[Sn.required,Sn.email]],message:["",Sn.required]})}submitForm(){if(this.userdata.valid){this.isSubmit=!0,this.submitMessage="Submitting...";let r=this.userdata.value;this.firestore.collection("contactForms").add(r).then(()=>{this.submitMessage="Message sent successfully :)",this.userdata.reset(),setTimeout(()=>{this.isSubmit=!1},1500)}).catch(i=>{console.error("Error submitting form:",i),this.submitMessage="Error sending the message. Please try again.",this.isSubmit=!1})}}};e.\u0275fac=function(i){return new(i||e)(ue(bT),ue(w0))},e.\u0275cmp=Ir({type:e,selectors:[["app-contactme"]],decls:15,vars:14,consts:[["id","contact",1,"contact"],[1,"heading"],[3,"formGroup","ngSubmit"],[1,"input-box"],["type","text","placeholder","Name","formControlName","name","required","",3,"ngClass"],["type","text","placeholder","Last Name","formControlName","lastname","required","",3,"ngClass"],["type","tel","placeholder","Mobile Number","formControlName","phone","pattern","[0-9]+","required","",3,"ngClass"],["type","email","placeholder","Email","formControlName","email","required","",3,"ngClass"],["cols","30","rows","10","placeholder","Your Message","formControlName","message","required",""],["type","submit","value","Send Message",1,"btn"],["class","loader",4,"ngIf"],[1,"loader"],[1,"loader-text"],[1,"loader-bar"]],template:function(i,o){if(i&1&&(I(0,"section",0)(1,"h2",1),B(2,"Contact "),I(3,"span"),B(4,"Me"),P()(),I(5,"form",2),Yn("ngSubmit",function(){return o.submitForm()}),I(6,"div",3),oe(7,"input",4)(8,"input",5),P(),I(9,"div",3),oe(10,"input",6)(11,"input",7),P(),oe(12,"textarea",8)(13,"input",9),P(),Xg(14,f$,4,1,"div",10),P()),i&2){let s,a,c,u;Et(5),Tr("formGroup",o.userdata),Et(2),Tr("ngClass",Ca(6,kf,((s=o.userdata.get("name"))==null?null:s.invalid)&&((s=o.userdata.get("name"))==null?null:s.touched))),Et(1),Tr("ngClass",Ca(8,kf,((a=o.userdata.get("lastname"))==null?null:a.invalid)&&((a=o.userdata.get("lastname"))==null?null:a.touched))),Et(2),Tr("ngClass",Ca(10,kf,((c=o.userdata.get("phone"))==null?null:c.invalid)&&((c=o.userdata.get("phone"))==null?null:c.touched))),Et(1),Tr("ngClass",Ca(12,kf,((u=o.userdata.get("email"))==null?null:u.invalid)&&((u=o.userdata.get("email"))==null?null:u.touched))),Et(3),Tr("ngIf",o.isSubmit)}},dependencies:[RD,ND,ET,xd,mT,yT,vy,_y,my,yy],styles:[".contact[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:3rem}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:70rem;margin:1rem auto 3rem;text-align:center}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:1.5rem;font-size:1.6rem;color:var(--text-color);background:var(--bg-color);border-radius:.8rem;margin:.7rem 0;box-shadow:0 .1rem .5rem var(--shadow-color)}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:49%}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:2rem;cursor:pointer}.btn[_ngcontent-%COMP%]{display:inline-block;padding:1.2rem 2.8rem;background:var(--main-color);color:var(--white-color);border-radius:.6rem;box-shadow:0 .2rem .5rem var(--shadow-color);font-size:1.6rem;letter-spacing:.1rem;font-weight:700;border:.2rem solid transparent;transition:.5s ease}.btn[_ngcontent-%COMP%]:hover{background:transparent;color:var(--main-color);border-color:var(--main-color)}section[_ngcontent-%COMP%]{min-height:100vh;padding:10rem 7% 2rem}span[_ngcontent-%COMP%]{color:var(--main-color)}.heading[_ngcontent-%COMP%]{font-size:4.5rem;text-align:center}@keyframes _ngcontent-%COMP%_load-loop{0%{background-position:100%}40%{background-position:50%}50%{background-position:50%}90%{background-position:0%}to{background-position:0%}}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.loader[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.loader-text[_ngcontent-%COMP%]{font-size:14px;color:#000;margin-bottom:20px;align-self:center}.loader-bar[_ngcontent-%COMP%]{width:10%;height:2px;border-radius:5px;background-color:#000;animation:_ngcontent-%COMP%_loader-bar-animation 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_loader-bar-animation{0%{transform:translate(-100%)}50%{transform:translate(100%)}to{transform:translate(-100%)}}.invalid-input[_ngcontent-%COMP%]{border:1px solid red;transition:.4s ease}"]});let t=e;return t})();var $1=(()=>{let e=class e{constructor(r,i){this.renderer=r,this.el=i,this.currentSection="",this.isNavbarOpen=!1}onWindowScroll(){let r=this.el.nativeElement.querySelector(".header");window.pageYOffset>100?this.renderer.addClass(r,"sticky"):this.renderer.removeClass(r,"sticky"),document.querySelectorAll("section").forEach(o=>{let s=o.getBoundingClientRect().top,a=o.getAttribute("id");s<=150&&s>=-150&&(this.currentSection=a||"")})}ngAfterViewInit(){let r=this.el.nativeElement.querySelector("#menu-icon"),i=this.el.nativeElement.querySelector(".navbar");r.addEventListener("click",()=>{this.isNavbarOpen=!this.isNavbarOpen,this.toggleMenuIcon(r,this.isNavbarOpen,i)})}toggleMenuIcon(r,i,o){let s='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;"><path d="m16.192 6.344-4.243 4.242-4.242-4.242-1.414 1.414L10.535 12l-4.242 4.242 1.414 1.414 4.242-4.242 4.243 4.242 1.414-1.414L13.364 12l4.242-4.242z"></path></svg>',a='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: msFilter"><path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"></path></svg>';r.innerHTML=i?s:a,i?(o.classList.add("active"),o.querySelectorAll("a").forEach(u=>{u.addEventListener("click",()=>{o.classList.remove("active"),r.innerHTML=a})})):o.classList.remove("active")}};e.\u0275fac=function(i){return new(i||e)(ue(Qn),ue(En))},e.\u0275cmp=Ir({type:e,selectors:[["app-portfolio"]],hostBindings:function(i,o){i&1&&Yn("scroll",function(a){return o.onWindowScroll(a)},!1,tC)},decls:194,vars:10,consts:[[1,"header"],["href","#",1,"logo"],[1,"navbar"],["href","#home"],["href","#about"],["href","#services"],["href","#portfolio"],["href","#contact"],["id","darkMode-icon",1,"bx-moon"],["xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","width","30","height","30","viewBox","0 0 50 50"],["d","M 11.986328 0 C 11.815078 0.002 11.645188 0.048671875 11.492188 0.13867188 C 11.188188 0.31867188 11 0.646 11 1 L 11 13.353516 C 11 13.737516 11.219406 14.089859 11.566406 14.255859 L 29.566406 22.900391 C 29.703406 22.966391 29.853 23 30 23 C 30.194 23 30.387688 22.943031 30.554688 22.832031 L 39.554688 16.832031 C 39.844687 16.639031 40.013047 16.307984 39.998047 15.958984 C 39.984047 15.610984 39.789375 15.295953 39.484375 15.126953 L 12.484375 0.12695312 C 12.329375 0.040953125 12.157578 -0.002 11.986328 0 z M 12.025391 17 C 11.850016 16.9955 11.674625 17.038453 11.515625 17.126953 C 11.197625 17.302953 11 17.636 11 18 L 11 48.998047 C 11 49.758047 11.813469 50.241953 12.480469 49.876953 L 40.496094 33.867188 C 40.808094 33.689188 41 33.359 41 33 L 41 20 C 41 19.592 40.753 19.225266 40.375 19.072266 C 39.995 18.920266 39.562297 19.011688 39.279297 19.304688 L 13 47 L 20.955078 23.294922 C 21.088078 22.861922 20.913297 22.392344 20.529297 22.152344 L 12.529297 17.152344 C 12.374797 17.055844 12.200766 17.0045 12.025391 17 z"],["id","menu-icon",1,""],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",2,"fill","rgba(0, 0, 0, 1)","transform","msFilter"],["d","M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"],["id","home",1,"home"],[1,"home-content"],[1,"socail-media"],["href","#"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",2,"fill","#754ef9","transform","msFilter"],["d","M12.001 2.002c-5.522 0-9.999 4.477-9.999 9.999 0 4.99 3.656 9.126 8.437 9.879v-6.988h-2.54v-2.891h2.54V9.798c0-2.508 1.493-3.891 3.776-3.891 1.094 0 2.24.195 2.24.195v2.459h-1.264c-1.24 0-1.628.772-1.628 1.563v1.875h2.771l-.443 2.891h-2.328v6.988C18.344 21.129 22 16.992 22 12.001c0-5.522-4.477-9.999-9.999-9.999z"],["d","M20.947 8.305a6.53 6.53 0 0 0-.419-2.216 4.61 4.61 0 0 0-2.633-2.633 6.606 6.606 0 0 0-2.186-.42c-.962-.043-1.267-.055-3.709-.055s-2.755 0-3.71.055a6.606 6.606 0 0 0-2.185.42 4.607 4.607 0 0 0-2.633 2.633 6.554 6.554 0 0 0-.419 2.185c-.043.963-.056 1.268-.056 3.71s0 2.754.056 3.71c.015.748.156 1.486.419 2.187a4.61 4.61 0 0 0 2.634 2.632 6.584 6.584 0 0 0 2.185.45c.963.043 1.268.056 3.71.056s2.755 0 3.71-.056a6.59 6.59 0 0 0 2.186-.419 4.615 4.615 0 0 0 2.633-2.633c.263-.7.404-1.438.419-2.187.043-.962.056-1.267.056-3.71-.002-2.442-.002-2.752-.058-3.709zm-8.953 8.297c-2.554 0-4.623-2.069-4.623-4.623s2.069-4.623 4.623-4.623a4.623 4.623 0 0 1 0 9.246zm4.807-8.339a1.077 1.077 0 0 1-1.078-1.078 1.077 1.077 0 1 1 2.155 0c0 .596-.482 1.078-1.077 1.078z"],["cx","11.994","cy","11.979","r","3.003"],["fill-rule","evenodd","clip-rule","evenodd","d","M18.403 5.633A8.919 8.919 0 0 0 12.053 3c-4.948 0-8.976 4.027-8.978 8.977 0 1.582.413 3.126 1.198 4.488L3 21.116l4.759-1.249a8.981 8.981 0 0 0 4.29 1.093h.004c4.947 0 8.975-4.027 8.977-8.977a8.926 8.926 0 0 0-2.627-6.35m-6.35 13.812h-.003a7.446 7.446 0 0 1-3.798-1.041l-.272-.162-2.824.741.753-2.753-.177-.282a7.448 7.448 0 0 1-1.141-3.971c.002-4.114 3.349-7.461 7.465-7.461a7.413 7.413 0 0 1 5.275 2.188 7.42 7.42 0 0 1 2.183 5.279c-.002 4.114-3.349 7.462-7.461 7.462m4.093-5.589c-.225-.113-1.327-.655-1.533-.73-.205-.075-.354-.112-.504.112s-.58.729-.711.879-.262.168-.486.056-.947-.349-1.804-1.113c-.667-.595-1.117-1.329-1.248-1.554s-.014-.346.099-.458c.101-.1.224-.262.336-.393.112-.131.149-.224.224-.374s.038-.281-.019-.393c-.056-.113-.505-1.217-.692-1.666-.181-.435-.366-.377-.504-.383a9.65 9.65 0 0 0-.429-.008.826.826 0 0 0-.599.28c-.206.225-.785.767-.785 1.871s.804 2.171.916 2.321c.112.15 1.582 2.415 3.832 3.387.536.231.954.369 1.279.473.537.171 1.026.146 1.413.089.431-.064 1.327-.542 1.514-1.066.187-.524.187-.973.131-1.067-.056-.094-.207-.151-.43-.263"],[1,"download-button"],[1,"docs"],["stroke-linejoin","round","stroke-linecap","round","fill","none","stroke-width","2","stroke","currentColor","height","20","width","20","viewBox","0 0 24 24",1,"css-i6dzq1"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],["y2","13","x2","8","y1","13","x1","16"],["y2","17","x2","8","y1","17","x1","16"],["points","10 9 9 9 8 9"],[1,"download"],["stroke-linejoin","round","stroke-linecap","round","fill","none","stroke-width","2","stroke","currentColor","height","24","width","24","viewBox","0 0 24 24",1,"css-i6dzq1"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["y2","3","x2","12","y1","15","x1","12"],[1,"pro-container"],[1,"pro-box"],[1,"pro",2,"--i","0"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24",2,"fill","#754ef9","transform","msFilter"],["d","m7.375 16.781 1.25-1.562L4.601 12l4.024-3.219-1.25-1.562-5 4a1 1 0 0 0 0 1.562l5 4zm9.25-9.562-1.25 1.562L19.399 12l-4.024 3.219 1.25 1.562 5-4a1 1 0 0 0 0-1.562l-5-4zm-1.649-4.003-4 18-1.953-.434 4-18z"],[1,"pro",2,"--i","1"],["d","M18 11c0-.959-.68-1.761-1.581-1.954C16.779 8.445 17 7.75 17 7c0-2.206-1.794-4-4-4-1.517 0-2.821.857-3.5 2.104C8.821 3.857 7.517 3 6 3 3.794 3 2 4.794 2 7c0 .902.312 1.727.817 2.396A1.994 1.994 0 0 0 2 11v8c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-2.638l4 2v-7l-4 2V11zm-5-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2zM6 5c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2zM4 19v-8h12l.002 8H4z"],[1,"circle"],[1,"overlay"],["id","about",1,"about"],[1,"about-img"],["src","./assets/images/ahs.JPG","alt",""],[1,"about-content"],[1,"heading"],["href","#",1,"btn"],["id","services",1,"services"],[1,"services-container"],[1,"services-box"],[1,"iconz"],["xmlns","http://www.w3.org/2000/svg","width","50","height","50","viewBox","0 0 24 24",2,"fill","#754ef9","transform","msFilter"],["d","M7.061 22c1.523 0 2.84-.543 3.91-1.613 1.123-1.123 1.707-2.854 1.551-4.494l8.564-8.564a3.123 3.123 0 0 0-.002-4.414c-1.178-1.18-3.234-1.18-4.412 0l-8.884 8.884c-1.913.169-3.807 1.521-3.807 3.919 0 .303.021.588.042.86.08 1.031.109 1.418-1.471 2.208a1.001 1.001 0 0 0-.122 1.717C2.52 20.563 4.623 22 7.061 22c-.001 0-.001 0 0 0zM18.086 4.328a1.144 1.144 0 0 1 1.586.002 1.12 1.12 0 0 1 0 1.584L12 13.586 10.414 12l7.672-7.672zM6.018 16.423c-.018-.224-.037-.458-.037-.706 0-1.545 1.445-1.953 2.21-1.953.356 0 .699.073.964.206.945.475 1.26 1.293 1.357 1.896.177 1.09-.217 2.368-.956 3.107C8.865 19.664 8.049 20 7.061 20H7.06c-.75 0-1.479-.196-2.074-.427 1.082-.973 1.121-1.989 1.032-3.15z"],["d","m10.4 17.8 1.21 2.07L19.77 22 22 14.08 20.72 12 22 10l-2.23-8-8.16 2.13L10.4 6.2H8L2 12l6 5.81zm9.92-5.8-1.73 6L15 12l3.59-6zM10.6 6.54 16.84 5l-3.59 6H6.08zM13.27 13l3.59 6-6.26-1.55L6.1 13z"],["id","portfolio",1,"portfolio"],[1,"portfolio-container"],[1,"portfolio-box"],["src","./assets/images/untitled.png","alt",""],[1,"portfolio-layer"],["src","./assets/images/web.png","alt",""],["src","./assets/images/soon.png","alt",""],[1,"test-conatiner"],[1,"test-wrapper"],[1,"test-box"],[1,"test-content"],[1,"test-slide"],["src","./assets/images/ahs.jpeg","alt",""],[1,"footer"],[1,"footer-text"],[1,"footer-icon"],["d","M3 13h1v7c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-7h1a1 1 0 0 0 .707-1.707l-9-9a.999.999 0 0 0-1.414 0l-9 9A1 1 0 0 0 3 13zm7 7v-5h4v5h-4zm2-15.586 6 6V15l.001 5H16v-5c0-1.103-.897-2-2-2h-4c-1.103 0-2 .897-2 2v5H6v-9.586l6-6z"]],template:function(i,o){i&1&&(I(0,"header",0)(1,"a",1),B(2,"Portfolio"),P(),I(3,"nav",2)(4,"a",3),B(5,"Home"),P(),I(6,"a",4),B(7,"About"),P(),I(8,"a",5),B(9,"Services"),P(),I(10,"a",6),B(11,"Portfolio"),P(),I(12,"a",7),B(13,"Contact"),P()(),I(14,"div",8),wt(),I(15,"svg",9),oe(16,"path",10),P()(),Nt(),I(17,"div",11),wt(),I(18,"svg",12),oe(19,"path",13),P()()(),Nt(),I(20,"section",14)(21,"div",15)(22,"h3"),B(23,"Hello"),I(24,"span"),B(25," Iam "),P()(),I(26,"h1"),B(27,"Ali Amhaz"),P(),I(28,"p"),B(29," Web development empowers digital evolution, constructing responsive,interactive websites and applications,enabling dynamic, engaging online experiences. "),P(),I(30,"div",16)(31,"a",17),wt(),I(32,"svg",18),oe(33,"path",19),P()(),Nt(),I(34,"a",17),wt(),I(35,"svg",18),oe(36,"path",20)(37,"circle",21),P()(),Nt(),I(38,"a",17),wt(),I(39,"svg",18),oe(40,"path",22),P()()(),Nt(),I(41,"button",23)(42,"div",24),wt(),I(43,"svg",25),oe(44,"path",26)(45,"polyline",27)(46,"line",28)(47,"line",29)(48,"polyline",30),P(),B(49," Dawnload CV"),P(),Nt(),I(50,"div",31)(51,"a",7),wt(),I(52,"svg",32),oe(53,"path",33)(54,"polyline",34)(55,"line",35),P()()()()(),Nt(),I(56,"div",36)(57,"div",37)(58,"div",38)(59,"i"),wt(),I(60,"svg",39),oe(61,"path",40),P()(),Nt(),I(62,"h3"),B(63,"Web Developer"),P()(),I(64,"div",41)(65,"i"),wt(),I(66,"svg",39),oe(67,"path",42),P()(),Nt(),I(68,"h3"),B(69,"Vidio Editor"),P()(),oe(70,"div",43),P(),oe(71,"div",44),P()(),I(72,"section",45)(73,"div",46),oe(74,"img",47),P(),I(75,"div",48)(76,"h2",49),B(77,"About "),I(78,"span"),B(79,"Me"),P()(),I(80,"h3"),B(81,"Hi Iam Here To Help Your Next Project!"),P(),I(82,"p"),B(83," I am a versatile professional skilled in both web development and video editing. Proficient in languages like HTML, CSS, and JavaScript, I craft immersive digital experiences. With expertise in Blender, I merge creativity with technical prowess, ensuring captivating visual narratives and seamless, user-centric web solutions in my portfolio "),P(),I(84,"a",50),B(85,"Read More"),P()()(),I(86,"section",51)(87,"h2",49),B(88,"My "),I(89,"span"),B(90,"Services"),P()(),I(91,"div",52)(92,"div",53)(93,"i",54),wt(),I(94,"svg",55),oe(95,"path",56),P()(),Nt(),I(96,"h3"),B(97,"Graphic Desgine"),P(),I(98,"p"),B(99,"My graphic design services offer a fusion of creativity and strategy. With a keen eye for aesthetics and a focus on client needs, I craft visually compelling solutions that resonate. From branding to digital design, I create impactful visuals that elevate your message"),P(),I(100,"a",50),B(101,"Read More"),P()(),I(102,"div",53)(103,"i",54),wt(),I(104,"svg",55),oe(105,"path",57),P()(),Nt(),I(106,"h3"),B(107,"Animation"),P(),I(108,"p"),B(109," As an animator, my services breathe life into ideas. Through motion, storytelling, and artistic finesse, I craft engaging animations that captivate audiences. From character design to seamless movement, I bring concepts to vivid, dynamic existence"),P(),I(110,"a",50),B(111,"Read More"),P()(),I(112,"div",53)(113,"i",54),wt(),I(114,"svg",55),oe(115,"path",42),P()(),Nt(),I(116,"h3"),B(117,"Vedio Editor"),P(),I(118,"p"),B(119,"In video editing, my services orchestrate narratives. Seamlessly weaving together footage, sound, and effects, I craft compelling stories. With a keen sense of pacing and visual finesse, I transform raw content into captivating, polished videos that resonate"),P(),I(120,"a",50),B(121,"Read More"),P()()()(),I(122,"section",58)(123,"h2",49),B(124,"Lastest "),I(125,"span"),B(126,"Project"),P()(),I(127,"div",59)(128,"div",60),oe(129,"img",61),I(130,"div",62)(131,"h4"),B(132,"Animator"),P(),I(133,"p"),B(134,"This photo made by me using blender v4.0 Blender was a robust and versatile 3D creation suite renowned for its free, open-source nature. Offering powerful features for modeling, animation, rendering, compositing, and more "),P()()(),I(135,"div",60),oe(136,"img",63),I(137,"div",62)(138,"h4"),B(139,"Web Design"),P(),I(140,"p"),B(141,"This my First project but its not the last "),P()()(),I(142,"div",60),oe(143,"img",64),I(144,"div",62)(145,"h4"),B(146,"Vedio Editor"),P(),I(147,"p"),B(148,"STAY tuned for update"),P()()(),I(149,"div",60),oe(150,"img",64),I(151,"div",62)(152,"h4"),B(153,"Coming Soon"),P(),I(154,"p"),B(155,"STAY tuned for update"),P()()(),I(156,"div",60),oe(157,"img",64),I(158,"div",62)(159,"h4"),B(160,"Coming Soon"),P(),I(161,"p"),B(162,"STAY tuned for update"),P()()(),I(163,"div",60),oe(164,"img",64),I(165,"div",62)(166,"h4"),B(167,"Coming Soon"),P(),I(168,"p"),B(169,"STAY tuned for update"),P()()()()(),I(170,"div",65)(171,"h2",49),B(172,"Valuable "),I(173,"span"),B(174,"Testimonial"),P()(),I(175,"div",66)(176,"div",67)(177,"div",68)(178,"div",69),oe(179,"img",70),I(180,"h3"),B(181,"Ali AMHAZ"),P(),I(182,"p"),B(183,"Valuable testimonials are authentic expressions of satisfaction and trust from clients or users. They serve as powerful endorsements, highlighting positive experiences with a product, service, or expertise. These testimonials carry weight, influencing potential customers and fostering credibility by showcasing real-life success stories and affirming the value delivered"),P()()()()()(),oe(184,"app-contactme"),I(185,"footer",71)(186,"div",72)(187,"p"),B(188,"Copyright \xA9 2023 by Ali Amhaz | All Rights Reserved"),P()(),I(189,"div",73)(190,"a",3)(191,"i"),wt(),I(192,"svg",12),oe(193,"path",74),P()()()()()),i&2&&(Et(4),Cn("active",o.currentSection==="home"),Et(2),Cn("active",o.currentSection==="about"),Et(2),Cn("active",o.currentSection==="services"),Et(2),Cn("active",o.currentSection==="portfolio"),Et(2),Cn("active",o.currentSection==="contact"))},dependencies:[U1],styles:['[_ngcontent-%COMP%]:root{--bg-color: #fdfdfd;--text-color: #333;--main-color: #754ef9;--white-color: #fdfdfd;--shadow-color: rgba(0, 0, 0, .2)}.header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;padding:2rem 7%;background:transparent;display:flex;align-items:center;z-index:100;transition:.5s ease}.header.sticky[_ngcontent-%COMP%]{background:var(--bg-color);box-shadow:0 .1rem 1rem var(--shadow-color)}.header.sticky[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-color)}.header.sticky[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--main-color)}.logo[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--main-color);font-weight:600;cursor:default;margin-right:auto}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;font-size:1.7rem;color:var(--white-color);font-weight:500;margin-right:3.5rem}.navbar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:-6px;width:100%;height:.2rem;background:var(--white-color)}.header.sticky[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{background:var(--main-color);opacity:.7}section[_ngcontent-%COMP%]{min-height:100vh;padding:10rem 7% 2rem}.home[_ngcontent-%COMP%]{display:flex;align-items:center}.home[_ngcontent-%COMP%]   .home-content[_ngcontent-%COMP%]{max-width:40rem}.home-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:3.4rem;font-weight:700;line-height:1}.home-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5.6rem;font-weight:700;margin-bottom:.3rem}.home-content[_ngcontent-%COMP%]   P[_ngcontent-%COMP%]{font-size:1.6rem}.home-content[_ngcontent-%COMP%]   .socail-media[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;width:4rem;height:4rem;font-size:2rem;margin:2.5rem 1.5rem 3rem 0}.btn[_ngcontent-%COMP%]{display:inline-block;padding:1.2rem 2.8rem;background:var(--main-color);color:var(--white-color);border-radius:.6rem;box-shadow:0 .2rem .5rem var(--shadow-color);font-size:1.6rem;letter-spacing:.1rem;font-weight:700;border:.2rem solid transparent;transition:.5s ease}.btn[_ngcontent-%COMP%]:hover{background:transparent;color:var(--main-color);border-color:var(--main-color)}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]{position:absolute;top:50%;right:0;transform:translateY(-50%);width:768px;height:100%;overflow:hidden;pointer-events:none}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:768px;height:768px;border-radius:50%;display:flex;justify-content:center;align-items:center;animation:_ngcontent-%COMP%_proRotate 13s ease-in-out infinite}@keyframes _ngcontent-%COMP%_proRotate{0%,20%{transform:rotate(0)}25%,45%{transform:rotate(-90deg)}to{transform:rotate(-360deg)}}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]{position:absolute;left:0;display:flex;align-items:center;flex-direction:column;color:var(--main-color);transform:rotate(calc(360deg / 4 * var(--i)));transform-origin:384px;background:var(--bg-color);padding:13px 0}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(1)   i[_ngcontent-%COMP%]{margin-right:15px}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(2), .home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(4){padding-bottom:20px}.home[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:3.2rem;line-height:1;font-weight:600}.home[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.8rem}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:560px;height:560px;border:3px solid var(--main-color);border-radius:50%}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:0;height:0;border-top:384px solid var(--main-color);border-right:384px solid var(--main-color);border-bottom:384px solid var(--main-color);border-left:384px solid transparent}span[_ngcontent-%COMP%]{color:var(--main-color)}.about[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:4rem}.about-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:27vw;border-radius:50%;border-bottom:1rem solid var(--main-color);box-shadow:0 1px 21px var(--shadow-color)}.heading[_ngcontent-%COMP%]{font-size:4.5rem;text-align:center}.about-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:left;line-height:1.2}.about-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem}.about-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.6rem;margin:2rem 0 3rem}#darkMode-icon[_ngcontent-%COMP%]{font-size:2.4rem;cursor:pointer;fill:#fdfdfd}.header.sticky[_ngcontent-%COMP%]   #darkMode-icon[_ngcontent-%COMP%]{fill:var(--text-color);opacity:.9}.services[_ngcontent-%COMP%]{min-height:auto;padding-bottom:25rem}.services[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:5rem}.services[_ngcontent-%COMP%]   .services-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;gap:2rem}.services-container[_ngcontent-%COMP%]   .services-box[_ngcontent-%COMP%]{flex:1 1 30rem;background:var(--bg-color);padding:3rem 2rem 4rem;border-radius:2rem;box-shadow:0 .1rem .5rem var(--shadow-color);text-align:center;border-top:.6rem solid var(--main-color);border-bottom:.6rem solid var(--main-color);transition:.3s ease}.services-container[_ngcontent-%COMP%]   .services-box[_ngcontent-%COMP%]:hover{box-shadow:0 .1rem 2rem var(--shadow-color);transform:scale(1.04)}.services-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:7rem}.services-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.6rem;transition:.5s ease}.services-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:hover{color:var(--main-color)}.services-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.6rem;margin:1rem 0 3rem}.portfolio[_ngcontent-%COMP%]{padding-bottom:10rem}.portfolio[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:4rem}.portfolio[_ngcontent-%COMP%]   .portfolio-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);align-items:center;gap:2.5rem}.portfolio-container[_ngcontent-%COMP%]   .portfolio-box[_ngcontent-%COMP%]{position:relative;display:flex;border-radius:2rem;box-shadow:0 0 1rem var(--shadow-color);overflow:hidden}.portfolio-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transition:.5s ease}.portfolio-box[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.portfolio-box[_ngcontent-%COMP%]   .portfolio-layer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:100%;background:linear-gradient(rgba(0,0,0,.1),var(--main-color));color:var(--white-color);display:flex;align-items:center;flex-direction:column;text-align:center;padding:0 4rem;justify-content:center;opacity:0;transition:.5s ease}.portfolio-box[_ngcontent-%COMP%]:hover   .portfolio-layer[_ngcontent-%COMP%]{opacity:1}.portfolio-layer[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:3rem}.portfolio[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.6rem;margin:.3rem 0 1rem}.test-conatiner[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;width:100%;padding:5rem 1rem}.test-conatiner[_ngcontent-%COMP%]   .test-wrapper[_ngcontent-%COMP%]{position:relative;max-width:90rem;width:100%;padding:5rem}.test-content[_ngcontent-%COMP%]   .test-slide[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;background:var(--bg-color);border-radius:2rem;box-shadow:0 .1rem .5rem var(--shadow-color);padding:3rem 5rem;border-top:.8rem solid var(--main-color);border-bottom:.8rem solid var(--main-color)}.test-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:14rem;height:14rem;object-fit:cover;border-radius:50%;border:.5rem solid var(--bg-color);outline:.5rem solid var(--main-color)}.test-slide[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.5rem;margin:2rem 0}.test-slide[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4rem;text-align:center}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;padding:2rem 7%;background:var(--main-color)}.footer-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.6rem;color:var(--white-color)}.footer-icon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;padding:.8rem;background:var(--white-color);border-radius:.8rem;border:.2rem solid var(--main-color);outline:.2rem solid transparent;transition:.5s ease}.footer-icon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{outline-color:var(--white-color)}#menu-icon[_ngcontent-%COMP%]{display:none}@media (max-width: 1200px){html[_ngcontent-%COMP%]{font-size:55%}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]{height:85.5rem}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]{right:-12rem;height:85.5rem}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{right:-9rem}section[_ngcontent-%COMP%]{padding:10rem 3% 2rem}}@media (max-width: 1060px){.header[_ngcontent-%COMP%]{padding:1rem 3%}section[_ngcontent-%COMP%]{padding:10rem 3% 2rem}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]{right:-22rem}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{right:-15rem}}@media (max-width: 991px){.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:nth-child(1), .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:nth-child(2){color:var(--main-color)}.navbar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:before{background:var(--main-color);opacity:.7}.home[_ngcontent-%COMP%]   .home-content[_ngcontent-%COMP%]{max-width:50rem}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]{right:-45rem}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{right:-39.5rem}.services[_ngcontent-%COMP%], .portfolio[_ngcontent-%COMP%]{padding-bottom:7rem}.contact[_ngcontent-%COMP%]{min-height:auto}.footer[_ngcontent-%COMP%]{padding:2rem 3%}}@media (max-width: 768px){#menu-icon[_ngcontent-%COMP%]{display:block}#darkMode-icon[_ngcontent-%COMP%]{position:absolute;right:7rem;font-size:2.6rem;fill:var(--text-color);margin-top:.5rem}.navbar[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:100%;padding:1rem 3%;border-top:.1rem solid rgba(0,0,0,.2);box-shadow:0 .5rem 1rem #0000001a;display:none;flex-direction:column;background-color:var(--bg-color);justify-content:center;text-align:center;border-bottom-right-radius:10px;border-bottom-left-radius:10px;transition:1s;padding:10px;overflow:hidden}.navbar.active[_ngcontent-%COMP%]{display:block}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;font-size:2rem;margin:3rem 0;color:var(--text-color)}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:nth-child(1), .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:nth-child(2){color:var(--text-color)}.navbar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--main-color)}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{display:none}.home[_ngcontent-%COMP%]{padding:0 3% 23rem;justify-content:center;text-align:center}.home-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.6rem}.home-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem}.home-content[_ngcontent-%COMP%]   .socail-media[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:2.5rem .75rem 3rem}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]{left:0;width:100%;height:100%}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]{position:fixed;top:52%;left:0;border-radius:0;width:100%}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]{padding:0 13px;left:auto;transform-origin:0}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{position:fixed;width:670px;height:670px;z-index:-1}.home[_ngcontent-%COMP%]   .pro-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:fixed;top:70rem;left:50%;right:0;transform:rotate(90deg) translate(-50%,50%) scaleY(3);border-width:23.9rem}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(1){transform:rotate(-90deg) translate(-120px,-210px)}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(1)   i[_ngcontent-%COMP%]{margin-right:0}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(2){transform:rotate(0) translateY(-335px)}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(3){transform:rotate(90deg) translate(-115px,-450px)}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(4){transform:rotate(180deg) translate(-220px,-335px)}.about[_ngcontent-%COMP%]{flex-direction:column-reverse;text-align:center}.about-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.about-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70vw;margin-top:-2rem}.services[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .pro[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:3rem}.portfolio[_ngcontent-%COMP%]   .portfolio-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 617px){.portfolio[_ngcontent-%COMP%]   .portfolio-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 450px){html[_ngcontent-%COMP%]{font-size:50%}#darkMode-icon[_ngcontent-%COMP%]{right:6rem}.home[_ngcontent-%COMP%]{padding:0 3% 30rem}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(1){transform:rotate(-90deg) translate(-110px,-220px)}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(2){transform:rotate(0) translate(5px,-335px)}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(3){transform:rotate(90deg) translate(-105px,-440px)}.home[_ngcontent-%COMP%]   .pro-box[_ngcontent-%COMP%]   .pro[_ngcontent-%COMP%]:nth-child(4){transform:rotate(180deg) translate(-210px,-335px)}}@media (max-width: 365px){.about-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90vw}.footer[_ngcontent-%COMP%]{flex-direction:column-reverse}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin-top:2rem}}.download-button[_ngcontent-%COMP%]{position:relative;border-width:0;color:#fff;font-size:15px;font-weight:600;border-radius:4px;z-index:1}.download-button[_ngcontent-%COMP%]   .docs[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;min-height:40px;padding:0 10px;border-radius:.6rem;z-index:1;background-color:var(--main-color);border:solid 1px #e8e8e82d;transition:all .5s cubic-bezier(.77,0,.175,1)}.download-button[_ngcontent-%COMP%]:hover{box-shadow:#00000040 0 54px 55px,#0000001f 0 -12px 30px,#0000001f 0 4px 6px,#0000002b 0 12px 13px,#00000017 0 -3px 5px}.download[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;max-width:90%;margin:0 auto;z-index:-1;border-bottom-left-radius:.6rem;border-bottom-right-radius:.6rem;transform:translateY(0);background-color:#01e056;border:solid 1px #01e0572d;transition:all .5s cubic-bezier(.77,0,.175,1)}.download-button[_ngcontent-%COMP%]:hover   .download[_ngcontent-%COMP%]{transform:translateY(100%)}.download[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%], .download[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_docs 1s infinite}@keyframes _ngcontent-%COMP%_docs{0%{transform:translateY(0)}50%{transform:translateY(-15%)}to{transform:translateY(0)}}']});let t=e;return t})();var H1=(()=>{let e=class e{constructor(){this.title="portfo"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ir({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,o){i&1&&oe(0,"app-portfolio")},dependencies:[$1]});let t=e;return t})();var z1={production:!1,firebaseConfig:{apiKey:"AIzaSyDZHPiMVHPrHSXkC6eSLKxoWggi4xAuhqc",authDomain:"portfolio-6a00e.firebaseapp.com",projectId:"portfolio-6a00e",storageBucket:"portfolio-6a00e.appspot.com",messagingSenderId:"373549614909",appId:"1:373549614909:web:c506fcc82732bfc26b2754",measurementId:"G-0ZN85FW8EV"}};var q1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e,bootstrap:[H1]}),e.\u0275inj=Ne({providers:[eb()],imports:[JD,zb,TT,ST,HT.initializeApp(z1.firebaseConfig),B1]});let t=e;return t})();XD().bootstrapModule(q1).catch(t=>console.error(t));
